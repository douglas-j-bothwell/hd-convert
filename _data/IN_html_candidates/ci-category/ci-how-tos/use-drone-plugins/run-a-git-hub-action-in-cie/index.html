<p><a href="https://docs.github.com/en/actions/learn-github-actions/understanding-github-actions">Github Actions</a> is a GitHub feature that enables you to automate various event-driven activities in GitHub, such as cloning a repository, generating Docker images, and testing scripts.</p><p>Harness CI supports launching GitHub Actions as part of a Pipeline Stage using the <strong>Plugin</strong> step.</p><p>You simply use the GitHub Actions Drone Plugin, <a href="https://github.com/drone-plugins/github-actions">plugins/github-actions</a>, in the <strong>Plugin</strong> step, and then replicate the GitHub Action settings.</p><p>The Github Actions Drone Plugin runs your GitHub Actions in the background using <a href="https://github.com/nektos/act">nektos/act</a>.</p><p>In this topic, we cover using GitHub Actions in the Plugin step with one of the several GitHub Actions listed in <a href="https://github.com/marketplace?category=&amp;query=&amp;type=actions&amp;verification=">GitHub Marketplace</a>.</p><p>In this topic:</p><ul><li><a href="https://ngdocs.harness.io/article/7kb90dkxw0-run-a-git-hub-action-in-cie#before_you_begin">Before You Begin</a></li><li><a href="https://ngdocs.harness.io/article/7kb90dkxw0-run-a-git-hub-action-in-cie#step_1_create_the_ci_stage">Step 1: Create the CI Stage</a></li><li><a href="https://ngdocs.harness.io/article/7kb90dkxw0-run-a-git-hub-action-in-cie#step_2_add_the_codebase">Step 2: Add the Codebase</a></li><li><a href="https://ngdocs.harness.io/article/7kb90dkxw0-run-a-git-hub-action-in-cie#step_3_define_the_build_farm_infrastructure">Step 3: Define the Build Farm Infrastructure</a></li><li><a href="https://ngdocs.harness.io/article/7kb90dkxw0-run-a-git-hub-action-in-cie#step_4_add_the_plugin_step">Step 4: Add the Plugin step</a></li><li><a href="https://ngdocs.harness.io/article/7kb90dkxw0-run-a-git-hub-action-in-cie#step_5_view_the_results">Step 5: View the Results</a></li><li><a href="https://ngdocs.harness.io/article/7kb90dkxw0-run-a-git-hub-action-in-cie#configure_as_code_yaml">Configure As Code: YAML</a></li><li><a href="https://ngdocs.harness.io/article/7kb90dkxw0-run-a-git-hub-action-in-cie#see_also">See Also</a></li></ul><h3>Before You Begin</h3><ul><li><a href="https://ngdocs.harness.io/article/x0d77ktjw8-ci-pipeline-quickstart">CI Pipeline Quickstart</a></li><li><a href="https://ngdocs.harness.io/article/yn4x8vzw3q-ci-stage-settings">CI Stage Settings</a></li><li><a href="https://ngdocs.harness.io/category/rg8mrhqm95-set-up-build-infrastructure">Set Up Build Infrastructure</a></li><li><a href="https://ngdocs.harness.io/article/hv2758ro4e-learn-harness-key-concepts">Learn Harness&#39; Key Concepts</a></li></ul><h3>Step 1: Create the CI Stage</h3><p>In your Harness Pipeline, click Add Stage, and then click CI.</p><h3>Step 2: Add the Codebase</h3><p>In Connector, select an existing Connector to your codebase repo, or create a new one. See <a href="https://ngdocs.harness.io/category/xyexvcc206-ref-source-repo-provider">Code Repo Connectors</a>.</p><p>You can see the URL for the repo account below <strong>Repository Name</strong>. Don&#39;t add the URL into Repository Name.</p><p>In Repository Name, enter the name of the repo containing the codebase.</p><p>For example, if the account URL is <code>https://github.com/mycompany</code> and the repo in that account is <code>myapp</code>, enter <code>myapp</code> in the <strong>Repository Name</strong>.</p><h3>Step 3: Define the Build Farm Infrastructure</h3><p>In the CI stage Infrastructure, define the build farm for the codebase.</p><p>The following example uses a Kubernetes cluster build farm. You can use AWS for your build infrastructure as well. See <a href="https://ngdocs.harness.io/article/z56wmnris8">Set Up an AWS VM Build Infrastructure</a>. </p><p>In <strong>Select a Kubernetes Cluster</strong>, select, or create, a Kubernetes Connector. See <a href="https://ngdocs.harness.io/article/sjjik49xww-kubernetes-cluster-connector-settings-reference">Kubernetes Cluster Connector Settings Reference</a>. This Connector connects Harness to the cluster to use as the build farm.</p><p>In <strong>Namespace</strong>, enter the Kubernetes namespace to use. You can use a Runtime Input (<code>&lt;+input&gt;</code>) or expression also. See <a href="https://ngdocs.harness.io/article/f6yobn7iq0-runtime-inputs">Runtime Inputs</a>.</p><p>See <a href="/article/ia5dwx5ya8-set-up-a-kubernetes-cluster-build-infrastructure">Define a Kubernetes Cluster Build Infrastructure</a> for more information.</p><h3>Step 4: Add the Plugin step</h3><p>In the stage&#39;s Execution, click <strong>Add step</strong>, select <strong>Plugin</strong>.</p><p>The Plugin settings appear.</p><p>Enter the following settings:</p><table><tbody><tr><td><p><strong>Name</strong></p></td><td><p>Enter a unique name for the step.</p></td></tr><tr><td><p><strong>Description</strong></p></td><td><p>Harness automatically generates a unique ID for the step.</p></td></tr><tr><td><p><strong>Container Registry</strong></p></td><td><p>Select or create a Harness Connector for the container registry.</p></td></tr><tr><td><p><strong>Image</strong></p></td><td><p>Enter the name of the Drone Plugin: <code>plugins/github-actions</code>. This Plugin allows running GitHub Action in CI.</p></td></tr><tr><td><p><strong>Privileged</strong></p></td><td><p>The Drone Plugin uses <a href="https://github.com/nektos/act">nektos/act</a> to run GitHub Actions in CI. It requires DIND (docker-in-docker) to run your images. Hence, the <strong>Privileged</strong> attribute needs to be enabled to run with escalated permissions.</p></td></tr><tr><td><p><strong>Settings</strong></p></td><td><p>Replicate the GitHub Action attributes under <strong>Settings</strong>.  For example:</p><ul><li><strong>name</strong>: It refers to the GitHub repo of action along with branch or tag.</li><li><strong>with</strong>: It is a map with key and value as strings. These are inputs to the GitHub Actions.</li><li><strong>env</strong>: Environment variables passed to the GitHub Actions.</li></ul><p>For example, for the <a href="https://github.com/google-github-actions/upload-cloud-storage" target="_blank">Upload Cloud Storage Action</a>, the attributes are as follows: </p><table><tbody><tr><td><p>Key </p></td><td><p>Value</p></td></tr><tr><td><p><strong>uses:</strong></p></td><td><p><code>google-github-actions/upload-cloud-storage@main</code></p></td></tr><tr><td><p><strong>  with:</strong></p></td><td><p><code>path: pom.xml</code></p><p><code>destination: cie-demo-pipeline/github-action</code></p><p><code>credentials: &lt;+stage.variables.GCP_SECRET_KEY_BASE64&gt;</code></p></td></tr></tbody></table><p></p><p>The <code>&lt;+stage.variables.GCP_SECRET_KEY_BASE64&gt;</code> setting uses a Stage variable and a Harness Secret. See <a href="/article/2chyf1acil-add-a-stage">Add a Stage</a>.</p><p>The above attributes of Upload Cloud Storage Action are replicated in CI Plugin Settings as follows:</p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/7kb90dkxw0/1638205607190/ojjxttzb-j-6-j-qct-kaefr-21-fe-idx-26-g-mlw-byn-tm-bzaton-5-h-0-wg-dsri-wgho-2-bsrlvgpnk-pv-ic-z-x-fjmjxhhh-4-aae-dpjf-5-e-4-x-9-ezjz-8-vxv-8-h-lhg-jv-7-p-rp-ctlz-qjqu-v-2-st-5-i-z-5-cs" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p></p></td></tr></tbody></table><p></p><p>Here&#39;s an example:</p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/7kb90dkxw0/1644533671813/image.png"/></figure><p>For the step settings on CI Plugins, see <a href="https://ngdocs.harness.io/article/8r5c3yvb8k-plugin-step-settings-reference">Plugin Step Settings</a>.</p><h3>Step 5: View the Results</h3><p>Save the Pipeline and click <strong>Run</strong>. </p><p>You can see the logs for the GitHub GCP Upload Action in the Pipeline as it runs.</p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/7kb90dkxw0/1638205727555/2-kztp-livgq-6-g-7-q-ti-0-ljqj-63-mv-wm-6-pb-th-enjaddyp-lpp-2-ny-bzw-wn-n-7-tgskb-xw-7-bgw-v-8-z-yuue-6-g-1-y-7-a-sa-kt-0-xy-1-xc-gyp-9-gc-8-td-ai-nvg-j-5-do-qgh-jg-6-r-81-c-fmp-wmen-bgzyq-b-6-r-y" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><h3>Configure As Code: YAML</h3><p>To configure your pipeline as YAML in CI, go to Harness <strong>Pipeline Studio</strong> and click <strong>YAML</strong>. Here’s is a working example of GitHub Action Cloud Storage Upload to GCP in CI. Modify the YAML attributes such as name, identifiers, codebase, connector ref, environment variables based on your Pipeline requirements.</p><pre class="hljs yaml">pipeline:<br/>    name: gcp-upload-github-action # Configure your Pipeline name<br/>    identifier: gcpuploadgithubaction # Configure your Pipeline identifier<br/>    projectIdentifier: Demo_CI_pipelines # Configure your Project identifier<br/>    orgIdentifier: default # Configure your Organization<br/>    tags: {}<br/>    stages:<br/>        - stage:<br/>              identifier: gcp_upload_success_gha # Configure your Stage identifier<br/>              name: stage 1<br/>              type: CI<br/>              variables: <br/>                  - name: GCP_SECRET_KEY_BASE64 # Configure your Secret Key Name<br/>                    type: Secret<br/>                    value: gcpbase64secret # Configure your Secret Key Value<br/>              spec:<br/>                  execution:<br/>                      steps:<br/>                          - step:<br/>                                identifier: gcsuploader # Configure your step identifier name<br/>                                name: step one # Configure your step name<br/>                                type: Plugin<br/>                                spec:<br/>                                    connectorRef: dockerhub<br/>                                    image: plugins/github-actions<br/>                                    privileged: true<br/>                                    settings: # Configure your plugins Settings configuration<br/>                                        uses: google-github-actions/upload-cloud-storage@main<br/>                                        with:<br/>                                            path: pom.xml<br/>                                            destination: cie-demo-pipeline/github-action<br/>                                            credentials: &lt;+stage.variables.GCP_SECRET_KEY_BASE64&gt;<br/>                  infrastructure: # Configure your Infrastructure Settings<br/>                      type: KubernetesDirect<br/>                      spec:<br/>                          connectorRef: buildfarm<br/>                          namespace: cie-demo-pipeline<br/>    properties:<br/>        ci:<br/>            codebase: # Configure your Codebase<br/>                connectorRef: githubautouser<br/>                repoName: springboot<br/>                build:<br/>                    type: branch<br/>                    spec:<br/>                        branch: ci-autouser</pre><h3>See Also</h3><ul><li><a href="https://ngdocs.harness.io/article/8r5c3yvb8k-plugin-step-settings-reference">Plugin Step Settings</a></li><li><a href="https://docs.github.com/en/actions/learn-github-actions/understanding-github-actions">GitHub Actions</a></li></ul><p></p>