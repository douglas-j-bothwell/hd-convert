type: article
article_id: cjqnd71y07
user_id: xwmdbyp4x8
category_id: utstv3qzqt
author:
  name: Doug Bothwell
  email: douglas.bothwell@harness.io
  profile_image: https://www.gravatar.com/avatar/120de2cc624d7903cf3d83b86d0f1b5e?d=mm&s=150
title: STO Ingestion Workflows
slug: sto-workflows-overview
description: 'STO supports three workflows for ingesting data: run a local scan (orchestrated),
  ingest results from a shared folder (ingestion-only), and download results from
  an external scanner (data-load).'
short_version: 'STO supports three workflows for ingesting data: run a local scan
  (orchestrated), ingest results from a shared folder (ingestion-only), and download
  results from an external scanner (data-load).'
tags: []
show_toc: true
is_private: false
is_published: true
is_featured: false
stale_status:
  is_stale: false
  reason: ""
  source: API
  triggered_at: 2022-09-21T22:07:43.048645Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: STO Ingestion Workflows
  description: 'STO supports three workflows for ingesting data: run a local scan
    (orchestrated), ingest results from a shared folder (ingestion-only), and download
    results from an external scanner (data-load).'
  short_version: 'STO supports three workflows for ingesting data: run a local scan
    (orchestrated), ingest results from a shared folder (ingestion-only), and download
    results from an external scanner (data-load).'
  body: '<p></p><p>STO supports three different workflows to ingest scan results into
    a pipeline:</p><ul><li><a href="#orchestrated_workflows">Orchestrated workflows</a>
    — A Security step runs a scan with predefined settings and ingests the results.<br/>This
    is the simplest method to implement. STO supports orchestrated scans for Trivy,
    Bandit, SonarQube, and other popular tools.</li><li><a href="#ingestion-only-workflows">Ingestion-Only
    workflows</a> — Run a scan in a Run step, or outside the pipeline, and save in
    a shared folder. A Security step then ingests the results.<br/>This provides the
    most flexibility. You can ingest results from highly targeted scan that address
    specific use case. You can also ingest results from scanners that currently have
    no STO integration.</li><li> <a href="#data-load-workflows">Data-Load workflows</a>
    — A Security step downloads and ingests results from an external scanner.<br/>This
    workflow is supported for scanners that provide methods for transferring data
    programmatically.</li></ul><h3 id="orchestrated_workflows">Orchestrated Workflows</h3><p>You
    can set up a fully orchestrated workflow in a one Security step. The runs the
    scans and ingests the detected issues. This is the easiest workflow to implement
    and is good for running scans with default settings.</p><p>To set up an orchestrated
    scan, you specify the following information:</p><ul><li>The scan tool and settings.</li><li>Access
    credentials to access the object to scan (if the object is remote).</li><li>Information
    about the object to scan. This information depends on the object type:<ul><li>Container
    image — image type, domain, owner, project, and tag.</li><li>Code repo — project
    and branch</li><li>Instance (website) — identifier, environment, domain, path,
    protocol, port</li></ul></li></ul><p>For an example of the setup workflow, go
    to <a href="https://docs.harness.io/article/wk018r6x3g" target="_blank">Run an
    Orchestrated Scan in an STO Pipeline</a>. This topic describes how to scan a container
    image using <a href="https://docs.harness.io/article/079248uzcu" target="_blank">Aqua
    Trivy</a>. The <strong>runTrivyScanOnImage</strong> step specifies all the information
    needed to scan the object:</p><ul><li>The scanner and scan settings</li><li>The
    object to scan: in this case, a Docker Hub image. This step also specifies the
    domain, project, and tag.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/cjqnd71y07/1663798037496/orchestrated-pipeline-v-2.png"
    style="display:block;margin-left:0;margin-right:auto" data-hd-align="left"/></figure></li></ul><h3
    id="ingestion-only-workflows">Ingestion-Only workflows</h3><p>Ingestion-only workflows
    enable you ingest data from advanced scans with custom settings, and also from
    scanners that do not currently have STO integrations. Ingestion-only workflows
    provide the most flexibility and robustness, but can also require the most work
    to set up.</p><p>An Ingestion-only workflow requires at least two steps:</p><ul><li>A
    <strong>Run step</strong> saves the scan data to a shared folder. The Run step
    might run a scan locally or download scan results from an external tool.</li><li>A
    <strong>Security step</strong> ingests the data from the shared folder.</li></ul><p>For
    an example of the setup workflow, go to <a href="https://harness.helpdocs.io/article/d24n34qdbk"
    target="_blank">Ingest Scan Results into an STO Pipeline</a>. This topic describes
    how to scan a container image using <a href="https://docs.harness.io/article/079248uzcu"
    target="_blank">Aqua Trivy</a>. The pipeline works like this:</p><ul><li>The Run
    step runs a Trivy scan on an image and outputs the results to a local shared folder.<br/>Running
    the scanner outside of the Security step enables you to customize the scan settings
    rather than using a predefined settings profile.</li><li>The Security step ingests
    the results. To implement this, you specify the following information in the step:<ul><li>The
    scanner and scan settings</li><li>The path and filename of the results data file</li><li>Information
    about the scan and the scanned object: the object type and the container project
    and tag<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/x6jsoi0i4e/1662742101627/ingestion-only-pipeline.png"/></figure></li></ul></li></ul><h3
    id="data-load-workflows">Data-Load Workflows</h3><p>Data-load scans are a sub-category
    of orchestrated scans. Instead of running a scan, the Security step pulls issues
    from an external source. In this case, you configure the Security Step to download
    from the external tool rather than running an orchestrated scan. This workflow
    is supported for scanners such as Veracode that support downloading results via
    an API endpoint.</p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/cjqnd71y07/1663028453108/dataload-pipeline.png"/></figure><p></p><h3>See
    Also</h3><ul><li><a href="https://docs.harness.io/article/wk018r6x3g">Run an Orchestrated
    Scan in an STO Pipeline</a></li><li><a href="https://docs.harness.io/article/d24n34qdbk">Ingest
    Scan Results into an STO Pipeline</a></li><li><a href="https://docs.harness.io/article/0k0iubnzql"
    target="_blank">Security Step Settings Reference</a></li></ul><p></p><p></p><p></p><p></p>'
  slug: sto-workflows-overview
  tags: []
  is_live: true
