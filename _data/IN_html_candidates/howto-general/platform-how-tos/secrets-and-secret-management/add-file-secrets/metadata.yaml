type: article
article_id: 77tfo7vtea
user_id: 2te4j9f9g7
category_id: 48wnu4u0tj
author:
  name: Rashmi Nanda Sahoo
  profile_image: https://www.gravatar.com/avatar/b7bfd905f8714099535f2ff657fa3975?d=mm&s=150
title: Add and Reference File Secrets
slug: add-file-secrets
description: This document explains how to add and reference an encrypted file secret.
short_version: This document explains how to add and reference an encrypted file secret.
tags: []
show_toc: true
is_private: false
is_published: true
is_featured: false
stale_status:
  is_stale: false
  reason: ""
  source: API
  triggered_at: 2022-09-12T12:14:16.415345Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: Add and Reference File Secrets
  description: This document explains how to add and reference an encrypted file secret.
  short_version: This document explains how to add and reference an encrypted file
    secret.
  body: '<p></p><p>You can upload encrypted files and use them in your resources like
    Pipelines and Connectors, in the same way as encrypted text.</p><p>This topic
    describes how to add an encrypted file in Harness.</p><p>In this topic:</p><ul><li><a
    href="#before_you_begin">Before You Begin</a></li><li><a href="https://ngdocs.harness.io/article/77tfo7vtea-add-file-secrets#step_1_add_encrypted_file">Step
    1: Add Encrypted File</a></li><li><a href="https://ngdocs.harness.io/article/77tfo7vtea-add-file-secrets#step_2_reference_the_encrypted_file_by_name">Step
    2: Reference the Encrypted File by Name</a></li><li><a href="https://ngdocs.harness.io/article/77tfo7vtea-add-file-secrets#step_3_reference_the_encrypted_file_by_identifier">Step
    3: Reference the Encrypted File by Identifier</a></li></ul><h3>Before You Begin</h3><ul><li><a
    href="/article/hv2758ro4e-learn-harness-key-concepts">Learn Harness&#39; Key Concepts</a></li><li><a
    href="/article/hngrlb7rd6-harness-secret-manager-overview">Harness Secret Manager
    Overview</a></li><li><a href="/article/bo4qbrcggv-add-secrets-manager">Add a Secret
    Manager</a></li><li><a href="/article/osfw70e59c-add-use-text-secrets">Add Text
    Secrets</a></li><li><a href="/article/xmp9j0dk8b-add-use-ssh-secrets">Add SSH
    Secrets</a></li></ul><h3>Step 1: Add Encrypted File</h3><p>This topic assumes
    you have a Harness Project set up. If not, see <a href="https://ngdocs.harness.io/article/36fw2u92i4-create-an-organization">Create
    Organizations and Projects</a>.</p><p>You can add an encrypted file at Project/Organization/Account
    scope. To do this, go to Project setup, Organization, or Account Resources.</p><p>Click <strong>Secrets</strong>.</p><p>Click
    <strong>Secret</strong> and select <strong>File.</strong></p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/77tfo7vtea/1627457236985/screenshot-2021-07-28-at-10-58-14-am.png"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p>The <strong>Add
    new Encrypted File</strong> settings appear.</p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/77tfo7vtea/1618923388589/screenshot-2021-04-20-at-6-16-06-pm.png"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p>Select
    the <strong>Secrets Manager</strong> you will use to encrypt this secret.</p><p>Enter
    a name for the encrypted file. You will use this name to reference the file in
    your resources.</p><p>Click <strong>Browse</strong> to locate and add a file.
    The default Secrets Manager for your account is used to encrypt the file.</p><p>Enter
    <strong>Description</strong> for your secret.</p><p>Enter <strong>Tags</strong> for
    your secret.</p><p>Click <strong>Save.</strong></p><h3>Step 2: Reference the Encrypted
    File by Name</h3><p>You can reference the encrypted file in any resource that
    uses files.</p><p>For example, in the following <strong>Configuration and Authentication</strong> dialog,
    click <strong>Create or Select a Secret</strong> under Select or Create a SSH
    Key File:</p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/77tfo7vtea/1618993234186/screenshot-2021-04-21-at-12-39-25-pm.png"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p>Click
    <strong>Select an existing Secret</strong> in the dialog and the dropdown lets
    you choose the file you added in <strong>Secret Management:</strong></p><figure><img
    src="https://files.helpdocs.io/i5nl071jo5/articles/77tfo7vtea/1618993605326/screenshot-2021-04-21-at-1-53-22-pm.png"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><h3>Step
    3: Reference the Encrypted File by Identifier</h3><p>For an Encrypted File secret
    at the Project scope, you reference the secret in a Resource using its <u>identifier</u>
    and the expression: </p><pre class="hljs bash">&lt;+secrets.getValue(&#34;file-secret-Id&#34;)&gt;</pre><p></p><p>The
    identifier is immutable and is located in the secret settings:</p><figure><img
    src="https://files.helpdocs.io/i5nl071jo5/articles/77tfo7vtea/1646177317235/clean-shot-2022-03-01-at-15-27-04.png"/></figure><div
    class="note-callout">Always reference a secret in an expression using its <u>identifier</u>.
    Names will not work.</div><p>You can reference a secret at the Org scope using
    an expression with <code>org</code>:</p><pre class="hljs bash">&lt;+secrets.getValue(&#34;org.file-secret-Id&#34;)&gt;</pre><p></p><p>If
    your secret is scoped at the Account level, you can refer it using <code>account</code>:</p><pre
    class="hljs bash">&lt;+secrets.getValue(&#34;account.platformSecret-Id&#34;)&gt;</pre><p></p>'
  slug: add-file-secrets
  tags: []
  is_live: true
