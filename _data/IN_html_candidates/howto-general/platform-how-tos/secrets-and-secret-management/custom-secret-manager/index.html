<div class="note-callout">Currently, this feature is behind the feature flag <code>CUSTOM_SECRET_MANAGER_NG</code>. Contact Harness Support to enable the feature.</div><p>Harness includes a built-in Secrets Management feature that enables you to store encrypted secrets, such as access keys, and use them in your Harness account.</p><p>You can also access your encrypted secrets stored in third-party Secret Managers using the Harness Custom Secret Manager.</p><p>This topic explains how to add and use a Custom Secret Manager in Harness.</p><h3>Before you begin</h3><ul><li><a href="/article/hngrlb7rd6-harness-secret-manager-overview">Harness Secret Manager Overview</a></li></ul><h3>Permissions</h3><ul><li>Create/Edit Secrets</li><li>Create/Edit Connectors<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/mg09uspsx1/1661140577769/screenshot-2022-08-22-at-9-25-27-am.png" style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li></ul><h3>Important</h3><ul><li>Harness Custom Secret Manager is a read-only Secret Manager.</li><li>Harness can read/decrypt secrets, but it cannot write secrets to the Custom Secrets Manager.</li></ul><h3>Harness Custom Secret Manager Overview</h3><p>Harness includes a built-in Secrets Management feature that enables you to store encrypted secrets, such as access keys, and use them in your Harness Account. </p><p>Harness integrates with the following third-party Secret Managers along with a built-in Secret Manager:</p><ul><li>AWS KMS</li><li>AWS Secrets Manager</li><li>Azure Key Vault</li><li>GCP KMS</li><li>HashiCorp Vault</li></ul><p>You can also use third-party Secrets Managers that are not integrated with Harness, to store your encrypted secrets. With Harness Custom Secret Manager you can integrate Harness with your third-party Secret Managers and read or access your secrets.</p><p>Your Custom Secret Manager uses a shell script that you can execute either on a Delegate or on a remote host which is connected to the Delegate. Harness fetches and reads your secrets from the third-party Secret Manager through this shell script.</p><h3>Step 1: Create a Secret Manager Template</h3><p>You can create a Secret Manager Template at Account, Org, or Project scope.</p><p>This topic shows you how to create a Secret Manager Template at the Project scope.</p><ol><li>In your Harness Account, go to your Project.</li><li>In Project Setup, click <strong>Templates</strong> and then click <strong>New Template</strong>.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/mg09uspsx1/1661429380441/screenshot-2022-08-25-at-5-39-14-pm.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure></li><li>Click Secret Manager. The Secret Manager Template settings appear.</li><li>Enter a <strong>Name</strong> for your Secret Manager Template.</li><li>Enter a <strong>Version Label</strong>.</li><li>Click <strong>Start</strong>.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/mg09uspsx1/1661429521315/screenshot-2022-08-25-at-5-41-34-pm.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure></li><li>Enter your script in <strong>Script</strong>.</li><li>Click <strong>Save</strong>.<br/>For detailed steps to create a Secret Manager Template, see <a href="/article/n41cqkjrla-create-a-secret-manager-template">Create a Secret Manager Template</a>.</li></ol><h3>Step 2: Add a Custom Secret Manager</h3><p>You can add a Custom Secret Manager at Account, Org, and Project scope.</p><p>To do this, go to Project setup, Organization, or Account Resources.</p><p>This topic shows you how to add a Custome Secret Manager in the Project scope.</p><ol><li>In your Harness Account, go to your Project.</li><li>In Project Setup, click <strong>Connectors</strong> and then click <strong>New Connector</strong>.</li><li>In <strong>Secret Managers</strong>, click <strong>Custom Secret Manager</strong>.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/mg09uspsx1/1661768475809/screenshot-2022-08-29-at-3-50-18-pm.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure>The Custom Secret Manager settings appear.</li><li>Enter a <strong>Name</strong> for your Custom Secret Manager. Click <strong>Continue</strong>.</li><li>Click <strong>Select Template</strong>. The Template Library appears with all the <a href="/article/n41cqkjrla-create-a-secret-manager-template">Secret Manager Templates</a> listed.</li><li>Select the desired scope and select a Secret Manager Template from the Template Library.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/mg09uspsx1/1661770010704/screenshot-2022-08-29-at-4-07-42-pm.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure>You can also search for a specific Secret Manager Template by entering its name in <strong>Search</strong>.</li><li>Once you select the Secret Manager Template, the details are displayed in the Template Studio.<br/>Click <strong>Use Template</strong>.<ol><li>Enter values for the required Input Variables.<br/>Harness allows you to use <a href="https://docs.harness.io/article/f6yobn7iq0-runtime-inputs">Fixed Values and Runtime Inputs</a>.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/mg09uspsx1/1661771501272/screenshot-2022-08-29-at-4-38-08-pm.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure>Click <strong>Fixed</strong> to make the variable values fixed. Harness won&#39;t ask you these values when you create Secrets.</li></ol></li><li>Click <strong>Continue</strong>.</li><li>In <strong>Delegates</strong> <strong>Setup</strong><strong>,</strong> enter <a href="/article/nnuf8yv13o-select-delegates-with-selectors#option_select_a_delegate_for_a_connector_using_tags"><strong>Selectors</strong></a> for specific <strong>Delegates</strong> that you want to allow to connect to this Connector. Click <strong>Save and Continue</strong>.</li><li>In <strong>Connection</strong> <strong>Test</strong>, click <strong>Finish</strong> after your connection is successful<strong>.</strong></li></ol><h3>Step 3: Use the Custom Secret Manager</h3><p>Create an Encrypted Text using the Custom Secrets Manager you created earlier. Enter the name and values of all the Input Variables defined while creating the Shell Script Template. </p><p>For more information on creating Encrypted Text Secret, see <a href="/article/osfw70e59c-add-use-text-secrets">Add Encrypted Text</a>.</p><p>If you want to create a secret on a Target Host Custom Secrets Manager, you must also select the Connection Attribute.</p>