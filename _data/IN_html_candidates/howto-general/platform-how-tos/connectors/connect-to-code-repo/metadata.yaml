type: article
article_id: zbhehjzsnv
user_id: 2te4j9f9g7
category_id: o1zhrfo8n5
author:
  name: Rashmi Nanda Sahoo
  profile_image: https://www.gravatar.com/avatar/b7bfd905f8714099535f2ff657fa3975?d=mm&s=150
title: Connect to a Git Repo
slug: connect-to-code-repo
description: An overview of Code Repo Connectors.
short_version: An overview of Code Repo Connectors.
tags:
- Connectors
show_toc: true
is_private: false
is_published: true
is_featured: false
stale_status:
  is_stale: false
  reason: ""
  source: API
  triggered_at: 2022-08-25T20:15:15.777759Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: Connect to a Git Repo
  description: An overview of Code Repo Connectors.
  short_version: An overview of Code Repo Connectors.
  body: <p>Harness Code Repository Connectors connect your Harness account with your
    Git platform. Connectors are used to pull important files, such as Helm charts,
    Kubernetes manifests, and Terraform scripts.</p><h3>Connect to Your Git Repositories</h3><p>You
    can add a Code Repo Connector to the Account, Org, or Project scope. This topic
    will explain how to add it to the Project scope. The process is the same for Org
    and Account. </p><h3>Limitations</h3><ul><li>Harness performs a <code>git clone</code>
    to fetch files. If the fetch is timing out, it can be because the repo is too
    large for the network connection to fetch it before timing out. To fetch very
    large repos, enable the feature flag <code>OPTIMIZED_GIT_FETCH_FILES</code>. When
    this feature flag is enabled, Harness will use provider-specific APIs to improve
    performance.<div class="note-callout">Currently, this feature is behind the feature
    flag <code>OPTIMIZED_GIT_FETCH_FILES</code>. Contact <a href="mailto:support@harness.io"
    target="_blank">Harness Support</a> to enable the feature.</div></li></ul><h3>Permissions</h3><p>In
    general, the Git provider user account you use to set up the Connector needs the
    same permissions it would need if you were working from Git.</p><p>So, if you
    are using the Harness Connector to pull manifests from a repo, the user account
    you use in the Connector must have a <code>read repo</code> permission for your
    Git provider.</p><p>For Harness Git Experience, see <a href="/article/kqik8km5eb-source-code-manager-settings">Source
    Code Manager Settings</a>.</p><div class="note-callout">A public Git repo does
    not require a username and password/token. Harness does not validate public Git
    repo credentials.</div><h3>Add a Git Repo</h3><p>In most cases, you&#39;ll want
    to add a Connector for a popular Git provider like GitHub, described in <a href="/article/jd77qvieuw-add-a-git-hub-connector">Add
    a GitHub Connector</a>. You can also add a platform-agnostic connection to a Git
    provider using <strong>Git Repo</strong>.</p><div class="note-callout">For more
    details on the settings to create this connector, see <a href="/article/tbm2hw6pr6-git-connector-settings-reference">Git
    Connector Settings Reference</a>.</div><ol><li>In your <strong>Project</strong> select
    a module such as CD.</li><li>In <strong>Project Setup</strong>, click <strong>Connectors</strong>.</li><li>Click <strong>New
    Connector</strong>, and click <strong>Git</strong> in <strong>Code Repositories</strong>.
    The Git settings appear.<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/zbhehjzsnv/1647862714098/screenshot-2022-03-21-at-5-08-03-pm.png"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure></li><li>In <strong>Name</strong>,
    enter a name for this connector.</li><li>Select <strong>Account</strong> (which
    is an Organization) or <strong>Repository</strong> in <strong>URL Type</strong>.</li><li>Select
    <strong>Connection Type</strong> as <strong>HTTP</strong> or <strong>SSH</strong>.
    For more information, see <a href="/article/v9sigwjlgo-git-hub-connector-settings-reference#connection_type">Connection
    Type</a>.</li><li>Enter the Git Account (org) or repo URL.</li><li>If you selected
    <strong>Account</strong>, in <strong>Test Repository</strong>, enter a repository
    name to test the connection.</li><li>Click <strong>Continue</strong>.</li><li>In
    <strong>Credentials,</strong> Enter your <strong>Username</strong>.</li><li>In <strong>Secret
    Key</strong> you can either create a new <a href="/article/osfw70e59c-add-text-secrets">Encrypted
    Text</a> or use an existing one.</li><li>Click <strong>Continue</strong>.</li><li>In
    <strong>Setup Delegates</strong>, you can choose <strong>Connect via any delegate</strong>
    or <strong>Connect only via delegates which has all of the following tags</strong>.</li><li>Click
    <strong>Save and Continue</strong>.</li><li>Once the Test Connection succeeds,
    click <strong>Finish</strong>. The Connector is listed in Connectors.</li></ol><h3>​Add
    GitHub Repo</h3><p>See <a href="/article/jd77qvieuw-add-a-git-hub-connector">Add
    a GitHub Connector</a>.</p><h3>Add AWS CodeCommit Repo</h3><p>For details on settings
    and permissions, see <a href="/article/jed9he2i45-aws-code-commit-connector-settings-reference">AWS
    CodeCommit Connector Settings Reference</a>.</p><div class="note-callout">For
    steps on setting up the IAM user for CodeCommit connections, go to <a href="https://docs.aws.amazon.com/codecommit/latest/userguide/setting-up-gc.html"
    target="_blank">Setup for HTTPS users using Git credentials from AWS</a>.</div><ol><li>Open
    a Harness Project.</li><li>In <strong>Project Setup</strong>, click <strong>Connectors</strong>.</li><li>Click <strong>New
    Connector</strong>, and click <strong>AWS CodeCommit</strong> in <strong>Code
    Repositories</strong>. The AWS CodeCommit settings appear.</li><li>In <strong>Name</strong>,
    enter a name for this connector.</li><li>Select <strong>Region</strong> or <strong>Repository</strong>.</li></ol><ul><li><strong>Region:</strong>
    Connect to an entire AWS region. This enables you to use one Connector for all
    repos in the region. If you select this, you must provide a repository name to
    test the connection.</li><li><strong>Repository:</strong> Connect to one repo.</li></ul><ol><li
    start="6" style="counter-increment:li 5">Enter the repository URL in <strong>AWS
    CodeCommit Repository URL</strong>. For example, <code>https://git-codecommit.us-west-2.amazonaws.com/v1/repos/doc-text</code>.<br/>You
    can get this URL from your CodeCommit repo by using its <strong>Clone URL</strong>
    menu and selecting <strong>Clone HTTPS</strong>.</li><li>Click <strong>Save and
    Continue</strong>.</li><li>Enter IAM user&#39;s access key in <strong>Access Key</strong>.</li><li>Enter
    the corresponding secret key in <strong>Secret Key</strong>. You can either create
    a new <a href="/article/osfw70e59c-add-text-secrets">Encrypted Text</a> or use
    an existing one.</li><li>Click <strong>Save and Continue</strong>.</li><li>Once
    the Test Connection succeeds, click <strong>Finish</strong>. The Connector is
    listed in Connectors.</li></ol><h4>Required Credentials</h4><p>The IAM account
    you use to connect to CodeCommit must have the following policies:</p><ul><li><strong>AWSCodeCommitPowerUser</strong></li><li><strong>DescribeRegions</strong></li></ul><p>The <a
    href="https://docs.aws.amazon.com/AWSEC2/latest/APIReference/API_DescribeRegions.html"
    target="_blank">DescribeRegions</a> action is required for all AWS connections
    regardless of what AWS resource you are using with Harness.</p><p>For more details,
    go to <a href="https://docs.aws.amazon.com/codecommit/latest/userguide/setting-up-gc.html"
    target="_blank">Setup for HTTPS users using Git credentials from AWS</a> and <a
    href="https://docs.aws.amazon.com/codecommit/latest/userguide/security-iam-awsmanpol.html"
    target="_blank">AWS managed policies for CodeCommit</a> from AWS.</p><h4>Connect
    to CodeCommit using the platform-agnostic Git Connector</h4><p>You can also connect
    to CodeCommit using the Harness platform-agnostic <strong>Git Connector</strong>
    as opposed to the <strong>AWS CodeCommit Connector</strong>.</p><p>With the Git
    Connector, you use the IAM user&#39;s User Name and Password and not the Access
    Key and Secret Key.</p><p>In the IAM User you want to use, click <strong>Security
    credentials</strong>, and then generate credentials in <strong>HTTPS Git credentials
    for AWS CodeCommit</strong>.</p><p>In the Harness CodeCommit Connector, in <strong>Access
    Key</strong>, enter the <strong>User name</strong> from the IAM user credentials
    you generated.</p><p>In <strong>Secret Key</strong>, use a <a href="https://ngdocs.harness.io/article/osfw70e59c-add-text-secrets">Harness
    Encrypted Text secret</a> for the <strong>Password</strong> of the IAM user account.</p><p></p><figure><img
    src="https://files.helpdocs.io/kw8ldg1itf/articles/jed9he2i45/1661379970276/image.png"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><h3>Add
    a Bitbucket Repo</h3><div class="note-callout">For more details on the settings
    to create this connector, see <a href="/article/iz5tucdwyu-bitbucket-connector-settings-reference">Bitbucket
    Connector Settings Reference</a>.</div><div class="note-callout">Harness supports
    both Cloud and Data Center (On-Prem) versions of Bitbucket.</div><ol><li>Open
    a Harness Project.</li><li>In <strong>Project Setup</strong>, click <strong>Connectors</strong>.</li><li>Click <strong>New
    Connector</strong>, and click <strong>Bitbucket</strong> in <strong>Code Repositories</strong>.
    The Bitbucket settings appear.</li><li>In <strong>Name</strong>, enter a name
    for this connector.</li><li>Select <strong>Account</strong> or <strong>Repository</strong>
    in <strong>URL Type</strong>.</li><li>Select <strong>Connection Type</strong>
    as <strong>HTTP</strong> or <strong>SSH</strong>. For more information, see <a
    href="/article/iz5tucdwyu-bitbucket-connector-settings-reference#connection_type">Connection
    Type</a>.</li><li>Enter your <strong>Bitbucket Account URL</strong>.<br/>For <strong>HTTP</strong>,
    the format for the URL should be <code>https://bitbucket.org/&lt;userName&gt;/&lt;repoName&gt;.git</code>.</li><li>In
    <strong>Test Repository</strong>, enter your repository name to test the connection.</li><li>Click
    <strong>Save and Continue</strong>.</li><li>Enter your <strong>Username</strong>.</li><li>In <strong>Secret
    Key</strong> you can either create a new <a href="/article/osfw70e59c-add-text-secrets">Encrypted
    Text</a> or use an existing one.</li><li>Click <strong>Continue</strong>.</li><li>In
    <strong>Setup Delegates</strong>, you can choose <strong>Connect via any delegate</strong>
    or <strong>Connect only via delegates which has all of the following tags</strong>.</li><li>Click
    <strong>Save and Continue</strong>.</li><li>Once the Test Connection succeeds,
    click <strong>Finish</strong>. The Connector is listed in Connectors.</li></ol><h3>Add
    GitLab Repo</h3><div class="note-callout">For more details on the settings to
    create this connector, see <a href="/article/5abnoghjgo-git-lab-connector-settings-reference">GitLab
    Connector Settings Reference</a>.</div><ol><li>Open a Harness Project.</li><li>In <strong>Project
    Setup</strong>, click <strong>Connectors</strong>.</li><li>Click <strong>New Connector</strong>,
    and click <strong>GitLab</strong> in <strong>Code Repositories</strong>. The GitLab
    Connector settings appear.</li><li>In <strong>Name</strong>, enter a name for
    this connector.</li><li>Select <strong>Account</strong> or <strong>Repository</strong>
    in <strong>URL Type</strong>.</li><li>Select <strong>Connection Type</strong>
    as <strong>HTTP</strong> or <strong>SSH</strong>. For more information, see <a
    href="/article/5abnoghjgo-git-lab-connector-settings-reference#connection_type">Connection
    Type</a>.</li><li>Enter your <strong>GitLab Account URL</strong>.</li><li>In <strong>Test
    Repository</strong>, enter your repository name to test the connection.</li><li>Click
    <strong>Continue</strong>.</li><li>In <strong>Credentials,</strong> Enter your
    <strong>Username</strong>.</li><li>In <strong>Secret Key</strong> you can either
    create a new <a href="/article/osfw70e59c-add-text-secrets">Encrypted Text</a>
    or use an existing one.</li><li>Click <strong>Continue</strong>.</li><li>In <strong>Setup
    Delegates</strong>, you can choose <strong>Connect via any delegate</strong> or
    <strong>Connect only via delegates which has all of the following tags</strong>.</li><li>Click
    <strong>Save and Continue</strong>.</li><li>Once the Test Connection succeeds,
    click <strong>Finish</strong>. The Connector is listed in Connectors.</li></ol><p></p>
  slug: connect-to-code-repo
  tags:
  - Connectors
  is_live: true
