type: article
article_id: nbi9uj9wm4
user_id: mfr0nxh4be
category_id: 9i5thr0ot2
author:
  name: Michael Cretzman
  profile_image: https://www.gravatar.com/avatar/2e8616837f4ee92be5d19ffe9b9ccba9?d=mm&s=150
title: Create a Custom Delegate that Includes Custom Tools
slug: custom-delegate
description: Create your own custom Delegate and include the tools needed for your
  builds and deployments.
short_version: Create your own custom Delegate and include the tools needed for your
  builds and deployments.
tags: []
show_toc: true
is_private: false
is_published: true
is_featured: false
stale_status:
  is_stale: false
  reason: ""
  source: API
  triggered_at: 2022-07-06T22:34:45.25627Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: Create a Custom Delegate that Includes Custom Tools
  description: Create your own custom Delegate and include the tools needed for your
    builds and deployments.
  short_version: Create your own custom Delegate and include the tools needed for
    your builds and deployments.
  body: '<p><a href="/article/2k7lnc7lvl-delegates-overview">Harness Delegates</a>
    are installed from the Harness Manager and typically contain the binaries you
    need for your CI/CD Pipelines.</p><p>In some cases, you might want to add more
    tools or even create your own custom Delegate and include the tools needed for
    your builds and deployments.</p><p>This topic explains the different ways to create
    a custom Delegate.</p><p>In this topic:</p><ul><li><a href="https://ngdocs.harness.io/article/nbi9uj9wm4-custom-delegate#before_you_begin">Before
    You Begin</a></li><li><a href="https://ngdocs.harness.io/article/nbi9uj9wm4-custom-delegate#option_use_init_script_environment_variable">Option:
    Use INIT_SCRIPT Environment Variable</a></li><li><a href="https://ngdocs.harness.io/article/nbi9uj9wm4-custom-delegate#option_add_a_delegate_image">Option:
    Add a Delegate Image</a></li><li><a href="https://ngdocs.harness.io/article/nbi9uj9wm4-custom-delegate#see_also">See
    Also</a></li></ul><h3>Before You Begin</h3><ul><li><a href="/article/2k7lnc7lvl-delegates-overview">Delegates
    Overview</a></li><li><a href="/article/1e536z41av-supported-platforms-and-technologies">Supported
    Platforms and Technologies</a></li><li><a href="/article/re8kk0ex4k-delegate-installation-overview">Delegate
    Installation Overview</a></li></ul><h3>Option: Use INIT_SCRIPT Environment Variable</h3><p>In
    the Delegate config file, locate the <code>INIT_SCRIPT</code> environment variable.</p><p>For
    example, here it is in the Kubernetes Delegate harness-delegate.yaml file:</p><pre
    class="hljs yaml">...<br/>apiVersion: apps/v1<br/>kind: StatefulSet<br/>...<br/>spec:<br/>...<br/>    spec:<br/>    ...<br/>        env:<br/>        ...<br/>        -
    name: INIT_SCRIPT<br/>          value: |-<br/>            echo install wget<br/>            apt-get
    install wget<br/>            echo wget installed<br/>...</pre><p></p><p>In <code>value</code>,
    enter your script. For a list of common scripts, see <a href="https://newdocs.helpdocs.io/article/auveebqv37-common-delegate-profile-scripts">Common
    Delegate Initialization Scripts</a>.</p><p>For steps on using the <code>INIT_SCRIPT</code> environment
    variable, see <a href="/article/yte6x6cyhn-run-scripts-on-delegates">Run Scripts
    on Delegates</a>. </p><p>You can see all of the environment variables for the
    Delegates in the following topics:</p><ul><li><a href="/article/f9bd10b3nj-install-a-kubernetes-delegate">Install
    a Kubernetes Delegate</a></li><li><a href="/article/cya29w2b99-install-a-docker-delegate">Install
    a Docker Delegate</a></li></ul><h3>Option: Add a Delegate Image</h3><p>Harness
    Delegate Docker images are public and you can use them to compose your own Delegate
    image.</p><p>The Harness Delegate Docker images are located on <a href="https://hub.docker.com/r/harness/delegate/tags"
    target="_blank">Docker Hub</a>.</p><p>For example, you can curl and install all
    the tool libraries you want and then curl <code>delegate:latest</code> to add
    the latest Delegate image.</p><p>Or you can create your own image and simply include
    the Delegate image.</p><p>Here&#39;s and example that installs Node.JS on top
    of a Delegate image and sets an environment variable key:value pair.</p><pre class="hljs
    bash">...<br/>FROM harness/delegate:latest<br/><br/>RUN apt-get update &amp;&amp;
    apt-get -y install nodejs<br/><br/>ENV key=value<br/>...</pre><p></p><p>You can
    see all of the environment variables for the Delegates in the following topics:</p><ul><li><a
    href="/article/f9bd10b3nj-install-a-kubernetes-delegate">Install a Kubernetes
    Delegate</a></li><li><a href="/article/cya29w2b99-install-a-docker-delegate">Install
    a Docker Delegate</a></li></ul><h3>See Also</h3><ul><li><a href="/category/9i5thr0ot2-delegates">Delegate
    How-tos</a>.</li></ul><p></p>'
  slug: custom-delegate
  tags: []
  is_live: true
