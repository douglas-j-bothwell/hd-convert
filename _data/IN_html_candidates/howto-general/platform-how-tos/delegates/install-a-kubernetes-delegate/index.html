<p>The Harness Delegate is a service you run in your own environment, such as your local network, VPC, or cluster.</p><p>For example, you can run the Delegate in the deployment target cluster for a CD Pipeline or the build farm cluster for a CI Pipeline.</p><p>The Delegate connects all of your artifact, infrastructure, collaboration, verification, and other providers with the Harness Manager.</p><p>Most importantly, the Delegate performs all Harness operations.</p><p>There are several types of Delegates. This topic describes how to install the Kubernetes Delegate.</p><div class="note-callout">If you are migrating from Harness FirstGen to Harness NextGen, you must install new Delegates in Harness NextGen. Harness FirstGen Delegates won&#39;t work with Harness NextGen.</div><h3>Before You Begin</h3><ul><li><a href="/article/hv2758ro4e-learn-harness-key-concepts">Learn Harness&#39; Key Concepts</a></li><li><a href="/article/k7sbhe419w-delegate-requirements-and-limitations">Delegate Requirements and Limitations</a></li><li><a href="/article/2k7lnc7lvl-delegates-overview">Delegates Overview</a></li><li><a href="/article/re8kk0ex4k-delegate-installation-overview">Delegate Installation Overview</a></li></ul><p></p><h3>Limitations</h3><p>Currently, Harness Kubernetes Delegates don&#39;t install with the default settings in GKE Auto Pilot Mode. Please use the Manual mode when creating the cluster to make sure it meets the Delegate requirements.</p><p>The Delegate requires access to all the Connectors and Harness Secrets needed to run a Pipeline. This means that the Delegate requires permissions to do the following:</p><ul><li> Access all the secrets used by all the Connectors used in a Pipeline.</li><li>Create and update secrets in Kubernetes. This is necessary to pull the images needed to run individual Steps.</li></ul><h3>Visual Summary</h3><p>The following diagram shows how the Delegate enables Harness to integrate with all of your deployment resources:</p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/8o4cwqj1kv/1596840107816/image.png"/></figure><p>Here&#39;s a 10min video that walks you through adding a Harness Kubernetes Cluster Connector and Harness Kubernetes Delegate. The Delegate is added to the target cluster and then the Kubernetes Cluster Connector uses the Delegate to connect to the cluster:</p><div class="hd--embed" data-provider="YouTube" data-thumbnail="https://i.ytimg.com/vi/wUC23lmqfnY/hqdefault.jpg"><iframe width=" 200" height="150" src="https://www.youtube.com/embed/wUC23lmqfnY?feature=oembed" frameborder="0" allowfullscreen="allowfullscreen"></iframe></div><p></p><h3>Review: Inline and Standalone Installation</h3><p>You can install a Delegate whenever you are adding a Connector to a Pipeline or you can install one outside a Pipeline in <strong>Resources</strong>.</p><p>The steps involved are the same.</p><h3>Review: Where Can I Install the Kubernetes Delegate?</h3><p>You can install the Kubernetes Delegate inside or outside your deployment target cluster (CD) or build farm cluster (CIE).</p><ul><li><strong>Inside the cluster:</strong> you can install the Kubernetes Delegate inside the target or build farm cluster. Later, when you add a Kubernetes Cluster Connector, the Connector can inherit its credentials from the Kubernetes Delegate.</li><li><strong>Outside the cluster:</strong> you can install the Kubernetes Delegate outside the target or build farm cluster. Later, when you add a Kubernetes Cluster Connector, the Connector <u>cannot</u> inherit its credentials from the Kubernetes Delegate. In this case, the Kubernetes Cluster Connector must use an alternate method for credentials. For example, the master URL of the target cluster and a Service Account with the required credentials.</li></ul><h3>Review: Legacy vs Immutable Delegates</h3><p>There are two types of Kubernetes Delegates:</p><ul><li>Legacy:<ul><li>Downloads Delegate components and dependencies at installation.</li><li>Delegate includes a Watch process that upgrades the Delegate automatically.</li><li>Coupled to Harness Manager versions.</li></ul></li><li>Immutable:<div class="note-callout">Currently, this feature is behind the feature flag <code>USE_IMMUTABLE_DELEGATE</code>. Contact <a href="mailto:support@harness.io" target="_blank">Harness Support</a> to enable the feature.</div><ul><li>Runtime is Build Time: No watcher and no dependency download.</li><li>Manager and the Delegate versions are decoupled.</li><li>Independent release candidates from the Harness Manager using a ring deployment mechanism.</li><li>Ephemeral pods for Kubernetes Delegates.</li><li>Security scanning of Delegates is possible.</li><li>Faster setup time.</li><li>Custom Delegate images can be created by simply inheriting from the base Harness Delegate Docker image. Installing additional tools like Terraform and others becomes a lot easier.</li><li>YOU have control over your final Delegate image.</li></ul></li></ul><p>The standard installation process in the Harness Manager for both types is the same.</p><h3>Step 1: Ensure Kubernetes Prerequisites</h3><p>To install a Kubernetes Delegate, you must have access to a Kubernetes cluster. You&#39;ll install the Harness Delegate as YAML or Helm Chart.</p><p>For connectivity, see <a href="/article/k7sbhe419w-delegate-requirements-and-limitations">Delegate Requirements and Limitations</a>.</p><p>You&#39;ll need the following Kubernetes permissions to install the delegate:</p><ul><li>Permission to create a namespace (for the Harness Delegate namespace).</li><li>Permission to create statefulSets (to create the Harness Delegate pod).</li></ul><h3>Step 2: Select the Kubernetes Delegate Type</h3><p>Inline or standalone, click <strong>New Delegate</strong>.</p><p> Delegate selection options appear.</p><p></p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/f9bd10b3nj/1617750944225/image.png"/></figure><p>Click <strong>Kubernetes</strong>, and then click <strong>Continue</strong>.</p><p>Enter a name and description for the Delegate that will let others know what it is used for, or where it&#39;s installed.</p><h3>Step 3: Add Delegate Name</h3><div class="note-callout"><strong>Do not run Delegates with the same name in different clusters.</strong> See <a href="/article/jzklic4y2j-troubleshooting">Troubleshooting</a>.</div><p>Add a name for the Delegate. The name will be added to the Delegate YAML as the <code>name</code> metadata of the StatefulSet.</p><div class="note-callout"><strong>Legacy Delegates are deployed as StatefulSet objects. By default, the StatefulSet.serviceName field is empty (“”) and does not need to be specified. Delegates do not require service names.</strong></div><div class="note-callout"><strong>The combined length of the Delegate name and the service name must not exceed 255 bytes. If the maximum length is exceeded, the Delegate might not appear in the Harness Manager UI. For more information on StatefulSet.serviceName, see </strong><a href="https://kubernetes.io/docs/reference/kubernetes-api/workload-resources/stateful-set-v1/#StatefulSetSpec"><strong>StatefulSetSpec</strong></a><strong> in </strong><a href="https://kubernetes.io/docs/reference/kubernetes-api/"><strong>Kubernetes API</strong></a><strong>.</strong></div><p>Add Tags to the Delegate. By default, Harness adds a Tag using the name you enter, but you can more. Simply type them in and press Enter.</p><p>These Tags are useful for selecting the Delegate when creating a Connector.</p><h3>Step 4: Select Delegate Size</h3><p>In Delegate Size, select the size of Delegate you want to install.</p><p>Your Kubernetes cluster must have the unallocated resources required to run the Harness Delegate workload:</p><ul><li>Laptop - 1.6GB memory, 0.5CPU</li><li>Small - 3.3GB memory, 1CPU</li><li>Medium - 6.6GB memory, 2CPU</li><li>Large - 13.2GB memory, 4CPU</li></ul><div class="note-callout"><strong>Important:</strong> these sizing requirements are for the Delegate only. Your cluster will require more memory for Kubernetes, the operating system, and other services.</div><h4>Important Resource Considerations</h4><p>These requirements are for the Delegate only. Your cluster will have system, Kubernetes, and other resources consumers. Make sure that the cluster has enough memory, storage, and CPU for all of its resource consumers.</p><p>Most importantly, when the Delegate is installed inside the target deployment or build farm cluster, the cluster must also support the resources needed by the services you are deploying or building.</p><p>For example, if you use the Small option that requires 3.3GB of memory, don&#39;t use a cluster with only 4GB or memory. It won&#39;t be enough to run the Delegate and other resources.</p><h3>Step 5: Download and Install the Script</h3><p>Click <strong>Download Script</strong>. The YAML file for the Kubernetes Delegate, and its README, will download to your computer as an archive.</p><p>Open a terminal and navigate to where the Delegate file is located.</p><p>Extract the YAML file&#39;s folder from the download and then navigate to the folder that you extracted:</p><pre>tar -zxvf harness-delegate-kubernetes.tar.gz<br/><br/>cd harness-delegate-kubernetes</pre><p>You&#39;ll connect to your cluster using the terminal so you can simply copy the YAML file over.</p><p>In the same terminal, log into your Kubernetes cluster. In most platforms, you select the cluster, click <strong>Connect</strong>, and copy the access command.</p><p>Let&#39;s quickly confirm that the cluster you created can connect to the Harness platform. Enter the following command:</p><p>Next, install the Harness Delegate using the <strong>harness-delegate.yaml</strong> file you just downloaded. In the terminal connected to your cluster, run this command:</p><pre>kubectl apply -f harness-delegate.yaml</pre><p>The successful output is something like this:</p><pre>% kubectl apply -f harness-delegate.yaml<br/>namespace/harness-delegate unchanged<br/>clusterrolebinding.rbac.authorization.k8s.io/harness-delegate-cluster-admin unchanged<br/>secret/k8s-quickstart-proxy unchanged<br/>statefulset.apps/k8s-quickstart-sngxpn created<br/>service/delegate-service unchanged</pre><p>Run this command to verify that the Delegate pod was created:</p><pre>kubectl get pods -n harness-delegate-ng</pre><p>It&#39;ll take a moment for the Delegate to appear in Harness&#39; <strong>Delegates</strong> list.</p><p>You&#39;re ready to connect Harness to your artifact server and cluster. After those quick steps, you&#39;ll begin creating your deployment.</p><h3>Review: Delegate Role Requirements</h3><p>The YAML provided for the Harness Delegate defaults to the <code>cluster-admin</code> role because that ensures anything could be applied. If you can&#39;t use <code>cluster-admin</code> because you are using a cluster in your company, you&#39;ll need to edit the Delegate YAML.</p><p>The set of permissions should include <code>list</code>, <code>get</code>, <code>create</code>, <code>watch</code> (to fetch the pod events), and <code>delete</code> permissions for each of the entity types Harness uses.</p><p>If you don’t want to use <code>resources: [“*”]</code> for the Role, you can list out the resources you want to grant. Harness needs <code>configMap</code>, <code>secret</code>, <code>event</code>, <code>deployment</code>, and <code>pod</code> at a minimum for deployments, as stated above.</p><p>In the Delegate installation settings, you also have the option to select cluster read-only access and namespace-specific access. When you select these options, the YAML generated by Harness is changed to reflect the limited access:</p><p></p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/f9bd10b3nj/1655137603325/clean-shot-2022-06-13-at-09-26-02.png"/></figure><h3>Step 6: Verify</h3><p>For an overview of verification, see <a href="/article/39tx85rekj-delegate-registration">Delegate Registration and Verification</a>.</p><p>In the Delegate wizard, click <strong>Verify</strong> and Harness will verify that it is receiving heartbeats from the Delegate.</p><p>Your Delegate is installed.</p><h3>Option: Troubleshooting</h3><p>Harness will provide a lot of troubleshooting steps. Here are a few:</p><p>Check the status of the Delegate on your cluster:</p><pre>kubectl describe pod &lt;your-delegate-pod&gt; -n harness-delegate-ng</pre><p></p><p>Check the Delegate logs:</p><pre>kubectl logs -f &lt;harness-delegate&gt; -n harness-delegate-ng</pre><p></p><p>If the pod isn&#39;t up, you might see the following error in your cluster:</p><pre>CrashLoopBackOff: Kubernetes Cluster Resources are not available.</pre><p></p><p>Make sure the Kubernetes Cluster Resources (CPU, Memory) are enough.</p><p>If the Delegate didn’t reach a healthy state, try this:</p><pre>kubectl describe pod &lt;your-delegate-pod&gt; -n harness-delegate-ng</pre><p></p><h3>Harness Kubernetes Delegate Environment Variables</h3><p>The following table lists each of the environment variables in the Harness Kubernetes Delegate YAML.</p><p></p><table><tbody><tr><td><p><strong>Name</strong></p></td><td><p><strong>Description</strong></p></td><td><p><strong>Example</strong></p></td></tr><tr><td><p><code>JAVA_OPTS</code></p></td><td><p>JVM options for the Delegate. Use this variable to override or add JVM parameters.</p></td><td><pre class="hljs yaml">- name: JAVA_OPTS<br/>  value: &#34;-XX:+UnlockExperimentalVMOptions -XX:+UseCGroupMemoryLimitForHeap -XX:MaxRAMFraction=2 -Xms64M&#34;</pre></td></tr><tr><td><p><code>ACCOUNT_ID</code></p></td><td><p>The Harness account Id for the account where this Delegate will attempt to register.</p><div class="note-callout">This value is added automatically to the Delegate config file (YAML, etc) when you add the Delegate.</div></td><td><pre>- name: ACCOUNT_ID<br/>  value: H5W8iol5TNWc4G9h5A2MXg</pre></td></tr><tr><td><p><code>ACCOUNT_SECRET</code></p></td><td><p>The Harness account token used to register the Delegate.</p></td><td><pre>- name: ACCOUNT_SECRET<br/>  value: d239xx88bf7xxxxxxx836ea</pre></td></tr><tr><td><p><code>MANAGER_HOST_AND_PORT</code></p></td><td><p>The Harness SaaS manager URL. <code>https</code> indicates port 443.</p></td><td><pre>- name: MANAGER_HOST_AND_PORT<br/>  value: https://app.harness.io<br/></pre></td></tr><tr><td><p><code>WATCHER_STORAGE_URL</code></p></td><td><p>The URL for the Watcher versions.</p><p>See <a href="/article/re8kk0ex4k-delegate-installation-overview">Delegate Installation Overview</a>.</p></td><td><pre>- name: WATCHER_STORAGE_URL<br/>  value: https://app.harness.io/public/prod/premium/watchers</pre></td></tr><tr><td><p><code>WATCHER_CHECK_LOCATION</code></p></td><td><p>The Delegate version location for the Watcher to check for.</p></td><td><pre>- name: WATCHER_CHECK_LOCATION<br/>  value: current.version</pre></td></tr><tr><td><p><code>REMOTE_WATCHER_URL_CDN</code></p></td><td><p>The CDN URL for Watcher builds.</p></td><td><pre>- name: REMOTE_WATCHER_URL_CDN<br/>  value: https://app.harness.io/public/shared/watchers/builds</pre></td></tr><tr><td><p><code>DELEGATE_STORAGE_URL</code></p></td><td><p>The URL where published Delegate jars are stored.</p></td><td><pre>- name: DELEGATE_STORAGE_URL<br/>  value: https://app.harness.io</pre></td></tr><tr><td><p><code>DELEGATE_CHECK_LOCATION</code></p></td><td><p>The storage location hosting the published Delegate versions.</p></td><td><pre>- name: DELEGATE_CHECK_LOCATION<br/>  value: delegateprod.txt</pre></td></tr><tr><td><p><code>DEPLOY_MODE</code></p></td><td><p>Deployment mode: Kubernetes, Docker, etc.</p></td><td><pre>- name: DEPLOY_MODE<br/>  value: KUBERNETES</pre></td></tr><tr><td><p><code>DELEGATE_NAME</code></p></td><td><p>The name of the Delegate. This is the name that will appear in Harness when the Delegate is registered.</p><p>You can automate Delegate creation by omitting the name, and then have a script copying the Delegate YAML file and add a unique name to <code>value</code> for each new Delegate you want to register.</p><p>See <a href="/article/9deaame3qz-automate-delegate-installation">Automate Delegate Installation</a>.</p></td><td><pre>- name: DELEGATE_NAME<br/>  value: qa</pre></td></tr><tr><td><p><code>NEXT_GEN</code></p></td><td><p>Indicates that this Delegate will register in <a href="/article/ra3nqcdbaf-compare-first-gen-and-next-gen">Harness NextGen</a>.</p><p>If it set to <code>false</code>, the Delegate will attempt to register in Harness FirstGen.</p></td><td><pre>- name: NEXT_GEN<br/>  value: &#34;true&#34;</pre></td></tr><tr><td><p><code>DELEGATE_DESCRIPTION</code></p></td><td><p>The description added to the Delegate in the Harness Manager or YAML before registering.</p><p>It appears in the Delegate details page in the Harness Manager.</p></td><td><pre>- name: DELEGATE_DESCRIPTION<br/>  value: &#34;&#34;</pre></td></tr><tr><td><p><code>DELEGATE_TYPE</code></p></td><td><p>The type of Delegate.</p></td><td><pre>- name: DELEGATE_TYPE<br/>  value: &#34;KUBERNETES&#34;</pre></td></tr><tr><td><p><code>DELEGATE_TAGS</code></p></td><td><p>The Tags added to the Delegate in the Harness Manager or YAML before registering.</p><p>Tags are generated by Harness using the Delegate name but you can also add your own Tags.</p><p>Tags appear in the Delegate details page in the Harness Manager.</p><p>See <a href="/article/i8t053o0sq-tags-reference">Tags Reference</a> and <a href="/article/nnuf8yv13o-select-delegates-with-selectors">Select Delegates with Tags</a>.</p></td><td><pre>- name: DELEGATE_TAGS<br/>  value: &#34;&#34;</pre></td></tr><tr><td><p><code>DELEGATE_TASK_LIMIT</code></p></td><td><p>The maximum number of tasks the Delegate can perform at once.</p><p>All of the operations performed by the Delegate are categorized as different types of tasks.</p></td><td><pre>- name: DELEGATE_TASK_LIMIT<br/>  value: &#34;50&#34;</pre></td></tr><tr><td><p><code>DELEGATE_ORG_IDENTIFIER</code></p></td><td><p>The Harness Organization <a href="/article/li0my8tcz3-entity-identifier-reference">Identifier</a> where the Delegate will register.</p><p>Delegates at the account-level do not have a value for this variable.</p></td><td><pre>- name: DELEGATE_ORG_IDENTIFIER<br/>  value: &#34;engg&#34;</pre></td></tr><tr><td><p><code>DELEGATE_PROJECT_IDENTIFIER</code></p></td><td><p>The Harness Project <a href="/article/li0my8tcz3-entity-identifier-reference">Identifier</a> where the Delegate will register.</p><p>Delegates at the account or Org-level do not have a value for this variable.</p></td><td><pre>- name: DELEGATE_PROJECT_IDENTIFIER<br/>  value: &#34;myproject&#34;</pre></td></tr><tr><td><p><code>PROXY_*</code></p></td><td><p>All of the Delegates include proxy settings you can use to change how the Delegate connects to the Harness Manager.</p><p>The <code>secretKeyRef</code> are named using the Delegate name.</p></td><td><pre>- name: PROXY_HOST<br/>  value: &#34;&#34;<br/>- name: PROXY_PORT<br/>  value: &#34;&#34;<br/>- name: PROXY_SCHEME<br/>  value: &#34;&#34;<br/>- name: NO_PROXY<br/>  value: &#34;&#34;<br/>- name: PROXY_MANAGER<br/>  value: &#34;true&#34;<br/>- name: PROXY_USER<br/>  valueFrom:<br/>    secretKeyRef:<br/>      name: mydel-proxy<br/>      key: PROXY_USER<br/>- name: PROXY_PASSWORD<br/>  valueFrom:<br/>    secretKeyRef:<br/>      name: mydel-proxy<br/>      key: PROXY_PASSWORD</pre></td></tr><tr><td><p><code>INIT_SCRIPT</code></p></td><td><p>You can run scripts on the Delegate using <code>INIT_SCRIPT</code>.</p><p>For example, if you wanted to install software on the Delegate pod, you can enter the script in <code>INIT_SCRIPT</code> and then apply the Delegate YAML.</p><p>A multiline script must follow the YAML spec for <a href="https://yaml.org/spec/1.2-old/spec.html#id2795688" target="_blank">literal scalar style</a>.</p><p>See <a href="/article/yte6x6cyhn-run-scripts-on-delegates">Run Scripts on Delegates</a>.</p></td><td><p></p><pre>- name: INIT_SCRIPT<br/>  value: |-<br/>    echo install wget<br/>    apt-get install wget<br/>    echo wget installed</pre></td></tr><tr><td><p><code>POLL_FOR_TASKS</code></p></td><td><p>Enables or disables polling for Delegate tasks.</p><p>By default, the Delegate uses Secure WebSocket (WSS) for tasks. If the <code>PROXY_*</code> settings are used and the proxy or some intermediary does not allow WSS, then set <code>POLL_FOR_TASKS</code> to true to enable polling.</p></td><td><pre>- name: POLL_FOR_TASKS<br/>  value: &#34;false&#34;</pre></td></tr><tr><td><p><code>HELM_DESIRED_VERSION</code></p></td><td><p>By default, Harness Delegates are installed with and use Helm 3.</p><p>You can set the Helm version in the Harness Delegate YAML file using the <code>HELM_DESIRED_VERSION</code> environment property. Include the <code>v</code> with the version. For example, <code>HELM_DESIRED_VERSION: v2.13.0</code>.</p></td><td><pre>- name: HELM_DESIRED_VERSION<br/>  value: &#34;&#34;</pre></td></tr><tr><td><p><code>USE_CDN</code></p></td><td><p>Makes the Delegate use a CDN for new versions.</p></td><td><pre>- name: USE_CDN<br/>  value: &#34;true&#34;</pre></td></tr><tr><td><p><code>CDN_URL</code></p></td><td><p>The CDN URL for Delegate versions.</p></td><td><pre>- name: CDN_URL<br/>  value: https://app.harness.io</pre></td></tr><tr><td><p><code>JRE_VERSION</code></p></td><td><p>The Java Runtime Environment version used by the Delegate.</p></td><td><pre>- name: JRE_VERSION<br/>  value: 1.8.0_242</pre></td></tr><tr><td><p><code>HELM3_PATH</code>,</p><p><code>HELM_PATH</code></p></td><td><p>When you Install and run a new Harness Delegate, Harness includes Helm 3 support automatically. But in some cases, you might want to use one of the custom Helm binaries available from <a href="https://github.com/helm/helm/releases" target="_blank">Helm release</a>.</p><p>For a Helm 3 binary, enter the local path to the binary in <code>HELM3_PATH</code>.</p><p>For a Helm 2 binary, enter the path local path to the binary in <code>HELM_PATH</code>.</p><p></p><div class="note-callout">If you are performing a <a href="/article/lbhf2h71at-native-helm-quickstart">Native Helm deployment</a>, do not use <code>HELM_PATH</code> for the Helm 2 binary. Harness will look for the Helm 2 binary on the Delegate in its standard path, such as <code>/usr/local/bin/helm</code>.</div></td><td><pre>- name: HELM3_PATH<br/>  value: &#34;&#34;<br/>- name: HELM_PATH<br/>  value: &#34;&#34;</pre></td></tr><tr><td><p><code>KUSTOMIZE_PATH</code></p></td><td><p>The Harness Delegate ships with the 3.5.4 release of Kustomize.</p><p>If you want to use a different release of Kustomize, add it to a location on the Delegate, update <code>KUSTOMIZE_PATH</code>, and (re)start the Delegate.</p></td><td><pre>- name: KUSTOMIZE_PATH<br/>  value: &#34;&#34;</pre></td></tr><tr><td><p><code>KUBECTL_PATH</code></p></td><td><p>You can use <code>KUBECTL_PATH</code> to change the kubectl config path. The default is <code>~/. kube/config</code>.</p></td><td><pre>- name: KUBECTL_PATH<br/>  value: &#34;&#34;</pre></td></tr><tr><td><p><code>GRPC_SERVICE_ENABLED</code>,</p><p><code>GRPC_SERVICE_CONNECTOR_PORT</code></p></td><td><p>By default, the Delegate requires HTTP/2 for gRPC (gRPC Remote Procedure Calls) be enabled for connectivity between the Delegate and Harness Manager.</p></td><td><pre>- name: GRPC_SERVICE_ENABLED<br/>  value: &#34;true&#34;<br/>- name: GRPC_SERVICE_CONNECTOR_PORT<br/>  value: &#34;8080&#34;</pre></td></tr><tr><td><p><code>VERSION_CHECK_DISABLED</code></p></td><td><p>By default, the Delegate always checks for new versions (via the Watcher).</p></td><td><pre>- name: VERSION_CHECK_DISABLED<br/>  value: &#34;false&#34;</pre></td></tr><tr><td><p><code>DELEGATE_NAMESPACE</code></p></td><td><p>The namespace for the Delegate is taken from the <code>StatefulSet</code> namespace.</p></td><td><pre>- name: DELEGATE_NAMESPACE<br/>  valueFrom:<br/>    fieldRef:<br/>      fieldPath: metadata.namespace</pre></td></tr></tbody></table><p></p><p></p><h3>Notes</h3><h4>Empty serviceName</h4><p>By default, Harness does not include a value for <code>serviceName</code> in the <code>StatefulSet</code> in the Delegate YAML:</p><pre class="hljs yaml">...<br/>apiVersion: apps/v1<br/>kind: StatefulSet<br/>metadata:<br/>  labels:<br/>    harness.io/name: myDelegate<br/>  name: remove<br/>  namespace: harness-delegate-ng<br/>spec:<br/>  replicas: 2<br/>  podManagementPolicy: Parallel<br/>  selector:<br/>    matchLabels:<br/>      harness.io/name: myDelegate<br/>  serviceName: &#34;&#34;<br/>  template:<br/>    metadata:<br/>      labels:<br/>        harness.io/name: myDelegate<br/>...</pre><p></p><p>You do not need to change <code>serviceName</code>, but you can if you have a static code analysis tool that flags it or some other use case.</p><p>Simply add the Delegate name as the value using the syntax <code>harness.io/name: [Delegate name]</code>.</p><p>For example, if your Delegate name is <code>myDelegate</code>, you would add <code>harness.io/name: myDelegate</code>:</p><pre>...<br/>  serviceName:<br/>      harness.io/name: myDelegate<br/>...</pre><p></p><h3>See Also</h3><ul><li><a href="/article/re8kk0ex4k-delegate-installation-overview">Delegate Installation Overview</a></li></ul><p></p>