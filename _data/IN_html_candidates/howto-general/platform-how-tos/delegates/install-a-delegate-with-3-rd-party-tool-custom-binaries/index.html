<p>Harness Delegates include binaries for the third-party SDKs that are required for Harness-supported integrations (Kubernetes, Helm, etc). The binaries are listed below in <a href="#table_certified_sdk_versions_for_deployment_types">Table: Certified SDK Versions for Deployment Types</a>.</p><p>Harness includes multiple binary versions to support customers using code that requires versions other than the latest.</p><h5>Problem</h5><p>In some cases, older binary versions might have minor vulnerabilities that will be detected by vulnerability scans.</p><p>Consequently, you might want to install the Delegate with only the versions that do not contain any vulnerabilities.</p><p>Also, you might want to install additional tools not included by Harness.</p><h5>Solution</h5><p>To support this customization, Harness provides a Harness Delegate image that does not include any third-party SDK binaries. We call this image the <u>No Tools Image</u>.</p><p>Using the No Tools Image and Delegate YAML, you can install the specific SDK versions you want. You install software on the Delegate using the <code>INIT_SCRIPT</code> environment variable in the Delegate YAML.</p><p>This topic explains how to use the No Tools Delegate image and install specific SDK versions.</p><h5>Required SDKs for Harness</h5><p>If you use the No Tools Image, you must install certain SDKs so that Harness can perform its tasks. These SDKs are covered in this topic and listed below in <a href="#table_certified_sdk_versions_for_deployment_types">Table: Certified SDK Versions for Deployment Types</a>.</p><h3>Before You Begin</h3><ul><li><a href="/article/2k7lnc7lvl-delegates-overview">Delegates Overview</a></li><li><a href="/article/f9bd10b3nj-install-a-kubernetes-delegate">Install a Legacy Kubernetes Delegate</a></li><li><a href="/article/4ax6q6dxa4-install-an-immutable-kubernetes-delegate">Install an Immutable Kubernetes Delegate</a></li><li><a href="/article/1e536z41av-supported-platforms-and-technologies#third_party_tools_installed_with_the_delegate">Third-Party Tools installed with the Delegate</a></li></ul><p></p><h3>Step 1: Edit Delegate YAML</h3><p>To install a Delegate, you download its YAML file and run it in your environment.</p><p>Before you run the Delegate, you edit the YAML file to change:</p><ul><li>Delegate environment variables.</li><li>Delegate image.</li></ul><p>These steps are below.</p><h3>Step 2: Add Harness Required SDKs</h3><p>In the Delegate <code>StatefulSet</code>, use the <code>INIT_SCRIPT</code> environment variable to download the certified SDK versions required by Harness.</p><p>The SDKs you need to add depend on what type of deployment you are doing with Harness.</p><div class="note-callout">For more information on how to use the <code>INIT_SCRIPT</code> environment variable, see <a href="/article/yte6x6cyhn-run-scripts-on-delegates">Run Initialization Scripts on Delegates</a>.</div><p></p><h4>Table: Certified SDK Versions for Deployment Types</h4><p>The following table lists each of the certified SDKs for each deployment type.</p><p>You must add the certified SDKs for your deployment type so Harness can perform its tasks.</p><h5>Kubernetes Deployments</h5><p>For Kubernetes deployments, include the SDKs/tools required by your Manifest Type.</p><table><tbody><tr><td><p><strong>Manifest Type</strong></p></td><td><p><strong>Required Tool/SDK</strong></p></td><td><p><strong>Certified Version</strong></p></td><td><p><strong>Installation Command</strong></p></td></tr><tr><td><p>Kubernetes</p></td><td><p>kubectl</p></td><td><p>v1.24.3</p></td><td><pre>## Kubectl<br/>curl -LO https://dl.k8s.io/release/v1.24.3/bin/linux/amd64/kubectl -o kubectl<br/>chmod +x ./kubectl<br/>mv kubectl /opt/harness-delegate/custom-client-tools/kubectl</pre></td></tr><tr><td><p></p></td><td><p>go-template</p></td><td><p>v0.4</p></td><td><pre>## go-template <br/>mkdir -p /opt/harness-delegate/client-tools/go-template/v0.4/<br/>curl -L https://app.harness.io/public/shared/tools/go-template/release/v0.4/bin/linux/amd64/go-template -o go-template<br/>chmod +x ./go-template<br/>mv go-template /opt/harness-delegate/client-tools/go-template/v0.4/go-template</pre></td></tr><tr><td><p>Helm</p></td><td><p>kubectl</p></td><td><p>v1.24.3</p></td><td><pre>## Kubectl<br/>curl -LO https://dl.k8s.io/release/v1.24.3/bin/linux/amd64/kubectl -o kubectl<br/>chmod +x ./kubectl<br/>mv kubectl /opt/harness-delegate/custom-client-tools/kubectl</pre></td></tr><tr><td><p></p></td><td><p>helm</p></td><td><p>v3.9.2</p></td><td><pre>## Helm V3<br/>curl -L0 https://get.helm.sh/helm-v3.9.2-linux-amd64.tar.gz -o helm-v3.9.2.tar.gz<br/>tar -xvzf helm-v3.9.2.tar.gz<br/>chmod +x ./linux-amd64/helm<br/>mv ./linux-amd64/helm /opt/harness-delegate/custom-client-tools/helm3</pre></td></tr><tr><td><p>Helm (chart is stored in GCS or S3)</p></td><td><p>kubectl</p></td><td><p>v1.24.3</p></td><td><pre>## Kubectl<br/>curl -LO https://dl.k8s.io/release/v1.24.3/bin/linux/amd64/kubectl -o kubectl<br/>chmod +x ./kubectl<br/>mv kubectl /opt/harness-delegate/custom-client-tools/kubectl</pre></td></tr><tr><td><p></p></td><td><p>helm</p></td><td><p>v3.9.2</p></td><td><pre>## Helm V3<br/>curl -L0 https://get.helm.sh/helm-v3.9.2-linux-amd64.tar.gz -o helm-v3.9.2.tar.gz<br/>tar -xvzf helm-v3.9.2.tar.gz<br/>chmod +x ./linux-amd64/helm<br/>mv ./linux-amd64/helm /opt/harness-delegate/custom-client-tools/helm3</pre></td></tr><tr><td><p></p></td><td><p>chartmuseum</p></td><td><p>v0.8.2 and v0.12.0</p></td><td><pre>## Install default chartmuseum version from Harness CDN<br/>curl -L https://app.harness.io/public/shared/tools/chartmuseum/release/v0.8.2/bin/linux/amd64/chartmuseum -o chartmuseum<br/>chmod +x ./chartmuseum<br/>mv chartmuseum /opt/harness-delegate/client-tools/chartmuseum/v0.8.2/chartmuseum<br/><br/>## Install newer version of chartmuseum versiom from Harness CDN<br/>## To use this version USE_LATEST_CHARTMUSEUM_VERSION should be enabled<br/>curl -L https://app.harness.io/public/shared/tools/chartmuseum/release/v0.12.0/bin/linux/amd64/chartmuseum -o chartmuseum<br/>chmod +x ./chartmuseum<br/>mv chartmuseum /opt/harness-delegate/client-tools/chartmuseum/v0.12.0/chartmuseum<br/><br/>## Install custom version of chartmuseum from official release<br/>## Binary should be moved to one of predefined paths:<br/>## /opt/harness-delegate/client-tools/chartmuseum/v0.8.2/chartmuseum <br/>## /opt/harness-delegate/client-tools/chartmuseum/v0.12.0/chartmuseum [If USE_LATEST_CHARTMUSEUM_VERSION is enabled]<br/>curl -L https://get.helm.sh/chartmuseum-v0.14.0-linux-amd64.tar.gz -o chartmuseum-v0.14.tar.gz<br/>tar xzvf chartmuseum-v0.14.tar.gz<br/>chmod +x ./linux-amd64/chartmuseum<br/>mv ./linux-amd64/chartmuseum /opt/harness-delegate/client-tools/chartmuseum/v0.8.2/chartmuseum</pre></td></tr><tr><td><p>Kustomize</p></td><td><p>kubectl</p></td><td><p>v1.24.3</p></td><td><pre>## Kubectl<br/>curl -LO https://dl.k8s.io/release/v1.24.3/bin/linux/amd64/kubectl -o kubectl<br/>chmod +x ./kubectl<br/>mv kubectl /opt/harness-delegate/custom-client-tools/kubectl</pre></td></tr><tr><td><p></p></td><td><p>kustomize</p></td><td><p>v4.5.4</p></td><td><pre>## kustomize<br/>curl -L0 https://github.com/kubernetes-sigs/kustomize/releases/download/kustomize%2Fv4.5.4/kustomize_v4.5.4_linux_amd64.tar.gz -o kustomize_v4.5.4.tar.gz<br/>tar -xvzf kustomize_v4.5.4.tar.gz<br/>chmod +x ./kustomize<br/>mv kustomize /opt/harness-delegate/custom-client-tools/kustomize</pre></td></tr><tr><td><p>OpenShift</p></td><td><p>kubectl</p></td><td><p>v1.24.3</p></td><td><pre>## Kubectl<br/>curl -LO https://dl.k8s.io/release/v1.24.3/bin/linux/amd64/kubectl -o kubectl<br/>chmod +x ./kubectl<br/>mv kubectl /opt/harness-delegate/custom-client-tools/kubectl</pre></td></tr><tr><td><p></p></td><td><p>oc</p></td><td><p>v4</p></td><td><pre>## OpenShift OC<br/>curl -L0 https://mirror.openshift.com/pub/openshift-v4/clients/oc/latest/linux/oc.tar.gz -o oc.tar.gz<br/>tar -xvzf oc.tar.gz<br/>chmod +x ./oc<br/>mv oc /opt/harness-delegate/custom-client-tools/oc</pre></td></tr></tbody></table><p></p><h5>Native Helm Deployments</h5><p>For Native Helm deployments, include the following SDKs/tools.</p><p></p><table><tbody><tr><td><p><strong>Manifest Type</strong></p></td><td><p><strong>Required Tool/SDK</strong></p></td><td><p><strong>Certified Version</strong></p></td><td><p><strong>Installation Command</strong></p></td></tr><tr><td><p>Helm Chart</p></td><td><p>helm</p></td><td><p>v3.9.2</p></td><td><pre>## Helm V3<br/>curl -L0 https://get.helm.sh/helm-v3.9.2-linux-amd64.tar.gz -o helm-v3.9.2.tar.gz<br/>tar -xvzf helm-v3.9.2.tar.gz<br/>chmod +x ./linux-amd64/helm<br/>mv ./linux-amd64/helm /opt/harness-delegate/custom-client-tools/helm3</pre></td></tr><tr><td><p></p></td><td><p>kubectl</p><p>Required if Kubernetes version is 1.16+ and the <code>HELM_STEADY_STATE_CHECK_1_16</code> feature flag is enabled.</p></td><td><p>v1.24.3</p></td><td><pre>## Kubectl<br/>curl -LO https://dl.k8s.io/release/v1.24.3/bin/linux/amd64/kubectl -o kubectl<br/>chmod +x ./kubectl<br/>mv kubectl /opt/harness-delegate/custom-client-tools/kubectl</pre></td></tr></tbody></table><p></p><h5>SCM Required if OPTIMIZED_GIT_FETCH_FILES Feature Flag is Enabled</h5><p>Harness performs a <code>git clone</code> to fetch files. If the fetch is timing out, it can be because the repo is too large for the network connection to fetch it before timing out.</p><p>To fetch very large repos, Harness can enable the feature flag <code>OPTIMIZED_GIT_FETCH_FILES</code> on your account. When this feature flag is enabled, Harness will use provider-specific APIs to improve performance.</p><p>If you have enabled this feature flag, then your Delegate YAML must include the following download.</p><pre>## scm<br/>mkdir -p /opt/harness-delegate/client-tools/scm/36d92fd8/<br/>curl -L https://app.harness.io/public/shared/tools/scm/release/36d92fd8/bin/linux/amd64/scm -o scm<br/>chmod +x ./scm<br/>mv scm /opt/harness-delegate/client-tools/scm/36d92fd8/scm</pre><p></p><p></p><div class="note-callout">Contact <a href="mailto:support@harness.io" target="_blank">Harness Support</a> to enable the feature.</div><p></p><h4>Example of Kubernetes Delegate Manifest with Required SDK Downloads</h4><p>The following Delegate YAML contains examples of downloads for all Harness SDKs.</p><p>You can edit the YAML to include only the SDKs and versions Harness requires for your deployment type.</p><pre>...<br/>        - name: DELEGATE_TYPE<br/>          value: &#34;KUBERNETES&#34;<br/>        - name: DELEGATE_NAMESPACE<br/>          valueFrom:<br/>            fieldRef:<br/>              fieldPath: metadata.namespace<br/>        - name: INIT_SCRIPT<br/>          value: |<br/>            mkdir -p /opt/harness-delegate/custom-client-tools/<br/>            mkdir -p /opt/harness-delegate/download-tools/<br/>            cd /opt/harness-delegate/download-tools<br/>            <br/>            ## Kubectl <br/>            curl -L0 https://dl.k8s.io/release/v1.24.3/bin/linux/amd64/kubectl -o kubectl<br/>            chmod +x ./kubectl<br/>            mv kubectl /opt/harness-delegate/custom-client-tools/kubectl<br/>            <br/>            ## Helm V3<br/>            curl -L0 https://get.helm.sh/helm-v3.9.2-linux-amd64.tar.gz -o helm-v3.9.2.tar.gz<br/>            tar -xvzf helm-v3.9.2.tar.gz<br/>            chmod +x ./linux-amd64/helm<br/>            mv ./linux-amd64/helm /opt/harness-delegate/custom-client-tools/helm3<br/><br/>            ## Kustomize<br/>            curl -L0 https://github.com/kubernetes-sigs/kustomize/releases/download/kustomize%2Fv4.5.4/kustomize_v4.5.4_linux_amd64.tar.gz -o kustomize_v4.5.4.tar.gz<br/>            tar -xvzf kustomize_v4.5.4.tar.gz<br/>            chmod +x ./kustomize<br/>            mv kustomize /opt/harness-delegate/custom-client-tools/kustomize<br/><br/>            ## OpenShift OC<br/>            curl -L0 https://mirror.openshift.com/pub/openshift-v4/clients/oc/latest/linux/oc.tar.gz -o oc.tar.gz<br/>            tar -xvzf oc.tar.gz<br/>            chmod +x ./oc<br/>            mv oc /opt/harness-delegate/custom-client-tools/oc<br/>            <br/>            ## go-template <br/>            mkdir -p /opt/harness-delegate/client-tools/go-template/v0.4/<br/>            curl -L0 https://app.harness.io/public/shared/tools/go-template/release/v0.4/bin/linux/amd64/go-template -o go-template<br/>            chmod +x ./go-template<br/>            mv go-template /opt/harness-delegate/client-tools/go-template/v0.4/go-template<br/>            <br/>            ## scm<br/>            mkdir -p /opt/harness-delegate/client-tools/scm/36d92fd8/<br/>            curl -L0 https://app.harness.io/public/shared/tools/scm/release/36d92fd8/bin/linux/amd64/scm -o scm<br/>            chmod +x ./scm<br/>            mv scm /opt/harness-delegate/client-tools/scm/36d92fd8/scm<br/>            <br/>            ## Replace default version of chartmuseum v0.12.0 with v0.14<br/>            ## USE_LATEST_CHARTMUSEUM_VERSION is enabled for account<br/>            curl -L https://get.helm.sh/chartmuseum-v0.14.0-linux-amd64.tar.gz -o chartmuseum-v0.14.tar.gz<br/>            tar xzvf chartmuseum-v0.14.tar.gz<br/>            chmod +x ./linux-amd64/chartmuseum<br/>            mv ./linux-amd64/chartmuseum /opt/harness-delegate/client-tools/chartmuseum/v0.12.0/chartmuseum<br/>            <br/>            cd /opt/harness-delegate<br/>...</pre><p></p><h3>Step 3: Disable Default SDK Downloads</h3><p>In the Delegate <code>StatefulSet</code>, add the following Environment Variables to prevent the Delegate from downloading the default SDK binary versions.</p><pre>...<br/>    spec:<br/>      containers:<br/>        ...<br/>        env:<br/>        ...<br/>        - name: INSTALL_CLIENT_TOOLS_IN_BACKGROUND<br/>          value: &#34;false&#34;<br/>        - name: CLIENT_TOOLS_DOWNLOAD_DISABLED<br/>          value: &#34;true&#34;    <br/>...</pre><h3>Step 4: Add Your Custom Tools</h3><p>In the Delegate <code>StatefulSet</code>, use the <code>INIT_SCRIPT</code> environment variable to download any additional tools you want to add.</p><h3>Step 5: Update PATHS for Common Tools</h3><p>You can set up custom paths to certain third-party binaries using environment variables.</p><table><tbody><tr><td><p><strong>Tool</strong></p></td><td><p><strong>Environment Variable Name</strong></p></td></tr><tr><td><p>Helm v3</p></td><td><p>HELM3_PATH</p></td></tr><tr><td><p>Helm v2</p></td><td><p>HELM_PATH</p><p></p><div class="note-callout">If you are performing a <a href="/article/lbhf2h71at-native-helm-quickstart">Native Helm deployment</a>, do not use <code>HELM_PATH</code> for the Helm 2 binary. Harness requires the Helm 2 binary on the Delegate in its standard path, for example: <code>/usr/local/bin/helm</code>.</div></td></tr><tr><td><p>Kustomize</p></td><td><p>KUSTOMIZE_PATH</p></td></tr><tr><td><p>Kubectl</p></td><td><p>KUBECTL_PATH</p></td></tr><tr><td><p>OpenShift (OC)</p></td><td><p>OC_PATH</p></td></tr></tbody></table><p></p><p>The following example uses these environment variables:</p><pre class="hljs yaml">...<br/>        - name: HELM3_PATH<br/>          value: /opt/harness-delegate/custom-client-tools/helm<br/>        - name: KUSTOMIZE_PATH<br/>          value: /opt/harness-delegate/custom-client-tools/kustomize<br/>        - name: KUBECTL_PATH<br/>          value: /opt/harness-delegate/custom-client-tools/kubectl<br/>        - name: OC_PATH<br/>          value: /opt/harness-delegate/custom-client-tools/oc<br/>...</pre><p></p><h3>Step 6: Update Delegate Image with No Tools Image Tag</h3><p>In the Delegate <code>StatefulSet</code>, edit the image to use the <code>ubi-no-tools</code> tag.</p><pre class="hljs yaml">...<br/>    spec:<br/>      containers:<br/>      - image: harness/delegate:ubi-no-tools<br/>        imagePullPolicy: Always<br/>...</pre><p></p><p></p><p></p><h3>See Also</h3><ul><li><a href="/article/auveebqv37-common-delegate-profile-scripts">Common Delegate Initialization Scripts</a></li></ul><p></p>