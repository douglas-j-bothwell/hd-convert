<p>You can trigger Pipelines in response to Git events automatically.</p><p>For example, when a pull request or push event occurs on a Git repo, a CI or CD Pipeline can execute.</p><p>Triggers enable event driven CI/CD and support the practice of every commit building and/or deploying to a target environment.</p><div class="note-callout">For general Triggers reference, see <a href="/article/rset0jry8q-triggers-reference">Triggers Reference</a>.</div><h3>Before You Begin</h3><ul><li><a href="/article/hv2758ro4e-learn-harness-key-concepts">Learn Harness&#39; Key Concepts</a></li><li><a href="/article/knunou9j30-kubernetes-cd-quickstart">Kubernetes CD Quickstart</a></li><li><a href="/article/x0d77ktjw8-ci-pipeline-quickstart">CI Pipeline Quickstart</a></li></ul><h3>Limitations</h3><ul><li>Currently, Harness supports Git-based Triggers for the most common Git providers. Harness includes a Custom Trigger for other repo providers.</li><li>The <strong>IN</strong> and <strong>NOT IN</strong> operators do not support Regex.</li><li>In Harness, you can select who is able to create and use Triggers <u>within Harness</u>, but you must use your repos&#39; RBAC to control who can initiate the Git events that start the Harness Trigger.</li></ul><h3>Visual Summary</h3><p>Here&#39;s a two minute video showing you how to create and run a Trigger in response to Git events.</p><div class="hd--embed" data-provider="YouTube" data-thumbnail="https://i.ytimg.com/vi/y8s351IJLXw/hqdefault.jpg"><iframe width="200" height="150" src="https://www.youtube.com/embed/y8s351IJLXw?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div><h3>Step 1: Set Up Your Codebase</h3><p>For a Trigger to process Git events, the Pipeline must have a Codebase object that points to the Git repo that sends the events.</p><p>The first Build Step in your Pipeline specifies the codebase to build. If your Pipeline doesn&#39;t include a Build Step, click <strong>Add Stage</strong>, select <strong>Build</strong>, and specify the Codebase. Select <strong>Clone Codebase</strong> and specify the Connector and source repo for the events.</p><p>To edit an existing Codebase, click <strong>Codebase</strong> on the right side of the Pipeline Studio. </p><p>See <a href="https://ngdocs.harness.io/article/mozd8b49td" target="_blank">Create and Configure a Codebase</a>. </p><h3>Step 2: Add a Trigger to a Pipeline</h3><p>Open your Harness Pipeline in Pipeline Studio.</p><p>Click <strong>Triggers</strong>.</p><p>Click <strong>New Trigger</strong>.</p><p>Click one of the Git-based Trigger types. In this example, we&#39;ll use GitHub.</p><h3>Step 3: Set up Webhook Listener</h3><p>Enter a name for the Trigger.</p><p>In <strong>Payload Type</strong>, select your Git provider. This setting is populated with the provider you selected automatically.</p><p>Select or create a Connector to the Git account for the Trigger repo. See <a href="/category/xyexvcc206-ref-source-repo-provider">Code Repo Connectors</a>.</p><ul><li><strong>If you set up an account-level Code Repo Connector:</strong> in <strong>Repository Name</strong>, enter the name of the repo in the account in the Connector.</li><li><strong>If you set up a repo-level Code Repo Connector:</strong> the repo name cannot be edited.</li></ul><p>In <strong>Event</strong>, select the Git event for the Webhook.</p><p>If the event you select results in the <strong>Actions</strong> settings appearing, select the actions for the Webhook or select <strong>Any Actions</strong>.</p><p>For details on these settings, see <a href="/article/rset0jry8q-triggers-reference">Triggers Reference</a>.</p><div class="note-callout">For details on the payloads of the different repo Webhooks, see GitHub <a href="https://docs.github.com/en/developers/webhooks-and-events/webhooks/webhook-events-and-payloads" target="_blank">Event Types &amp; Payloads</a>, Bitbucket <a href="https://confluence.atlassian.com/bitbucket/event-payloads-740262817.html" target="_blank">Event Payloads</a>, and Gitlab <a href="https://docs.gitlab.com/ee/user/project/integrations/webhooks.html#events" target="_blank">Events</a>.</div><h3>Option: Auto-abort Previous Execution</h3><p>Use this option if you want to override active Pipeline executions whenever the branch is updated.</p><p>If you select this option, when the branch you specified in the <strong>Connector</strong> is updated, then any active Pipeline executions using the branch and this Trigger are cancelled.</p><p>The updated branch will initiate a new Trigger execution.</p><h3>Option: Set Trigger Conditions</h3><p>Conditions specify criteria in addition to events and actions.</p><p>Conditions help to form the overall set of criteria to trigger a Pipeline based on changes in a given source.</p><p>For example:</p><ul><li>Execute Pipeline if the source/target branch name matches a pattern.</li><li>Execute Pipeline if the event is sent for file changes from specific directories in the Git repo. This is very useful when working with a monorepo (mono repository). It ensures that only specific Pipelines are triggered in response to a change.</li></ul><p>Conditions support Harness built-in expressions for accessing Trigger settings, Git payload data and headers.</p><p></p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/hndnde8usz/1624919275031/clean-shot-2021-06-28-at-15-27-08.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p>JEXL expressions are also supported.</p><p>For details on these settings, see <a href="/article/rset0jry8q-triggers-reference">Triggers Reference</a>.</p><div class="note-callout">Conditions are ANDed together (boolean AND operation). All Conditions must match an event payload for it to execute the Trigger.</div><h3>Step 3: Set Pipeline Input</h3><p>Pipelines often have <a href="/article/f6yobn7iq0-runtime-inputs">Runtime Inputs</a> like codebase branch names or artifact versions and tags.</p><p>Provide values for the inputs. You can also use <a href="/article/3fqwa8et3d-input-sets">Input Sets</a>.</p><p>Click <strong>Create Trigger</strong>.</p><p>The Trigger is now added to the Triggers page.</p><h3>Review: Automatic Webhook Registration</h3><p>When you create or edit the Trigger, Harness registers the webhook in your Git provider automatically. You don&#39;t need to copy it and add it to your repo webhooks. However, make sure you have the following permission for GitHub Personal Access Token for automatic webhook registration to work:</p><ul><li><strong>Scopes:</strong> select all the <strong>repo</strong>, <strong>user</strong>, and <strong>admin:repo_hook</strong> options</li></ul><p></p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/hndnde8usz/1637177263636/clean-shot-2021-11-17-at-11-26-59.png"/></figure><p>You should also be repo admin.</p><h3>Step 4: Test Trigger</h3><p>Make a change on the repo and see if it executes the Trigger. For example, change a file, commit it on a branch, and make a pull request.</p><p>In your Git provider repo, you can see that the request and response were successful.</p><p></p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/hndnde8usz/1614104307757/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p>In Harness, view the Pipeline execution.</p><p>In Harness CI, click <strong>Builds</strong>.</p><p>You can see the source and target branches. You can also see the pull request comment and number.</p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/hndnde8usz/1614104376860/image.png"/></figure><p>Click the pull request number and it opens the Git provider repo at the pull request.</p><p>If you open the Trigger in the Pipeline you will see a status in <strong>Last Activation Details</strong>.</p><p></p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/hndnde8usz/1624922961169/clean-shot-2021-06-28-at-16-29-13.png"/></figure><p>Activation means the Trigger was able to request Pipeline execution. It does not mean that the Webhook didn&#39;t work.</p><h3>See Also</h3><ul><li><a href="/article/rset0jry8q-triggers-reference">Triggers Reference</a></li></ul><p></p>