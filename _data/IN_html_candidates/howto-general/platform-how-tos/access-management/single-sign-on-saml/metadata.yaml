type: article
article_id: mlpksc7s6c
user_id: 2te4j9f9g7
category_id: fe0577j8ie
author:
  name: Rashmi Nanda Sahoo
  profile_image: https://www.gravatar.com/avatar/b7bfd905f8714099535f2ff657fa3975?d=mm&s=150
title: Single Sign-On (SSO) with SAML
slug: single-sign-on-saml
description: This document explains single sign-on with SAML provider.
short_version: This document explains single sign-on with SAML provider.
tags:
- AccessManagement
- Authentication
- SAML
show_toc: true
is_private: false
is_published: true
is_featured: false
stale_status:
  is_stale: false
  reason: ""
  source: API
  triggered_at: 2022-07-28T07:47:21.9425Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: Single Sign-On (SSO) with SAML
  description: This document explains single sign-on with SAML provider.
  short_version: This document explains single sign-on with SAML provider.
  body: '<p>Harness supports Single Sign-On (SSO) with SAML, integrating with your
    SAML SSO provider to enable you to log your users into Harness as part of your
    SSO infrastructure. This document explains how to set up SAML authentication.</p><div
    class="note-callout">If the <a href="/article/tb4e039h8x-harness-on-premise-overview">Harness
    Self-Managed Enterprise Edition</a> version is not accessed using the HTTPS load
    balancer, SAML authentication will fail. Make sure you access the Harness Self-Managed
    Enterprise Edition version using an HTTPS load balancer, and not an HTTP load
    balancer.</div><h3>Support Formats</h3><p>The XML SAML file used with Harness
    must use UTF-8.</p><p>UTF-8 BOM is not supported. Some text editors like Notepad++
    save in UTF-8 BOM by default.</p><h3>SAML SSO With Harness Overview</h3><p>To
    set up SAML SSO with Harness, you add a SAML SSO provider to your Harness account
    and enable it as the default authentication method.</p><p>Harness SAML SSO involves
    the following:</p><ul><li><strong>Harness User email addresses</strong> - Users
    are invited to Harness using their email addresses. Once they log into Harness,
    their email addresses are registered with Harness as Harness Users. To use SAML
    SSO, Harness Users must use the same email addresses to register in Harness and
    the SAML provider.</li></ul><div class="note-callout">Ensure that you have at
    least two corresponding user accounts when setting up and testing SAML SSO in
    Harness. This allows you to set up the account with a Harness Administrator account
    and test it with a Harness user account.</div><ul><li><strong>SAML provider user
    email addresses</strong> - To use the SAML provider to verify Harness Users, the
    email addresses used in the SAML provider must match the email addresses for the
    registered Harness Users you want to verify.</li><li><strong>Harness SAML Endpoint
    URL</strong> - This URL is where the SAML provider will post the SAML authentication
    response to your Harness account. This URL is provided by Harness in the <strong>Single
    Sign-On (SSO) Provider</strong> dialog. You enter this URL in your SAML SSO provider
    app to integrate it with Harness.</li><li><strong>SAML metadata file</strong>
    - This file is provided by your SAML provider app. You upload this file into the
    Harness <strong>Single Sign-On (SSO) Provider</strong> dialog to integrate the
    app with Harness.</li></ul><h3>SAML SSO With Okta</h3><p>To set up Harness with
    Okta as a SAML SSO provider, you exchange the necessary information between your
    Okta app and Harness.</p><div class="note-callout">Users are not created as part
    of the SAML SSO integration. Users are invited to Harness using their email addresses.
    Once they log into Harness, their email addresses are registered as Harness Users.
    For more information, see <a href="/article/mlpksc7s6c-single-sign-on-saml#saml_sso_with_harness_overview">SAML
    SSO with Harness Overview</a>.</div><p>This section describes the steps you must
    perform to use an Okta app for Harness SAML SSO:</p><h4>Okta User Accounts</h4><p>To
    set up a SAML support in your Okta Harness app, ensure that the app has corresponding
    Users in Harness:</p><ol><li>In Harness, add the users you want to set up for
    SAML SSO by inviting them to Harness using the same email addresses that they
    use in your SAML provider.</li><li>In Okta, assign them to your SAML provider
    app.</li></ol><div class="tip-callout">The only user property that must match
    between a Harness User and its corresponding SAML provider user account is its
    <strong>email address</strong>.<br/><br/>Sometimes users might have mixed case
    email addresses in Okta. In these situations, Harness converts the email address
    to lowercase when adding them to Harness.</div><h4>Create App Integration in Okta</h4><ol><li>Log
    in to your Okta administrator account and click <strong>Applications</strong>.</li><li>Click
    <strong>Create App Integration</strong>.<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1624465160362/screenshot-2021-06-23-at-9-40-23-pm.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li><li>The
    <strong>Create a new app integration</strong> dialogue appears. Select <strong>SAML
    2.0</strong> and click <strong>Next</strong>.<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1624466357432/screenshot-2021-06-23-at-10-01-56-pm.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li><li>In
    <strong>General Settings</strong>, enter a name in the <strong>Application label</strong>
    field, and click <strong>Next</strong>.<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1624511721093/screenshot-2021-06-24-at-9-32-10-am.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li><li>You
    are redirected to the <strong>Configure SAML</strong> tab. Copy the SAML Endpoint
    URL from Harness and paste it into <strong>Single sign on URL</strong>. To get
    this URL from Harness, perform the following steps:<ol><li>Login to Harness.</li><li>In
    <strong>Home</strong>, click <strong>Authentication</strong> under <strong>ACCOUNT
    SETUP</strong>. The <strong>Authentication: Configuration</strong> page appears.</li><li>Select
    <strong>+SAML Provider</strong>. The <strong>Add SAML Provider</strong> dialog
    appears.</li><li>Enter a name for your SAML Provider in the <strong>Name</strong>
    field.</li><li>Under <strong>Select a SAML Provider</strong>, select the SAML
    Provider you want to set up (in this case <strong>Okta</strong>).<figure><img
    src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1624523283560/screenshot-2021-06-24-at-1-57-17-pm.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li><li>Once
    you do this, you can see additional controls to set up the SAML Provider.<figure><img
    src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1638519503995/screenshot-2021-11-29-at-5-44-26-pm.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li><li>Copy
    the Endpoint URL under <strong>Enter the SAML Endpoint URL as your Harness application&#39;s
    ACS URL</strong> and paste it in <strong>Single sign on URL</strong> in your Okta
    SAML provider app&#39;s <strong>Configure SAML</strong> tab.<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1638522003503/screenshot-2021-12-03-at-2-28-22-pm.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li></ol></li><li>In
    <strong>Audience URI (SP Entity ID)</strong>, enter <strong>app.harness.io</strong>.
    The SAML application identifier should be always <code>app.harness.io</code>.</li><li>In
    <strong>Default RelayState</strong>, enter a valid URL. This is the page where
    users land after a successful sign-in using SAML into the SP.</li><li>In <strong>Name
    ID format</strong>, enter the username format you are sending in the SAML Response.
    The default format is <strong>Unspecified</strong>.</li><li>In <strong>Application
    username</strong>, enter the default value to use for the username with the application.</li><li>In
    <strong>Attribute Statements (optional)</strong>, enter name in the <strong>Name</strong>
    field, select <strong>Name Format</strong> as <strong>Basic,</strong> and select
    the <strong>Value</strong> as <strong>user.email</strong>.<br/>When you create
    a new SAML integration or modify an existing one, you can define custom attribute
    statements. These statements are inserted into the SAML assertions shared with
    your app. For more information, see <a href="https://help.okta.com/oie/en-us/Content/Topics/Apps/Apps_App_Integration_Wizard_SAML.htm#">Define
    Attribute Statements</a>.</li><li>In <strong>Group Attribute Statements (optional)</strong>,
    enter a name in the <strong>Name</strong> field, select <strong>Name format (optional)</strong>
    as <strong>Basic</strong>, select an appropriate <strong>Filter</strong> and enter
    its value.<br/>If your Okta org uses groups to categorize users, you can add group
    attribute statements to the SAML assertion shared with your app. For more information,
    see <a href="https://help.okta.com/oie/en-us/Content/Topics/Apps/Apps_App_Integration_Wizard_SAML.htm#">Define
    Group Attribute Statements</a>.</li></ol><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1624528754697/screenshot-2021-06-24-at-3-28-26-pm.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure><ol><li>Click
    <strong>Next</strong> and then click <strong>Finish.</strong></li></ol><h4>Okta
    SAML Metadata File</h4><p>You must download the <strong>Identity Provider metadata</strong>
    XML from your Okta app and upload the file into Harness. To do this perform the
    following steps:</p><ol><li>In the Harness Okta app that you just created, click
    the <strong>Sign On</strong> tab, and then click <strong>Edit</strong>.</li><li>Click
    on <strong>Actions</strong> to download the SAML metadata file from your Okta
    provider app.<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1649332242937/image-6.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li><li>In
    Harness&#39; <strong>Add SAML Provider</strong> dialog, under <strong>Upload the
    Identity Provider metadata XML, downloaded from your Okta app</strong>, click
    <strong>Choose File</strong>, and add the SAML metadata file you downloaded from
    your Okta application.</li><li>Uncheck <strong>Enable Authorization</strong>.</li><li>Select
    <strong>Add Entity ID</strong> and enter your custom Entity ID. The default Entity
    ID is <strong>app.harness.io</strong>. The value you enter here will override
    the default Entity ID.</li><li>Click <strong>Add</strong>. The new SSO provider
    is displayed under <strong>Login via SAML</strong>.<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1624532279202/screenshot-2021-06-24-at-4-24-05-pm.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li></ol><h4>Enable
    and Test SSO with Okta</h4><p>Now that Okta is set up in Harness as a SAML SSO
    provider, you can enable and test it.</p><ol><li>To enable the SSO provider, select
    <strong>Login via SAML</strong>.</li><li>In the resulting <strong>Enable SAML
    Provider</strong> dialog, click <strong>TEST</strong> to verify the SAML connection
    you&#39;ve configured.<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1623761820112/screenshot-2021-06-15-at-6-24-26-pm.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure>A
    new browser tab will prompt you to log into your SAML provider (in this case <strong>Okta</strong>).</li><li>Upon
    a successful test, Harness will display the <strong>SAML test successful</strong>
    banner on top.<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1623821000127/screenshot-2021-06-16-at-10-52-31-am.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li><li>Click
    <strong>CONFIRM</strong> to enable SAML SSO in Harness.</li></ol><div class="warning-callout">If
    you are locked out of Harness because of an SSO issue, you can log into Harness
    using the <a href="/article/mlpksc7s6c-single-sign-on-saml#harness_local_login">Harness
    Local Login</a>.</div><ol><li style="counter-increment:li 4" start="5">To fully
    test SSO, log into Harness using another User account. Login using a Chrome Incognito
    window to test SSO so that you can disable SSO in your Harness Administrator account
    if there are any errors.</li><li>Open an Incognito window in Chrome.</li><li>Log
    into Harness using a Harness User account that has a corresponding user account
    email address in the SAML SSO provider. You will be redirected to your SAML SSO
    provider&#39;s login page.</li><li>Log into your SSO Provider using an email address
    for a Harness User. The password does not have to be the same.<br/>You are automatically
    returned to the Harness Manager, and logged into the dashboard using your SSO
    credentials.</li></ol><h4>SAML Authorization with Okta</h4><p>Once you have enabled
    Harness SSO with your Okta app, you can set up and enable SAML authorization in
    Harness using Okta.</p><p>To set up SAML authorization in Harness, link a Harness
    User Group to a user group in Okta. When a user from Okta logs into Harness, they
    are automatically added to the linked Harness User Group and inherit all the RBAC
    settings for that User Group.</p><p>There are two Okta components you need to
    set up SAML authorization in Harness:</p><ul><li><strong>Group Name</strong> -
    The name of the Okta group containing the users you want to authorize in Harness.
    The email addresses registered in this group must be the same as the email addresses
    these users have registered in Harness.</li><li><strong>Group Attribute Name</strong>
    - The Group Attribute Name associated with the Okta app you use for authentication.
    The Group Attribute Name is different from the Okta group name. Your company might
    have many groups set up in Okta. The Group Attribute Name is used to filter groups.</li></ul><p>In
    Harness, you will enter the Group Attribute Name in the SAML SSO provider settings,
    and then you will enter the group name in the Harness User Group to link it to
    the Okta group.</p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1638522298723/screenshot-2021-12-03-at-2-31-34-pm.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure><div
    class="note-callout">Remember that email addresses are how Harness identifies
    Users. Always ensure that the email addresses of your registered Harness Users
    match the Okta users you want to authenticate and authorize.</div><p>To set up
    SAML Authorization with Okta, do the following:</p><ol><li>Set up SAML SSO in
    Harness as described in <a href="/article/mlpksc7s6c-single-sign-on-saml#saml_sso_with_okta_overview">SAML
    SSO with Okta</a>.<br/>You will be authorizing the same Harness Users that are
    authenticated using your SAML provider, so ensure that the email addresses registered
    in Harness are the same email addresses registered in your SAML provider.</li><li>Add
    a user group to your SAML provider, and then add users to the group. The group
    name will be used to link the Harness User Group later. To do this perform the
    following steps:<ol><li>Log in to Okta using Admin Account.</li><li>Click <strong>Groups</strong>,
    under <strong>Directory</strong>. Click <strong>Add Group</strong>. The <strong>Add
    Group</strong> dialog appears.<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1624442623099/screenshot-2021-06-23-at-3-32-31-pm.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li><li>Enter
    a <strong>Name</strong> and <strong>Group Description</strong> for your group.
    Click <strong>Add Group</strong>.</li><li>You are redirected to the <strong>Groups</strong>
    page. Search for the group you created and click on it.</li><li>Click <strong>Manage
    People</strong>. Find and add members to your group.<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1624446569720/screenshot-2021-06-23-at-4-38-36-pm.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure>After
    adding the members to the group we just created, the screen would look like this:<figure><img
    src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1624446804152/screenshot-2021-06-23-at-4-42-05-pm.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure>Both
    members are already registered in Harness using the same email addresses in both
    Harness and the SAML provider.</li></ol></li><li>Ensure that the SAML provider
    group is assigned to the same SAML provider app you use for Harness SAML SSO.
    To do this:<ol><li>In the Okta app, Click on <strong>Groups</strong>, under <strong>Directory</strong>.</li><li>Find
    and select the group that you just created.</li><li>Click <strong>Manage Apps</strong>.<figure><img
    src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1624449003631/screenshot-2021-06-23-at-5-19-06-pm.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li><li>In
    the subsequent screen, find the okta app that you had created earlier and click
    <strong>Assign</strong>.</li><li>Click <strong>Done</strong>.</li><li>Click on
    <strong>Applications</strong> under <strong>Applications</strong>.</li><li>Find
    and select the okta application that you have created.</li><li>Under <strong>Assignments</strong>,
    click <strong>Groups</strong>. You can see your group listed here.<figure><img
    src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1624449469690/screenshot-2021-06-23-at-5-27-04-pm.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li></ol></li><li>Configure
    the <strong>Group Attribute Name</strong> in your SAML app. You will use the Group
    Attribute Name later in Harness when you enable SAML authorization.<br/><br/>Here
    are the steps for adding a <strong>Group Attribute Name</strong> in Okta:<ol><li>In
    <strong>Okta</strong>, click <strong>Applications</strong>, and then click the
    name of the app you use for Harness SAML SSO to open its settings.</li><li>In
    the app, click the <strong>General</strong> tab.</li><li>For <strong>SAML Settings</strong>,
    click <strong>Edit</strong>.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/zy8yjcrqzg/1552517336805/image.png"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure></li><li>In
    <strong>General Settings</strong>, click <strong>Next</strong>.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/zy8yjcrqzg/1552517376166/image.png"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure></li><li>In
    <strong>GROUP ATTRIBUTE STATEMENTS (OPTIONAL)</strong>, in <strong>Name</strong>,
    enter the Group Attribute Name you want to use, such as <strong>dept</strong>.</li><li>In
    <strong>Filter</strong>, select <strong>Matches regex</strong> and enter period
    asterisk (<strong>.*</strong>) in the field. When you are done, it will look something
    like this:<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1636152337166/clean-shot-2021-11-05-at-15-44-53.png"/></figure></li><li>Click
    <strong>Next</strong> and then click <strong>Finish</strong>.</li></ol></li><li>Enable
    Authorization in Harness. Now that you have assigned a group to your SAML app
    and added a Group Attribute Name, you can enable authorization in Harness.<ol><li>In
    <strong>Home</strong>, click <strong>Authentication</strong> under <strong>ACCOUNT
    SETUP</strong>. <strong>The Authentication: Configuration</strong> page appears.</li><li>Click
    to expand the <strong>Login via SAML</strong> section.<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1623842817723/screenshot-2021-06-16-at-4-54-28-pm.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li><li>You
    can see the SSO Provider you have set up listed in this section. Click the vertical
    ellipsis (<strong>︙</strong>) next to the SSO Provider you have set up for SSO
    authentication, and click <strong>Edit</strong>.</li><li>In the <strong>Edit SAML
    Provider</strong> dialog, click <strong>Enable Authorization</strong>.</li><li>In
    <strong>Group Attribute Name,</strong> enter the Group Attribute Name you earlier
    added to your SAML app in your SAML provider.<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1623906289442/screenshot-2021-06-17-at-10-32-24-am.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li><li>Click
    <strong>Add</strong>. The SAML SSO Provider is now set up to use the Group Attribute
    Name for authorization.</li></ol></li><li>Link the SAML SSO Provider to the Harness
    User Group. You can create a new User Group or use an existing Group so long as
    your Harness User account is a member and that User account is registered using
    the same email address you used to register with your SAML provider. For detailed
    instructions on creating a User Group in Harness, see <a href="/article/dfwuvmy33m-add-user-groups">Add
    and Manage User Groups</a>. To link your group, perform the following steps:<ol><li>In
    <strong>Home</strong>, click <strong>Access Control</strong> under <strong>ACCOUNT
    SETUP</strong>.</li><li>Click <strong>User Groups</strong> and then click on the
    User Group you want to link the SAML SSO Provider to<strong>.</strong></li><li>Click
    <strong>Link to SSO Provider Group</strong>.<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1623911033261/screenshot-2021-06-17-at-11-46-33-am.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li><li>In
    the <strong>Link to SSO Provider Group</strong> Dialog, in <strong>Search SSO
    Settings</strong>, select the SAML SSO Provider you have set up.</li><li>In the
    <strong>Group Name</strong>, enter the name of the group you assigned to your
    app in your SAML provider.<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1623911077578/screenshot-2021-06-17-at-11-52-37-am.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li><li>Click
    <strong>Save</strong>.</li></ol></li><li>Test the SAML Authorization by repeating
    steps 5-8 from <a href="https://ngdocs.harness.io/article/mlpksc7s6c-single-sign-on-saml#enable_and_test_sso_with_okta">Enable
    and Test SSO with Okta</a>.</li><li>In your Harness account in the other browser
    window, check the User Group you linked with your SAML provider. The user that
    logged in is now added to the User Group, receiving the authorization associated
    with that User Group.<br/>You can link multiple Harness User Groups with the SAML
    SSO Provider you set up in Harness.<br/>You can also remove a link between a Harness
    User Group and a Harness SAML SSO Provider without losing the User Group members.
    In the Harness User Group, simply click <strong>Delink Group</strong>:<figure><img
    src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1623925677837/screenshot-2021-06-17-at-3-57-17-pm.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure>The
    <strong>Delink Group</strong> dialog appears.<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1623926220240/screenshot-2021-06-17-at-4-06-07-pm.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li></ol><p>Click
    <strong>Retain all members in the user group</strong> and click <strong>Save</strong>.
    The link to the SAML SSO Provider is removed and the Users are still members of
    the User Group.</p><div class="note-callout">You cannot delete a SAML SSO Provider
    from Harness that is linked to a Harness Group. You must first remove the link
    to the SSO Provider from the Group.</div><h3>SAML SSO with Azure</h3><p>The section
    describes the Azure-specific steps you must perform to use an Azure app for Harness
    SAML SSO:</p><div class="note-callout">Make sure the email address used in Harness
    matches the email address in the Azure app for every user.</div><p>The following
    image shows the basic exchange of information between Harness and your Azure app&#39;s
    Single sign-on settings:</p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1638526724228/screenshot-2021-12-03-at-2-18-52-pm.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure><h4>Azure
    User Accounts</h4><p>The Harness User accounts and their corresponding Azure user
    accounts must have the same email addresses.</p><ol><li>Ensure that you have at
    least two corresponding user accounts in both Harness and your Azure app when
    setting up and testing SAML SSO. This allows you to set up the account with a
    Harness Administrator account and test it with a Harness user account.</li></ol><p>The
    following image shows a Harness User Group containing two users and their corresponding
    accounts in the Azure app that will be used for SAML SSO.</p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1624080320384/screenshot-2021-06-19-at-10-54-31-am.png"
    style="max-height:100%;max-width:100%" data-hd-height="100%" data-hd-width="100%"/></figure><h4>Endpoint
    URL for Azure</h4><p>You must enter the <strong>Harness SAML Endpoint URL</strong>
    from Harness in your Azure app <strong>Reply URL</strong>:</p><ol><li>In your
    Azure app, click <strong>Single sign-on</strong>. The SSO settings for the Azure
    app are displayed.<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1624080723449/screenshot-2021-06-19-at-9-59-22-am.png"
    style="max-height:100%;max-width:100%" data-hd-height="100%" data-hd-width="100%"/></figure></li></ol><p></p><ol><li
    style="counter-increment:li 1" start="2">In <strong>Basic SAML Configuration</strong>,
    click the edit icon (pencil).</li><li>Enter <strong>app.harness.io</strong> in
    the <strong>Identifier (Entity ID)</strong> field.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/woihlvoeac/1553552929086/image.png"
    style="max-height:30%;max-width:30%" data-hd-height="30%" data-hd-width="30%"/></figure>Next,
    you will use the <strong>SAML SSO Provider</strong> settings in Harness to set
    up your Azure app <strong>Single sign-on</strong>.</li></ol><div class="note-callout">For
    <a href="/article/tb4e039h8x-harness-on-premise-overview">Harness Self-Managed
    Enterprise Edition</a>, replace <strong>app.harness.io</strong> with your custom
    URL.<br/>If you use a custom Harness subdomain in any Harness version, like <strong>example.harness.io</strong>,
    use that URL.</div><ol><li style="counter-increment:li 3" start="4">In <strong>Home</strong>,
    click <strong>Authentication</strong> under <strong>ACCOUNT SETUP</strong>. <strong>The
    Authentication: Configuration</strong> page appears.</li><li>Click <strong>+SAML
    Provider</strong>. The <strong>Add SAML Provider</strong> page appears.<figure><img
    src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1624081433137/screenshot-2021-06-16-at-3-52-29-pm.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li><li>In
    <strong>Name</strong>, enter a name for the SAML SSO Provider.</li><li>Select
    <strong>Azure</strong> under <strong>Select a SAML Provider</strong>. The settings
    for Azure setup are displayed:<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1638526849849/screenshot-2021-12-03-at-2-08-03-pm.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li><li>Copy
    the <strong>Harness SAML Endpoint URL</strong> from the <strong>Add SAML Provider</strong>
    dialog, and paste it in the <strong>Reply URL</strong> in your Azure app.<figure><img
    src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1638526792915/screenshot-2021-12-03-at-2-18-52-pm.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li><li>Click
    <strong>Save</strong> on the Azure App SAML Settings page.</li></ol><h4>User Attributes
    and Claims</h4><p>Next, you need to ensure that Harness Users&#39; email addresses
    will identify them when they log in via Azure. To do this, you set up the <strong>Single
    sign-on</strong> section of your Azure app to use the <strong>User name</strong>
    email address as the method to identify users.</p><p>The Azure users that are
    added to your Azure app must have their email addresses listed as their <strong>User
    name.</strong></p><p>To set this <strong>User name</strong> email address as the
    method for identifying users, in the Azure app <strong>Single sign-on</strong>
    section, the Azure app must use the <strong>user.userprincipalname</strong> as
    the <strong>Unique User Identifier</strong>, and <strong>user.userprincipalname</strong>
    must use <strong>Email address</strong> as the <strong>name identifier format</strong>.</p><p>To
    set this up in your Azure app, do the following:</p><ol><li>In your Azure app,
    in the <strong>Single sign-on</strong> blade, in <strong>User Attributes &amp;
    Claims</strong>, click the edit icon (pencil). The <strong>User Attributes &amp;
    Claims</strong> settings appear.<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1624128469829/screenshot-2021-06-20-at-12-16-55-am.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li><li>For
    <strong>Unique User identifier value</strong>, click the edit icon. The <strong>Manage
    claims</strong> settings appear.<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1624128631526/screenshot-2021-06-20-at-12-19-27-am.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li><li>Click
    <strong>Choose name identifier format</strong>, and select <strong>Email address</strong>.</li><li>In
    <strong>Source attribute</strong>, select <strong>user.userprincipalname</strong>.</li><li>Click
    <strong>Save</strong>, and then close <strong>User Attributes &amp; Claims</strong>.</li></ol><div
    class="note-callout">If your Azure users are set up with their email addresses
    in some field other than <strong>User name</strong>, just ensure that the field
    is mapped to the <strong>Unique User Identifier</strong> in the Azure app and
    the <strong>name identifier format</strong> is <strong>Email address</strong>.</div><h4>Azure
    SAML Metadata File</h4><p>You must download the <strong>Federation Metadata XML</strong>
    from your Azure app and upload the file into Harness.</p><ol><li>Download the
    <strong>Federation Metadata XML</strong> from your Azure app and upload it using
    <strong>Upload the identity Provider metadata xml downloaded from your Azure App</strong>
    in the <strong>Add SAML Provider</strong> settings in Harness.<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1624128963511/screenshot-2021-06-20-at-12-24-53-am.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li><li>Select
    <strong>Add Entity ID</strong> and enter your custom Entity ID. The default Entity
    ID is <strong>app.harness.io</strong>. The value you enter here will override
    the default Entity ID.</li><li>Click <strong>Add</strong>. The new Azure SAML
    Provider is added.<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1624129312698/screenshot-2021-06-20-at-12-30-50-am.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li></ol><h4>Enable
    and Test SSO with Azure</h4><p>Now that Azure is set up in Harness as a SAML SSO
    provider, you can enable and test it.</p><p>You can test the Azure app SSO from
    within Azure if you are logged into Azure using an Azure user account that has
    the following:</p><ul><li>A corresponding Harness User account with the same email
    address.</li><li>The Azure user account is in the Azure app <strong>Users and
    groups</strong> settings.</li><li>The Azure user account has the Global Administrator
    Directory role in Azure.</li></ul><p>To test Azure SSO using Azure, do the following:</p><ol><li>In
    the Azure app, click <strong>Single sign-on</strong>, and then at the bottom of
    the <strong>Single sign-on</strong> settings, click <strong>Test</strong>.<figure><img
    src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1624129822307/screenshot-2021-06-20-at-12-39-43-am.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li><li>In
    the <strong>Test</strong> panel, click <strong>Sign in as current user</strong>.
    If the settings are correct, you are logged into Harness. If you cannot log into
    Harness, the <strong>Test</strong> panel will provide debugging information. See
    also <a href="https://docs.microsoft.com/en-us/azure/active-directory/develop/howto-v1-debug-saml-sso-issues?WT.mc_id=UI_AAD_Enterprise_Apps_Testing_Experience"
    target="_blank">Debug SAML-based single sign-on to applications in Azure Active
    Directory</a> from Azure.</li></ol><p>To test Azure SSO using Harness, do the
    following:</p><ol><li>In <strong>Harness</strong>, in <strong>ACCOUNT SETUP</strong>-&gt;<strong>Authentication</strong>,
    select <strong>Login via SAML</strong>, to enable SAML SSO using the Azure provider.</li><li>Open
    a new Chrome Incognito window to test the SSO login using a Harness User account
    other than the one you are currently logged in with.</li><li>Using one of the
    user account email addresses that are shared by Harness and Azure, log into Harness.
    When you log into Harness, you are prompted with the Microsoft Sign in dialog.</li><li>Enter
    the Azure user name for the user (most often, the email address), enter the Azure
    password, and click <strong>Sign in</strong>.</li></ol><h4>SAML Authorization
    with Azure</h4><p>Once you have enabled Harness SSO with your Azure app, you can
    set up and enable SAML authorization in Harness using Azure.</p><p>To set up SAML
    authorization in Harness, you link a Harness User Group to a user group assigned
    to your Azure app. When a user from your Azure app logs into Harness, they are
    automatically added to the linked Harness User Group and inherit all the RBAC
    settings for that Harness User Group.</p><p>Below is the Harness SAML settings
    you need from Azure to set up SAML authorization in Harness:</p><ul><li><strong>Group
    Attribute Name</strong> - In Azure, this value is obtained from the <strong>Group
    Claims</strong> in the Azure app <strong>User Attributes &amp; Claims</strong>
    settings.</li></ul><p>For Harness <strong>Group Attribute Name</strong>, here
    is the Harness <strong>SAML Provider</strong> setting on the left and their corresponding
    Azure <strong>Group Claims</strong> settings on the right:</p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1624130885345/screenshot-2021-06-20-at-12-57-22-am.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure><p>To
    set up Azure Authorization in Harness, do the following:</p><ol><li>In Azure,
    add the <strong>Group Claim</strong> (Name and Namespace) to the Azure app.<ol><li>In
    your Azure app, click <strong>Single sign-on</strong>, and then in <strong>User
    Attributes &amp; Claims</strong>, click edit (pencil icon).<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1624163692661/screenshot-2021-06-20-at-8-39-58-am.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li><li>In
    <strong>User Attributes &amp; Claims</strong>, edit the groups claim. The <strong>Group
    Claims</strong> settings appear.<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1624164084579/screenshot-2021-06-20-at-10-10-08-am.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li><li>Click
    the <strong>All groups</strong> option and then enable <strong>Customize the name
    of the group claim</strong>.</li><li>In <strong>Name</strong>, enter a name to
    use to identify the Harness Group Attribute Name.</li><li>In <strong>Namespace</strong>,
    enter a namespace name.</li><li>Click <strong>Save</strong>. <strong>User Attributes
    &amp; Groups</strong> now display the group claim you created.</li><li>Close <strong>User
    Attributes &amp; Groups</strong>.</li></ol></li><li>In Harness, enter the Group
    Claim name and namespace in the SAML SSO Provider <strong>Group Attribute Name</strong>
    field.<ol><li>Open the SAML SSO Provider dialog, and enable the <strong>Enable
    Authorization</strong> setting. You need to enable <strong>Enable Authorization</strong>
    in order to select this SSO Provider when you link a Harness User Group for authorization.</li><li>Enter
    the Group Claim name and namespace in the <strong>Group Attribute Name</strong>
    field in the same format as a Claim Name (<code>namespace/name</code>). The SAML
    SSO Provider dialog will look something like this:<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1624165975339/screenshot-2021-06-20-at-10-42-10-am.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li><li>Click
    <strong>Save</strong>. Authorization and the Group Attribute Name are set up.
    Next, you need to set up your Azure and Harness groups.</li></ol></li><li>In Azure,
    ensure the Azure users with corresponding Harness accounts belong to an Azure
    group. Here is an Azure group named <strong>ExampleAzureGroup</strong> with two
    members:<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1624167886226/screenshot-2021-06-20-at-11-13-58-am.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li><li>Ensure
    that the Azure group is assigned to the Azure app. Here you can see the <strong>ExampleAzureGroup</strong>
    group in the Azure app&#39;s <strong>Users and groups</strong>:<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1624204786831/screenshot-2021-06-20-at-9-28-06-pm.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li><li>Link
    the Harness User Group to the Azure group using the Azure group Object ID.<ol><li>In
    Azure, copy the Azure group <strong>Object ID</strong>.<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1624205245618/screenshot-2021-06-20-at-9-35-43-pm.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li><li>In
    Harness, create a new User Group or open an existing User Group.</li><li>In <strong>Home</strong>,
    click <strong>Access Control</strong> under <strong>ACCOUNT SETUP</strong>.</li><li>Click
    <strong>User Groups</strong> and then click on the User Group you want to link
    the SAML SSO Provider to<strong>.</strong></li><li>Click <strong>Link to SSO Provider
    Group</strong>.<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1624249799143/screenshot-2021-06-20-at-9-39-35-pm.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li></ol><ol><li
    style="counter-increment:li 5" start="6">In the <strong>Link to SSO Provider Group</strong>
    dialog, in <strong>SSO Provider</strong>, select the Azure SSO Provider you set
    up, and in <strong>Group Name</strong>, paste the Object ID you copied from Azure.
    When you are done, the dialog will look something like this:<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1624250324806/screenshot-2021-06-21-at-10-07-01-am.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li><li>Click
    <strong>Save</strong>. The User Group is now linked to the SAML SSO Provider and
    Azure group Object ID.</li></ol></li><li>Test Authorization.<ol><li>Open a new
    Chrome Incognito window to test the authorization using a Harness User account
    other than the one you are currently logged in with.</li><li>Log into Harness
    using the user email address, and sign in using the Azure username and password.
    If you are already logged into Azure in Chrome, you might be logged into Harness
    automatically.</li><li>In the linked Harness User Group, ensure that the Harness
    User account you logged in with was added.</li></ol></li></ol><p>The Harness User
    is now added and the RBAC settings for the Harness User Group are applied to its
    account. For more information, see <a href="/article/dfwuvmy33m-add-user-groups">Add
    and manage User Groups</a>.</p><h3>SAML SSO with Azure Active Directory</h3><p>You
    can use Azure Active Directory (AD) for SAML SSO with Harness, enabling AD users
    to log into Harness using their AD credentials.</p><p>For detailed steps on adding
    SAML SSO with Active Directory, follow the steps in the tutorial <a href="https://docs.microsoft.com/en-us/azure/active-directory/saas-apps/harness-tutorial"
    target="_blank">Azure Active Directory single sign-on (SSO) integration with Harness</a>
    from Microsoft.</p><div class="note-callout">Users are not created as part of
    the SAML SSO integration. Users are invited to Harness using their email addresses.
    Once they log into Harness, their email addresses are registered as Harness Users.
    For more information, see <a href="/article/mlpksc7s6c-single-sign-on-saml#saml_sso_with_harness_overview">SAML
    SSO with Harness Overview</a>.</div><h4>Users in over 150 Groups</h4><div class="note-callout">Currently,
    this feature is behind the feature flag <code>AZURE_SAML_150_GROUPS_SUPPORT</code>.
    Contact <a href="mailto:support@harness.io" target="_blank">Harness Support</a> to
    enable the feature.</div><p>When users have large numbers of group memberships,
    the number of groups listed in the token can grow the token size. Azure Active
    Directory limits the number of groups it will emit in a token to 150 for SAML
    assertions.</p><p>If a user is a member of a larger number of groups, the groups
    are omitted and a link to the Graph endpoint to obtain group information is included
    instead.</p><p>To invoke the API Harness will need <strong>Client ID</strong> and <strong>Client
    Secret</strong> for your registered app.</p><p>To get this information, perform
    the following steps:</p><ol><li>In your Azure account, go to <strong>App registrations</strong>.</li><li>Click
    on your app. Copy the Application (client) ID and paste it in <strong>Client ID</strong>
    in your Harness account.</li><li>In your Azure account, go to <strong>App registrations</strong>.
    Click <strong>Certificates and Secrets</strong>.</li><li>Click New Client Secret.</li><li>Add
    a description and click Add.</li><li>Make sure to copy this secret and save it
    as an encrypted text secret. For detailed steps to create an encrypted text in
    Harness, see <a href="/article/osfw70e59c-add-use-text-secrets">Use Encrypted
    text Secrets</a>.</li><li>Select the above secret reference in the Client Secret
    field in your Harness account.<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1644500648767/screenshot-2022-02-10-at-7-12-28-pm.png"
    style="max-height:100%;max-width:100%" data-hd-height="100%" data-hd-width="100%"/></figure></li></ol><h3>SAML
    SSO with OneLogin</h3><p>To set up OneLogin as a SAML SSO provider on Harness,
    you exchange the necessary information between the OneLogin Harness application
    and Harness. The following sections cover Authentication steps, followed by Authorization
    steps.</p><h4>OneLogin Authentication on Harness</h4><p>Enabling OneLogin authentication
    on Harness requires configuration on both platforms, as described in these sections:</p><h5>Exchange
    Harness Consumer URL and OneLogin Metadata</h5><ol><li style="counter-increment:li
    0" start="1">In <strong>Home</strong>, click <strong>Authentication</strong> under <strong>ACCOUNT
    SETUP</strong>. <strong>The Authentication: Configuration</strong> page appears.</li><li>Click <strong>+SAML
    Provider</strong>. The <strong>Add SAML Provider</strong> page appears.</li><li>In<strong> Name</strong>,
    enter a name for the SAML SSO Provider.</li><li>Select <strong>OneLogin</strong>
    under <strong>Select a SAML Provider</strong>. The settings for OneLogin setup
    are displayed.</li><li>Copy the provided URL under <strong>Ener the SAML Endpoint
    URL, as your Harness OneLogin application&#39;s ACS URL</strong>, to clipboard.</li><li>In
    OneLogin, add the <strong>Harness</strong> app (for SaaS setup) or <strong>Harness
    (On Prem)</strong> app for Harness Self-Managed Enterprise Edition setup. To do
    so, perform the following steps:<ol><li>Log in to OneLogin.</li><li>Click <strong>Administration</strong>.</li><li>Under
    the <strong>Applications</strong> tab, click <strong>Applications</strong>.</li><li>Click
    <strong>Add App</strong>.</li><li>Find <strong>Harness</strong> or <strong>Harness
    (On Prem)</strong> based on your setup, and then click the app.<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1624252240561/screenshot-2021-06-21-at-10-39-23-am.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li></ol></li><li>In
    <strong>Configuration</strong>, paste this URL into the <strong>SCIM Base URL</strong> field.<figure><img
    src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1624253439709/screenshot-2021-06-21-at-10-57-59-am.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li><li>Skip
    all other <strong>Application Details</strong> fields, and click <strong>Save</strong>.</li><li>Navigate
    to OneLogin&#39;s <strong>Applications</strong> &gt; <strong>SSO</strong> tab.
    At the upper right, select <strong>More Actions</strong> &gt; <strong>SAML Metadata</strong>.<figure><img
    src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1624253707043/screenshot-2021-06-21-at-11-03-41-am.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li><li>
    From the resulting dialog, download the .xml authentication file that you&#39;ll
    need to upload to Harness.</li></ol><h5>Assign Users to Roles</h5><ol><li>In OneLogin,
    select <strong>Users</strong> &gt; <strong>Users</strong>.<br/><div class="tip-callout">If
    you prefer to assign <em>groups</em> to roles, instead start at <strong>Users</strong>
    &gt; <strong>Groups</strong>, and modify the following instructions accordingly.</div></li><li>Search
    for a user that you want to add to Harness.<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1624260142185/screenshot-2021-06-21-at-12-51-41-pm.png"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure></li><li>Click
    to select the user.</li><li>The <strong>Users</strong> page appears. Click the
    <strong>Applications</strong> tab.</li><li>Click the <strong>+</strong> button
    at the upper right to assign an Application.</li><li>Select the Application, then
    click <strong>Continue</strong>.</li><li>Repeat this section for other users (or
    groups) that you want to add to Harness.</li></ol><h5>Enable OneLogin as a Harness
    SSO Provider</h5><ol><li style="counter-increment:li 0" start="1">In <strong>Home</strong>,
    click <strong>Authentication</strong> under <strong>ACCOUNT SETUP</strong>. <strong>The
    Authentication: Configuration</strong> page appears.</li><li>Click to expand the <strong>Login
    via SAML</strong> section.<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1624260860334/screenshot-2021-06-16-at-4-54-28-pm.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li><li>You
    can see the SSO Provider you have setup listed in this section. Click the vertical
    ellipsis (<strong>︙</strong>) next to the SSO Provider you have set up for SSO
    authentication, and click <strong>Edit</strong>.</li><li>Use <strong>Choose File</strong>
    to upload the .xml file that you obtained from OneLogin.</li><li>Deselect <strong>Enable
    Authorization</strong>.</li><li>Select <strong>Add Entity ID</strong> and enter
    your custom Entity ID. The default Entity ID is <strong>app.harness.io</strong>.
    The value you enter here will override the default Entity ID.</li><li>Click <strong>Add</strong>.</li><li>Click
    <strong>Login via SAML</strong> toggle, to enable your new provider.</li><li>In
    the resulting <strong>Enable SAML Provider</strong> dialog, click <strong>TEST</strong> to
    verify the SAML connection you&#39;ve configured.<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1624261327692/screenshot-2021-06-15-at-6-24-26-pm.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure></li><li>Once
    the test is successful, click <strong>Confirm</strong> to finish setting up OneLogin
    authentication.</li></ol><h4>OneLogin Authorization on Harness</h4><p>Once you&#39;ve
    enabled OneLogin authentication on Harness, refer to the below sections to enable
    authorization between the two platforms:</p><h5>Assign Roles to Users</h5><p>Harness’
    SAML authorization replicates OneLogin Roles as Harness User Groups. Here is how
    to begin mapping between these entities.</p><ol><li>From OneLogin&#39;s, menu,
    select <strong>Users</strong> &gt; <strong>Users</strong>.</li><li>Find and select
    a user, assigned to Harness, to assign appropriate OneLogin Roles.</li><li>Click
    the <strong>Applications</strong> tab.</li><li>Select the specific Roles you want
    to assign to this user.</li><li>Click <strong>Save User</strong> at the upper
    right.</li><li>Repeat this section for other users to whom you want to assign
    Roles.</li></ol><h4>Define Parameters</h4><ol><li>Select <strong>Applications</strong> &gt; <strong>Parameters</strong>,
    then select the <code>+</code> button to add a new Parameter.</li><li>In the resulting <strong>New
    Field</strong> dialog, assign a <strong>Field name</strong> (for example <strong>Groups</strong>).<figure><img
    src="https://files.helpdocs.io/kw8ldg1itf/articles/zy8yjcrqzg/1583946837298/image.png"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure></li><li>Select
    <strong>Include in SAML assertion</strong> and <strong>Multi-value parameter</strong>.
    Then click <strong>Save</strong>.</li><li>Back on the <strong>Parameters</strong> tab,
    select your new <strong>Groups</strong> field.</li><li>In the resulting <strong>Edit
    Field Groups</strong> dialog, set <strong>Default if no value selected</strong> to <strong>User
    Roles</strong>. Below that, select <strong>Semicolon Delimited input (Multi-value
    output)</strong>. Then select <strong>Save</strong>.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/xhx9et5f44/1583459407673/image.png"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure></li><li>Select
    <strong>Save</strong> again at the <strong>Parameters</strong> page&#39;s upper
    right.</li></ol><h5>Sync Users in Harness</h5><ol><li>In <strong>Home</strong>,
    click <strong>Authentication</strong> under <strong>ACCOUNT SETUP</strong>. <strong>The
    Authentication: Configuration</strong> page appears.</li><li>Click to expand the <strong>Login
    via SAML</strong> section.<figure><a href="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1623842817723/screenshot-2021-06-16-at-4-54-28-pm.png"><img
    src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1623842817723/screenshot-2021-06-16-at-4-54-28-pm.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></a></figure></li><li>You
    can see the SSO Provider you have set up listed in this section. Click the vertical
    ellipsis (<strong>︙</strong>) next to the SSO Provider you have set up for SSO
    authentication, and click <strong>Edit</strong>.<figure><a href="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1623849245925/screenshot-2021-06-16-at-6-40-29-pm.png"><img
    src="https://files.helpdocs.io/i5nl071jo5/articles/mlpksc7s6c/1623849245925/screenshot-2021-06-16-at-6-40-29-pm.png"
    style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></a></figure></li><li>In
    the <strong>Edit SAML Provider</strong> dialog, click <strong>Enable Authorization</strong>.</li><li>In <strong>Group
    Attribute Name</strong>, enter the name of the <strong>Field Group</strong> you
    configured in OneLogin.</li><li>Click <strong>Save</strong>.</li><li>Under <strong>ACCOUNT
    SETUP c</strong>lick <strong>User Groups.</strong></li><li>Click on the User Group
    you want to link the SAML SSO Provider to<strong>.</strong></li><li>Click <strong>Link
    to SSO Provider Group</strong>.</li><li>In the <strong>Link to SSO Provider Group</strong> Dialog,
    in <strong>Search SSO Settings</strong>, select the SAML SSO Provider you have
    set up.</li><li>In the <strong>Group Name</strong>, enter the name of the Field
    Group you configured in OneLogin.</li><li>Click <strong>Save</strong>.</li></ol><h5>Test
    the Integration</h5><p>After you&#39;ve synced Users between OneLogin and Harness,
    users will be assigned to the designated Harness User Group upon your next login
    to Harness. To test whether OneLogin authentication and authorization on Harness
    are fully functional do the following:</p><ol><li>In Chrome, open an Incognito
    window, and navigate to Harness.</li><li>Log into Harness using the email address
    of a Harness User that is also used in the SAML provider group linked to the Harness
    User Group.<br/>When the user submits their email address in Harness Manager,
    the user is redirected to the SAML provider to log in.</li><li>Log into the SAML
    provider using the same email that the user is registered with, within Harness.<br/>Once
    the user logs in, the user is redirected to Harness and logged into Harness using
    the SAML credentials.</li><li>In your Harness account in the other browser window,
    check the User Group you linked with your SAML provider. The user that logged
    in is now added to the User Group, receiving the authorization associated with
    that User Group.</li></ol><div class="note-callout">You cannot delete a SAML SSO
    Provider from Harness that is linked to a Harness Group. You must first remove
    the link to the SSO Provider from the Group.</div><h3>Harness Local Login</h3><p>To
    prevent lockouts or in the event of OAuth downtime, a User in the Harness Administrators
    Group can use the <a href="http://app.harness.io/auth/#/local-login"><strong>Local
    Login</strong></a> URL (http://app.harness.io/auth/#/local-login) to log in and
    update the OAuth settings.</p><p></p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/rb33l4x893/1638374284838/screenshot-2021-12-01-at-9-27-06-pm.png"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><ol><li>Log
    in using <strong>Harness Local Login</strong>.</li><li>Change the settings to
    enable users to log in.</li></ol><div class="note-callout">You can disable Local
    Login using the feature flag <code>DISABLE_LOCAL_LOGIN</code>. Contact <a href="mailto:support@harness.io"
    target="_blank">Harness Support</a> to enable the feature flag.</div><p></p>'
  slug: single-sign-on-saml
  tags:
  - AccessManagement
  - Authentication
  - SAML
  is_live: true
