<p>This topic describes Pipeline stage and step <strong>Conditional Executional</strong> settings.</p><h3>Review: Failure Strategy takes Precedence over Conditional Execution</h3><p>Harness Pipeline stages and steps both include <strong>Conditional Execution</strong> and <strong>Failure Strategy</strong> settings:</p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/i36ibenkq2/1642460921687/clean-shot-2022-01-17-at-15-08-32.png"/></figure><p></p><p>Using these settings together in multiple stages requires some consideration.</p><p>Let&#39;s say you have a Pipeline with two stages: <strong>stage 1</strong> followed by <strong>stage 2</strong>.</p><p>Stage 2&#39;s <strong>Conditional Execution</strong> is set to <strong>Execute this step only if prior stage or step failed</strong>. Stage 1&#39;s <strong>Failure Strategy</strong> is set to <strong>Rollback Stage on All Errors</strong>.</p><p>If stage 1 has any error it is rolled back and so it is not considered a failure. Hence, the stage 2&#39;s <strong>Conditional Execution</strong> is not executed.</p><p>In order to get stage 2 to execute, you can set the stage 1 <strong>Failure Strategy</strong> to <strong>Ignore Failure</strong>. Rollback will not occur and stage 2&#39;s <strong>Conditional Execution</strong> is executed.</p><p>In general, if you want to run particular steps on a stage failure, you should add them to stage&#39;s <strong>Rollback</strong> section.</p><h3>Review: Stage and Step Priority</h3><p>The stage Conditional Execution applies to all steps that do not have their own Conditional Execution. A step&#39;s Conditional Execution overrides its stage&#39;s Conditional Execution.</p><h3>Stage Conditions</h3><h4>Execute This Stage if Pipeline Execution is Successful so Far</h4><p>Select this option if you only want this stage to run when all previous stages were successful.</p><p>This is the default setting and used most of the time.</p><h4>Always execute this stage</h4><p>Select this option if you always want this stage to run regardless of the success or failure of previous stages.</p><h4>Execute This Stage Only if Prior Pipeline or Stage Failed</h4><p>Select this option if you always want this stage to run only if the prior Pipeline or stage failed.</p><h4>And execute this stage only if the following JEXL Condition evaluates to True</h4><p>Only execute this stage is a <a href="http://commons.apache.org/proper/commons-jexl/reference/examples.html" target="_blank">JEXL expression</a> is met (evaluates to <strong>true</strong>).</p><p>In the JEXL expression, you could use any of the Pipeline variables, including the output of any previous steps.</p><p>Examples:</p><ul><li><code>&lt;+steps.step1.status&gt; == “SUCCESS”</code></li><li><code>&lt;+steps.step1.currentStatus&gt; == “SUCCESS”</code></li><li><code>&lt;+environment.name&gt; != “QA”</code></li></ul><p>See <a href="/article/lml71vhsim-harness-variables">Built-in Harness Variables Reference</a>.</p><h3>Step Conditions</h3><h4>Execute this step if the stage execution is successful thus far</h4><p>Select this option if you only want this step to run when all previous steps were successful.</p><p>This is the default setting and used most of the time.</p><h4>Always execute this step</h4><p>Select this option if you always want this step to run regardless of the success or failure of previous steps.</p><h4>Execute this step only if prior stage or step failed</h4><p>Select this option if you always want this step to run only if the prior stage or step failed.</p><h4>And execute this step only if the following JEXL Condition evaluates to True</h4><p>Only execute this step is a <a href="http://commons.apache.org/proper/commons-jexl/reference/examples.html" target="_blank">JEXL expression</a> is met (evaluates to <strong>true</strong>).</p><p>In the JEXL expression, you could use any of the Pipeline variables, including the output of any previous steps.</p><p>Examples:</p><ul><li><code>&lt;+steps.step1.status&gt; == “SUCCESS”</code></li><li><code>&lt;+steps.step1.currentStatus&gt; == “SUCCESS”</code></li><li><code>&lt;+environment.name&gt; != “QA”</code></li></ul><p>For more information on variable expressions, go to <a href="/article/lml71vhsim-harness-variables">Built-in and Custom Harness Variables Reference</a>.</p><h3>Variable Expressions in Conditional Execution Settings</h3><p>Stages and Steps support variable expressions in the JEXL conditions of their <strong>Conditional Execution</strong> settings.</p><p>You can only use variable expressions in the JEXL conditions that can be resolved <u>before</u> the stage.</p><p>Since <strong>Conditional Execution</strong> settings are used to determine <u>if</u> the stage should be run, you cannot use variable expressions that can&#39;t be resolved <u>until</u> the stage is run.</p><h3>Deployment Status</h3><p>Deployment status values are a Java enum. The list of values can be seen in the Deployments <strong>Status</strong> filter:</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/lml71vhsim/1657643717451/clean-shot-2022-07-12-at-09-35-08.png"/></figure><p>You can use any status value in a JEXL condition. For example, <code>&lt;+pipeline.stages.stage1.status&gt; == &#34;FAILED&#34;</code>.</p><p></p>