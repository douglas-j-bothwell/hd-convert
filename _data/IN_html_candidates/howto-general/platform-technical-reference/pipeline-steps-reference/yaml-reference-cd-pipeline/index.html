<p>This topic describes the YAML schema for a Pipeline.</p><p>It includes common examples of the major schema entries.</p><div class="note-callout">New to Harness YAML? See <a href="/article/1eishcolt3-harness-yaml-quickstart">Harness YAML Quickstart</a>.</div><p>In this topic:</p><ul><li><a href="#visual_summary">Visual Summary</a></li><li><a href="#viewing_the_yaml_schema">Viewing the YAML Schema</a></li><li><a href="#pipeline_studio_yaml_editor">Pipeline Studio YAML Editor</a></li><li><a href="#autocomplete_and_command_palette">Autocomplete and Command Palette</a></li><li><a href="#limitations">Limitations</a></li><li><a href="#schema_overview">Schema Overview</a></li><li><a href="#conventions">Conventions</a></li><li><a href="#pipeline">Pipeline</a></li><li><a href="#stage">Stage</a></li><li><a href="#service">Service</a></li><li><a href="#infrastructure">Infrastructure</a></li><li><a href="#execution">Execution</a></li><li><a href="#steps_and_step_groups">Steps and Step Groups</a></li><li><a href="#fixed_value_runtime_input_and_expression">Fixed Value, Runtime Input, and Expression</a></li><li><a href="#flow_control">Flow Control</a></li><li><a href="#notification_rules">Notification Rules</a></li><li><a href="#triggers">Triggers</a></li><li><a href="#input_sets_and_overlays">Input Sets and Overlays</a></li><li><a href="#connectors">Connectors</a></li></ul><h3>Visual Summary</h3><p>Here&#39;s a very quick video showing you how to build a Pipeline using YAML:</p><p></p><div class="hd--embed" data-provider="YouTube" data-thumbnail="https://i.ytimg.com/vi/XzRGAdqIzPY/hqdefault.jpg"><iframe width="200" height="150" src="https://www.youtube.com/embed/XzRGAdqIzPY?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div><h3>Viewing the YAML Schema</h3><p>The Harness YAML schema is over 20k lines long and we are investigating how to expose it in a way that makes it easy to navigate.</p><p>In the meantime, you can use <a href="https://developer.chrome.com/docs/devtools/" target="_blank">Chrome DevTools</a> to view the schema:</p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/xs2dfgq7s2/1642802731714/clean-shot-2022-01-21-at-14-00-58-2-x.png"/></figure><p></p><h3>Pipeline Studio YAML Editor</h3><p>The Pipeline Studio includes visual and YAML editors.</p><p>The best way to get started with YAML is to do a CI or CD quickstart and then view the YAML in Pipeline Studio.</p><p>See â€‹<a href="/category/c9j6jejsws">CD Quickstarts</a> and <a href="/category/pjovrkldfq">CI Quickstarts</a>.</p><p>The YAML editor validates YAML before allowing you to save it.</p><p>To learn how to use the YAML editor, see <a href="/article/1eishcolt3-harness-yaml-quickstart">Harness YAML Quickstart for CD</a>.</p><h3>Autocomplete and Command Palette</h3><p>The YAML editor has an autocomplete feature that makes it very easy to see what entries are available.</p><p>The keyboard command for autocomplete is <code>Ctrl + Space</code>.</p><p></p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/xs2dfgq7s2/1633374095047/clean-shot-2021-10-04-at-12-01-28.png"/></figure><p>If an entry already has a value, the autocomplete will not show you other options. You need to delete the value and then enter <code>Ctrl + Space</code>.</p><p>The command palette keyboard command is <code>F1</code>.</p><p></p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/xs2dfgq7s2/1633374117761/clean-shot-2021-10-04-at-12-01-51.png"/></figure><p>The command palette displays the keyboard shortcuts for all commands.</p><h3>Limitations</h3><p>The visual editor lets you create Connectors inline but the YAML editor does not. For the YAML editor you need the entity Id of the Connector first. Typically, the Id is entered as the value for the <code>connectorRef</code> key.</p><p>This is a minor limitation as once you have entered in the Id you can configure the rest of the settings in YAML using autocomplete.</p><p>For example, here is a Connector with the name <code>GCP Example</code> and Id <code>GCP_Example</code>. You can see the Id used in the YAML as <code>connectorRef: GCP_Example</code>:</p><table><tbody><tr><td><p><strong>Connector</strong></p></td><td><p><strong>YAML</strong></p></td></tr><tr><td><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/xs2dfgq7s2/1633374510049/clean-shot-2021-10-04-at-12-08-15.png"/></figure></td><td><pre class="hljs yaml">...<br/>type: Gcr<br/>spec:<br/>    connectorRef: GCP_Example<br/>    imagePath: library/bar<br/>    registryHostname: gcr.io<br/>    tag: &lt;+input&gt;<br/>identifier: foo<br/>...</pre></td></tr></tbody></table><p></p><p>Once you have entered the Id in <code>connectorRef</code>, you can use autocomplete to view the remaining settings:</p><p></p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/xs2dfgq7s2/1633374621526/clean-shot-2021-10-04-at-12-10-14.png"/></figure><h3>Schema Overview</h3><p>Harness Pipeline YAML lets you model your release process declaratively. Each Pipeline entity, component, and setting has a YAML entry.</p><h4>Entries</h4><p>Entries are standard YAML associative arrays using <code>key: value</code>.</p><p>Settings are not quoted.</p><h4>Indentation</h4><p>Whitespace indentation is 4 spaces.</p><h3>Conventions</h3><p>Pipeline syntax uses the following conventions:</p><ul><li>Quotes indicate an empty string. Values do not need quotes. Once you enter a value and save the quotes are removed.</li><li>Entries are listed as <code>key: keyword</code>. The key is a data type that corresponds to a setting such as <code>skipResourceVersioning</code>. The keyword is a literal definition for the setting, like <code>false</code> or <code>K8sManifest</code>.</li><li>Brackets indicate an inline series branch (an array of the data type). For example <code>variables: []</code>. To edit, you delete the brackets, enter a new line, and enter a dash <code>-</code>. Now you can use autocomplete to see the available entries.</li><li>Curly braces indicate an array separated by new lines. For example, <code>tags: {}</code>. To enter the entries for this type, delete the curly braces, enter a new line, and then enter the <code>key: value</code> pairs. For example:<pre class="hljs yaml">...<br/>tags:<br/>    docs: &#34;CD&#34;<br/>    yaml example: &#34;&#34;<br/>...</pre></li><li>The block style indicator <code>|</code> turns every newline within the string into a literal newline and adds one line at the end. The <code>-</code> indicates removes newlines from the end. For example:<pre class="hljs yaml">...<br/>script: |-<br/>    echo &#34;hello&#34;<br/><br/>    echo &lt;+pipeline.name&gt;<br/>...</pre></li></ul><h3>Pipeline</h3><p>A Pipeline can have an unlimited number of configurations. This section simply covers the basic YAML schema.</p><h4>Schema</h4><p>This is the basic schema for a Pipeline:</p><pre>pipeline:<br/>    name: &#34;&#34;<br/>    identifier: &#34;&#34;<br/>    projectIdentifier: &#34;&#34;<br/>    orgIdentifier: &#34;&#34;<br/>    tags: {}<br/>    stages:<br/>        - stage:<br/>    flowControl:<br/>    notificationRules:</pre><p></p><p>The <code>projectIdentifier</code> and <code>orgIdentifier</code> must match existing Project and Org Ids.</p><p>From here you can add stages, Service, Infrastructure, and Execution. Harness will not allow you to save your Pipeline until these three components are set up.</p><h4>Example</h4><p>Here is a very basic Pipeline that meets the minimum requirements and uses a Shell Script step:</p><pre class="hljs yaml">pipeline:<br/>    name: YAML<br/>    identifier: YAML<br/>    projectIdentifier: CD_Examples<br/>    orgIdentifier: default<br/>    tags: {}<br/>    stages:<br/>        - stage:<br/>              name: Deploy<br/>              identifier: Deploy<br/>              description: &#34;&#34;<br/>              type: Deployment<br/>              spec:<br/>                  serviceConfig:<br/>                      serviceRef: nginx<br/>                      serviceDefinition:<br/>                          type: Kubernetes<br/>                          spec:<br/>                              variables: []<br/>                  infrastructure:<br/>                      environmentRef: helmchart<br/>                      infrastructureDefinition:<br/>                          type: KubernetesDirect<br/>                          spec:<br/>                              connectorRef: &lt;+input&gt;<br/>                              namespace: &lt;+input&gt;<br/>                              releaseName: release-&lt;+INFRA_KEY&gt;<br/>                      allowSimultaneousDeployments: false<br/>                  execution:<br/>                      steps:<br/>                          - step:<br/>                                type: ShellScript<br/>                                name: Echo<br/>                                identifier: Echo<br/>                                spec:<br/>                                    shell: Bash<br/>                                    onDelegate: true<br/>                                    source:<br/>                                        type: Inline<br/>                                        spec:<br/>                                            script: echo &#34;hello&#34;<br/>                                    environmentVariables: []<br/>                                    outputVariables: []<br/>                                    executionTarget: {}<br/>                                timeout: 10m<br/>                      rollbackSteps: []<br/>              tags: {}<br/>              failureStrategies:<br/>                  - onFailure:<br/>                        errors:<br/>                            - AllErrors<br/>                        action:<br/>                            type: StageRollback</pre><p></p><p>See also:</p><ul><li><a href="/article/k5lu0u6i1i-using-shell-scripts">Using Shell Scripts in CD Stages</a></li></ul><h3>Stage</h3><p>A Stage is a subset of a Pipeline that contains the logic to perform one major segment of the Pipeline process. Stages are based on the different milestones of your Pipeline, such as building, approving, and delivering.</p><h4>Schema</h4><pre class="hljs yaml">stages:<br/>    - stage:<br/>          name: &#34;&#34;<br/>          identifier: &#34;&#34;<br/>          description: &#34;&#34;<br/>          type: Deployment<br/>          spec:<br/>              serviceConfig:<br/>                  serviceRef: &#34;&#34;<br/>                  serviceDefinition:<br/>                      type: &#34;&#34;<br/>                      spec:<br/>                          variables: []<br/>              infrastructure:<br/>                  environmentRef: &#34;&#34;<br/>                  infrastructureDefinition:<br/>                      type: &#34;&#34;<br/>                      spec:<br/>                          connectorRef: &#34;&#34;<br/>                          namespace: &#34;&#34;<br/>                          releaseName: release-&#34;&#34;<br/>                  allowSimultaneousDeployments: &#34;&#34;<br/>              execution:<br/>                  steps:<br/>                      - step:<br/>                            type: &#34;&#34;<br/>                            name: &#34;&#34;<br/>                            identifier: &#34;&#34;<br/>                            spec:<br/>                  rollbackSteps: []<br/>          tags: {}<br/>          failureStrategies:<br/>              - onFailure:<br/>                    errors:<br/>                        - AllErrors<br/>                    action:<br/>                        type: StageRollback</pre><p></p><p>Rollback steps, failure strategies, and execution conditions are set at the end of the stage YAML.</p><pre>...<br/>                  rollbackSteps: []<br/>          tags: {}<br/>          failureStrategies:<br/>              - onFailure:<br/>                    errors:<br/>                        - AllErrors<br/>                    action:<br/>                        type: StageRollback<br/>...</pre><h4>Example</h4><pre class="hljs yaml">stages:<br/>    - stage:<br/>          name: Deploy<br/>          identifier: Deploy<br/>          description: &#34;&#34;<br/>          type: Deployment<br/>          spec:<br/>              serviceConfig:<br/>                  serviceRef: nginx<br/>                  serviceDefinition:<br/>                      type: Kubernetes<br/>                      spec:<br/>                          variables: []<br/>              infrastructure:<br/>                  environmentRef: helmchart<br/>                  infrastructureDefinition:<br/>                      type: KubernetesDirect<br/>                      spec:<br/>                          connectorRef: &lt;+input&gt;<br/>                          namespace: &lt;+input&gt;<br/>                          releaseName: release-&lt;+INFRA_KEY&gt;<br/>                  allowSimultaneousDeployments: false<br/>              execution:<br/>                  steps:<br/>                      - step:<br/>                            type: ShellScript<br/>                            name: Echo<br/>                            identifier: Echo<br/>                            spec:<br/>                                shell: Bash<br/>                                onDelegate: true<br/>                                source:<br/>                                    type: Inline<br/>                                    spec:<br/>                                        script: echo &#34;hello&#34;<br/>                                environmentVariables: []<br/>                                outputVariables: []<br/>                                executionTarget: {}<br/>                            timeout: 10m<br/>                  rollbackSteps: []<br/>          tags: {}<br/>          failureStrategies:<br/>              - onFailure:<br/>                    errors:<br/>                        - AllErrors<br/>                    action:<br/>                        type: StageRollback</pre><p></p><p>See also:</p><ul><li><a href="/article/2chyf1acil-add-a-stage">Add a Stage</a></li><li><a href="/article/0zvnn5s1ph-define-a-failure-strategy-on-stages-and-steps">Define a Failure Strategy on Stages and Steps</a></li><li><a href="/article/f5y37ke7ko-set-execution-conditions-on-stages-and-steps">Set Execution Conditions on Stages and Steps</a></li></ul><h3>Service</h3><p>A Service represents your microservices and other workloads logically.</p><p>A Service is a logical entity to be deployed, monitored, or changed independently.</p><p>When a Service is added to the stage in a Pipeline, you define its Service Definition. Service Definitions represent the real artifacts, manifests, and variables of a Service. They are the actual files and variable values.</p><h4>Schema</h4><pre class="hljs yaml">spec:<br/>    serviceConfig:<br/>        serviceRef: &#34;&#34;<br/>        serviceDefinition:<br/>            type: &#34;&#34;<br/>            spec:<br/>                variables: []</pre><p></p><p>If you propagate a Service from a previous stage, the YAML indicated it this way:</p><pre class="hljs yaml">spec:<br/>    serviceConfig:<br/>        useFromStage:<br/>            stage: &#34;&#34;</pre><h4>Example</h4><pre class="hljs yaml">spec:<br/>    serviceConfig:<br/>        serviceRef: nginx<br/>        serviceDefinition:<br/>            type: Kubernetes<br/>            spec:<br/>                variables: []</pre><p></p><p>See also:</p><ul><li><a href="/article/t57uzu1i41-propagate-and-override-cd-services">Propagate and Override CD Services</a></li></ul><h3>Infrastructure</h3><p>Infrastructure is defined under Environments. Environments represent your deployment targets logically (QA, Prod, etc). You can add the same Environment to as many Stages as you need.</p><h4>Schema</h4><pre class="hljs yaml">infrastructure:<br/>    environmentRef: &#34;&#34;<br/>    infrastructureDefinition:<br/>        type: &#34;&#34;<br/>        spec:<br/>            connectorRef: &#34;&#34;<br/>            namespace: &#34;&#34;<br/>            releaseName: release-&#34;&#34;<br/>    allowSimultaneousDeployments: true|false</pre><p></p><h4>Example</h4><pre class="hljs yaml">infrastructure:<br/>    environmentRef: &lt;+input&gt;<br/>    infrastructureDefinition:<br/>        type: KubernetesDirect<br/>        spec:<br/>            connectorRef: &lt;+input&gt;<br/>            namespace: &lt;+input&gt;<br/>            releaseName: release-&lt;+INFRA_KEY&gt;<br/>    allowSimultaneousDeployments: false</pre><p></p><p>That example is for the platform agnostic Kubernetes infrastructure. For a different infrastructure, such as GCP, it would look slightly different:</p><pre class="hljs yaml"> infrastructure:<br/>    environmentRef: &lt;+input&gt;<br/>    infrastructureDefinition:<br/>        type: KubernetesGcp<br/>        spec:<br/>            connectorRef: &lt;+input&gt;<br/>            cluster: &lt;+input&gt;<br/>            namespace: &lt;+input&gt;<br/>            releaseName: release-&lt;+INFRA_KEY&gt;<br/>    allowSimultaneousDeployments: false</pre><p></p><p>See also:</p><ul><li><a href="/article/0ud2ut4vt2-define-your-kubernetes-target-infrastructure">Define Your Kubernetes Target Infrastructure</a></li><li><a href="/article/x7aedul8qs-kubernetes-cluster-build-infrastructure-setup">Define Kubernetes Cluster Build Infrastructure</a></li></ul><h3>Execution</h3><p>The stage Execution contains the steps for the stage.</p><h4>Schema</h4><pre>execution:<br/>    steps:<br/>        - step:<br/>              identifier: &#34;&#34;<br/>              name: &#34;&#34;<br/>              type: &#34;&#34;<br/>    rollbackSteps: []</pre><p></p><h4>Example</h4><p>Here is an example using the Shell Script step.</p><pre class="hljs yaml">execution:<br/>    steps:<br/>        - step:<br/>              type: ShellScript<br/>              name: Step<br/>              identifier: Step<br/>              spec:<br/>                  shell: Bash<br/>                  onDelegate: true<br/>                  source:<br/>                      type: Inline<br/>                      spec:<br/>                          script: echo &#34;hello&#34;<br/>                  environmentVariables: []<br/>                  outputVariables: []<br/>                  executionTarget: {}<br/>              timeout: 10m<br/>    rollbackSteps: []</pre><p></p><p>See also:</p><ul><li><a href="/article/aiuwxmwfe9-viewing-execution-status">Viewing Execution Status</a></li></ul><h3>Steps and Step Groups</h3><p>A step is an individual operation in a stage.</p><p>Steps can be run in sequential and parallel order.</p><p>A Step Group is a collection of steps that share the same logic such as the same rollback strategy.</p><h4>Schema</h4><p>Step:</p><pre class="hljs yaml">- step:<br/>      identifier: <br/>      name: <br/>      type: </pre><p></p><p>Step Group:</p><pre class="hljs yaml">- stepGroup:<br/>      name: <br/>      identifier: <br/>      steps:<br/>          - step:<br/>                identifier: <br/>                name: <br/>                type: </pre><h4>Example</h4><p>Each step has different entries.</p><p>Here is an example of a Canary Deployment step.</p><pre class="hljs yaml">- step:<br/>      name: Canary Deployment<br/>      identifier: canaryDeployment<br/>      type: K8sCanaryDeploy<br/>      timeout: 10m<br/>      spec:<br/>          instanceSelection:<br/>              type: Count<br/>              spec:<br/>                  count: 1<br/>          skipDryRun: false</pre><p></p><p>See also:</p><ul><li><a href="/category/21a052rbi0">CD How-tos</a></li></ul><h3>Fixed Value, Runtime Input, and Expression</h3><p>You can use Fixed Value, Runtime Input, and Expressions for most settings.</p><ul><li><strong>Fixed value:</strong> The value is simply entered in the value of the <code>key: value</code> entry.</li><li><strong>Runtime input:</strong> You simple enter <code>&lt;+input&gt;</code> in the value of the <code>key: value</code> entry.</li><li><strong>Expression:</strong> You simply enter <code>&lt;+</code> in the value of the <code>key: value</code> entry and a list of available expressions appears. Select the expression to use.</li></ul><p></p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/xs2dfgq7s2/1633381877226/clean-shot-2021-10-04-at-14-11-09.png"/></figure><p></p><p>See also:</p><ul><li><a href="/article/f6yobn7iq0-runtime-inputs">Fixed Values, Runtime Inputs, and Expressions</a></li></ul><h3>Flow Control</h3><p>Barriers allow you to synchronize different stages in your Pipeline, and control the flow of your deployment systematically.</p><p>The Flow Control YAML is at the end of the Pipeline YAML, but it is not mandatory.</p><h4>Schema</h4><pre class="hljs yaml">pipeline:<br/>    name: &#34;&#34;<br/>    identifier: &#34;&#34;<br/>    projectIdentifier: &#34;&#34;<br/>    orgIdentifier: &#34;&#34;<br/>    tags: {}<br/>    stages:<br/>...<br/>    flowControl:<br/>        barriers:<br/>            - name: &#34;&#34;<br/>              identifier: &#34;&#34;</pre><h4>Example</h4><pre class="hljs yaml">flowControl:<br/>    barriers:<br/>        - name: mybarrier<br/>          identifier: mybarrier</pre><p></p><p>See also:</p><ul><li><a href="/article/dmlf8w2aeh-synchronize-deployments-using-barriers">Synchronize Deployments using Barriers</a></li></ul><h3>Notification Rules</h3><p>You can send Pipeline event notifications using email and popular communication and incident management platforms.</p><p>Event notifications are set up using Notification Rules in your Pipeline. You select the types of events to send, and then select how you want to send notifications. When those events occur, Harness sends event information to those channels and recipients.</p><p>The Notification Rules YAML is at the end of the Pipeline YAML, but it is not mandatory.</p><h4>Schema</h4><pre>pipeline:<br/>    name: &#34;&#34;<br/>    identifier: &#34;&#34;<br/>    projectIdentifier: &#34;&#34;<br/>    orgIdentifier: &#34;&#34;<br/>    tags: {}<br/>    stages:<br/>...<br/>    notificationRules:<br/>        - name: &#34;&#34;<br/>          pipelineEvents:<br/>              - type: &#34;&#34;<br/>          notificationMethod:<br/>              type: &#34;&#34;<br/>              spec:<br/>                  userGroups: []<br/>                  recipients:<br/>                      - &#34;&#34;<br/>          enabled: true|false</pre><h4>Example</h4><pre class="hljs yaml">notificationRules:<br/>    - name: mynotification<br/>      pipelineEvents:<br/>          - type: AllEvents<br/>      notificationMethod:<br/>          type: Email<br/>          spec:<br/>              userGroups: []<br/>              recipients:<br/>                  - john.doe@harness.io<br/>      enabled: true</pre><p></p><p>See also:</p><ul><li><a href="/article/4bor7kyimj-notify-users-of-pipeline-events">Add a Pipeline Notification Strategy</a></li></ul><h3>Triggers</h3><p>Triggers are used to automate the execution of Pipelines based on some event like new artifact/manifest, or run on a schedule or an external webhook.</p><p>Trigger YAML is not part of the main Pipeline YAML, but Triggers can be configure using YAML in the <strong>Triggers</strong> tab of the Pipeline.</p><h4>Schema</h4><p>Webhook:</p><pre class="hljs yaml">trigger:<br/>    name: &#34;&#34;<br/>    identifier: &#34;&#34;<br/>    enabled: true|false<br/>    description: &#34;&#34;<br/>    tags: {}<br/>    orgIdentifier: &#34;&#34;<br/>    projectIdentifier: &#34;&#34;<br/>    pipelineIdentifier: &#34;&#34;<br/>    source:<br/>        type: Webhook<br/>        spec:<br/>            type: Github<br/>            spec:<br/>                type: &#34;&#34;<br/>                spec:<br/>                    connectorRef: &#34;&#34;<br/>                    autoAbortPreviousExecutions: true|false<br/>                    payloadConditions:<br/>                        - key: &#34;&#34;<br/>                          operator: &#34;&#34;<br/>                          value: &#34;&#34;<br/>                        - key: &#34;&#34;<br/>                          operator: &#34;&#34;<br/>                          value: &#34;&#34;<br/>                        - key: &#34;&#34;<br/>                          operator: &#34;&#34;<br/>                          value: &#34;&#34;<br/>                    headerConditions: []<br/>                    actions: []</pre><p></p><p>Schedule (Cron):</p><pre class="hljs yaml">trigger:<br/>    name: &#34;&#34;<br/>    identifier: &#34;&#34;<br/>    enabled: true|false<br/>    tags: {}<br/>    orgIdentifier: &#34;&#34;<br/>    projectIdentifier: &#34;&#34;<br/>    pipelineIdentifier: &#34;&#34;<br/>    source:<br/>        type: Scheduled<br/>        spec:<br/>            type: Cron<br/>            spec:<br/>                expression: &#34;&#34;</pre><p></p><p>Custom:</p><pre>trigger:<br/>    name: &#34;&#34;<br/>    identifier: &#34;&#34;<br/>    enabled: true|false<br/>    description: &#34;&#34;<br/>    tags: {}<br/>    orgIdentifier: &#34;&#34;<br/>    projectIdentifier: &#34;&#34;<br/>    pipelineIdentifier: &#34;&#34;<br/>    source:<br/>        type: Webhook<br/>        spec:<br/>            type: Custom<br/>            spec:<br/>                payloadConditions: []<br/>                headerConditions: []</pre><h4>Example</h4><p>Here&#39;s a Webhook Trigger for a Pipeline with Runtime Input settings. Runtime Input settings in a Pipeline result in the <code>inputYaml</code> section of the Trigger.</p><pre class="hljs yaml">trigger:<br/>    name: mytrigger<br/>    identifier: mytrigger<br/>    enabled: true<br/>    description: &#34;&#34;<br/>    tags: {}<br/>    orgIdentifier: default<br/>    projectIdentifier: CD_Examples<br/>    pipelineIdentifier: YAML<br/>    source:<br/>        type: Webhook<br/>        spec:<br/>            type: Github<br/>            spec:<br/>                type: PullRequest<br/>                spec:<br/>                    connectorRef: quickstart<br/>                    autoAbortPreviousExecutions: false<br/>                    payloadConditions:<br/>                        - key: changedFiles<br/>                          operator: Equals<br/>                          value: filename<br/>                        - key: sourceBranch<br/>                          operator: Equals<br/>                          value: foo<br/>                        - key: targetBranch<br/>                          operator: Equals<br/>                          value: bar<br/>                    headerConditions: []<br/>                    actions: []<br/>    inputYaml: |<br/>        pipeline:<br/>            identifier: YAML<br/>            stages:<br/>                - stage:<br/>                      identifier: Deploy<br/>                      type: Deployment<br/>                      spec:<br/>                          infrastructure:<br/>                              infrastructureDefinition:<br/>                                  type: KubernetesDirect<br/>                                  spec:<br/>                                      connectorRef: Kubernetes_Quickstart<br/>                                      namespace: default<br/>                - stage:<br/>                      identifier: Canary<br/>                      type: Deployment<br/>                      spec:<br/>                          infrastructure:<br/>                              environmentRef: helmchart<br/>                              infrastructureDefinition:<br/>                                  type: KubernetesDirect<br/>                                  spec:<br/>                                      connectorRef: Kubernetes_Quickstart<br/>                                      namespace: default</pre><p></p><p>See also:</p><ul><li></li></ul><h3>Input Sets and Overlays</h3><p>Harness Input Sets are collections of runtime inputs for a Pipeline provided before execution. Runtime inputs contain the values that you would be prompted to provide when you executed the Pipeline.</p><p>Overlays are groups of Input Sets. Overlays enable you to provide several Input Sets when executing a Pipeline.</p><h4>Schema</h4><p>The Input Set YAML depends on the settings in your Pipeline that use Runtime Inputs.</p><p>Input Set:</p><pre class="hljs yaml">inputSet:<br/>    name: &#34;&#34;<br/>    tags: {}<br/>    identifier: &#34;&#34;<br/>    orgIdentifier: &#34;&#34;<br/>    projectIdentifier: &#34;&#34;<br/>    pipeline:<br/>        identifier: &#34;&#34;<br/>        stages:<br/>            - stage:<br/>                  identifier: &#34;&#34;<br/>                  type: &#34;&#34;<br/>                  spec:<br/>                      infrastructure:<br/>                          infrastructureDefinition:<br/>                              type: &#34;&#34;<br/>                              spec:<br/>                                  connectorRef: &#34;&#34;<br/>                                  namespace: &#34;&#34;</pre><p></p><p>Overlay:</p><pre class="hljs yaml">overlayInputSet:<br/>    name: &#34;&#34;<br/>    identifier: &#34;&#34;<br/>    orgIdentifier: &#34;&#34;<br/>    projectIdentifier: &#34;&#34;<br/>    pipelineIdentifier: &#34;&#34;<br/>    inputSetReferences:<br/>        - &#34;&#34;<br/>        - &#34;&#34;<br/>    tags: {}</pre><h4>Example</h4><p>Input Set:</p><pre class="hljs yaml">inputSet:<br/>    name: My Input Set 1<br/>    tags: {}<br/>    identifier: My_Input_Set<br/>    orgIdentifier: default<br/>    projectIdentifier: CD_Examples<br/>    pipeline:<br/>        identifier: YAML<br/>        stages:<br/>            - stage:<br/>                  identifier: Deploy<br/>                  type: Deployment<br/>                  spec:<br/>                      infrastructure:<br/>                          infrastructureDefinition:<br/>                              type: KubernetesDirect<br/>                              spec:<br/>                                  connectorRef: Kubernetes_Quickstart<br/>                                  namespace: default<br/>            - stage:<br/>                  identifier: Canary<br/>                  type: Deployment<br/>                  spec:<br/>                      infrastructure:<br/>                          environmentRef: helmchart<br/>                          infrastructureDefinition:<br/>                              type: KubernetesDirect<br/>                              spec:<br/>                                  connectorRef: Kubernetes_Quickstart<br/>                                  namespace: default</pre><p></p><p>Overlay:</p><pre class="hljs yaml">overlayInputSet:<br/>    name: My Overlay Set<br/>    identifier: My_Overlay_Set<br/>    orgIdentifier: default<br/>    projectIdentifier: CD_Examples<br/>    pipelineIdentifier: YAML<br/>    inputSetReferences:<br/>        - My_Input_Set<br/>        - My_Input_Set_2<br/>    tags: {}</pre><p></p><p>See also:</p><ul><li><a href="/article/3fqwa8et3d-input-sets">Input Sets and Overlays</a></li></ul><h3>Connectors</h3><p>Connectors contain the information necessary to integrate and work with 3rd party tools.</p><p>Harness uses Connectors at Pipeline runtime to authenticate and perform operations with a 3rd party tool.</p><p>In the visual editor, Connectors can be added inline as your build your Pipeline.</p><p>In YAML editor, Connectors are not configured inline. You can only reference existing Connectors.</p><p>When you create a Connector, you can use YAML.</p><p>Here&#39;s what the YAML for a Connector looks like:</p><pre>connector:<br/>    name: cd-doc<br/>    identifier: cddoc<br/>    description: &#34;&#34;<br/>    orgIdentifier: default<br/>    projectIdentifier: CD_Examples<br/>    type: K8sCluster<br/>    spec:<br/>        credential:<br/>            type: InheritFromDelegate<br/>        delegateSelectors:<br/>            - example</pre><p></p><p>You reference a Connector in your Pipeline by using its Id in <code>connectorRef</code>:</p><pre>...<br/>infrastructureDefinition:<br/>    type: KubernetesDirect<br/>    spec:<br/>        connectorRef: cddoc<br/>        namespace: default<br/>        releaseName: release-&lt;+INFRA_KEY&gt;<br/>...</pre><p></p><p>See also:</p><ul><li><a href="/category/o1zhrfo8n5">Connectors</a></li></ul><p></p>