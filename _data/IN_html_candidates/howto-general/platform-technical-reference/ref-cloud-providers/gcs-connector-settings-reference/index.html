<p>Harness Google Cloud Platform (GCP) Connector connects your Harness account to a GCP account.</p><p>You add Connectors to your Harness Account and then reference them when defining resources and environments.</p><p>In this topic:</p><ul><li><a href="https://ngdocs.harness.io/article/yykfduond6-gcs-connector-settings-reference#limitations">Limitations</a></li><li><a href="https://ngdocs.harness.io/article/yykfduond6-gcs-connector-settings-reference#kubernetes_role_requirements">Kubernetes Role Requirements</a></li><li><a href="https://ngdocs.harness.io/article/yykfduond6-gcs-connector-settings-reference#gcs_and_gcr_role_requirements">GCS and GCR Role Requirements</a></li><li><a href="https://ngdocs.harness.io/article/yykfduond6-gcs-connector-settings-reference#google_cloud_operations_suite_stackdriver_requirements">Google Cloud Operations Suite (Stackdriver) Requirements</a></li><li><a href="https://ngdocs.harness.io/article/yykfduond6-gcs-connector-settings-reference#proxies_and_gcp_with_harness">Proxies and GCP with Harness</a></li><li><a href="https://ngdocs.harness.io/article/yykfduond6-gcs-connector-settings-reference#gcp_connector_settings">GCP Connector Settings</a><ul><li><a href="https://ngdocs.harness.io/article/yykfduond6-gcs-connector-settings-reference#name">Name</a></li><li><a href="https://ngdocs.harness.io/article/yykfduond6-gcs-connector-settings-reference#id">ID</a></li><li><a href="https://ngdocs.harness.io/article/yykfduond6-gcs-connector-settings-reference#description">Description</a></li><li><a href="https://ngdocs.harness.io/article/yykfduond6-gcs-connector-settings-reference#tags">Tags</a></li><li><a href="https://ngdocs.harness.io/article/yykfduond6-gcs-connector-settings-reference#service_account_key">Service Account Key</a></li></ul></li><li><a href="https://ngdocs.harness.io/article/yykfduond6-gcs-connector-settings-reference#see_also">See Also</a></li></ul><h3>Limitations</h3><p>Harness supports GKE 1.19 and later.</p><p>If you use a version prior to GKE 1.19, please enable Basic Authentication. If Basic authentication is inadequate for your security requirements, use the <a href="/article/1gaud2efd4-add-a-kubernetes-cluster-connector">Kubernetes Cluster Connector</a>.</p><h3>Kubernetes Role Requirements</h3><p>If you are using the GCP Connector to connect to GKE, the GCP service account used for any credentials requires the <strong>Kubernetes Engine Developer</strong> and <strong>Storage Object Viewer</strong> permissions.</p><p>If you use a version prior to GKE 1.19, please enable Basic Authentication. If Basic authentication is inadequate for your security requirements, use the <a href="/article/1gaud2efd4-add-a-kubernetes-cluster-connector">Kubernetes Cluster Connector</a>.</p><ul><li>For steps to add roles to your service account, see <a href="https://cloud.google.com/iam/docs/granting-roles-to-service-accounts" target="_blank">Granting Roles to Service Accounts</a> from Google. For more information, see <a href="https://cloud.google.com/iam/docs/understanding-roles?_ga=2.123080387.-954998919.1531518087#curated_roles" target="_blank">Understanding Roles</a> from GCP.</li></ul><div class="note-callout">Another option is to use a service account that has only the Storage Object Viewer permission needed to query GCR, and then use either an in-cluster Kubernetes Delegate or a direct <a href="/article/sjjik49xww-kubernetes-cluster-connector-settings-reference">Kubernetes Cluster Connector</a> with the Kubernetes service account token for performing deployment.</div><h3>GCS and GCR Role Requirements</h3><p>For Google Cloud Storage (GCS) and Google Container Registry (GCR), the following roles are required:</p><ul><li>Storage Object Viewer (roles/storage.objectViewer)</li><li>Storage Object Admin (roles/storage.objectAdmin)</li></ul><p>See <a href="https://cloud.google.com/storage/docs/access-control/iam-roles" target="_blank">Cloud IAM roles for Cloud Storage</a> from GCP.</p><div class="note-callout">Ensure the Harness Delegate you have installed can reach to the GCR registry host name you are using in <strong>Registry Host Name</strong> (for example, gcr.io) and storage.cloud.google.com.</div><p></p><h3>Google Cloud Operations Suite (Stackdriver) Requirements</h3><p>Most APM and logging tools are added to Harness as Verification Providers. For Google Cloud&#39;s operations suite (formerly Stackdriver), you use the GCP Connector.</p><h5>Roles and Permissions</h5><ul><li><strong>Stackdriver Logs</strong> - The minimum role requirement is <strong>Logs Viewer</strong> (logging.viewer)<strong>.</strong></li><li><strong>Stackdriver Metrics</strong> - The minimum role requirements are <strong>Compute Network Viewer</strong> (compute.networkViewer) and <strong>Monitoring Viewer</strong> (monitoring.viewer).</li></ul><p>See <a href="https://cloud.google.com/monitoring/access-control" target="_blank">Access control</a> from Google.</p><h3>Proxies and GCP with Harness</h3><p>If you are using a proxy server in your GCP account, but want to use GCP services with Harness, you need to set the following to not use your proxy:</p><ul><li><code>googleapis.com</code>. See <a href="https://cloud.google.com/storage/docs/troubleshooting#proxy-server" target="_blank">Proxy servers</a> from Google.</li><li>The <code>token_uri</code> value from your Google Service Account. See <a href="https://cloud.google.com/iam/docs/creating-managing-service-account-keys#creating_service_account_keys">Creating service account keys</a> from Google.</li></ul><h3>GCP Connector Settings</h3><h4>Name</h4><p>The unique name for this Connector.</p><h4>ID</h4><p>See <a href="/article/li0my8tcz3-entity-identifier-reference">Entity Identifier Reference</a>.</p><h4>Description</h4><p>Text string.</p><h4>Tags</h4><p>See <a href="/article/i8t053o0sq-tags-reference">Tags Reference</a>.</p><h4>Service Account Key</h4><p>Select or create a new <a href="/article/osfw70e59c-add-text-secrets">Harness Encrypted Text secret</a> that contains the Google Cloud&#39;s Account Service Key File.</p><p>To obtain the Google Cloud&#39;s Account Service Key File, see <a href="https://cloud.google.com/iam/docs/creating-managing-service-account-keys" target="_blank">Creating and managing service account keys</a> from Google (JSON is recommended).</p><figure><a href="https://files.helpdocs.io/kw8ldg1itf/articles/6x52zvqsta/1593629254966/image.png"><img src="https://files.helpdocs.io/kw8ldg1itf/articles/6x52zvqsta/1593629254966/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></a></figure><p>Once you have the key file from Google, open it, copy it, and paste it into the Harness Encrypted Text secret.</p><p>Next, use that Harness Encrypted Text secret in <strong>Service Account Key</strong>.</p><h3>See Also</h3><ul><li><a href="/article/m5vkql35ca-aws-connector-settings-reference">AWS Connector Settings Reference</a></li><li><a href="/article/sjjik49xww-kubernetes-cluster-connector-settings-reference">Kubernetes Cluster Connector Settings Reference</a></li></ul><p></p>