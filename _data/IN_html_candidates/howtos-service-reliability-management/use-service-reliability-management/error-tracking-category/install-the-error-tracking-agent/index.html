<p>The Harness Error Tracking Agent is installed on a Java application to capture application code and variables. You must install an Error Tracking Agent to use Harness Error Tracking for your application or Service.</p><p>This topic provides details about:</p><ul><li>Compatibility and requirements to install an Error Tracking Agent.</li><li>Steps to install an Error Tracking Agent on a Java Application.</li></ul><h3>Compatibility and Requirements</h3><p>This table lists the supported operating system, Java Virtual Machine (JVM) versions, and JVM containers.</p><div class="note-callout">Future releases will include support for more operating systems.</div><table><tbody><tr><td><p><strong>Operating System</strong></p></td><td><p><strong>Supported JVM Versions</strong></p></td><td><p><strong>Supported JVM Containers</strong></p></td></tr><tr><td><p>Linux Operating System:</p><ul><li>Ubuntu: 14+</li><li>Debian</li><li>CentOS: 6.5+</li><li>RedHat: 5.0 +</li><li>Suse: SLES12</li></ul></td><td><ul><li>Oracle/HotSpot:6u20 - 6u457 - 7u808 - 8u2218 - 8u2329 - all updates10/11/16/17 - all updates</li><li>OpenJDK:6u20 - 6u457 - 7u808 - 8u2228 - 8u2329 - all updates10/11/16/17 - all updates</li></ul></td><td><ul><li>Jetty</li><li>Scala</li><li>Eclipse</li><li>NetBeans</li><li>IntelliJ</li><li>JBoss/Wildfly</li><li>CloudFoundry</li><li>Weblogic</li><li>Play Framework</li><li>Glassfish</li><li>Mule</li><li>WebSphere</li><li>Tomcat</li></ul></td></tr></tbody></table><p></p><h5>JVM Requirements</h5><p>When you attach the Harness Error Tracking Agent to a JVM that runs Java 10, 11, 16, 17, or any IBM Java version, ensure that the following requirements are met:</p><ul><li>Turn off class sharing using the following flags:</li></ul><table><tbody><tr><td><p>IBM Java</p></td><td><p><code>‑Xshareclasses:none</code></p></td></tr><tr><td><p>HotSpot</p></td><td><p><code>-Xshare:off -XX:-UseTypeSpeculation</code></p></td></tr></tbody></table><ul><li>Increase<code>ReservedCodeCache</code>to at least 512mb by adding the following flag:<br/><code>-XX:ReservedCodeCacheSize=512m</code></li></ul><h3>Step: Install an Error Tracking Agent</h3><p>Depending on your setup and needs, there are multiple ways to install and deploy an Error Tracking Agent on a Java application. You can install the Agent to monitor your application in the following ways:</p><ul><li>As a standalone installation outside Harness.</li><li>By modifying your Docker image.</li><li>Using an init container.</li></ul><div class="note-callout">If you have additional agents running on your application, the Error Tracking Agent should appear at the end of the VM arguments list before specifying the main class or jar.</div><h4>Step: Install as a Standalone</h4><p>This option lets you install the Error Tracking Agent as a standalone. Perform the following steps to install the Agent:</p><ol><li><a href="https://get.et.harness.io/releases/latest/nix/harness-et-agent.tar.gz">Download</a> the latest version of the Agent for Linux.</li><li>Extract this version to a folder of your choice. For example<code>/home/user</code>. The contents of the archive will be inside a folder named Harness. You&#39;ll require the path to the Agent when starting your application. An example for the Agent path would be , <code>/home/user/harness/lib/libETAgent.so</code>.</li><li>Add JVM arguments which instruct the JVM to load the Agent. This is done by adding<code>-agentpath:/home/user/harness/lib/libETAgent.so</code>to the application startup. For example,<code>java -agentpath:/home/user/harness/lib/libETAgent.so -jar yourapp.jar.</code>. <span style="color:#000000" data-hd-color="#000000">This parameter can also be specified using<code>JAVA_TOOL_OPTIONS</code>. For example</span>,<code>exportJAVA_TOOL_OPTIONS=-agentpath:/home/user/harness/lib/libETAgent.so.</code>.</li><li>Set the Agent environment variables so that your application can map to a Harness Service.<table><tbody><tr><td><p><strong>Required Environment Variable</strong></p></td><td><p><strong>Description</strong></p></td><td><p><strong>Example</strong></p></td></tr><tr><td><p><code>ET_COLLECTOR_URL</code></p></td><td><p>URL to the Error Tracking collector.</p></td><td><p>https://app.harness.io/gratis/et-collector/</p></td></tr><tr><td><p><code>ET_APPLICATION_NAME</code></p></td><td><p>Name of your application or Service.</p></td><td><p>myapp</p></td></tr><tr><td><p><code>ET_DEPLOYMENT_NAME</code></p></td><td><p>Deployment or version number of your application or Service. When your application or Service is updated to a new version, it&#39;s recommended that you update this variable as well, so that the Error Tracking Agent can identify when new errors are introduced.</p></td><td><p>1</p></td></tr><tr><td><p><code>ET_ENV_ID</code></p></td><td><p>ID of your Harness Environment.</p></td><td><p>production</p></td></tr><tr><td><p><code>ET_ACCOUNT_ID</code></p></td><td><p>Harness Account ID for which Error Tracking will be configured.</p></td><td><p>abCdEFgHIjK0_LMnoPQRSTU</p></td></tr><tr><td><p><code>ET_ORG_ID</code></p></td><td><p>Harness Organization ID for which Error Tracking will be configured.</p></td><td><p>default</p></td></tr><tr><td><p><code>ET_PROJECT_ID</code></p></td><td><p>Harness Project ID for which Error Tracking will be configured.</p></td><td><p>myproject</p></td></tr></tbody></table>For example:<pre>ENV ET_COLLECTOR_URL=https://app.harness.io/prod1/et-collector/<br/>ENV ET_APPLICATION_NAME=yourapp<br/>ENV ET_DEPLOYMENT_NAME=1<br/>ENV ET_ENV_ID=env1<br/>ENV ET_ACCOUNT_ID=&lt;myaccount_id&gt;<br/>ENV ET_ORG_ID=&lt;myorg_id&gt;<br/>ENV ET_PROJECT_ID=&lt;yourproject_id&gt;</pre></li><li>Restart your application after installing the Error Tracking Agent.</li></ol><h4>Step: Modify a Docker Image</h4><p>This option uses a Dockerfile to copy an Error Tracking Agent to the Docker image at build time. When your Java application is running using Docker, perform the following steps to install the Agent:</p><ol><li>Download and extract the Agent in your Dockerfile. For example:<pre>RUN wget -qO- https://get.et.harness.io/releases/latest/nix/harness-et-agent.tar.gz | tar -xz</pre></li><li>Set the Agent environment variables in the Dockerfile.<table><tbody><tr><td><p><strong>Required Environment Variable</strong></p></td><td><p><strong>Description</strong></p></td><td><p><strong>Example</strong></p></td></tr><tr><td><p><code>ET_COLLECTOR_URL</code></p></td><td><p>URL to the Error Tracking collector.</p></td><td><p>https://app.harness.io/gratis/et-collector/</p></td></tr><tr><td><p><code>ET_APPLICATION_NAME</code></p></td><td><p>Name of your application or Service.</p></td><td><p>myapp</p></td></tr><tr><td><p><code>ET_DEPLOYMENT_NAME</code></p></td><td><p>Deployment or version number of your application or Service. When your application or Service is updated to a new version, it&#39;s recommended that you update this variable as well, so that the Error Tracking Agent can identify when new errors are introduced.</p></td><td><p>1</p></td></tr><tr><td><p><code>ET_ENV_ID</code></p></td><td><p>ID of your Harness Environment.</p></td><td><p>production</p></td></tr><tr><td><p><code>ET_ACCOUNT_ID</code></p></td><td><p>Harness Account ID for which Error Tracking will be configured.</p></td><td><p>abCdEFgHIjK0_LMnoPQRSTU</p></td></tr><tr><td><p><code>ET_ORG_ID</code></p></td><td><p>Harness Organization ID for which Error Tracking will be configured.</p></td><td><p>default</p></td></tr><tr><td><p><code>ET_PROJECT_ID</code></p></td><td><p>Harness Project ID for which Error Tracking will be configured.</p></td><td><p>myproject</p></td></tr></tbody></table>For example:<pre>ENV ET_COLLECTOR_URL=https://app.harness.io/prod1/et-collector/<br/>ENV ET_APPLICATION_NAME=yourapp<br/>ENV ET_DEPLOYMENT_NAME=1<br/>ENV ET_ENV_ID=env1<br/>ENV ET_ACCOUNT_ID=&lt;myaccount_id&gt;<br/>ENV ET_ORG_ID=&lt;myorg_id&gt;<br/>ENV ET_PROJECT_ID=&lt;yourproject_id&gt;</pre></li><li>Add JVM arguments to the Docker image, which instructs the JVM to load the Agent. This is done by adding<code>agentpath:/harness/lib/libETAgent.so</code>to the application<code>ENTRYPOINT</code>. For example,<code>ENTRYPOINT java -agentpath:/harness/lib/libETAgent.so -jar yourapp.jar</code>. This parameter can also be specified using<code>JAVA_TOOL_OPTIONS</code>, for example <code>ENV JAVA_TOOL_OPTIONS=&#34;-agentpath:/harness/lib/libETAgent.so&#34;</code>.</li><li>Once the Dockerfile is updated, rebuild the Docker image and restart any containers running on it to start monitoring using Error Tracking.</li></ol><pre> FROM openjdk:8-jre<br/>ENV JAVA_TOOL_OPTIONS=&#34;-agentpath:/harness/lib/libETAgent.so&#34;<br/>ENV ET_COLLECTOR_URL=https://app.harness.io/prod1/et-collector/<br/>ENV ET_APPLICATION_NAME=yourapp<br/>ENV ET_DEPLOYMENT_NAME=1<br/>ENV ET_ENV_ID=env1<br/>ENV ET_ACCOUNT_ID=&lt;myaccount_id&gt;<br/>ENV ET_ORG_ID=&lt;myorg_id&gt;<br/>ENV ET_PROJECT_ID=&lt;yourproject_id&gt;<br/>RUN wget -qO- <a href="https://get.et.harness.io/releases/latest/nix/harness-et-agent.tar.gz">https://get.et.harness.io/releases/latest/nix/harness-et-agent.tar.gz</a> | tar -xz<br/>ENTRYPOINT java -jar yourapp.jar</pre><h4>Step: Use an Init Container</h4><p>When your Java application is running on Kubernetes, use an init container to automatically install the Agent at runtime without changing the existing images. The image is publicly hosted in <a href="https://hub.docker.com/r/harness/et-agent-sidecar">Docker Hub</a>.</p><p>Consider the following Kubernetes deployment example for a Java application:</p><pre>spec:<br/>containers:<br/>- name: my-javaapp-container<br/>image: my-javaapp-image<br/>..<br/>initContainers:<br/>- name: init-et-agent<br/>image: harness/et-agent-sidecar<br/>imagePullPolicy: Always<br/>volumeMounts:<br/>- name: et-agent<br/>mountPath: /opt/harness-et-agent<br/>..<br/>env:<br/>- name: JAVA_TOOL_OPTIONS<br/>value: &#34;-agentpath=/opt/harness-et-agent/lib/libETAgent.so&#34;<br/>- name: ET_COLLECTOR_URL<br/>value: &#34;https://app.harness.io/prod1/et-collector&#34;<br/>- name: ET_APPLICATION_NAME<br/>value: yourapp<br/>- name: ET_DEPLOYMENT_NAME<br/>value: 1<br/>- name: ET_ENV_ID<br/>value: production<br/>- name: ET_ACCOUNT_ID<br/>value: abCdEFgHIjK0_LMnoPQRSTU<br/>- name: ET_ORG_ID<br/>value: default<br/>- name: ENV ET_PROJECT_ID<br/>value: myproject</pre><p></p>