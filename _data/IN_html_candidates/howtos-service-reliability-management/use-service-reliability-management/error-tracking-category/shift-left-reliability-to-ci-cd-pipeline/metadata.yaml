type: article
article_id: 6ayd4gw4wl
user_id: 2c4rk0cied
category_id: c40ko6e87n
author:
  name: Renu Bhaskaran
  profile_image: https://www.gravatar.com/avatar/7d21186ef4e85110a0bd60a931c90361?d=mm&s=150
title: Error Tracking in CV
slug: shift-left-reliability-to-ci-cd-pipeline
description: This topic covers how to add and configure Error Tracking as Health Source
  for the Verify step to detect Errors.
short_version: This topic covers how to add and configure Error Tracking as Health
  Source for the Verify step to detect Errors.
tags:
- error tracking
show_toc: true
is_private: true
is_published: true
is_featured: false
stale_status:
  is_stale: false
  reason: ""
  source: API
  triggered_at: 2022-04-11T15:14:53.968468Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: Error Tracking in CV
  description: This topic covers how to add and configure Error Tracking as Health
    Source for the Verify step to detect Errors.
  short_version: This topic covers how to add and configure Error Tracking as Health
    Source for the Verify step to detect Errors.
  body: '<div class="note-callout">Currently, this feature is behind the Feature Flag
    ERROR_TRACKING_ENABLED and is in Beta. Contact Harness Support to enable the feature.</div><p>Error
    Tracking in Harness Service Reliability Management (SRM) module, is a continuous
    reliability solution that enables you to implement rapid code changes and provides
    software reliability from testing into production.</p><p>Using Harness Error Tracking
    you can:</p><ul><li>Identify and detect critical issues, such as errors during
    each release and slowdowns, and receive alerts</li><li>Prevent critical errors
    and slowdowns, block unreliable releases, and notify about high priority issues
    and their causes to prevent bad code from being released and impacting customers</li><li>Resolve
    detected issues using complete context, to get the True Root Cause using source
    code, variable values, environment state (of the host/container) and DEBUG-level
    logs.</li><li>Integrate with existing tools including APMs, log analyzers, and
    issue-tracking software</li></ul><p>This topic covers how to add and configure
    Error Tracking as Health Source for the Verify step to detect Errors.</p><p>In
    this topic: </p><ul><li><a href="https://ngdocs.harness.io/article/6ayd4gw4wl-shift-left-reliability-to-ci-cd-pipeline#before_you_begin">Before
    You Begin</a></li><li><a href="https://ngdocs.harness.io/article/6ayd4gw4wl-shift-left-reliability-to-ci-cd-pipeline#prerequisites">Prerequisites</a></li><li><a
    href="https://ngdocs.harness.io/article/6ayd4gw4wl-shift-left-reliability-to-ci-cd-pipeline#review_cv_setup_options">Review:
    CV Setup Options</a></li><li><a href="https://ngdocs.harness.io/article/6ayd4gw4wl-shift-left-reliability-to-ci-cd-pipeline#step_1_add_verify_step">Step
    1: Add Verify Step</a></li><li><a href="https://ngdocs.harness.io/article/6ayd4gw4wl-shift-left-reliability-to-ci-cd-pipeline#step_2_enter_name_and_timeout_value">Step
    2: Enter Name and Timeout Value</a></li><li><a href="https://ngdocs.harness.io/article/6ayd4gw4wl-shift-left-reliability-to-ci-cd-pipeline#step_3_select_a_continuous_verification_type">Step
    3: Select a Continuous Verification Type</a></li><li><a href="https://ngdocs.harness.io/article/6ayd4gw4wl-shift-left-reliability-to-ci-cd-pipeline#step_4_create_a_monitored_service">Step
    4: Create a Monitored Service</a></li><li><a href="https://ngdocs.harness.io/article/6ayd4gw4wl-shift-left-reliability-to-ci-cd-pipeline#step_5_add_health_sources">Step
    5: Add Health Sources</a></li><li><a href="https://ngdocs.harness.io/article/6ayd4gw4wl-shift-left-reliability-to-ci-cd-pipeline#step_6_select_sensitivity">Step
    6: Select Sensitivity</a></li><li><a href="https://ngdocs.harness.io/article/6ayd4gw4wl-shift-left-reliability-to-ci-cd-pipeline#step_7_select_duration">Step
    7: Select Duration</a></li><li><a href="https://ngdocs.harness.io/article/6ayd4gw4wl-shift-left-reliability-to-ci-cd-pipeline#step_8_specify_artifact_tag">Step
    8: Specify Artifact Tag</a></li><li><a href="https://ngdocs.harness.io/article/6ayd4gw4wl-shift-left-reliability-to-ci-cd-pipeline#option_advanced_settings">Option:
    Advanced Settings</a></li><li><a href="https://ngdocs.harness.io/article/6ayd4gw4wl-shift-left-reliability-to-ci-cd-pipeline#step_9_deploy_and_review_results">Step
    9: Deploy and Review Results</a><ul><li><a href="https://ngdocs.harness.io/article/6ayd4gw4wl-shift-left-reliability-to-ci-cd-pipeline#summary">Summary</a></li><li><a
    href="https://ngdocs.harness.io/article/6ayd4gw4wl-shift-left-reliability-to-ci-cd-pipeline#console_view">Console
    View</a></li></ul></li></ul><h3>Review: System Requirements</h3><p>The Error Tracking
    Agent can be installed on different types of operating systems.</p><p>For detailed
    information see <a href="/article/nx99xfcoxz-install-the-error-tracking-agent">Install
    Error Tracking Agent</a>.</p><h3>Review: CV Setup Options</h3><p>To use the Verify
    step, you will need a Harness Service Reliability Management Monitored Service.
    In the simplest terms, a Harness Monitored Service is a Service and Environment
    combination that Harness monitors for:</p><ul><li>Any changes, such as deployments,
    infrastructure changes, and incidents</li><li>Any health trend deviations using
    logs and metrics obtained from APM and Logging tools respectively</li></ul><p>No
    matter where you set up the Monitored Service, once it&#39;s set up, it&#39;s
    available to both Change Intelligence and CD modules.</p><p>In this topic, we
    set up the Change Intelligence Monitored Service as part of the Verify step setup.</p><h3>Step
    1: Add Verify Step</h3><p>There are two ways to add the Verify step:</p><ul><li><strong>When
    selecting the stage deployment strategy:</strong><br/>The <strong>Verify</strong> step
    can be enabled in a CD stage the first time you open the <strong>Execution</strong> settings
    and select the deployment strategy. When you select the deployment strategy you
    want to use, there is also an <strong>Enable Verification</strong> option. Select
    the <strong>Enable Verification</strong> option.<br/>Harness will automatically
    add the <strong>Verify</strong> step. For example, here is a stage where Canary
    strategy and the <strong>Enable Verification</strong> option were selected.<figure><img
    src="https://files.helpdocs.io/i5nl071jo5/articles/6ayd4gw4wl/1646896782976/verify-ste.png"
    style="max-height:75%;max-width:75%" data-hd-height="75%" data-hd-width="75%"/></figure></li><li><strong>Add
    the Verify step to an existing Execution setup:</strong> You can also add the
    Verify step to the Execution section of a CD stage in a Pipeline you previously
    created. Simply click <strong>Add Step</strong> after the deployment step, and
    then select <strong>Verify</strong>.<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/6ayd4gw4wl/1646896810924/verify-step-2.png"
    style="max-height:75%;max-width:75%" data-hd-height="75%" data-hd-width="75%"/></figure></li></ul><h3>Step
    2: Enter Name and Timeout Value</h3><p>In <strong>Name</strong>, enter a name
    for the step.</p><p>In <strong>Timeout</strong>, enter a timeout value for the
    step.</p><p>You can use:</p><ul><li><code>w</code> for weeks</li><li><code>d</code> for
    days</li><li><code>h</code> for hours</li><li><code>m</code> for minutes</li><li><code>s</code> for
    seconds</li><li><code>ms</code> for milliseconds</li></ul><p>The maximum is <code>53w</code>.Timeouts
    can be set at the Pipeline level also.</p><h3>Step 3: Select a Continuous Verification
    Type</h3><p>In <strong>Continuous Verification Type</strong>, select a type that
    matches your <a href="/article/3xhqq9xllp-verify-deployments-with-the-verify-step#step_3_select_a_continuous_verification_type">deployment
    strategy</a>.</p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/916vrl4l76/1630648542919/screenshot-2021-09-03-at-11-25-26-am.png"
    style="max-height:75%;max-width:75%" data-hd-height="75%" data-hd-width="75%"/></figure><h3>Step
    4: Create a Monitored Service</h3><p>In <strong>Monitored Service</strong>, click <strong>Click
    to autocreate a monitored service</strong>.</p><p>Harness automatically creates
    a Monitored Service using a concatenation of the Service and Environment names.
    For example, a Service named <code>todolist</code> and an Environment named <code>dev</code> will
    result in a Monitored Service named <code>todolist_dev</code>.</p><p>If the stage
    Service or Environment settings are <a href="https://ngdocs.harness.io/article/f6yobn7iq0-runtime-inputs">Runtime
    Inputs</a>, the Monitored Service and Health Sources settings will show up in
    the <strong>Runtime Input</strong> settings when you run the Pipeline.</p><h3>Step
    5: Add Health Sources</h3><p>A Health Source is basically a mapping of a Harness
    Service to the service in a deployment environment monitored by an APM or logging
    tool.</p><p>In <strong>Health Sources</strong>, click <strong>Add</strong>. The <strong>Add
    New Health Source</strong> settings appear.</p><ol><li>In <strong>Select health
    source type</strong>, select Error Tracking.</li><li>In <strong>Health Source
    Name</strong>, enter a name for the Health Source.</li><li>Under <strong>Connect
    Health Source</strong>, click <strong>Select Connector</strong>.</li><li>In <strong>Connector</strong> settings,
    you can either choose an existing connector or click <strong>New Connector.</strong></li><li>Click <strong>Apply
    Selected</strong>. The Connector is added to the Health Source.</li><li>In <strong>Select
    Feature</strong>, select the Error Tracking component to use.</li><li>Click <strong>Submit</strong>.
    The Health Source is displayed in the Verify step.<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/6ayd4gw4wl/1646897634165/screenshot-2022-03-10-at-1-03-22-pm.png"
    style="max-height:75%;max-width:75%" data-hd-height="75%" data-hd-width="75%"/></figure></li></ol><div
    class="note-callout">You can add one or more Health Sources for each APM or logging
    provider.</div><h3>Step 6: Select Sensitivity</h3><p>In <strong>Sensitivity</strong>,
    select <strong>High</strong>, <strong>Medium</strong>, or <strong>Low</strong>
    based on the risk level used as failure criteria during the deployment.</p><h3>Step
    7: Select Duration</h3><p>Select how long you want Harness to analyze and monitor
    the logs/APM data points. Harness waits for 2-3 minutes to allow enough time for
    the data to be sent to the APM/logging tool before it analyzes the data. This
    wait time is a standard with monitoring tools.The recommended <strong>Duration</strong> is <strong>10
    min</strong> for logging providers and <strong>15 min</strong> for APM and infrastructure
    providers.</p><h3>Step 8: Specify Artifact Tag</h3><p>In <strong>Artifact Tag</strong>,
    use a <a href="https://newdocs.helpdocs.io/article/lml71vhsim-harness-variables">Harness
    expression</a> to reference the artifact in the stage Service settings.</p><p>The
    expression <code>&lt;+serviceConfig.artifacts.primary.tag&gt;</code> refers to
    the primary artifact.</p><h3>Option: Advanced Settings</h3><p>In Advanced, you
    can select the following options:</p><ul><li><a href="/article/i36ibenkq2-step-skip-condition-settings">Step
    Skip Condition Settings</a></li><li><a href="/article/htrur23poj-step-failure-strategy-settings">Step
    Failure Strategy Settings</a></li><li><a href="/article/nnuf8yv13o-select-delegates-with-selectors">Select
    Delegates with Selectors</a></li></ul><p>See <a href="/article/3xhqq9xllp-verify-deployments-with-the-verify-step#option_advanced_settings">Advanced
    Settings</a>.</p><h3>Step 9: Deploy and Review Results</h3><p>When you are done
    setting up the <strong>Verify</strong> step, click <strong>Apply Changes</strong>.</p><p>Now
    you can run the Pipeline.</p><p>Click <strong>Run</strong>.</p><p>In <strong>Run
    Pipeline</strong>, select the tag for the artifact if a tag was not added in the
    <strong>Artifact Details</strong> settings.</p><p>Click <strong>Run Pipeline</strong>.</p><p>When
    the Pipeline is running, click the <strong>Verify</strong> step.</p><p>You can
    see that verification takes a few minutes.</p><p>Once verification is complete,
    the Verify step shows the following:</p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/6ayd4gw4wl/1649251415255/screenshot-2022-04-06-at-6-30-00-pm.png"
    style="max-height:75%;max-width:75%" data-hd-height="75%" data-hd-width="75%"/></figure><p>You
    will see Errors if they have occurred in the Service. </p><h4>Summary</h4><p>The
    <strong>Summary</strong> section shows how many metrics, logs, and errors are
    in violation.</p><h4>Console View</h4><p>Click <strong>Console View</strong> or
    simply click <strong>View Details</strong> in <strong>Summary</strong> to take
    a deeper look at verification.</p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/6ayd4gw4wl/1649251610372/screenshot-2022-04-06-at-6-56-28-pm.png"
    style="max-height:75%;max-width:75%" data-hd-height="75%" data-hd-width="75%"/></figure><p>In
    the <strong>Errors</strong> tab you can see the list of detected Errors. On clicking
    any one of these you will be directed to the <strong>Automated Root Cause</strong>
    (ARC) screen which shows details about the selected Error like call stack, code,
    variable state, environment information, and so on. </p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/6ayd4gw4wl/1649252042055/screenshot-2022-04-06-at-7-03-48-pm.png"
    style="max-height:75%;max-width:75%" data-hd-height="75%" data-hd-width="75%"/></figure><p></p><p>The
    Harness Automated Root Cause (ARC) dashboard offers a powerful mechanism to get
    to the root cause of errors and exceptions in production and staging environments,
    and through integrations with APMs and log providers. The dashboard is divided
    into three panes, that offers a complete picture about the Error.</p>'
  slug: shift-left-reliability-to-ci-cd-pipeline
  tags:
  - error tracking
  is_live: true
