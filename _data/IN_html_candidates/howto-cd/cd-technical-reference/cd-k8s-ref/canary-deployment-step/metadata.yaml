type: article
article_id: 17wrdeuv0x
user_id: mfr0nxh4be
category_id: 85tr1q4hin
author:
  name: Michael Cretzman
  profile_image: https://www.gravatar.com/avatar/2e8616837f4ee92be5d19ffe9b9ccba9?d=mm&s=150
title: Canary Deployment Step
slug: canary-deployment-step
description: Define how many pods are deployed for a Canary test of the configuration
  files in your Service Definition Manifests section.
short_version: Define how many pods are deployed for a Canary test of the configuration
  files in your Service Definition Manifests section.
tags: []
show_toc: true
is_private: false
is_published: true
is_featured: false
stale_status:
  is_stale: false
  reason: ""
  source: API
  triggered_at: 2022-08-17T22:56:52.145687Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: Canary Deployment Step
  description: Define how many pods are deployed for a Canary test of the configuration
    files in your Service Definition Manifests section.
  short_version: Define how many pods are deployed for a Canary test of the configuration
    files in your Service Definition Manifests section.
  body: '<p>This topic provides settings and permissions for the CD <strong>Canary
    Deployment</strong> step.</p><h3>Review: What Workloads Can I Deploy?</h3><p>See
    <a href="/article/efnlvytc6l-what-can-i-deploy-in-kubernetes">What Can I Deploy
    in Kubernetes?</a>.</p><h3>Canary Deployment</h3><p>In this step, you will define
    how many pods are deployed for a Canary test of the configuration files in your
    Service Definition <strong>Manifests</strong> section.</p><p>See <a href="/article/i5p4feil89-create-a-kubernetes-canary-deployment">Create
    a Kubernetes Canary Deployment</a>.</p><h3>Name</h3><p>Enter the name for the
    step.</p><h3>Instances</h3><p>In <strong>Instances</strong>, select <strong>Instance
    Count</strong> or <strong>Percentage</strong>.</p><p>In <strong>Instances</strong>,
    enter the number of pods to deploy.</p><p>If you selected <strong>Instance Count</strong>,
    enter the number of pods.</p><p>If you selected <strong>Percentage</strong>, enter
    a percentage of the pods defined in your Service Definition <strong>Manifests</strong> files
    to deploy.</p><p>For example, in you have <code>replicas: 4</code> in a manifest
    in Service, and you enter <strong>50</strong> in <strong>Instances</strong>, then
    2 pods are deployed in this Phase step.</p><h3>Timeout</h3><p>How long Harness
    should run this step before failing it. Enter a minimum of 10m to account for
    network activity in your target environment.</p><h3>Skip Dry Run</h3><p>By default,
    Harness uses the <code>--dry-run</code> flag on the <code>kubectl apply</code> command
    during the <strong>Initialize</strong> step of this command, which prints the
    object that would be sent to the cluster without really sending it.</p><p>If the <strong>Skip
    Dry Run</strong> option is selected, Harness will not use the <code>--dry-run</code> flag.</p><h3>Advanced</h3><p>See
    the following topics for these settings:</p><ul><li><a href="/article/i36ibenkq2-step-skip-condition-settings">Step
    Skip Condition Settings</a></li><li><a href="/article/htrur23poj-step-failure-strategy-settings">Step
    Failure Strategy Settings</a></li><li><a href="/article/nnuf8yv13o-select-delegates-with-selectors">Select
    Delegates with Selectors</a></li></ul><h3>See Also</h3><ul><li><a href="/article/922mtcvank-kubernetes-delegate-step">Canary
    Delete Step</a></li></ul><p></p>'
  slug: canary-deployment-step
  tags: []
  is_live: true
