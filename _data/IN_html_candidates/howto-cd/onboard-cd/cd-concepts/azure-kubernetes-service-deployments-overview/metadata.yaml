type: article
article_id: dru6hm1ejp
user_id: znazf3hcp9
category_id: dxej4ug0n5
author:
  name: Michael Cretzman
  profile_image: https://www.gravatar.com/avatar/77114bb5eef5503c5a09ad7655120b17?d=mm&s=150
title: Azure Kubernetes Service (AKS) Deployments Overview
slug: azure-kubernetes-service-deployments-overview
description: The high-level steps involved in a Harness AKS deployment.
short_version: The high-level steps involved in a Harness AKS deployment.
tags:
- AKS
- Azure Kubernetes Service
- AKS overview
show_toc: true
is_private: false
is_published: false
is_featured: false
stale_status:
  is_stale: false
  reason: Article updated
  source: API
  triggered_at: 2020-12-21T23:52:15.061533Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: Azure Kubernetes Service (AKS) Deployments Overview
  description: The high-level steps involved in a Harness AKS deployment.
  short_version: The high-level steps involved in a Harness AKS deployment.
  body: |-
    <p>This topic describes the concept of a Harness Azure Kubernetes Service (AKS) deployment by describing the high-level steps involved.</p>
    <div class="note-callout">For a vendor-agnostic, Harness Kubernetes deployment, see our&nbsp;
      <a href="/article/u29v1uc1mh-kubernetes-deployments-overview">Kubernetes Deployments Overview</a>&nbsp;doc.</div>
    <p>For a quick tutorial, see the
      <a href="/article/dru6hm1ejp-azure-kubernetes-service-deployments-overview">Azure Kubernetes Service (AKS) Deployments Overview</a> tutorial.</p>
    <p>For detailed instructions on using AKS in Harness, see the
      <a href="/category/v329bbuuqw-howto-aks">AKS How-tos</a>.</p>
    <div class="note-callout">This guide covers new the <strong>Version 2</strong> features of Harness' Kubernetes implementation for AKS. For Version 1 Kubernetes and Helm deployment features, see
      <a href="/article/pmzbtrq5qf-helm-deployments-overview">Helm Deployments Overview</a>.</div>
    <p>In this topic:</p>
    <ul>
      <li>
        <a href="/article/dru6hm1ejp-azure-kubernetes-service-deployments-overview#before_you_begin">Before You Begin</a>
      </li>
      <li>
        <a href="/article/dru6hm1ejp-azure-kubernetes-service-deployments-overview#what_does_harness_need_before_you_start">What Does Harness Need Before You Start?</a>
      </li>
      <li>
        <a href="/article/dru6hm1ejp-azure-kubernetes-service-deployments-overview#what_does_harness_deploy">What Does Harness Deploy?</a>
      </li>
      <li>
        <a href="/article/dru6hm1ejp-azure-kubernetes-service-deployments-overview#what_does_a_harness_aks_deployment_involve">What Does a Harness AKS Deployment Involve?</a>
      </li>
      <li>
        <a href="/article/dru6hm1ejp-azure-kubernetes-service-deployments-overview#next_steps">Next Steps</a>
      </li>
    </ul>
    <h3>Before You Begin</h3>
    <p>Before learning about, you should have an understanding of the following:</p>
    <ul>
      <li>
        <a href="/article/hv2758ro4e-learn-harness-key-concepts">Learn Harness' Key Concepts</a>
      </li>
    </ul>
    <h3 id="what_does_harness_need_before_you_start">What Does Harness Need Before You Start?</h3>
    <p>A Harness AKS deployment requires the following:</p>
    <ol>
      <li>Artifact: For example, a Docker image on Azure ACR.</li>
      <li>Kubernetes cluster: You will need a target cluster for the Harness Delegate, your application, and your Kubernetes workloads. A Kubernetes Delegate requires at least 8GB RAM, and so your cluster should have enough RAM to host the Delegate and your applications
        and workloads.</li>
    </ol>
    <h3 id="what_does_harness_deploy">What Does Harness Deploy?</h3>
    <p>Harness takes the artifacts and Kubernetes manifests you provide and deploys them to the target AKS cluster. You can simply deploy Kubernetes objects via manifests and you can provide manifests using remote sources and Helm charts.</p>
    <table>
      <tbody>
        <tr>
          <td>
            <p>Azure deployment in Harness Manager</p>
          </td>
          <td>
            <p>The same deployment in Kubernetes Dashboard</p>
          </td>
        </tr>
        <tr>
          <td>
            <figure>
              <img src="https://files.helpdocs.io/kw8ldg1itf/articles/kiuft72fr5/1578087921012/image.png">
            </figure>
          </td>
          <td>
            <figure>
              <img src="https://files.helpdocs.io/kw8ldg1itf/articles/v13edrsui8/1551917982807/image.png">
            </figure>
          </td>
        </tr>
      </tbody>
    </table>
    <div class="note-callout">In Harness, a workload is a Deployment, StatefulSet, or DaemonSet object deployed and managed to steady state. For Rolling Update deployments, you can deploy multiple managed workloads. For Canary and Blue/Green Workflow deployments, only one managed
      object may be deployed per Workflow by default. You can deploy additional objects using the&nbsp;<strong>Apply Step</strong>, but it is typically used for deploying Jobs controllers. See Apply Step in&nbsp;
      <a href="/article/lnvudj1c94-kubernetes-workflow-commands">Kubernetes Workflow Commands</a>.</div>
    <h3>What Does a Harness AKS Deployment Involve?</h3>
    <p>The following list describes the major steps of a Harness AKS deployment:</p>
    <p></p>
    <table>
      <tbody>
        <tr>
          <td>
            <p><strong>Step</strong></p>
          </td>
          <td>
            <p><strong>Name</strong></p>
          </td>
          <td>
            <p><strong>Description and Links</strong></p>
          </td>
        </tr>
        <tr>
          <td>
            <p>1</p>
          </td>
          <td>
            <p>Install the Harness Kubernetes&nbsp;<strong>Delegate</strong>&nbsp;in your AKS cluster.&nbsp;</p>
          </td>
          <td>
            <p>Typically, the Kubernetes Delegate is installed in the target AKS cluster where you will deploy your application(s).</p>
            <p>See
              <a href="/article/cbsjovfq74-set-up-a-kubernetes-delegate">Set Up a Kubernetes Delegate</a>.</p>
          </td>
        </tr>
        <tr>
          <td>
            <p>2</p>
          </td>
          <td>
            <p>Add a Harness&nbsp;<strong>Artifact Server</strong> or Harness <strong>Azure Cloud Provider</strong>.</p>
          </td>
          <td>
            <p>The Harness&nbsp;<strong>Artifact Server</strong> is for artifact servers such as a Docker Registry Artifact Server. Harness connects to the Docker registry where your Docker images are located, or the public Docker Hub.</p>
            <p>If you want to obtain your artifacts from an ACR container, use an <strong>Azure Cloud Provider</strong>. </p>
            <p>See
              <a href="/category/0ctql7wycs-howtos-artifact-servers">Artifact Servers</a>.</p>
          </td>
        </tr>
        <tr>
          <td>
            <p>3</p>
          </td>
          <td>
            <p>Add a&nbsp;<strong>Kubernetes Cluster </strong><strong>Cloud Provider</strong>.</p>
          </td>
          <td>
            <p>A&nbsp;Cloud Provider is a connection to your Kubernetes cluster.</p>
            <p>You can add a Kubernetes Cluster Cloud Provider (recommended) or a Cloud Provider for the cloud platform where the cluster is hosted, such as an Azure Cloud Provider. A Kubernetes Cluster Cloud Provider will connect to any cluster on any platform.</p>
            <p>In you use a Kubernetes Cluster Cloud Provider, you can use the Delegate installed in your cluster for authentication.</p>
            <p>See
              <a href="/category/inwn0bqngb-howto-cloudproviders">Cloud Platforms and Physical Servers</a>.</p>
          </td>
        </tr>
        <tr>
          <td>
            <p>4</p>
          </td>
          <td>
            <p>Create the Harness&nbsp;<strong>Application</strong>&nbsp;for your AKS CD Pipeline.</p>
          </td>
          <td>
            <p>The Harness Application represents a group of microservices/containers, their deployment pipelines, and all the building blocks for those pipelines. Harness represents your release process using a logical group of one or more entities: Services,
              Environments, Workflows, Pipelines, Triggers, and Infrastructure Provisioners. Applications organize all of the entities and configurations in Harness CD.</p>
            <p>See
              <a href="/article/wrtkikaksk-add-an-application">Add an Application</a>.</p>
          </td>
        </tr>
        <tr>
          <td>
            <p>5</p>
          </td>
          <td>
            <p>Create the Harness&nbsp;<strong>Service</strong>&nbsp;using the <strong>Kubernetes</strong> Deployment Type.</p>
          </td>
          <td>
            <p>Add your Kubernetes manifests and any config variables and files.</p>
            <p>You can use remote manifests stored in a source repo or Helm charts in a Helm repo.</p>
            <p>See
              <a href="/article/9hh28jprtk-define-kubernetes-manifests-for-aks">Define Kubernetes Manifests for AKS</a>.</p>
          </td>
        </tr>
        <tr>
          <td>
            <p>6</p>
          </td>
          <td>
            <p>Create the Harness&nbsp;<strong>Environment</strong>&nbsp;and Infrastructure Definition for your target AKS cluster, and any overrides.</p>
          </td>
          <td>
            <p>Using the Harness Cloud Provider you set up, you can select the target AKS cluster and namespace for your deployment.</p>
            <p>You can also override any Service settings, such as manifest values. This enables you to use a single Service with multiple Harness Environments.</p>
            <p>See
              <a href="/article/pukjd76ayz-define-to-your-azure-aks-target-infrastructure">Define Your Azure AKS Target Infrastructure</a>.</p>
          </td>
        </tr>
        <tr>
          <td>
            <p>7</p>
          </td>
          <td>
            <p>Create the Canary, Blue/Green, or Rollout deployment Harness&nbsp;<strong>Workflow</strong>.</p>
          </td>
          <td>
            <p>The Workflow deploys the artifact(s) and Kubernetes workloads defined in the Harness Service to the cluster and namespace in the Harness Infrastructure Definition.</p>
            <p>See
              <a href="/article/xu79fmz2ti-create-an-aks-rolling-deployment">Create an AKS Rolling Deployment</a>.</p>
            <p>For additional Workflows, see the vendor-agnostic steps in the following:</p>
            <ul>
              <li>
                <a href="/article/i5p4feil89-create-a-kubernetes-canary-deployment">Create a Kubernetes Canary Deployment</a>
              </li>
              <li>
                <a href="/article/mog5tnk5pi-create-a-kubernetes-blue-green-deployment">Create a Kubernetes Blue/Green Deployment</a>
              </li>
            </ul>
          </td>
        </tr>
        <tr>
          <td>
            <p>8</p>
          </td>
          <td>
            <p>Deploy the Workflow.</p>
          </td>
          <td>
            <p>Once you've deployed a Workflow, learn how to improve your AKS CD:</p>
            <ul>
              <li>
                <a href="/article/yenenrhgcs-add-workflows-to-pipelines">Add Workflows to Pipelines</a>
              </li>
              <li>
                <a href="/article/yupq093j6b-add-a-trigger">Add a Trigger</a>
              </li>
              <li>
                <a href="/article/4m5d41bzg8-provision-kubernetes-infrastructures">Provision Kubernetes Infrastructures</a>
              </li>
            </ul>
          </td>
        </tr>
      </tbody>
    </table>
    <div class="note-callout">In Harness, a workload is a Deployment, StatefulSet, or DaemonSet object deployed and managed to steady state. For Rolling Update deployments, you can deploy multiple managed workloads. For Canary and Blue/Green Workflow deployments, only one managed
      object may be deployed per Workflow by default. You can deploy additional objects using the&nbsp;<strong>Apply Step</strong>, but it is typically used for deploying Jobs controllers. See Apply Step in&nbsp;
      <a href="/article/lnvudj1c94-kubernetes-workflow-commands">Kubernetes Workflow Commands</a>.</div>
    <h3>Next Steps</h3>
    <p>Read the following topics to build on what you've learned:</p>
    <ul>
      <li>
        <a href="/article/dru6hm1ejp-azure-kubernetes-service-deployments-overview">Azure Kubernetes Service (AKS) Deployments Overview</a> tutorial</li>
      <li>
        <a href="/category/v329bbuuqw-howto-aks">AKS How-tos</a>.</li>
    </ul>
    <p></p>
  slug: azure-kubernetes-service-deployments-overview
  tags:
  - AKS
  - Azure Kubernetes Service
  - AKS overview
  is_live: true
