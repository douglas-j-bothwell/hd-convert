type: article
article_id: lbga0vw140
user_id: mfr0nxh4be
category_id: dxej4ug0n5
author:
  name: Michael Cretzman
  profile_image: https://www.gravatar.com/avatar/2e8616837f4ee92be5d19ffe9b9ccba9?d=mm&s=150
title: AMI Spotinst Elastigroup Deployments Overview
slug: ami-spotinst-elastigroup-overview
description: The high-level steps involved in a Harness AWS Spotinst Elastigroup Deployment.
short_version: The high-level steps involved in a Harness AWS Spotinst Elastigroup
  Deployment.
tags:
- Spotinst
- Elastigroup
show_toc: true
is_private: false
is_published: false
is_featured: false
stale_status:
  is_stale: false
  reason: Article updated
  source: API
  triggered_at: 2020-12-21T23:52:15.051519Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: AMI Spotinst Elastigroup Deployments Overview
  description: The high-level steps involved in a Harness AWS Spotinst Elastigroup
    Deployment.
  short_version: The high-level steps involved in a Harness AWS Spotinst Elastigroup
    Deployment.
  body: |-
    <div class="note-callout">Currently, Harness integrates with Spotinst only for deployments to AWS (Amazon Web Services) via Elastigroup. Elastigroup deployment settings are behind a feature flag. Contact Harness Support to enable the feature.</div><p>This topic describes the concept of a Harness AWS Spotinst Elasticgroup deployment by describing the high-level steps involved.</p><p>For detailed instructions on using AWS Spotinst Elastigroup in Harness, see the&nbsp;<a href="/category/8ly9nyradt-howtos-aws-spotinst-elastigroup">AWS Spotinst Elastigroup How-tos</a>.</p><p>In this topic:</p><ul><li><a href="https://newdocs.helpdocs.io/article/lbga0vw140-ami-spotinst-elastigroup-overview#before_you_begin">Before You Begin</a></li><li><a href="https://newdocs.helpdocs.io/article/lbga0vw140-ami-spotinst-elastigroup-overview#what_does_harness_need_before_you_start">What Does Harness Need Before You Start?</a></li><li><a href="/article/lbga0vw140-ami-spotinst-elastigroup-overview#what_does_harness_deploy">What Does Harness Deploy?</a></li><li><a href="https://newdocs.helpdocs.io/article/lbga0vw140-ami-spotinst-elastigroup-overview#what_does_a_harness_aws_spotinst_elastigroup_deployment_involve">What Does a Harness AWS Spotinst Elastigroup Deployment Involve?</a></li><li><a href="https://newdocs.helpdocs.io/article/lbga0vw140-ami-spotinst-elastigroup-overview#next_steps">Next Steps</a></li></ul><div class="hd--md" data-hd-markdown="<span id=&quot;before_you_begin&quot;></span>"><p><span id="before_you_begin"></span></p>
    </div><h3>Before You Begin</h3><p>Before learning about, you should have an understanding of the following:</p><ul><li><a href="/article/hv2758ro4e-learn-harness-key-concepts">Learn Harness' Key Concepts</a></li></ul><div class="hd--md" data-hd-markdown="<span id=&quot;anchor_1&quot;></span>"><p><span id="anchor_1"></span></p>
    </div><h3>What Does Harness Need Before You Start?</h3><p>A Harness AWS Spotinst Elastigroup deployment requires the following:</p><ul><li>In AWS:<ul><li>For an AMI Canary deployment, you must set up a working AMI that Harness will use to create your instances and at least one&nbsp;<a href="https://docs.aws.amazon.com/en_pv/elasticloadbalancing/latest/application/introduction.html" target="_blank">Application Load Balancer</a>&nbsp;(ALB) or&nbsp;<a href="https://docs.aws.amazon.com/en_pv/elasticloadbalancing/latest/classic/introduction.html" target="_blank">Classic Load Balancer</a>. (See the&nbsp;<a href="https://api.spotinst.com/elastigroup-for-aws/services-integrations/awss-load-balancers-elb-and-alb/">Spotinst documentation</a>&nbsp;for Load Balancer support.)</li><li>For AMI Blue/Green deployment, you must also have:<ul><li>A pair of&nbsp;<a href="https://docs.aws.amazon.com/elasticloadbalancing/latest/application/load-balancer-target-groups.html">Target Groups</a>—typically staging (Stage) and production (Prod)—both with the&nbsp;<strong>instance</strong>&nbsp;target type.</li><li>A Load Balancer with listeners for both your Target Groups' ports.</li></ul></li></ul></li><li>In Spotinst, an Elastigroup configuration with at least one Elastigroup cluster that matches your AWS configuration's AMI, VPC, Load Balancer(s), security groups, availability zones, and allowed instance types.</li></ul><h3>What Does Harness Deploy?</h3><p>Harness takes the AMI and Elastigroup configuration you provide, and creates a new Elastigroup and populates it with instances using the AMI. You can specify the target, min, and max instances for the new Elastigroup, and other settings in Harness.</p><h3>What Does a Harness AWS Spotinst Elastigroup Deployment Involve?</h3><p>The following list describes the major steps of a Harness AWS Spotinst Elastigroup deployment:</p><p></p><table><tbody><tr><td><p><strong>Step</strong></p></td><td><p><strong>Name</strong></p></td><td><p><strong>Description and Links</strong></p></td></tr><tr><td><p>1</p></td><td><p>Install the Harness Shell Script or ECS&nbsp;<strong>Delegate</strong>&nbsp;in your target EC2 subnet.</p></td><td><p>Typically, the Shell Script or ECS Delegate is installed in the same subnet where you will deploy your application(s).</p><p>See <a href="/article/2m0v9z5x7b-set-up-a-shell-script-delegate">Set Up a Shell Script Delegate</a> and <a href="/article/tbjffip7rp-set-up-an-aws-ecs-delegate">Set Up an AWS ECS Delegate</a>.</p></td></tr><tr><td><p>2</p></td><td><p>Add both an <strong>AWS</strong>&nbsp;<strong>Cloud Provider</strong> and a <strong>Spotinst&nbsp;Cloud Provider</strong>.</p></td><td><p>An AWS&nbsp;Cloud Provider is a connection to your AWS account. The AWS&nbsp;Cloud Provider is used to obtain the AMI Harness will use to create new instances and to deploy the new instances.</p><p>A Spotinst Cloud Provider is used to connect Harness to Spotinst.</p><p>See <a href="/article/bejr8ispzh-connect-to-amazon-web-services-aws-cloud">Connect to Amazon Web Services (AWS) Cloud</a>. and <a href="/article/yj7y9uhj4n-connect-to-spotinst">Connect to Spotinst</a>.</p></td></tr><tr><td><p>3</p></td><td><p>Create the Harness&nbsp;<strong>Application</strong>&nbsp;for your Spotinst deployment.</p></td><td><p>The Harness Application represents a group of microservices, their deployment pipelines, and all the building blocks for those pipelines. Harness represents your release process using a logical group of one or more entities: Services, Environments, Workflows, Pipelines, Triggers, and Infrastructure Provisioners. Applications organize all of the entities and configurations in Harness CD.</p><p>See <a href="/article/wrtkikaksk-add-an-application">Add an Application</a>.</p></td></tr><tr><td><p>4</p></td><td><p>Create the Harness&nbsp;<strong>Service</strong>&nbsp;using the Amazon Machine Image Deployment Type.</p></td><td><p>Add an AMI as an artifact in a Harness Service, add any AMI User Data, and any config variables and files.</p><p>See <a href="/article/kwbd8n18lx-add-aws-amis-as-artifacts-for-spotisnt-elastigroup">Add AWS AMIs as Artifacts for Spotisnt Elastigroup</a>.</p></td></tr><tr><td><p>5</p></td><td><p>Create the Harness&nbsp;<strong>Environment</strong>&nbsp;and Infrastructure Definition for your deployment, and any overrides.</p></td><td><p>Using the Harness AWS Cloud Provider and Spotinst Cloud Provider you set up, you can select the Elastigroup configuration as the target environment for your deployment.</p><p>You can also override any Service settings, such as User Data values. This enables you to use a single Service with multiple Harness Environments.</p><p>See <a href="/article/c7z07nuzvb-use-spotinst-elastigroup-to-manage-target-infrastructure">Use Spotinst Elastigroup to Manage Target Infrastructure</a>.</p></td></tr><tr><td><p>6</p></td><td><p>Create the Basic, Canary, and Blue/Green deployments in Harness&nbsp;<strong>Workflows</strong>.</p></td><td><p>The Workflow deploys the new AMI instances defined in the Harness Service to the environment in the Harness Infrastructure Definition.</p><p>See:</p><ul><li><a href="/article/2qhlxym76y-create-a-spotinst-elastigroup-basic-workflow">Create a Spotinst Elastigroup Basic Workflow</a></li><li><a href="/article/6i653thdqx-create-a-spotinst-elastigroup-canary-workflow">Create a Spotinst Elastigroup Canary Workflow</a></li><li><a href="/article/2qu4aaa54o-create-a-spotinst-elastigroup-blue-green-workflow">Create a Spotinst Elastigroup Blue/Green Workflow</a></li></ul></td></tr><tr><td><p>7</p></td><td><p>Deploy the Workflow.</p></td><td><p>Once you've deployed a Workflow, learn how to improve your AWS AMI CD:</p><ul><li><a href="/article/yenenrhgcs-add-workflows-to-pipelines">Add Workflows to Pipelines</a></li><li><a href="/article/yupq093j6b-add-a-trigger">Add a Trigger</a></li><li><a href="/category/8jtjs2i7e2-howtos-infrastructure-prov">Harness Infrastructure Provisioners</a></li></ul></td></tr></tbody></table><p></p><h3>Next Steps</h3><p>Read the following topics to build on what you've learned:</p><ul><li><a href="/category/8ly9nyradt-howtos-aws-spotinst-elastigroup">AWS Spotinst Elastigroup How-tos</a></li></ul><p></p>
  slug: ami-spotinst-elastigroup-overview
  tags:
  - Spotinst
  - Elastigroup
  is_live: true
