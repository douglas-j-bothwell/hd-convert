<p>You can use the same CD stage Services across your Pipeline stages. Once you have multiple Services, Harness lets you select from these Services in any stage.</p><p>In many cases, you&#39;ll want to use some of the propagated Service&#39;s settings, such as manifests, but want to override others, such as values.yaml files, artifacts, or variables. Harness lets you propagate and override.</p><p>You can also use Harness Input Sets and Overlays to select from different collections of settings at runtime. See <a href="/article/3fqwa8et3d-input-sets">Input Sets and Overlays</a> and <a href="/article/gfk52g74xt-run-pipelines-using-input-sets-and-overlays">Run Pipelines using Input Sets and Overlays</a>.</p><p>This topic describes how to propagate and override Services.</p><p>In this topic:</p><ul><li><a href="#before_you_begin">Before You Begin</a></li><li><a href="#limitations">Limitations</a></li><li><a href="#visual_summary">Visual Summary</a></li><li><a href="#step_propagate_a_service">Step: Propagate a Service</a></li><li><a href="#option_override_service_settings">Option: Override Service Settings</a></li><li><a href="https://ngdocs.harness.io/article/t57uzu1i41-propagate-and-override-cd-services#overriding_manifests">Overriding Manifests</a></li><li><a href="#yaml_example">YAML Example</a></li><li><a href="#option_overriding_values_without_propagation">Option: Overriding Values without Propagation</a></li></ul><h3>Before You Begin</h3><ul><li><a href="/article/knunou9j30-kubernetes-cd-quickstart">Kubernetes CD Quickstart</a></li><li><a href="/article/2chyf1acil-add-a-stage">Add a Stage</a></li></ul><h3>Limitations</h3><ul><li>Service propagation is progressive: you can only propagate Services from stage to stage in a forward direction in your Pipeline. For example, Stage 2 cannot propagate a Service from Stage 3.</li><li>When propagation is set up between a parent stage and child stage, moving the parent or child stage out of sequence resets any propagated settings to their defaults. If you do this, you will be prompted to confirm. If you confirm, the stages are reset to their defaults.<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/t57uzu1i41/1629411932482/clean-shot-2021-08-19-at-15-25-19.png"/></figure></li></ul><h4>Propagation and Input Sets</h4><p>When you propagate a Service from one stage to another, the stages must use the same Input Set.</p><p>For example, if you have Stage 1 using Input Set A, and you propagate its Service to Stage 2, Stage 2 must use Input Set A. </p><p>If you want Stage 2 to use a different Input Set, it cannot propagate from Stage 1.</p><h3>Visual Summary</h3><p>The following video provides a quick overview of Service propagation and overriding.</p><p></p><div class="hd--embed" data-provider="YouTube" data-thumbnail="https://i.ytimg.com/vi/wtTiL21cb78/hqdefault.jpg"><iframe width="200" height="150" src="https://www.youtube.com/embed/wtTiL21cb78?feature=oembed" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div><h3>Step: Propagate a Service</h3><p>Open or create a Pipeline with at least one stage.</p><p>Click the plus sign (+) or click <strong>Add Stage</strong> after the first stage to add another stage to the Pipeline and click <strong>Deploy</strong>.</p><p></p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/t57uzu1i41/1629407377359/clean-shot-2021-08-19-at-14-09-29.png"/></figure><p>Enter a stage name and click <strong>Set Up Stage</strong>.</p><p>The new stage is added to the Pipeline.</p><p>Click the <strong>Service</strong> tab if it is not already selected.</p><p>The propagation option appears.</p><p></p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/t57uzu1i41/1629407539920/clean-shot-2021-08-19-at-14-12-09.png"/></figure><p>Click <strong>Propagate from</strong> and then select the stage with the Service you want to use.</p><p></p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/t57uzu1i41/1629407639848/clean-shot-2021-08-19-at-14-13-53.png"/></figure><p>You can see the stage name and Service name.</p><p>This stage now uses the exact same Service as the stage you selected.</p><h3>Option: Override Service Settings</h3><p>Once you select a stage, the <strong>Override artifacts, manifests, service variables for this stage</strong> option appears.</p><p>Enable this option.</p><p>Now Service settings appear.</p><p></p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/t57uzu1i41/1629407901335/clean-shot-2021-08-19-at-14-18-12.png"/></figure><p>Any settings you configure here will override their corresponding settings in the propagated Service.</p><p>A common example is to add a new values.yaml file for this stage&#39;s Service:</p><p></p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/t57uzu1i41/1629408094028/clean-shot-2021-08-19-at-14-21-23.png"/></figure><p>This values.yaml file will override the values.yaml file from the propagated Service.</p><h3>Overriding Manifests</h3><p>If you want to override the Kubernetes manifest, Helm Chart, Kustomize manifest, or OpenShift Template from the Service you are propagating, you must match the Id used by the manifest in the Service you are propagating.</p><p>Here you can see the same Id used in the parent stage and the child stage that propagates and overrides:</p><p></p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/t57uzu1i41/1647562064152/clean-shot-2022-03-17-at-17-07-24.png"/></figure><p>If you do not use the same Id, you will see an error like the following during deployment:</p><pre>&#34;Invalid request: There can be only a single manifest. Select one from K8sManifest, HelmChart, Kustomize, OpenshiftTemplate&#34;</pre><h3>YAML Example</h3><p>When you propagate a stage&#39;s Service, the child stage&#39;s settings in YAML indicate propagation with <code>useFromStage</code> and overrides are indicated with <code>stageOverrides</code>.</p><pre class="hljs yaml">...<br/>        - stage:<br/>              name: Tests<br/>              identifier: Tests<br/>              description: &#34;&#34;<br/>              type: Deployment<br/>              spec:<br/>                  serviceConfig:<br/>                      useFromStage:<br/>                          stage: Local<br/>                      stageOverrides:<br/>                          artifacts:<br/>                              sidecars: []<br/>                          manifests:<br/>                              - manifest:<br/>                                    identifier: values<br/>                                    type: Values<br/>                                    spec:<br/>                                        store:<br/>                                            type: Github<br/>                                            spec:<br/>                                                connectorRef: tooltips<br/>                                                gitFetchType: Branch<br/>                                                paths:<br/>                                                    - default-k8s-manifests/Manifests/Files/ng-values-noart.yaml<br/>                                                branch: main<br/>                          variables: []<br/>...</pre><p></p><h3>Option: Overriding Values without Propagation</h3><p>There are other ways to override the values.yaml file without propagation.</p><p>You can overlay values files in Harness by adding multiple files or you can replace file paths dynamically at runtime.</p><p>See <a href="/article/q002wjjl4d-add-and-override-values-yaml-files">Add and Override Values YAML Files</a>.</p><p></p>