type: article
article_id: jyv7jbr8pg
user_id: znazf3hcp9
category_id: qfj6m1k2c4
author:
  name: Michael Cretzman
  profile_image: https://www.gravatar.com/avatar/77114bb5eef5503c5a09ad7655120b17?d=mm&s=150
title: Ignore a Manifest File During Deployment
slug: ignore-a-manifest-file-during-deployment
description: Ignore manifests or then apply them separately using the Harness Apply
  step.
short_version: Ignore manifests or then apply them separately using the Harness Apply
  step.
tags: []
show_toc: true
is_private: false
is_published: true
is_featured: false
stale_status:
  is_stale: false
  reason: Article updated
  source: API
  triggered_at: 2021-09-30T21:23:42.643629Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: Ignore a Manifest File During Deployment
  description: Ignore manifests or then apply them separately using the Harness Apply
    step.
  short_version: Ignore manifests or then apply them separately using the Harness
    Apply step.
  body: '<p>You might have manifest files for resources that you do not want to deploy
    as part of the main deployment.</p><p>Instead, you can tell Harness to ignore
    these files and then apply them separately using the Harness <a href="/article/xd6o61wp8u-kubernetes-apply-step">Apply
    step</a>. Or you can simply ignore them and deploy them later.</p><p>This topic
    describes how to ignore these files and apply them separately using the Apply
    step.</p><p>In this topic:</p><ul><li> <a href="#before_you_begin">Before You
    Begin</a></li><li> <a href="#visual_summary">Visual Summary</a></li><li> <a href="#step_1_ignore_a_manifest">Step
    1: Ignore a Manifest</a></li><li> <a href="#option_1_apply_ignored_resource">Option
    1: Apply Ignored Resource</a></li><li> <a href="#next_steps">Next Steps</a></li></ul><h3>Before
    You Begin</h3><ul><li><a href="/article/ssbq0xh0hx-define-kubernetes-manifests">Add
    Kubernetes Manifests</a></li><li> <a href="/article/u29v1uc1mh-kubernetes-deployments-overview">Kubernetes
    Deployments Overview</a></li></ul><h3>Visual Summary</h3><p>The following image
    shows how you can ignore a Jobs manifest and then apply it separately using the
    Apply step.</p><p></p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/jyv7jbr8pg/1633036880336/clean-shot-2021-09-30-at-14-20-55-2-x.png"/></figure><h3
    id="undefined">Review: What Workloads Can I Deploy?</h3><p>See <a href="/article/efnlvytc6l-what-can-i-deploy-in-kubernetes">What
    Can I Deploy in Kubernetes?</a>.</p><h3>Limitations</h3><ul><li>Kubernetes objects
    and resources deployed by the Apply step are not versioned or rolled back automatically
    by Harness.</li></ul><h3>Step 1: Ignore a Manifest</h3><p>You add your manifest
    files to the stage&#39;s <strong>Service</strong> section in <strong>Manifests</strong>.
    You can add manifests individually or by simply adding their parent folder:</p><p></p><figure><img
    src="https://files.helpdocs.io/i5nl071jo5/articles/jyv7jbr8pg/1633035951987/clean-shot-2021-09-30-at-14-05-18-2-x.png"/></figure><p>To
    ignore a resource file that is in the directory in the Service <strong>Manifests</strong> section,
    you add the comment <code># harness.io/skip-file-for-deploy</code> to the <strong>top</strong> of
    the file.</p><p>For example, here is a ConfigMap file using the comment:</p><p></p><figure><img
    src="https://files.helpdocs.io/i5nl071jo5/articles/jyv7jbr8pg/1633036211288/clean-shot-2021-09-30-at-14-10-00-2-x.png"/></figure><p>Now,
    when this Pipeline is run, this ConfigMap resource will not be applied.</p><div
    class="note-callout">The comment <code># harness.io/skip-file-for-deploy</code> must
    be at the <strong>top</strong> of the file. If it is on the second line it will
    not work and the resource will be deployed as part of the main Workflow rollout.</div><h3>Option
    1: Apply Ignored Resource</h3><p>The Apply step will apply any resource in a Service <strong>Manifests</strong> explicitly.
    You must provide the path and name of the file in <strong>Apply</strong>, and
    Harness will deploy the resource.</p><p>For details on the Apply Step, see <a
    href="/article/00el61pzok-deploy-manifests-separately-using-apply-command">Deploy
    Manifests Separately using Apply Step</a>.</p><p>For example, the following image
    shows a Jobs resource in a Service <strong>Manifests</strong> section that uses
    the ignore comment <code># harness.io/skip-file-for-deploy</code> so that the
    stage does not apply it, and the <strong>Apply</strong> step that specifies the
    same Jobs resource:</p><p></p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/jyv7jbr8pg/1633036897708/clean-shot-2021-09-30-at-14-20-55-2-x.png"/></figure><p>The <strong>File
    Path</strong> setting in the Apply step must include the folder name and the file
    name. In the above example, the folder <strong>jobs</strong> is included with
    the file name <strong>job.yaml</strong>: <code>jobs/job.yaml</code>.</p><p>The
    path in <strong>File Path</strong> must be relative to the path you specified
    for the manifest in the Service <strong>Manifests</strong> section. </p><p>For
    example, if the path in <strong>Manifests</strong> is <code>default-k8s-manifests/Manifests/Files/templates</code>
    and the Job manifests is in <code>default-k8s-manifests/Manifests/Files/templates/jobs/job.yaml</code>
    you must enter <code>jobs/job.yaml</code> in <strong>File Path</strong>.</p><p>You
    can include multiple resource files in the Apply step <strong>File Path</strong> setting.</p><div
    class="note-callout">If you apply the ignore comment <code># harness.io/skip-file-for-deploy</code> to
    a resource but do not use the resource in an <strong>Apply</strong> step, the
    resource is never deployed.</div><p></p><p></p>'
  slug: ignore-a-manifest-file-during-deployment
  tags: []
  is_live: true
