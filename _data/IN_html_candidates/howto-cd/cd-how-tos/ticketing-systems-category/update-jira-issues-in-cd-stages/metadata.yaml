type: article
article_id: urdkli9e74
user_id: mfr0nxh4be
category_id: qd6woyznd7
author:
  name: Michael Cretzman
  profile_image: https://www.gravatar.com/avatar/2e8616837f4ee92be5d19ffe9b9ccba9?d=mm&s=150
title: Update Jira Issues in CD Stages
slug: update-jira-issues-in-cd-stages
description: Update a Jira issue as a step in the execution of a Pipeline.
short_version: Update a Jira issue as a step in the execution of a Pipeline.
tags: []
show_toc: true
is_private: false
is_published: true
is_featured: false
stale_status:
  is_stale: false
  reason: ""
  source: API
  triggered_at: 2022-09-13T22:40:03.04235Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: Update Jira Issues in CD Stages
  description: Update a Jira issue as a step in the execution of a Pipeline.
  short_version: Update a Jira issue as a step in the execution of a Pipeline.
  body: '<p>You can update a Jira issue as a step in the execution of a Pipeline.</p><p>You
    can add the Update Jira step to a Harness CD stage or an Approval stage.</p><div
    class="note-callout">You can also <a href="/article/yu40zr6cvm-create-jira-issues-in-cd-stages">create
    Jira Issues</a> and add <a href="/article/2lhfk506r8-adding-jira-approval-stages">Jira
    Approval stages and steps</a>.</div><h3>Before You Begin</h3><ul><li><a href="/article/e6s32ec7i7-connect-to-jira">Connect
    to Jira</a></li><li><a href="/article/2lhfk506r8-adding-jira-approval-stages">Adding
    Jira Approval Stages and Steps</a></li></ul><p></p><h3>Visual Summary</h3><p>The
    following video shows you how to use the Jira Create, Jira Update, and Jira Approval
    steps:</p><div class="hd--embed" data-provider="YouTube" data-thumbnail="https://i.ytimg.com/vi/xVeICozz4lU/hqdefault.jpg"><iframe
    width="200" height="150" src="https://www.youtube.com/embed/xVeICozz4lU?feature=oembed"
    frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media;
    gyroscope; picture-in-picture" allowfullscreen=""></iframe></div><h3>Limitations</h3><ul><li>Harness
    supports only Jira fields of type <code>Option</code>, <code>Array</code>, <code>Any</code>, <code>Number</code>, <code>Date</code>,
    and <code>String</code>. Harness does not integrate with Jira fields that manage
    users, issue links, or attachments. This means that Jira fields like Assignee
    and Sprint are not accessible in Harness&#39; Jira integration.</li></ul><p></p><h3>Step
    1: Add a Jira Update Step</h3><p>In a Harness CD or Approval stage, in <strong>Execution</strong>,
    click <strong>Add Step</strong>.</p><p>Click <strong>Jira Update</strong>. The
    Jira Update step appears.</p><p></p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/urdkli9e74/1624557618528/clean-shot-2021-06-24-at-11-00-07.png"/></figure><p>In
    <strong>Name</strong>, enter a name that describes the step.</p><p>In <strong>Timeout</strong>,
    enter how long you want Harness to try to update the issue before failing (and
    initiating the stage or step <a href="/article/0zvnn5s1ph-define-a-failure-strategy-on-stages-and-steps">Failure
    Strategy</a>).</p><p>In <strong>Jira Connector</strong>, create or select the
    <a href="/article/e6s32ec7i7-connect-to-jira">Jira Connector</a> to use.</p><p>In
    <strong>Project</strong>, select the Jira project that contains the issue you
    want to update.</p><p>In <strong>Issue Key</strong>, enter the Jira issue key
    of the issue you want to update.</p><h3>Option: Use an Expression in Issue Key</h3><p>In
    <strong>Issue Key</strong>, you can use an expression to reference the Key ID
    from another Jira Create or Jira Update step.</p><p>The Jira Create or Jira Update
    step you want to reference must be before the Jira Update step that references
    it in the stage.</p><p>First, identify the step where you want to get the ID from.
    In this example, we&#39;ll use a Jira Create step.</p><div class="note-callout">You&#39;ll
    have to close the Jira Update step to get the the ID from the previous step. An
    ID is required, so you can just enter any number for now and click <strong>Save</strong>.</div><p>In
    the Pipeline, click <strong>Execution History</strong>.</p><p>Select a successful
    execution, and click the Jira Create step in the execution.</p><p>Click the <strong>Output</strong>
    tab, locate the <strong>Key</strong> setting, and click the copy button.</p><p></p><figure><img
    src="https://files.helpdocs.io/i5nl071jo5/articles/urdkli9e74/1624558389534/clean-shot-2021-06-24-at-11-12-58.png"/></figure><p>The
    expression will look something like this:</p><p><code>&lt;+pipeline.stages.Jira_Stage.spec.execution.steps.jiraCreate.issue.key&gt;</code></p><p>Now
    you have the expression that references the key ID from this step.</p><p>Go back
    to your Jira Update step. You can just select <strong>Edit Pipeline</strong>.</p><p>In
    <strong>Issue Key</strong>, select <strong>Expression</strong>.</p><p></p><figure><img
    src="https://files.helpdocs.io/i5nl071jo5/articles/urdkli9e74/1624557827170/clean-shot-2021-06-24-at-11-03-34.png"/></figure><p>In
    <strong>Issue Key</strong>, paste in the expression you copied from the previous
    Jira Create step.</p><p>Now this Jira Update step will update the issue created
    by the Jira Create step.</p><div class="note-callout">Some users can forget that
    when you use a Jira Create step it creates a <u>new</u>, independent Jira issue
    every time it is run. If you are using the same issue ID in Jira Update, you are
    updating a new issue every run.</div><h3>Option: Status and Transition</h3><p>In
    <strong>Status</strong>, enter the status type (Issue Action) to update the issue
    with (In Progress, Done, etc). Harness will automatically update the issue with
    this status.</p><p>In <strong>Transition Name</strong>, enter the name of the
    transition to move the issues into (for example, <code>Transition to</code>, <code>PR
    Testing</code>, <code>Ready for Test</code>).</p><p></p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/urdkli9e74/1655924107686/clean-shot-2022-06-22-at-11-53-23.png"/></figure><p></p><div
    class="note-callout">If the issue is not part of a Jira workflow and does not
    have transition options, then the step will fail.</div><p>See <a href="https://support.atlassian.com/jira-cloud-administration/docs/work-with-issue-workflows/#Workingwithworkflows-steps"
    target="_blank">Statuses and transitions</a> from Atlasssian.</p><h3>Step 2: Add
    Issue Fields</h3><p>In Jira Fields, you can select specific fields to update within
    a Jira issue. For more information, see <a href="https://docs.harness.io/article/077hwokrpr-jira-integration#jira_custom_fields">Jira
    Custom Fields</a>.</p><p></p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/urdkli9e74/1624570809269/clean-shot-2021-06-24-at-14-39-59.png"/></figure><div
    class="tip-callout">Harness supports only Jira fields of type <code>Option</code>, <code>Array</code>, <code>Any</code>, <code>Number</code>, <code>Date</code>,
    and <code>String</code>. Harness does not integrate with Jira fields that manage
    users, issue links, or attachments. This means that Jira fields like Assignee
    and Sprint are not accessible in Harness&#39; Jira integration.</div><p></p><p></p><h3>Review:
    Jira Date Field Support</h3><p>Among the custom fields Harness supports are Baseline
    End Date and Start Date Time. If your Jira project uses these fields, they are
    available in Fields:</p><p></p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/yu40zr6cvm/1624656053592/clean-shot-2021-06-25-at-14-20-34.png"/></figure><p>Once
    you have selected these fields their settings appear.</p><p></p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/yu40zr6cvm/1624656191967/clean-shot-2021-06-25-at-14-22-57.png"/></figure><p>You
    can also use advanced dates using stage variables and the <code>current()</code>
    function. For example:</p><ul><li><code>&lt;+currentDate().plusDays(2).plusMonths(1)&gt;</code>:
    current date plus one month and two days.</li><li><code>&lt;+currentTime()&gt;</code>:
    for current date time fields.</li></ul><p>Harness supports the following functions.</p><p>For
    date-only fields:</p><p> <code>currentDate().plusYears(1).plusMonths(1).plusWeeks(1).plusDays(1)</code></p><p>For
    date and time fields:</p><p><code>currentTime().plusYears(1).plusMonths(1).plusWeeks(1).plusDays(1).plusHours(1).plusMinutes(1).plusSeconds(1).plusNanos(1)</code></p><p>The
    number 1 is used as an example. You can add whatever number you need.</p><h3>Option:
    Advanced Settings</h3><p>In Advanced, you can use the following options:</p><ul><li><a
    href="/article/i36ibenkq2-step-skip-condition-settings">Step Skip Condition Settings</a></li><li><a
    href="/article/htrur23poj-step-failure-strategy-settings">Step Failure Strategy
    Settings</a></li></ul><p></p><h3>Step 3: Apply and Test</h3><p>Click <strong>Apply
    Changes</strong>. The Jira Update step is added to the stage.</p><p>Run the Pipeline.</p><p>In
    the Pipeline execution view, click the <strong>Jira Update</strong> step, and
    then click the <strong>Output</strong> tab.</p><p>You can see all of the fields
    for the new Jira issue you created.</p><p>Locate <strong>URL</strong> and copy
    its value.</p><p></p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/yu40zr6cvm/1624495683057/clean-shot-2021-06-23-at-17-47-32-2-x.png"/></figure><p>In
    a new browser tab, paste the URL and press Enter.</p><p>The updated issue appears
    in Jira.</p><h3>See Also</h3><ul><li><a href="/article/yu40zr6cvm-create-jira-issues-in-cd-stages">Create
    Jira Issues in CD Stages</a></li><li><a href="/article/2lhfk506r8-adding-jira-approval-stages">Adding
    Jira Approval Stages and Steps</a></li></ul><p></p>'
  slug: update-jira-issues-in-cd-stages
  tags: []
  is_live: true
