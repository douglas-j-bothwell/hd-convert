type: article
article_id: 5ooc4heyl4
user_id: mfr0nxh4be
category_id: 31zj6kgnsg
author:
  name: Michael Cretzman
  profile_image: https://www.gravatar.com/avatar/2e8616837f4ee92be5d19ffe9b9ccba9?d=mm&s=150
title: Rollback Provisioned Infra with the CloudFormation Rollback Step
slug: rollback-provisioned-infra-with-the-cloud-formation-rollback-step
description: Use the CloudFormation Rollback Stack step to rollback to the last stack
  that was successfully provisioned by the CloudFormation Create Stack step.
short_version: Use the CloudFormation Rollback Stack step to rollback to the last
  stack that was successfully provisioned by the CloudFormation Create Stack step.
tags: []
show_toc: true
is_private: false
is_published: true
is_featured: false
stale_status:
  is_stale: false
  reason: ""
  source: API
  triggered_at: 2022-06-09T23:02:29.308946Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: Rollback Provisioned Infra with the CloudFormation Rollback Step
  description: Use the CloudFormation Rollback Stack step to rollback to the last
    stack that was successfully provisioned by the CloudFormation Create Stack step.
  short_version: Use the CloudFormation Rollback Stack step to rollback to the last
    stack that was successfully provisioned by the CloudFormation Create Stack step.
  body: '<div class="note-callout">Currently, this feature is behind the feature flag
    <code>CLOUDFORMATION_NG</code>. Contact <a href="mailto:support@harness.io" target="_blank">Harness
    Support</a> to enable the feature.</div><p>This topic describes how to use the
    CloudFormation <strong>Rollback Stack</strong> step to rollback to the last stack
    that was successfully provisioned by the CloudFormation <strong>Create Stack</strong>
    step.</p><p></p><h3>Before You Begin</h3><ul><li><a href="/article/vu2qi7dfzm-cloud-formation-provisioning-with-harness">CloudFormation
    Provisioning with Harness</a></li><li><a href="/article/pq58d0llyx-provision-with-the-cloud-formation-create-stack-step">Provision
    with the CloudFormation Create Stack Step</a></li></ul><p></p><h3>Limitations</h3><ul><li>You
    can only roll back to stacks provisioned by Harness.</li></ul><h3>Step 1: Add
    the CloudFormation Rollback Stack</h3><p>In the <strong>Rollback</strong> section
    of your Deploy stage, click <strong>Add Step</strong>, and then select the <strong>CloudFormation
    Rollback Stack</strong> step.</p><p></p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/6jfl7i6a5u/1654213245650/clean-shot-2022-06-02-at-16-39-57.png"/></figure><p>When
    rollback happens, Harness runs the last successfully provisioned version of the
    stack.</p><p>Open <strong>CloudFormation Rollback Stack</strong>.</p><p>Enter
    a name and timeout for the step.</p><p>In <strong>Provisioner Identifier</strong>,
    enter the <u>same</u> Provisioner Identifier you used in the <strong>Create Stack</strong>
    step.</p><p>Harness determines what to rollback using a combination of <code>Provisioner
    Identifier + Harness account id + Harness org id + Harness project id</code>.</p><p>If
    you&#39;ve made these settings expressions, Harness uses the values it obtains
    at runtime when it evaluates the expression.</p><p></p><p></p><p></p>'
  slug: rollback-provisioned-infra-with-the-cloud-formation-rollback-step
  tags: []
  is_live: true
