<h3>Minor Release 75618</h3><p>Release Date: June 30, 2022</p><div class="warning-callout"><strong>Important information about upgrading Timescale DB<br/><br/></strong>Before you upgrade, you must perform these operations to migrate Timescale DB to the latest version.<br/><br/>Run these commands to log in to MongoDB:<br/><br/><code>MONGO_URI=$(echo `kubectl -n harness get secret harness-manager-config -o yaml |grep MONGO_URI |cut -d : -f2 | head -1 |base64 -d -i`)<br/><br/>kubectl exec -it mongodb-replicaset-chart-0 -n harness -- mongo &#34;$MONGO_URI&#34;</code><br/><br/>Once logged in to MongoDB, run these commands:<br/><br/><code>db.schema.find({}) --&gt; get the version from this result<br/><br/>db.schema.update({&#34;version&#34;: &lt;version&gt;}, {$set: {&#34;timescaleDbVersion&#34;: 0, &#34;timescaleDBDataVersion&#34; :0}}) --&gt; substitute the version in this query</code><br/><br/><br/>Take a <code>pgdump</code> of TimescaleDB:<br/><br/>Log in to TimescaleDB.<br/><br/> <code>kubectl exec -it timescaledb-single-chart-0 -n &lt;namespace&gt; -- bash</code><br/><br/> <code>pg_dumpall &gt; dump.out</code><br/><br/>Exit the TimescaleDB:<br/><br/><code>kubectl cp &lt;namespace&gt;/timescaledb-single-chart-0:/home/postrgres/dump.out dump.out<br/></code><br/>Please run all these commands to delete the TimescaleDB stateful set, pvc services, and end points (please change <code>&lt;namespace&gt;</code> accordingly):<br/><br/><code>kubectl delete sts timescaledb-single-chart -n &lt;namespace&gt;<br/><br/>kubectl delete svc timescaledb-single-chart timescaledb-single-chart-config timescaledb-single-chart-replica -n &lt;namespace&gt;<br/><br/>kubectl delete pvc storage-volume-timescaledb-single-chart-0 storage-volume-timescaledb-single-chart-1 -n &lt;namespace&gt;<br/></code><br/>Now you can deploy the new version.<br/><br/><em>Optional:</em><br/><br/>If you see any data discrepancies, you can log in to TimescaleDB again and run a restore of the dump:<br/><br/>1. <code>kubectl cp dump.out &lt;namespace&gt;/timescaledb-single-chart-0:/home/postrgres/dump.out</code><br/><br/>2. <code>kubectl exec -it timescaledb-single-chart-0 -n &lt;namespace&gt; -- bash</code><br/><br/>3. <code>pg_restore dump.out</code><br/></div><p>We&#39;re pleased to present Harness SaaS Release 75628.</p><h4>New Features and Enhancements</h4><h5>Platform and Delegate</h5><ul><li>Immutable delegate JRE version is pinned to 11.0.14 (DEL-4281, ZD-341384)</li><li>Fix current performance log in delegate logs (DEL-4233, ZD-339877)</li><li>Introduced a new bool validTillNextRelease, which will essentially make sure delegate version is valid till next delegate release&#34; DEL-4198, ZD-339271)</li><li>Fix LdapSettings&#39; DTO class to ensure Kryo backwards compatibility of new manager with old delegate. (DEL-4099, ZD-335411)</li></ul><h5>Continuous Deployment</h5><ul><li>Changed the end point for agents to call for instance sync. This ensures separations for end points to monitor which helps us identifying issues faster. (CDS-38387, ZD-339265)</li><li>Custom artifact source script can be made empty now. If the script is empty, the deployment proceeds with the version customer provides and the same details will be available in the artifact variable which can be accessed using ${artifact.*} (CDS-34235, ZD-319303, ZD-28100)</li><li>You can now update/create Jira issues with fields of type <code>user</code>. (CDS-28853, ZD-237529)</li></ul><h4>Issues Fixed in This Release</h4><ul><li>Better error handling and retries when delegates are not available,PL-25873, ZD-336931, ZD-30962)</li><li>Parity gaps in paginated Select,PL-25756, ZD-340756)</li><li>Earlier if there were more Secret Managers in your account,The usage scope was not editable for the Secret Managers listed from second page. We have fixed this bug as part of this ticket. PL-25702, ZD-340258, ZD-31154, ZD-31424)</li><li>Improved error message to show if a secret is not scoped to application and used in expression instead of showing secret does not exist. (PL-25601, ZD-339228, ZD-31263)</li><li>After this change, userGroups referencing in a pipeline will not be allowed to delete via graphQl unless those pipelines are deleted PL-24821, ZD-330752, ZD-30056, ZD-30935)</li><li>Cloud Provider: Secrets are slow to load (PL-24586, ZD-327552, ZD-&#34;20770, ZD-29889, ZD-30552, ZD-30978, ZD-31525)</li><li>Error message is not proper when user tries to login when LDAP enabled and delegate is not available (PL-23373, ZD-320927)</li><li>Unstable UI when created a User group with long name (PL-11098, ZD-138606)</li><li>Rollback to version 1.0.5.1 of the Java SDK (FFM-3643, ZD-340882)</li><li>Logging dependency was removed during cleanup of delegate dependencies, most likely because they were not showing up in dependency graph as they are not directly referenced from code, causing delegate to stop logging to stack driver. (DEL-4278, ZD- 341155</li><li>Some older ECS executions were not loading in UI. This fixes them. (DEL-4277, ZD-340827, ZD-31501, ZD-31622)</li><li>Adding more details in delegate logs in case the calls from delegate to manager are failing. (DEL-4236, ZD-339763, ZD-31346)</li><li>Added filtering by delegate status (DEL-4231, ZD-338690, ZD-31001)</li><li>There was an issue in copying the config files in case the manager and delegates are on different version. This fixes the backward incompatibility DEL-4209, ZD-339001, ZD-31145</li><li>In the Delegate input selectors, it can backspace all the characters, not only up to the first character of text only. Also, by pressing the backspace button twice it can remove the previous tags. (DEL-3331, ZD-317424)</li><li>Manifest history widgets does not display after adding the required Helm manifest (CDS-38855, ZD-341919)</li><li>Fix: Service dashboard fails to load if the pods for any deployment is manually scaled up from 0. (CDS-38830, ZD-341667, ZD-31642)</li><li>CG UI: Alignment issue (CDS-38818, ZD-341678)</li><li>If PCF Setup task fails after creation of the app, the app name revert was failing as the newly created app conflicted with the renames, now it will delete the newly created app if the setup is not successful and then it will start renaming the old apps. Also have added the error message to the UI. (CDS-38675, ZD-339758, ZD-31325)</li><li>Added more details when Helm deploy task fails because of connectivity issues with K8s cluster (CDS-38663, ZD-340886,)</li><li>Fixed an issue when application defaults are configured using code. (CDS-38624, ZD-340656, ZD-31467)</li><li>GCB triggers are showing an unknown error (CDS-38613, ZD-340730)</li><li>UI rendering issue on service page (CDS-38586, ZD-340445, ZD-31435)</li><li>Continue execution API fails with an error occurred (CDS-38523, ZD-340124)</li><li>ECS BG DNS switch workflows, I try to open “Setup Route 53”, it fails with error related to uid ,(CDS-38500, ZD-339910,</li><li>FETCH_S3_FILE_TASK fails in Manager with UNKNOWN error (CDS-38475, ZD-339468, ZD-31300)</li><li>In manual pull window , the auto collection enabled artifact sources were not listed. (CDS-38473, ZD-339836)</li><li>Start New Deployment (Workflow) Returns only 1000 workflows,(CDS-38466, ZD-339796, ZD-31355)</li><li>Even if I increase the width of the column, the text remains stripped (CDS-38436, ZD-339598, ZD-31320)</li><li>UnsupportedOperationException displayed for artifact collection step (CDS-38433, ZD-339617)</li><li>SaaS - CD CG - Jira Update - Invalid issue type (CDS-38432, ZD-334655, ZD-30622)</li><li>Update feature flag (CDS-38413, ZD-339432)</li><li>Rollback failling - No context found for rollback,(CDS-38227, ZD-338653)</li><li>User group could have been deleted if they were part of deployment freeze which led to dangling references in freeze windows.</li><li>Going forward user group can&#39;t be deleted if they are part of deployment freeze.(CDS-38177, ZD-338191)</li><li>Fixed retry logic to start chart museum server in case the port is already in use. (CDS-38135, ZD-338164, ZD-31129)</li><li>Artifact collection with FF &#39;DISABLE_ARTIFACT_COLLECTION&#39; on - Nexus3 artifact collection is failing with Nexus 3.x does not support getVersion for parameterized artifact stream (CDS-38030, ZD-337779)</li><li>Artifact History option is not shown for already auto collection artifact sources when we enable the FF (CDS-37958, ZD-337482)</li><li>For docker artifact streams, changing collection value from yaml doesn&#39;t work (CDS-37956, ZD-337478)</li><li>Deployment Permissions for a Specific Pipeline (CDS-37918, ZD-337154, ZD-30951)</li><li>Added skip validation support Docker Connector. You can now skip validation of Docker connectors on save from both UI and YAML(`skipValidation`) field. (CDS-37915, ZD-335686, ZD-30577)</li><li>Added the execution capability of SM to verify the eligibility of delegate to access the SM. (CDS-37797, ZD-335663, ZD-30884)</li><li>Missing Git File error for CloudFormation from GIT does not surface to the Deployment Logs (CDS-37670, ZD-334989, ZD-30781)</li><li>Not using helm version 3.8 when doing test connection for helm connector (CDS-37554, ZD-335074)</li><li>Made timeout as required field (CDS-37524, ZD-332818, ZD-30412)</li><li>PCF Deployment Fails with SweepingOutputServiceImpl.save Error,(CDS-37500, ZD-334924, ZD-30761)</li><li>New change will make call in group of 15 items every time you scroll, and also if you type it will search for those 15 items with the written text . The changes are behind a ff , so that testing scope is not increased and we can quickly move the changes. (CDS-37471, ZD-334477, ZD-30667)</li><li>RollbackArtifact variables equal to &#39;null&#39; (CDS-36700, ZD-331273, ZD- ZD-29101, ZD-30120)</li><li>Azure - Artifactory incorrectly regenerates/reads the artifact path,(CDS-36596, ZD-330603)</li><li>We added a monitor to detect when a workflow has an active status, is stuck in a not execution step, and for more than 45 minutes. The REPEAT, FORK, PHASE_STEP, PHASE, and SUB_WORKFLOW are considered not execution steps.<ul><li>This feature is behind FF named WORKFLOW_EXECUTION_ZOMBIE_MONITOR.</li><li>Two info-level log messages are added to help in future troubleshooting.</li><li># Evaluating if workflow execution {} is a zombie execution [workflowId={}] – Printed when monitor found a stuck/zombie candidate.</li><li># Trigger force abort of workflow execution {} due remains in a zombie state [currentStateType={}] – Printed when is detected the zombie conditions, running for more than 10 minutes in a not execution step. (CDS-36559, ZD-324718, ZD-18501, ZD-29096)</li></ul></li><li>Improve error message for past window activation for freeze window (CDS-36119, ZD-327394)</li><li>Missing Validation for artifactType type in service creation (CDS-35830, ZD-326216)</li><li>Issues with CloudFormation Rollback have been fixed. Now, template expressions and multiple cloud providers in a single environment are supported during Rollback. (CDS-34125, ZD-310924, ZD-26628)</li><li></li><li></li></ul><p></p>