type: article
article_id: 0v512791gf
user_id: mfr0nxh4be
category_id: h4k144tv5t
author:
  name: Michael Cretzman
  profile_image: https://www.gravatar.com/avatar/2e8616837f4ee92be5d19ffe9b9ccba9?d=mm&s=150
title: Harness Self-Managed Enterprise Edition Release Notes (FirstGen)
slug: harness-on-prem-release-notes
description: This document contains release notes for Harness Self-Managed Enterprise
  Edition. For Harness SaaS release notes, see Harness SaaS Release Notes. Release
  notes are displayed with the most recent rele…
short_version: This document contains release notes for Harness Self-Managed Enterprise
  Edition. For Harness SaaS release notes, see Harness SaaS Release Notes. Release
  notes are displayed with the most recent rele…
tags: []
show_toc: false
is_private: false
is_published: true
is_featured: false
stale_status:
  is_stale: false
  reason: ""
  source: API
  triggered_at: 2022-09-07T03:58:10.056839Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: Harness Self-Managed Enterprise Edition Release Notes (FirstGen)
  description: ""
  short_version: ""
  body: '<p>This document contains release notes for Harness Self-Managed Enterprise
    Edition.</p><div class="note-callout">For Harness SaaS release notes, see <a href="/article/xacpxeyioo-harness-saa-s-release-notes">Harness
    SaaS Release Notes</a>.</div><p>Release notes are displayed with the most recent
    release first.</p><h3>August 31, 2022, minor release 76324</h3><p>Delegate: 76324</p><div
    class="warning-callout"><strong>Important information about upgrading KOTS admin
    console<br/><br/></strong><strong>Minor release 76324 requires KOTS admin console
    version 1.78.0.</strong> You must update KOTS before you deploy this release of
    Harness Self-Managed Enterprise Edition.<br/><br/>To update KOTS admin console:<br/><br/><code>curl</code>
    <a href="https://kots.io/install/1.78.0"><code>https://kots.io/install/1.78.0</code></a><code> |
    bash</code><br/><code>kubectl kots admin-console upgrade -n &lt;namespace&gt;</code></div><p></p><h4>New
    Features and Enhancements</h4><p>This release introduces the following features
    and enhancements.</p><h5>Platform and Delegate</h5><ul><li>The org.apache.cxf:cxf-core
    component version was upgraded to 3.4.7. The upgrade addressed vulnerabilities
    in the earlier version. (DEL-4575)</li><li>The TAR archive utility is bundled
    with UBI-based Delegate images. This utility is widely used in customer scripts
    and shell tasks but is not included in UBI Minimal images by default. (DEL-4518)</li><li>The
    Bouncy Castle Crypto component org.bouncycastle:bcprov-ext-jdk15on was upgraded
    to version 1.70. (DEL-4433)</li><li>Delegates can detect if a client tool is available
    at the <code>$PATH</code> location and use the client tool for task execution.
    (DEL-4344)<br/>The discovery process checks the following locations in the order
    given; the first located tool is used:<ul><li>Custom paths configured through
    legacy environment variables like <code>KUBECTL_PATH</code></li><li><code>$PATH</code> environment
    variable</li><li>Default tool location (under <code>./client-tools/</code>)</li><li>Download
    the tool to the default tool location (if download is enabled)</li></ul>The discovery
    process for immutable Delegates is limited to checking the following locations
    in the order given:<ul><li><code>$PATH</code> environment variable</li><li>Default
    tool location (under <code>./client-tools/</code>)</li></ul></li></ul><h4>Continuous
    Deployment</h4><p>N/A</p><h4>Issues Fixed in This Release</h4><ul><li>Clarified
    the process used to obtain the correct artifact for rollback. The process was
    changed to distinguish between the artifacts used when multiple workflows are
    deployed in succession by the same service on the same infrastructure. This corrects
    a problem with rolling back to the same artifact that was already deployed. (CDS-35655,
    ZD-29101, ZD-32440)</li><li>Modified code to display an error in the UI when an
    application resize step error occurs. (CDS-39556)</li><li>Modified code to generate
    an exception when the user attempts to submit WinRM Command Parameters with empty
    parameters and values. The error now triggers the message &#34;WinRM Command Parameters
    cannot be empty. Please remove the empty WinRM Command Parameters pairs.&#34;
    Existing parameter pairs are ignored to avoid <code>InvalidArgument</code> errors.
    (CDS-39586, ZD-32289)</li><li>Changed the <code>AccountResourceType.GOVERNANCE</code>
    value to <code>AccountResourceType.DEPLOYMENT_FREEZE</code>. This corrected a
    problem with the return of the DEPLOYMENT_FREEZE value from an API method. (CDS-39752)</li><li>Added
    the <code>REMOVE_USERGROUP_CHECK</code> Feature Flag to allow the correction of
    YAML-based configuration files in the YAML editor. This resolved an issue some
    customers experienced when a User Group ID was found to be invalid in YAML files
    belonging to a pipeline. (CDS-39770, ZD 32247, CD-32379)</li><li>The process used
    to collect Helm chart manifests was changed to omit database updates during deployment.
    Eliminating the database update allows the collection step to succeed. (CDS-40054,
    ZD-32179)</li><li>The Feature Flag <code>EXTRA_LARGE_PAGE_SIZE</code> was introduced
    to increase the maximum page count from 1200 to 3000. The size restriction caused
    problems with the population of values in an infrastructure definition. (CDS-40271,
    ZD-31625)</li><li>The handling of Terraform Plan (TP) files has been changed.
    Enabling the <code>ANALYZE_TF_PLAN_SUMMARY</code> Feature Flag makes the following
    expressions available after the Terraform Plan step: <code>${terraformApply.add}</code>,
    <code>${terraformApply.change}</code>, and <code>${terraformApply.destroy}</code>.
    The following expressions are available after the Terraform Destroy Plan step:
    <code>${terraformDestroy.add}</code>, <code>${terraformDestroy.change}</code>,
    and <code>${terraformDestroy.destroy}</code>. If there are no changes, the plan
    is not uploaded to the configured Secret Manager, regardless of the checked export
    option in the Terraform Plan step. (CDS-40341, ZD-31827, ZD-32632)</li><li>Modified
    JavaScript to eliminate an empty enumeration error that occurred during attempts
    to add AMI artifact sources. The error interfered with tag creation. The proper
    workflow has been restored. (CDS-40416)</li><li>Changed how environment and service
    variables are resolved to ensure that expressions that resolve to null before
    the pipeline workflow stage are not discarded. Retaining the expression allows
    for the correct resolution of environment and service variables in the environment
    and service. (CDS-40493)</li><li>Changed the handling of custom webhook triggers
    to allow users to see the disabled artifacts in a push event. (CDS-40884)</li><li>Changed
    the process used to roll back the Azure Webapp basic deployment to ensure the
    use of the artifact used for the last successful deployment. Before this change
    was made, the artifact preceding that used for the last successful deployment
    was being used. (CDS-40886)</li><li>Changed the type of the generation of harness.io/skip-versioning
    from a boolean value to a default type of String. This change provides support
    for the new <code>kubectl</code> binary. To ensure backward compatibility, the
    change was made globally and without the use of Feature Flags. (CDS-40892)</li><li>Fixed
    an issue in the UI that prevented the population of the values for service and
    environment into a dropdown menu. This prevented the creation of triggers when
    infrastructure definitions were made as expressions in a pipeline. (CDS-40901)</li><li>Fixed
    an issue with tags that were not resolved after the approval step. The issue interfered
    with the population of tags onto the Deployment page. (CDS0-41001, ZD-32937)</li><li>Changes
    were made to the handling of the no-tools Delegate image (<code>delegate:ubi-no-tools</code>)
    to ignore the failed retrieval of paths to missing tools. The problem was resolved
    by falling back to the binary name as the default value. (CDS-41026, CDS-40449,
    ZD-32497)</li><li>Queries for artifact labels were changed to return null when
    the artifact does not have a label. (CDS-41209)</li><li>Changed error handling
    to send an alert when GitSync operations fail due to an invalid entity name. Entity
    names specified to contain a forward slash (&#39;/&#39;) character were causing
    GitSync to fail without triggering an alert. (CDS-41464, ZD-33310)</li><li>Changed
    the Delegate to remove and replace the config-delegate.yaml file when a new Delegate
    process starts. This fixed a problem that stopped memory throttling from being
    enabled when the Delegate was enabled. (DEL-4444)</li><li>Resolved a conflict
    that resulted in the overwrite of the <code>config-delegate.yml</code> file and
    interfered with configuration settings in the <code>start.sh</code> script. The <code>delegate.sh</code> script
    was changed to rewrite the correct value for the environment variable. (DEL-4571)</li><li>Resolved
    an issue that stopped Watcher Stackdriver logging from running. Some missing dependencies
    were supplied. (DEL-4597)</li><li>Changed the <code><strong>VariableOverrides</strong></code>
    UI component to more quickly load encrypted text (secrets). The modified component
    adds support for paginated and searchable query for faster retrieval and overwriting
    operations. The feature is currently behind Feature Flag <code>USE_PAGINATED_ENCRYPT_FOR_VARIABLE_OVERRIDES</code>.
    (PL-26345)</li></ul><h3>July 31, 2022, minor release 76025</h3><div class="warning-callout"><strong>Important
    information about upgrading Timescale DB<br/><br/></strong>Before you upgrade
    to this release, you must run the following script <strong>timescaledb_upgrade.sh </strong>against
    your Harness namespace to update Timescale DB.<br/><br/></div><p></p><details><summary>timescaledb_upgrade.sh</summary><div><pre
    class="hljs bash">#!/bin/bash<br/><br/>[[ -z $1 ]] &amp;&amp; echo &#34;No Namespace
    specified, please run $0 &lt;namespace&gt;, or $0 &lt;namespace&gt; restore_dump
    -- to restore the dump.out generated by the script from current directory.&#34;
    &amp;&amp; exit 1 || ns=&#34;$1&#34;<br/><br/>###<br/><br/>MONGO_URI=$(echo `kubectl
    -n $ns get secret harness-manager-config -o yaml |grep MONGO_URI |cut -d : -f2
    | head -1 |base64 -d -i`)<br/>log=&#34;update_tsdb.log&#34;<br/>schema_ver=`kubectl
    exec -it mongodb-replicaset-chart-0 -n $ns -- mongo &#34;$MONGO_URI&#34; --quiet
    --eval &#34;db.schema.find({})&#34; |cut -d : -f5 |cut -d , -f1 |cut -c2-`<br/><br/>###<br/><br/>function
    checkret() {<br/>        if [ $? -ne 0 ]; then<br/>          echo &#34;[FAIL]&#34;
    ; exit 1<br/>        else<br/>          echo &#34;[OK]&#34;<br/>        fi<br/>}<br/><br/>        if
    [ &#34;$2&#34; = &#34;restore_dump&#34; ] ; then<br/>                echo -n &#34;restore_dump
    detected, copying dump.out from current directory to tsdb...&#34;<br/>                if
    [ -f ./dump.out ] ; then<br/>                        kubectl cp dump.out $ns/timescaledb-single-chart-0:/home/postgres/dump.out
    &amp;&gt;&gt;$log<br/>                                checkret<br/>                echo
    -n &#34;Restoring dump.out to tsdb(postgres)...&#34;<br/>                        kubectl
    exec -it timescaledb-single-chart-0 -n $ns -- bash -c &#34;psql &lt; dump.out&#34;
    &amp;&gt;&gt;$log<br/>                                checkret<br/>                        echo
    &#34;Restoration complete, exiting...&#34; ; exit 0<br/>                else<br/>                echo
    &#34;[FAIL - dump.out not detected in `pwd`, exiting]&#34; ; exit 1<br/>                fi<br/>        else<br/>                echo
    &#34;timescaledb upgrade preparations, if you encounter any issues please provide
    $log to support@harness.io, proceeding...&#34;<br/>        fi<br/><br/><br/><br/>##########<br/><br/>echo
    &#34;Schema version = $schema_ver&#34;<br/>echo -n &#34;Updating schema version
    $schema_ver to 0 for tsdb...&#34;<br/><br/>kubectl exec -it mongodb-replicaset-chart-0
    -n $ns -- mongo &#34;$MONGO_URI&#34; --quiet --eval &#34;db.schema.update({&#34;version&#34;:
    $schema_ver}, { \$set : {&#34;timescaleDbVersion&#34; : 0, &#34;timescaleDBDataVersion&#34;
    :0}})&#34; &amp;&gt;&gt;$log<br/>        checkret<br/><br/>echo -n &#34;Taking
    dump of postgres...&#34;<br/>        kubectl exec -it timescaledb-single-chart-0
    -n $ns -- bash -c &#34;pg_dumpall &gt; dump.out&#34; &amp;&gt;&gt;$log<br/>        checkret<br/><br/>echo
    -n &#34;Copying postgres db dump to local direcotry: `pwd`/dump.out...&#34;<br/>        kubectl
    cp $ns/timescaledb-single-chart-0:/home/postgres/dump.out dump.out &amp;&gt;&gt;$log<br/>        checkret<br/><br/>echo
    &#34;Backup complete, confirm dump.out is valid, and press ENTER to continue,
    CTRL+C to abort...&#34;<br/>        read wait;<br/><br/>echo -e &#34;<br/><br/>Removing
    statefulsets and pvcs:&#34;<br/><br/>echo -n &#34;Removing statefulset for TSDB...&#34;<br/>kubectl
    delete sts timescaledb-single-chart -n $ns &amp;&gt;&gt;$log<br/>        checkret<br/><br/>echo
    -n &#34;Removing TSDB service...&#34;<br/>kubectl delete svc timescaledb-single-chart
    timescaledb-single-chart-config timescaledb-single-chart-replica -n $ns &amp;&gt;&gt;$log<br/>        checkret<br/><br/>echo
    -n &#34;Removing TSDB PVCs(storage-volume-timescaledb-single-chart-0)...&#34;<br/>kubectl
    delete pvc storage-volume-timescaledb-single-chart-0 -n $ns &amp;&gt;&gt;$log<br/>                checkret<br/><br/>echo
    -n &#34;Removing TSDB PVCs(storage-volume-timescaledb-single-chart-1)...&#34;<br/>        kubectl
    get pvc storage-volume-timescaledb-single-chart-1 -n $ns &amp;&gt;&gt;$log<br/>        if
    [ $? -ne 0 ] ; then<br/>        echo &#34;not found, skipping.&#34;<br/>        else<br/>        kubectl
    delete pvc storage-volume-timescaledb-single-chart-1 -n $ns &amp;&gt;&gt;$log<br/>        echo
    &#34;[OK]&#34;<br/>        fi<br/><br/>        for ep in `kubectl get ep |grep
    timescale | cut -d &#39; &#39; -f1` ; do<br/><br/>echo -n &#34;Removing TSDB endpoint($ep)...&#34;<br/>        kubectl
    delete ep $ep -n $ns &amp;&gt;&gt;$log<br/>                checkret<br/>        done<br/><br/><br/>echo
    -e &#34;TSDB backup/dump completed, please proceed with upgrade to 756xx release.<br/>*****************************************************************************<br/>NOTE:
    All data should be rebuilt within TSDB, optionally however, if you are<br/>seeing
    inconsistent data, run the following to restore your dump to tsdb:<br/><br/>$0
    &lt;namespace&gt; restore_dump<br/><br/>this will restore the dump taken to postgres
    within tsdb.<br/><br/>Any issues, please contact support@harness.io&#34; ; exit
    0<br/></pre></div></details><p> We&#39;re pleased to present Harness Self-Managed
    Enterprise Edition Minor Release 76025.</p><h4>New Features and Enhancements</h4><h5>Platform
    and Delegate</h5><ul><li>Added a time-to-live (TTL) value to Delegate task assignment
    data. This ensures the expiration and discard of old records (DEL-4409)</li><li>Implemented
    Immutable Delegate Operations Suite (formerly Stackdriver) logging. Immutable
    Delegates now transmit logs to Harness Manager (DEL-4285)</li><li>Updated immutable
    Delegates to use JRE version 11.0.14 (DEL-4281)</li><li>Fixed a problem with the
    current performance log in the Delegate (DEL-4233)</li><li>Introduced the <code>validTillNextRelease</code>
    boolean value to indicate that the current Delegate version is the latest version
    and considered valid (DEL-4198)</li><li>Changed the <code>LdapSettingsDTO</code>
    class to support the use of the new manager with older Delegates (DEL-4099)</li><li>Added
    API support to list the required Delegates during automated installation and use
    (DEL-3520).</li></ul><h4>Continuous Deployment</h4><ul><li>Separated the endpoints
    used for monitoring from those used by agents for instance sync. This improves
    monitoring and problem identification (CDS-38387)</li><li>Changed custom deployments
    to eliminate polling and permit an empty artifact source script. If no script
    is specified, the deployment uses the provided artifact version and version information
    is available in the artifact variable<code>${artifact.*}</code> (CDS-34235)</li><li>You
    can now update/create Jira issues with fields of type <code>user</code>. (CDS-28853,
    ZD-237529)</li></ul><h4>Issues Fixed in This Release</h4><ul><li>Resolved a schema
    problem that caused GraphQL API to fail with &#34;TypeError: Type SecretManagerConfig
    must define one or more fields.&#34; The failure occurred when schema validation
    was enabled (PL-26534, ZD-32450, ZD-32477, ZD-32501)</li><li>Application Permissions
    under User Groups does not load (PL-26111, ZD-32018)</li><li>Missing Kryo register
    for class io.harness.exception.InterruptedRuntimeException.class. Registered the
    class in kryo.<br/> (PL-26018)</li><li>Resolved a problem that made API keys visible
    an available for GraphQL mutation (PL-25976)</li><li>Resolved a side effect of
    a logic change that triggered &#34;Files Unavailable&#34; messages to appear in
    the UI under &#34;Git Sync Activity&#34; when Delegates were not available (PL-25873,
    ZD-30962)</li><li>Improved the user experience in Secrets Manager for function
    and usability (PL-25859)</li><li>Improved the user experience in Cloud Secrets
    loader for function and style (PL-25756)</li><li>Fixed a problem that prevented
    editing the usage scope of Secret Managers appearing on pages 2 and higher in
    a paginated list of Secret Managers that belong to an account (PL-25702, ZD-31154,
    ZD-31424)</li><li>Improved the error messaging that is generated when a secret
    that is not scoped to an application is used in a regular expression. The original
    error message said that the secret did not exist (PL-25601, ZD-31263)</li><li>Removed
    the Slack channel name UI element and updated snapshots (PL-25559)</li><li>Fixed
    a problem that intermittently prevented the deletion of old entity names in git.
    The issue occurred when an entity was renamed in Harness application and affected
    customers who used rename operation with git sync in CG (PL-25117, ZD-30527)</li><li>Improved
    the specificity of a generic error message to aid in understanding the problem
    (PL_24963, ZD-30093)</li><li>Eliminated the option to delete userGroup references
    in a pipeline using GraphQL unless the pipelines are deleted (PL-24821, ZD-30056,
    DZ-30935)</li><li>With the new Secrets component which loads secret with typeahead
    and renders them in paginated fashion in a dropdown.Feature flag USE_PAGINATED_ENCRYPT_SERVICE
    should be enabled for the new component to load (PL-24586, ZD-20770, ZD-29889,
    ZD-30552, ZD-30978, ZD-31525)</li><li>Enhanced the current component and added
    search-ability and paginated responses using infinite scroll (PL-25448, ZD-31159)</li><li>Changed
    the confi-as-code <code>upsert-entity</code> API to return HTTP 400 on failure
    (PL-23938)</li><li>Improved the behavior of the UI when a user group is created
    with a long name (PL-11098)</li><li>Rolled back Java SDK to version 1.0.5.1 (FFM-3643)</li><li>Fix
    backward incompatible enum change with latest versions of manager (DEL-4479, ZD-32463)</li><li>Resolved
    a problem that caused immutable delegates to download client tools even when download
    was explicitly disabled (DEL-4478)</li><li>Fixed an issue that caused no-tools
    images to download tools on-the-fly (DEL-4475)</li><li>Fixed a problem that caused
    Slack messages sent by Delegates to fail (DEL-4431, ZD-32250)</li><li>Changed
    behavior to disallow Harness support users from downloading Delegates on customer
    accounts (DEL-4425)</li><li>Corrected a regression issue that prevented Delegates
    from sending email to customers over SMTP (DEL-4403, ZD-<br/>31746, ZD-31898,
    ZD-31917, ZD-31986, ZD-31990)</li><li>Increased time out for network calls from
    delegate as task acquire call is timing out before completion when there are more
    than 100 secrets to decrypt (DEL-4399, ZD-32084)</li><li>Fixed API to accept ringName
    in cases where Delegate ring is enabled (DEL-4295)</li><li>Resolved an issue where,
    under high load conditions, Harness Manager sometimes sent a Delegate the incorrect
    version of Java. The issue resulted in termination without recovery for Delegate
    processes (DEL-4291, ZD-31673)</li><li>Logging dependency was removed during cleanup
    of delegate dependencies, most likely because they were not showing up in dependency
    graph as they are not directly referenced from code, causing delegate to stop
    logging to stack driver (DEL-4278)</li><li>Resolved an issue that prevented some
    older ECS executions from loading in the UI (DEL-4277, ZD-31501, ZD-31622)</li><li>Changed
    an issue in the Delegate websockets connection to Harness Manager to allow for
    quicker reconnects when network problems occur (DEL-4269, ZD-31018, ZD-31589,
    ZD-31849)</li><li>Adding more details in delegate logs in case the calls from
    delegate to manager are failing (DEL-4236, ZD-31346)</li><li>Added filtering by
    delegate status (DEL-4231, ZD-31001)</li><li>There was an issue in copying the
    config files in case the manager and delegates are on different version. This
    fixes the backward incompatibility (DEL-4209, ZD-31145)</li><li>New warning in
    delegate logs to show if heartbeat is delayed more than 3 minutes (DEL-4167, ZD-30491)</li><li>In
    the Delegate input selectors, it can backspace all the characters, not only up
    to the first character of text only. Also, by pressing the backspace button twice
    it can remove the previous tags (DEL-3331)</li><li>Added null check for environment
    so that if no environments present it should not crash the deployment filters
    (CDS-39936)</li><li>While adding infra definition as template in a pipeline stage
    and choosing the option to &#39;always skip&#39; the stage, the deployment was
    throwing an error message saying infra is invalid.We were still validating infra
    even when stage is marked as &#39;always skipped&#39; in which case infra can
    be empty. Skipped validation of infra in that case to fix the bug. Now we will
    successfully be able to select &#39;skip always&#39; option for infra templatized
    stages too (CDS-39825)</li><li>For customers who had feature flag PIPELINE_PER_ENV_DEPLOYMENT_PERMISSION
    enabled can now work with trigger creation with templatized pipeline (CDS-39740,
    ZD-32239)</li><li>Improved the Error Message for Rancher Cloud Provider Test connection
    Failure (CDS-39235)</li><li>Fixed &#34;workflow execution not found&#34; exception
    on service dashboard page (CDS-39230, ZD-32027, ZD-32029)</li><li>The issue was
    because Currently, we limit to 500 artifacts and then apply pattern filter.<br/>Fix:
    We now first apply the pattern filter to all artifacts and then limit it to 500.</li><li>There
    were some missing attributes like processes, metadata, and so on, in PCF manifest
    due to which it wasn&#39;t being parsed. Have added the supported CF attributes</li><li>Fixed
    shell script step authentication on GKE 1.19+. While the response from, for instance,
    kubectl command invoked in a shell script step was previously &#34;Unauthorized&#34;,
    now the platform will authenticate correctly if the cloud provider credentials
    are valid (CDS-38837, ZD-31452)</li><li>Fix: Service dashboard fails to load if
    the pods for any deployment is manually scaled up from 0 (CDS-38830, ZD-31642)</li><li>Text
    will be truncated if its length is more than the length of box (CDS-38828)</li><li>Fixed
    a bug where big artifacts list was not being trimmed down at slack messages- Fixed
    a bug where large messages were being restricted by Slack API (CDS-38677, ZD-31302,
    ZD-32268)</li><li>If PCF Setup task fails after creation of the app, the app name
    revert was failing as the newly created app conflicted with the renames, now it
    will delete the newly created app if the setup is not successful and then it will
    start renaming the old apps. Also have added the error message to the UI (CDS-38672,
    ZD-31471)</li><li>Added more details when Helm deploy task fails because of connectivity
    issues with K8s cluster (CDS-38663)</li><li>Customer will be able to use Terragrunt
    Destroy Step even with underlying terraform version &gt; 15.0.0 (CDS-38662, ZD-31506)</li><li>Fixed
    an issue when application defaults are configured using code (CDS-38624 ZD-31467)</li><li>Manifest
    collection directory is changed from /manifest-collection-{app-manifest-id}/ to
    /manifest-collection/{app-manifest-id} to reduce clutter in home folder (CDS-38543,
    ZD-30994)</li><li>While picking previous approvals to reject with auto reject
    previous approvals feature, only workflows waiting on same approval step is considered
    (CDS-38525)</li><li>With this FF on, a static timeout of 3min is added in git
    fetch operation in K8s and Native helm swimlanes in CG (CDS-38492, ZD-31294)</li><li>User
    group could have been deleted if they were part of deployment freeze which led
    to dangling references in freeze windows. Going forward user group can&#39;t be
    deleted if they are part of deployment freeze (CDS-038177)</li><li>Fixed retry
    logic to start chart museum server in case the port is already in use (CDS-38135,
    ZD-31129)</li><li>The deployment status was showing wrong artifact in custom deployment
    type when a rollback happened. Have fixed this to show the correct artifact (CDS-37806,
    ZD-30352)</li><li>Added the execution capability of SM to verify the eligibility
    of delegate to access the SM (CDS-37797, ZD-30884)</li><li>Made timeout a required
    field (CDS-37524, ZD 30412)</li><li>YAML won&#39;t have service name and environment
    name in case it is templatized (CDS-37480, ZD-28531)</li><li>New change will make
    call in group of 15 items every time you scroll, and also if you type it will
    search for those 15 items with the written text . The changes are behind a feature
    flag, so that testing scope is not increased and we can quickly move the changes
    (CDS-37471, ZD-30667)</li><li>Displayed the service artifact version and enhanced
    the design on hovering over the details (CDS-37635)</li><li>We added a monitor
    to detect when a workflow has an active status, is stuck in a not execution step,
    and for more than 45 minutes. The REPEAT, FORK, PHASE_STEP, PHASE, and SUB_WORKFLOW
    are considered not execution steps.This feature is behind FF named WORKFLOW_EXECUTION_ZOMBIE_MONITOR.Two
    info level log messages are added to help in future troubleshooting.# Evaluating
    if workflow execution {} is a zombie execution [workflowId={}] – Printed when
    monitor found a stuck/zombie candidate.# Trigger force abort of workflow execution
    {} due remains in a zombie state [currentStateType={}] – Printed when is detected
    the zombie conditions, running for more than 10 minutes in a not execution step
    (CDS-36559, ZD-18501, ZD-29096)</li></ul><h3>May 31, 2022, minor release 75281</h3><div
    class="warning-callout"><strong>Important information regarding certificates and
    Delegate upgrade to OpenJDK 11:</strong><br/><br/>As part of our migration to
    OpenJDK 11, Delegates will download OpenJDK 11 and get started with it instead
    of the previous OpenJDK 8 that was used. This means that Delegates will have Java
    installed on a different path. Any user actions which modify or use older Java
    versions would be affected. Some of the most common scenarios include adding certificates
    to the default Java keystore and running additional Java applications using Delegates
    installed Java (e.g. from a profile or init script).<br/><br/>See <a href="https://community.harness.io/t/information-regarding-certificates-and-delegate-upgrade-to-openjdk-11/12074"
    target="_blank">Information regarding certificates and Delegate upgrade to OpenJDK
    11</a>.</div><p>We&#39;re pleased to present Harness On-Premise Minor Release
    75281.</p><h4>General What&#39;s New and Early Access</h4><ul><li><a href="https://changelog.harness.io/?categories=fix,improvement,new"
    target="_blank">New features added to Harness</a>.</li><li><a href="https://changelog.harness.io/?categories=early-access"
    target="_blank">Features behind Feature Flags</a> (Early Access).</li></ul><h4>New
    Features and Enhancements</h4><p>The following new features were added to the
    Harness platform components:</p><h5>Platform</h5><ul><li>Support skipValidation
    for secret created using Custom Secret Manager (PL-23731)</li></ul><h5>CD</h5><ul><li>For
    CloudFormation steps, we are going away from AWS CloudFormation update() API and
    moving to AWS CloudFormation Change sets to update stacks. (CDS-37148)<ul><li>This
    will help customers properly validate CF Templates if there are no changes done.
    This is behind FF and impacts only stack updates. The creation of the stack will
    work as it is working right now.</li></ul></li><li>Apply deployment tags (Pipelines
    and Workflows) during the execution. (CDS-29002)<ul><li>With this change, Pipeline
    tags are resolved after every stage is finished. Previously they were being resolved
    only twice: before Pipeline execution started and after Pipeline execution finished.</li></ul></li></ul><h5>Delegate</h5><ul><li>Remove
    iterator logging and build first class support with OpenCensus.<ul><li>As part
    of streamlining our monitoring and reducing the cost of logging, all the background
    jobs metrics are moved from log based metrics to OpenCensus metrics providing
    us better visibility into our critical paths. (DEL-3835)</li></ul></li></ul><h4>Issues
    Fixed in the Release</h4><ul><li>cURL query for createFreeze window returns error
    message on using API key (PL-24899, ZD-29519, ZD-30296)</li><li>Delayed Sync with
    Harness UI and Github Config as Code Repository. We had some slowness in case
    a file was renamed in Harness -→ git. We have improved it going forward. (PL-24662,
    ZD-28316)</li><li>UI is not preserving the error message format which BE is sending.
    Although backend was sending newline characters, frontend wasn&#39;t honouring
    them. It is fixed now using a CSS rule. (PL-23726)</li><li>Delegate watcher throwing
    null pointer exception on DELEGATE_SHUTDOWN_TIMEOUT. Handle null value scenario
    while reading delegate data. Watcher was into a loop of reading Delegate data.
    Couldn&#39;t make progress because of this NPE. Fixed the code path by making
    correct assumptions. (DEL-4039)</li><li>Manifest collection task assignment is
    failing (DEL-3999)</li><li>delegateScopeList API call not working. Fixed the bug
    of listing Delegate scopes when the environment is not provided (DEL-3991, ZD-30462)</li><li>Added
    support for special characters in proxy password for delegate proxying. (DEL-3348,
    ZD-26493)</li><li>Triggers fail when optional input of type allowed values is
    not passed in the payload. Issue scenario: If you had an optional workflow variable
    with some allowed values, and the value was not provided for that workflow variable
    in trigger payload, and trigger executions starting failing with error: Trigger
    rejected because a passed workflow variable was not present in allowed values.
    Fix: Changed the validation to only occur when variable value is provided in trigger.
    (CDS-37510, ZD-30760, ZD-30769, ZD-30773, ZD-30777, ZD-30782, ZD-30797, ZD-30798,
    ZD-30810, ZD-30812)</li><li>Bamboo step is failing and Delegate is throwing Class
    is not registered: software.wings.delegatetasks.BambooTask$BambooExecutionResponse
    execption (CDS-37264, ZD-30567)</li><li>SSH Step -&gt; Download Artifact: NPE
    with DownloadArtifactCommandUnit.java. Gives UNKNOWN_ERROR on the UI (CDS-37193,
    ZD-30299, ZD-30498, ZD-30499)</li><li>ArtifactMetadataEvaluator Class is not registered
    in QA (CDS-37055)</li><li>Artifactory Docker autosuggestion shows wrong value
    for Artifactory on-prem/server for &#34;Docker Repository Server&#34; (CDS-36996,
    ZD-30023, ZD-30402, ZD-30568, ZD-30623, ZD-30628)</li><li>Clicking Task Definition
    in newly created ECS service: &#34;Something went wrong...&#34;. Added null check
    (CDS-36995, ZD-30422)</li><li>Canary failed: [Canary failed - Invalid request:
    Infra Definition is not associated with Environment error. When the environment
    change, we clear the infrastructure definitions to force the user to review every
    phase and manually fix it. That behavior is a feature and not a bug. For a reason,
    after the clone operation, the workflow is not set as incomplete and that is what
    we fixed here. (CDS-36932, ZD-30269)</li><li>[Rancher] NPE on Rancher Rollout
    Deployment - 400-rest/src/main/java/software/wings/delegatetasks/rancher/RancherTaskHelper.java:105.
    Bug resolved by adding null checks (CDS-36740, ZD-30133)</li><li>Kyro exception
    seen in the QA manager logs for Jenkins server while fetching builds information
    (CDS-36729)</li><li>Cannot Select all User Groups in Freeze Window (CDS-36681)</li><li>When
    using REST or GraphQL the workflow execution status return a value different of
    the UI. To get the current status value is required to transpose the execution
    tree and this take sometime. This refresh status operation is behind a FF named
    WORKFLOW_EXECUTION_REFRESH_STATUS. (CDS-36623, ZD-29921)</li><li>Error when editing
    a Cron-based Trigger where the existing cron value is now in the past. Trigger
    editing problem with cronjob, where frontend was sending an unused field with
    a value that was exceeding the Long max value from java. The field was marked
    to be ignored by the backend. (CDS-36570, ZD-29822, ZD-30469)</li><li>Workflow
    won&#39;t abort: showing up as paused. Change TTL of WaitInstance to 90 days,
    and add a log when a WaitInstance is not found to help us in future troubleshooting.
    (CDS-36568, ZD-29994)</li><li>Cannot Select all User Groups in Freeze Window.
    We were not supporting selecting all the user group and user had to click one
    by one to select all user group if he wants to notify all. Going forward we can
    select &#34;ALL&#34; option to notify all at once. (CDS-36556, ZD-29926)</li><li>Custom
    Approval Step - Shell Script - Secret exposed (CDS-36154, ZD-29588)</li><li>Artifactory
    incorrectly regenerates/reads the artifact path - AWS Lambda (CDS-36045)</li><li>YAML
    Validation is missing for service and environment selection while creating the
    Deployment Freeze Windows (CDS-35705)</li><li>JENKINS_GET_JOB task not listing
    all jenkins job. Fixed an issue where manager could not connect to delegates with
    scopes related to application. (CDS-35628, ZD-29044, ZD-29114)</li><li>Unclear
    Error message on Fetch Instance MARK_EXPIRED. Added a proper message when aborting
    fetch instance step. (CDS-35519, ZD-29062)</li><li>Concurrent Execution of Create
    AMI Stack fails upon Select Nodes. We fixed certain workflows which use AWS Infrastructure
    with Tags that were getting in a race condition if tags are provided as an expression.
    This also resolved the incorrect instance counts for such services. (CDS-35152,
    ZD-29973)</li><li>Usergroup is getting deleted even if it is used in notification
    strategy in workflow. Restricted the deletion of any usergroup when it is used
    in any notification strategy in any workflow (CDS-34159)</li><li>Powershell script
    is not terminated when the shell script step timeouts. When the workflow is aborted
    or expired, the running shell script step and all its child processes now terminate
    immediately. (CDS-24447, ZD-20817, ZD-29183)</li><li>Services Dashboard - Build#
    does not match reality (CDS-2992, ZD-18477, ZD-18483, ZD-29101)</li><li>CE Weekly
    Report was being sent out every 30 minutes. (CCM-7595, ZD-30545)</li><li>User
    group creation now automatically adds `VIEW_CE` account permission which breaks
    everyone using Terraform. Fixed the issue with CE_VIEWER permission not getting
    disabled for user groups. (CCM-7324)</li></ul><h4>Delegate Version</h4><ul><li>75275</li></ul><h3>May
    11, 2022, minor release 74969</h3><p>We&#39;re pleased to present Harness Self-Managed
    Enterprise Edition Minor Release 74969.</p><h4>New Features and Enhancements</h4><p>The
    following new features and enhancements were added to Harness Self-Managed Enterprise
    Edition:</p><ul><li>Custom selector API for Delegate NG Token management is available
    now. (DEL-3558, ZD-21717, ZD-27515)<ul><li>See <a href="/article/omydtsrycn-secure-delegates-with-tokens">Secure
    Delegates with Tokens</a>.</li></ul></li><li>Harness can now send key Workflow
    and Pipeline deployment events to a URL endpoint as a JSON payload. This helps
    in analyzing how Workflows and Pipelines are performing, using other tools that
    consume and build dashboards for the events. This feature is now public and not
    behind the Feature Flag<code>FF APP_TELEMETRY</code>. (CDS-35193)<ul><li>See <a
    href="/article/okinra1xu2-publish-workflow-events-to-an-http-endpoint">Publish
    Workflow Events</a>.</li><li>See <a href="/article/scrsak5124-publish-pipeline-events-to-an-http-endpoint">Publish
    Pipeline Events</a>.</li></ul></li><li>You can now filter out the desired application
    on the <strong>Deployments</strong> page using the search option in the <strong>Application</strong>
    dropdown. (CDS-34070)<ul><li>See <a href="/article/lbiv3zwwm0-filtering-deployments">Filtering
    Deployments</a>.</li></ul></li><li>We are reducing the heap size of Current Gen
    Delegate processes from 4gb to 1.5gb. We are also reducing the k8 memory requirement
    from 8gb to 4gb. This is behind a feature flag and will be rolled out with various
    accounts. (DEL-3365)</li><li>We now have the new application filter component
    that supports API-driven BE search as well as infinite scrolling. So we won&#39;t
    fetch all the applications at once, but instead fetch them in a batch size of
    15 and relevant to the search text typed. (CDS-36365)</li></ul><h4>Issues Fixed​</h4><ul><li>We
    have removed the Walkme integration from Harness. (PLG-988, ZD-30008)</li><li>When
    pasting the YAML definition in a Workflow, the Update failed. Reason: NullPointerException
    error message was thrown without any reason for the failure. (PL-24456, ZD-29097)</li><li>API
    Explorer wasn&#39;t using the API_URLenvironment variable. A special code was
    removing the “gateway” prefix from the API calls. (PL-24415, ZD-27919, ZD-29434)</li><li>Fixed
    issue: If cluster lacked IPv6 support, delegate-proxy and harness-ui crashloop
    due to being unable to bind to any IPv6 interfaces on port 8080 [::}:8080 (PL-24002,
    ZD-28675)</li><li>Fixed issue: GraphQL Deployment Stats missing (PL-22091, ZD-21917)</li><li>Fixed
    issue: Config-As-Code stopped syncing from On-Premise to Git. (PL-18485, ZD-17190,
    ZD-17744, ZD-18077, ZD-18312, ZD-20225)</li><li>The setup as code API for performing
    CRUD with YAMLs had a bug in which the YAML processing status wasn&#39;t correctly
    returned. This issue is being addressed in order to return the correct YAML processing
    status. (PL-17678, ZD-16868)</li><li>Config-As-Code YAML upsert API used to return
    200 even if the zip was incorrect. In such cases, it will now return HTTP response
    code 400. (PL-17676, ZD-16868, ZD-16873)</li><li>AddDelegateScope output payload
    wasn&#39;t displayed correctly. (DEL-3757)</li><li>Unused column from datagrid
    has been removed and tooltip user experience has been improved​. (DEL-3742)</li><li>Fixed
    issue: Older Delegates were missing Name and selector after automatic restart.
    (DEL-3714, ZD-29353)</li><li>When querying the GraphQL API for Delegates, the
    lastHeartBeat field was a string instead of an integer. (DEL-3712)</li><li>Fixed
    issue: Delayed notifications for Delegate Down alert. (DEL-3696, ZE-28359)</li><li>Error
    message wasn&#39;t displaying the reason why a Delegate task failed. A Delegate
    task can fail to be assigned to a Delegate for various reasons, like incorrect
    Selectors, or Scope setup. (DEL-3686, ZD-28494, ZD-29304)</li><li>The Watcher
    program communicates with the Delegate using a local file-based channel. A NullPointerException
    was thrown while reading messages from this channel. (DEL-3623)</li><li>Ratio
    API for Delegate wasn&#39;t working as expected. (DEL-3603)</li><li>Fixed issue:
    Delegate Page wasn&#39;t loading​. (DEL-3571, ZD-28886, 28935)</li><li>The ECS
    Delegate alerts are not unless all Delegates associated with an ECS group become
    unavailable. (DEL-3565)</li><li>For on prem and oss installations, delegate and
    watcher jars are downloaded from the backend and hence CDN URLs don&#39;t need
    to be present in the YAML. (DEL-3126)​</li><li>GraphQL API had no method to list
    Delegate Scopes for an account. (DEL-2963)</li><li>Docker Delegate installation
    was failing whenever there was a space in the hostname. (DEL-2597)</li><li>Displayed
    the service artifact version and enhanced the design on hovering over the details.
    (CDS-36735)</li><li>Fixed issue: Unable fetch children Jenkins jobs in the Jenkins
    step of the workflow. (CDS-36701)</li><li>We have now added infinite scroll and
    search capability for the Triggers page in CD, similar to cloud providers (CDS-36625,
    ZD-30004)</li><li>The CloudWatch verification stage was failing because the instance
    IDs of the hosts were not properly rendered. (CDS-36609, ZD-30035)</li><li>The
    expressions <code>$ami.newAsgName</code> and <code>$ami.oldAsgName</code> for
    AMI Blue Green incrementally shift traffic workflows weren&#39;t set correctly.
    (CDS-36563, ZD-29905)</li><li>For Deployment Freeze, an empty description was
    getting saved in the database. (CDS-36562, ZD-29969)</li><li>Incorrect Delegate
    selection logs were getting displayed when a Step failed or was skipped. (CDS-36480,
    ZD-29628)</li><li> Approval step with slack had an issue in very corner case which
    was fixed​. (CDS-36429)</li><li>The users were not getting redirected to the Pipeline
    execution / Workflow execution page based on the Pipeline / Workflow. (CDS-36352,
    ZD-29800)</li><li>Error Message &#34;Duplicate State&#34; was not displaying &#34;Duplicate
    Step Name&#34; and was displaying an incomplete notification. (CDS-36298, ZD-29769)</li><li>Jira&#39;s
    issue metadata was not being fetched correctly. (CDS-36158, ZD-29622, ZD-29628,
    ZD-29775)</li><li>Pipeline Approval Step was throwing an error UNKNOWN_ERROR.
    (CDS-36152, ZD-29557)</li><li>Fixed UI issue in Deployment screen. (CDS-35976)</li><li>Audit
    Trail was not showing deleted Applications. (CDS-35910, ZD-29197)</li><li>An invalid
    parentheses character within the step name prior to the expression evaluation/resolution
    wasn&#39;t normalized. (CDS-35795, ZD-29253)</li><li>Jira Approval was failing
    with an unclear error message. (CDS-35786, ZD-29259))</li><li>Helm version 3.5
    and above was not working with Native Helm Services as the URL name was changing
    and <code>force-updateflag</code> wasn&#39;t working. (CDS-35667, ZD-29165, ZD-29194)</li><li>An
    incorrect error message <code>Invalid argument(s): Task has expired</code> was
    being displayed when adding a Jenkins Provider. (CDS-35524, ZD-29044)</li><li>Some
    Workflows were not rendering dynamic Infrastructure Definition expressions for
    Terraform. This failure happens for Pipelines with multiple Terraform Workflows
    that use the same Service and Infrastructure Definition expressions. (CDS-35486,
    ZD-28977, ZD-28997, ZD-29166)</li><li>Concurrency issues were occurring when multiple
    processes execute <code>helm repo add, helm repo update, and helm repo pull</code>
    in parallel. (CDS-35483, ZD-27796)</li><li>Fixed issue: UI logs and trace blank
    for failed workflow (CDS-35343, ZD-28913)</li><li>Fixed issue: Can&#39;t find
    workflow when creating new filter (CDS-35342, ZD-28902)</li><li>The default failure
    and notification strategies are not added when a Workflow is created via Git Sync.
    Git Sync to Harness was adding notification rules into Workflows. (CDS-35112,
    ZD-28644)</li><li>Fixed issue: Failure Strategy in Rollback section wasn&#39;t
    working in Post Deployment Rollback (CDS-35099, ZD-28331)</li><li>Error message
    for “Delegate task timed out” in Workflow executions is enhanced. (CDS-34845,
    ZD-28496)</li><li>When a User Group is used in a Workflow Approval Step or a templatized
    User Group variable in a Pipeline stage, deletion of User Groups is blocked. (CDS-34698,
    ZD-28460)</li><li>When configuring Kubernetes Cloud Provider, <code>skipValidation</code>
    now works correctly with Custom Secret Managers. (CDS-34599, ZD-28345)</li><li>Fixed
    issue: User fails to adopt Shell Parameter Expansion (not JEXL) on Harness Shell
    Scrip Step. (CDS-34548, ZD-28271)</li><li>Fixed an issue with WinRM script execution
    ignoring timeout. (CDS-34168)</li><li>PCF perpetual tasks that has been failing
    for more than 7 days for any reason will now be deleted and we will not be executed
    any further. (CDS-33630)</li><li>Added pagination to the Cloud Providers page:<ul><li>We
    will now load only 50 CPs on opening the page</li><li>There will be search box
    that the user can use to look for the CP they want (search by name)</li><li>Added
    index on the BE to further improve the API search request. (CDS-25818, ZD-16352,
    ZD-18775, ZD-27387)</li></ul></li><li>Fixed the inconsistency in service name
    in services page. (CDS-25445, ZD-18756)</li><li>FIxed a bug when Kubernetes rollback
    wasn&#39;t skipped if execution failed before Kubernetes deployment step. (CDS-4025,
    ZD-15002)</li><li>Now the error HelmClientException is caught at an earlier stage.
    This avoids unnecessary execution and saves time for user. (CDS-2022)</li></ul><h3>March
    30, 2022, minor release 74410</h3><p>We&#39;re pleased to present Harness Self-Managed
    Enterprise Edition Minor Release 74410.</p><h4>Important</h4><div class="note-callout">Harness
    accounts that use <a href="/article/zy8yjcrqzg-single-sign-on-sso-with-saml">Single
    Sign-On (SSO) with SAML</a> need to update the redirect URL in the SAML provider
    to include <code>/gateway</code> because <code>gateway</code> is added in this
    release.</div><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/0v512791gf/1648834011682/clean-shot-2022-04-01-at-10-24-51.png"/></figure><h4>New
    Features and Enhancements</h4><p>The following new features were added to the
    Harness platform components:</p><h5>Platform</h5><ul><li> New Authorization UI
    is now available in On-Prem platforms. (PL-24016)</li></ul><h5>Delegate</h5><ul><li>
    We are reducing the heap size of delegate process of CG delegates from 4gb to
    1.5gb. We are also reducing the Kubernetes memory requirement from 8gb to 4gb.
    This is behind a Feature Flag and we will roll this out slowly with various accounts.
    (DEL-3365)</li></ul><h5>CDS</h5><ul><li>When you edit a Helm Connector (except
    the credentials and name), previously collected Helm charts will get deleted and
    updated. We now show a Confirm | Cancel dialog box so you have the option to cancel
    the operation. (CDS-29032)</li><li>The Deployments page has new options for configuring
    rollbacks after provisioning from a manual intervention, action after retries,
    and normal rollback vs. rollback after provisioning. (CDS-28963)</li></ul><h4>Issues
    Fixed in the Release</h4><ul><li>Anonymous users sometimes report Refiner surveys
    in CG. (PLG-782)</li><li>Infinite scroll has been added to the User Groups list
    page. You can also search for your user groups in this page. A search fetches
    all user groups across the application. (PL-20963. ZD-18775, ZD-20187, ZD-21829,
    ZD-26436, ZD-28694)</li><li>With Nexus3, the <code>artifact.url</code> variable
    was picking up a random URL from a list of files present in the version. It didn&#39;t
    honor the classifier and extension configured for the artifact source. Now, if
    both classifier and extension are configured, Harness will pick the matching URL.
    If they aren&#39;t configured, Harness picks a random URL, which is the current
    behavior. (CDS-25641, ZD-20723)</li><li>When doing a collection for Nuget, Harness
    first fetches a list of all versions and then the corresponding data for every
    version. The latter isn&#39;t needed for versions that are already collected.
    If a version is already collected, Harness doesn&#39;t call the API to fetch its
    corresponding metadata. (CDS-25580, ZD-20739)</li><li>There was a race condition
    issue between starting the step execution and the execution going to final status.<br/>For
    example: if the step expired before the step execution is started, Harness marks
    the execution expired. Then, when the step execution kicks in, Harness considers
    the step failed and starts checking for failure strategies.<br/>Honoring failure
    strategies here isn&#39;t correct because the execution is already in final status.
    This could cause a few issues. For example, if the failure strategy set was manual
    intervention, the workflow is already expired, but it&#39;ll show we are waiting
    on manual intervention.<br/>As a fix for this, in such race conditions, once the
    step has gone into final status, and then step execution kicks in, Harness considers
    the step in final status and won&#39;t check for any failure strategies or go
    into the rollback phase. (CDS-24530, ZD-20175)</li><li>In Code-as-Config for Azure
    VMSS BG workflow, the field <code>downsizeOldVMSSS</code> in YAML had a typo (
    an extra <code>S</code>). We fixed it by updating the field name, which is directly
    reflected in YAML files.<br/>If you have Git Sync enabled, please replace <code>downsizeOldVMSSS</code>
    with <code>downsizeOldVMSS</code> in yaml files related to VMSS workflows. (CDS-2173)</li></ul><h4>Delegate
    Version</h4><p>74410</p><h3>February 23, 2022, minor release 73807</h3><p>We&#39;re
    pleased to present Harness On-Premise Minor Release 73807.</p><h4>General What&#39;s
    New and Early Access</h4><ul><li><a href="https://changelog.harness.io/?categories=fix,improvement,new"
    target="_blank">New features added to Harness</a>.</li><li><a href="https://changelog.harness.io/?categories=early-access"
    target="_blank">Features behind Feature Flags</a> (Early Access).</li></ul><h4>New
    Features and Enhancements</h4><p>The following new features were added to the
    Harness platform components:</p><p></p><h5>Platform</h5><ul><li>N/A</li></ul><h5>CD</h5><ul><li>You
    can now customize your Kubernetes deployments using Kustomize patches. Kustomizations
    let you create specific Kubernetes deployments while leaving the original manifests
    untouched. Currently, this feature is behind the Feature Flag <code>KUSTOMIZE_PATCHES_CG</code>.
    Contact <a href="mailto:support@harness.io" target="_blank">Harness Support</a> to
    enable the feature. When you enable this Feature Flag, you will be able to use
    Kustomize version 4.0.0. (CDP-19430)<ul><li>You can add patch file(s) to <strong>Kustomize
    Patches</strong>. In Harness Service, click <strong>Kustomize Patches</strong>
    in <strong>Configuration</strong> and then click <strong>Add Patches</strong>.
    You can add multiple files by using <strong>Add Patches</strong> multiple times.<figure><img
    src="https://files.helpdocs.io/kw8ldg1itf/articles/q554zjytod/1643958145455/screenshot-2022-02-04-at-12-32-07-pm.png"
    style="max-height:30%;max-width:30%" data-hd-height="30%" data-hd-width="30%"/></figure></li><li>Kustomize
    doesn&#39;t natively support variable substitution but Harness supports variable
    substitution using <a href="/article/9dvxcegm90-variables">Harness variable expressions</a> in
    Kustomize patches.</li><li>You can also use <a href="/article/ygyvp998mu-use-encrypted-text-secrets">Harness
    secrets</a> in patches.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/q554zjytod/1643958216742/screenshot-2022-02-04-at-12-33-12-pm.png"
    style="max-height:30%;max-width:30%" data-hd-height="30%" data-hd-width="30%"/></figure></li><li>You
    can override the Service settings for <strong>Kustomize Patches</strong> in a
    Harness Environment using <strong>Service Configuration Overrides</strong>.<figure><img
    src="https://files.helpdocs.io/kw8ldg1itf/articles/q554zjytod/1643958265756/screenshot-2022-02-04-at-12-34-02-pm.png"
    style="max-height:30%;max-width:30%" data-hd-height="30%" data-hd-width="30%"/></figure></li><li>See
    <a href="/article/zrz7nstjha-use-kustomize-for-kubernetes-deployments">Kustomize
    for Kubernetes Deployments</a>.</li></ul></li></ul><div class="note-callout">You
    cannot use Harness variables in the base manifest or kustomization.yaml. You can
    only use Harness variables in kustomize patches you add in <strong>Kustomize Patches</strong>.</div><ul><li>In
    SSH and WinRM deployments, you can now add nodes to an Infrastructure Definition
    and Select Nodes Workflow step for a Rolling Workflow in addition to the nodes
    Harness pulls from the target infrastructure automatically. You can also use Workflow
    variable expressions for node names that will be resolved at runtime. Currently,
    this feature is behind the Feature Flag <code>DEPLOY_TO_INLINE_HOSTS</code>. Contact <a
    href="mailto:support@harness.io" target="_blank">Harness Support</a> to enable
    the feature. (CDS-8075)<ul><li>See <a href="https://docs.harness.io/article/9h1cqaxyp9-select-nodes-workflow-step#option_select_host_not_in_infrastructure_definition">Select
    Nodes Workflow Step</a>, <a href="https://docs.harness.io/article/ax6mntmp3s-select-nodes-in-a-rolling-deployment-workflow#option_select_host_not_in_infrastructure_definition">Select
    Nodes in a Rolling Deployment Workflow</a>, <a href="https://docs.harness.io/article/3ecctnq3p9-specific-hosts#option_select_host_not_in_infrastructure">Target
    Specific Hosts During Deployment</a>.</li></ul></li></ul><h5>CCM</h5><ul><li>N/A</li></ul><h5>CV</h5><ul><li>N/A</li></ul><h4>Issues
    Fixed in the Release</h4><ul><li>N/A</li></ul><h4>Component Versions</h4><p>The
    following table lists the component versions in this release.</p><table><tbody><tr><td><p><strong>Name</strong> </p></td><td><p><strong>Version</strong></p></td></tr><tr><td><p>Manager </p></td><td><p>73807</p></td></tr><tr><td><p>Delegate</p></td><td><p>73807</p></td></tr><tr><td><p>Watcher</p></td><td><p>73807</p></td></tr><tr><td><p>Verification
    Service</p></td><td><p>73807</p></td></tr><tr><td><p>UI</p></td><td><p>73100</p></td></tr><tr><td><p>Learning
    Engine</p></td><td><p>66100</p></td></tr></tbody></table><p></p><h3>February 1,
    2022, minor release 73610</h3><p>We&#39;re pleased to present Harness On-Premise
    Minor Release 73610.</p><h4>General What&#39;s New and Early Access</h4><ul><li><a
    href="https://changelog.harness.io/?categories=fix,improvement,new" target="_blank">New
    features added to Harness</a>.</li><li><a href="https://changelog.harness.io/?categories=early-access"
    target="_blank">Features behind Feature Flags</a> (Early Access).</li></ul><h4>New
    Features and Enhancements</h4><p>The following new features were added to the
    Harness platform components:</p><h5>Platform</h5><ul><li>Add Azure Active Directory
    users that belong to more than the 150 group limit (PL-21670) via SAML.<ul><li>When
    Azure AD users have large numbers of group memberships, the number of groups listed
    in the token can grow the token size. Azure Active Directory limits the number
    of groups it will emit in a token to 150 for SAML assertions.</li><li>To add users
    that belong to more than 150 groups, you simply add the Client ID and secret for
    your registered app to Harness.</li><li>This feature is behind the feature flag
    <code>AZURE_SAML_150_GROUPS_SUPPORT</code>.</li><li>See <a href="/article/zy8yjcrqzg-single-sign-on-sso-with-saml#saml_sso_with_azure_active_directory">SAML
    SSO with Azure Active Directory</a>.</li></ul></li></ul><h5>CD</h5><ul><li>You
    can now add non-containerized artifacts for Harness Azure Web App deployment.
    For example, WAR, NuGet, and Zip. (CDP-19058, CDP-16747)<ul><li>Currently, this
    feature is behind the Feature Flag <code>AZURE_WEBAPP_NON_CONTAINER</code>. Contact <a
    href="mailto:support@harness.io" target="_blank">Harness Support</a> to enable
    the feature.</li><li>See <a href="https://docs.harness.io/article/rflkjqxod2-add-a-non-containerized-artifacts-for-azure-web-app-deployment">Azure
    Web Deployment</a>.</li></ul></li><li>You can now pull Helm Charts of a specific
    version when needed from the manifest history by selecting <strong>Manually pull
    artifact</strong> in the Harness Service. This version can then be used in future
    deployments and is useful when Helm Chart collection is disabled. (CDC-16422)<ul><li><a
    href="/article/p5om530pe0-deploy-a-helm-chart-as-an-artifact">Deploy Helm Charts</a>.</li></ul></li></ul><h4>Issues
    Fixed in the Release</h4><ul><li>N/A</li></ul><h4>Component Versions</h4><p>The
    following table lists the component versions in this release.</p><p></p><table><tbody><tr><td><p><strong>Name</strong> </p></td><td><p><strong>Version</strong></p></td></tr><tr><td><p><strong>Manager</strong> </p></td><td><p>73610</p></td></tr><tr><td><p><strong>Delegate</strong></p></td><td><p>73610</p></td></tr><tr><td><p><strong>Watcher</strong></p></td><td><p>73610</p></td></tr><tr><td><p><strong>Verification
    Service</strong></p></td><td><p>73610</p></td></tr><tr><td><p><strong>UI</strong></p></td><td><p>72901</p></td></tr><tr><td><p><strong>Learning
    Engine</strong></p></td><td><p>66100</p></td></tr></tbody></table><p></p><h3>January
    18, 2022, minor release 73406</h3><p>We&#39;re pleased to present Harness On-Premise
    Minor Release 73406.</p><h4>General What&#39;s New and Early Access</h4><ul><li><a
    href="https://changelog.harness.io/?categories=fix,improvement,new" target="_blank">New
    features added to Harness</a>.</li><li><a href="https://changelog.harness.io/?categories=early-access"
    target="_blank">Features behind Feature Flags</a> (Early Access).</li></ul><h4>New
    Features and Enhancements</h4><ul><li>N/A</li></ul><h4>Issues Fixed in the Release</h4><ul><li>VMSS:
    <code>downsizeOldVMSS</code> appears as <code>downsizeOldVMSSS</code> (with extra
    s) in YAML (CDP-19407)<ul><li>In Config-as-Code for Azure VMSS BG Workflow, the
    <code>downsizeOldVMSSS</code> field in YAML had a typo: extra s. Fixed by updating
    the State field name which is directly reflected in YAML files.</li><li><strong>Action:</strong>
    If you have Git Sync enabled, please replace <code>downsizeOldVMSSS</code> with
    <code>downsizeOldVMSS</code> in YAML files related to VMSS workflows.</li></ul></li><li>When
    using NuGet repository type on Nexus with a lot of artifacts, a task might take
    too long to complete and expire (CDC-16359, ZD-20739)<ul><li>When doing a collection
    for NuGet we first fetch a list of all versions and then for every version we
    fetch corresponding metadata. The later is not needed for versions that are already
    collected. If a version is already collected we do not make API calls to fetch
    its corresponding metadata.</li></ul></li><li>Nexus artifact collection picking
    up a random URL (CDC-16156, ZD-20723)<ul><li>With Nexus 3 the <code>artifact.url</code>
    variable was picking up a random URL from a list of files present in the version.
    It was not honoring the classifier and extension configured for the artifact source.</li><li>Going
    forward if both classifier and extension are configured then we will pick the
    matching URL. If they are not configured we will be going with the current behavior
    of picking a random URL.</li></ul></li><li>Customer is unable to abort running
    Pipeline in paused state (CDC-15969, ZD-20175)<ul><li>There was a race condition
    issue between starting the step execution and the execution going to final status.</li><li>For
    example, say, the step expired before step execution is started, we will mark
    the execution expired and then when the step execution kicks in, we will consider
    step failed and start checking for failure strategies.</li><li>Honoring Failure
    Strategy here is not correct since the execution is already in final status. This
    could cause few issues. For example, if Failure Strategy set was Manual Intervention,
    the Workflow is already expired but it will show we are waiting on manual intervention.</li><li>As
    a fix for this, in such race conditions, once the step has gone into final status,
    and say then step execution kicks in, we will consider the step in final status
    and won&#39;t check for any failure strategies or go in rollback phase.</li></ul></li></ul><h4>Component
    Versions</h4><p>The following table lists the component versions in this release.</p><table><tbody><tr><td><p><strong>Name</strong> </p></td><td><p><strong>Version</strong></p></td></tr><tr><td><p><strong>Manager</strong> </p></td><td><p>73406</p></td></tr><tr><td><p><strong>Delegate</strong></p></td><td><p>73406</p></td></tr><tr><td><p><strong>Watcher</strong></p></td><td><p>73406</p></td></tr><tr><td><p><strong>Verification
    Service</strong></p></td><td><p>73406</p></td></tr><tr><td><p><strong>UI</strong></p></td><td><p>72700</p></td></tr><tr><td><p><strong>Learning
    Engine</strong></p></td><td><p>66100</p></td></tr></tbody></table><p></p><h3>January
    6, 2022, minor release 73225</h3><p>We&#39;re pleased to present Harness On-Premise
    Minor Release 73225.</p><h4>General What&#39;s New and Early Access</h4><ul><li><a
    href="https://changelog.harness.io/?categories=fix,improvement,new" target="_blank">New
    features added to Harness</a>.</li><li><a href="https://changelog.harness.io/?categories=early-access"
    target="_blank">Features behind Feature Flags</a> (Early Access).</li></ul><h4>New
    Features and Enhancements</h4><p>The following new features were added to the
    Harness platform components:</p><h5>Platform</h5><ul><li>N/A</li></ul><h5>CD</h5><ul><li>Use
    IAM AssumeRole with Terraform Provisioner (CDP-19707)<ul><li>This feature is behind
    the feature flag <code>TERRAFORM_AWS_CP_AUTHENTICATION</code>.</li><li>If you
    want to use a specific AWS role for Terraform Provision, Apply, and Destroy steps&#39;
    provisioning, you can select the AWS Cloud Provider, Region, and Role ARN.</li><li>See
    <a href="https://docs.harness.io/article/uxwih21ps1-terraform-provisioner-step#option_aws_cloud_provider_region_role_arn"
    target="_blank">Option: AWS Cloud Provider, Region, Role ARN</a>.</li></ul></li><li>Users
    Groups with just the <strong>Execute Pipeline</strong> permission are now allowed
    to perform actions (abort/pause/manual intervention) on Workflows in Pipelines.
    (CDC-14155)<ul><li>Workflows which are not part of any Pipelines will continue
    to be governed by the <strong>Execute Workflow</strong> permission.</li><li>See
    <a href="/article/ven0bvulsj-users-and-permissions">Managing Users and Groups
    (RBAC)</a>.</li></ul></li></ul><h5>CCM</h5><ul><li>N/A</li></ul><h5>CV</h5><ul><li>N/A</li></ul><h4>Issues
    Fixed in the Release</h4><ul><li>Pipeline failed with Workflow grayed out (CDC-15677,
    CDC-16042, ZD-20466)<ul><li>When pipeline had many stages in parallel, pipeline
    execution used to intermittently fail with workflow being grayed out. We suspected
    the root cause of this to be a race condition between threads. We did fix it and
    added log lines to confirm the fix.</li></ul></li><li>Workflow incomplete on adding
    Custom Shell Script Approval with Delegate Selector step (CDC-15205, ZD-20011,
    ZD-20527, ZD-21104)<ul><li>Intermittent issues with corrupt Workflows and Pipelines
    when using Delegate Selectors with Custom Shell Script Approval. This change fixes
    the issue.</li></ul></li></ul><h4>Component Versions</h4><p>The following table
    lists the component versions in this release.</p><p></p><table><tbody><tr><td><p><strong>Name</strong> </p></td><td><p><strong>Version</strong></p></td></tr><tr><td><p><strong>Manager</strong> </p></td><td><p>73225</p></td></tr><tr><td><p><strong>Delegate</strong></p></td><td><p>73225</p></td></tr><tr><td><p><strong>Watcher</strong></p></td><td><p>73225</p></td></tr><tr><td><p><strong>Verification
    Service</strong></p></td><td><p>73225</p></td></tr><tr><td><p><strong>UI</strong></p></td><td><p>72400</p></td></tr><tr><td><p><strong>Learning
    Engine</strong></p></td><td><p>66100</p></td></tr></tbody></table><p></p>'
  slug: harness-on-prem-release-notes
  tags: []
  is_live: true
