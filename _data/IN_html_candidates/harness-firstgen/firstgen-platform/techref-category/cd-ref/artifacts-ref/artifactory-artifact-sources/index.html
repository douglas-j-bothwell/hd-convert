<p>This topic provides settings and permissions for the Artifactory Artifact Servers and Sources.</p><h3>Artifactory Permissions</h3><p>Make sure the following permissions are granted to the user:</p><ul><li>Privileged User is required to access API, whether Anonymous or a specific username (username and passwords are not mandatory).</li><li>Read permission to all Repositories.</li></ul><p>If used as a Docker Repo, user needs:</p><ul><li>List images and tags</li><li>Pull images</li></ul><p>See  <a href="https://www.jfrog.com/confluence/display/RTF/Managing+Permissions" target="_blank">Managing Permissions: JFrog Artifactory User Guide</a></p><h3>Artifact Type Support</h3><p>Legend:</p><ul><li><strong>M</strong> - Metadata. This includes Docker image and registry information. For AMI, this means AMI ID-only.</li><li><strong>Blank</strong> - Not supported.</li></ul><p></p><table><tbody><tr><td><p><strong>Sources</strong></p></td><td><p><strong>Docker Image</strong></p><p>(Kubernetes/Helm/TAS)</p></td><td><p><strong>AWS</strong> <strong>AMI</strong></p></td><td><p><strong>AWS CodeDeploy</strong></p></td><td><p><strong>AWS Lambda</strong></p></td><td><p><strong>JAR</strong></p></td><td><p><strong>RPM</strong></p></td><td><p><strong>TAR</strong></p></td><td><p><strong>WAR</strong></p></td><td><p><strong>ZIP</strong></p></td><td><p><strong>PCF</strong></p></td><td><p><strong>IIS</strong></p></td></tr><tr><td><p>Artifactory</p></td><td><p>M</p></td><td><p></p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td></tr></tbody></table><p></p><div class="note-callout">If you are new to using Artifactory as a Docker repo, see <a href="https://www.jfrog.com/confluence/display/RTF6X/Getting+Started+with+Artifactory+as+a+Docker+Registry" target="_blank">Getting Started with Artifactory as a Docker Registry</a> from JFrog.</div><h3>Artifactory Artifact Collection and Sync</h3><p>Harness artifact collection runs approximately every 2 mins.</p><p>Harness artifact deletion/sync runs approximately every 2 hours.</p><h3>Artifactory Artifact Server</h3><p>The Harness Artifactory Artifact server connects your Harness account to your Artifactory artifact resources. It has the following settings.</p><h4 id="undefined">Display Name</h4><p>Enter a name for the Artifactory Server. This is the name you will use to identify this connection when adding an Artifact Source to a Harness Service.</p><h4 id="undefined">Artifactory URL</h4><p>In the <strong>Artifactory URL</strong> field, ensure that you enter in your base URL followed by your module name.</p><p>For most artifacts, use <strong>https://mycompany.jfrog.io/</strong><strong><em>module_name</em></strong>.</p><p>In some cases, you can use <strong>https://</strong><em><strong>server_name</strong></em><strong>/artifactory/</strong><em><strong>module_name</strong></em>.</p><p>The URL really depends on how you have set up Artifactory, and whether it is local, virtual, remote, or behind a proxy.</p><p>To ensure you use the correct URL, copy it from your Artifactory settings.</p><p>See  <a href="https://www.jfrog.com/confluence/display/JFROG/Repository+Management" target="_blank">Repository Management</a> from JFrog.</p><h4 id="undefined">Credentials and Usage Scope</h4><p>Enter the credentials.</p><p>For secrets and other sensitive settings, select or create a new  <a href="https://docs.harness.io/article/ygyvp998mu-use-encrypted-text-secrets">Harness Encrypted Text secret</a>.</p><p>Usage Scope is determined by the secret you selected.</p><p>Click <strong>Submit</strong>.</p><h3>Artifactory Artifact Source</h3><p>The Artifactory Artifact Source has the following fields.</p><h4>Name</h4><p>You can enter a name or have Harness generate one for you automatically.</p><h4>Use Docker Format</h4><div class="note-callout">This option is in <a href="/article/6m7w43yw4u-pcf-tutorial-overview">TAS (PCF) Services</a> only.</div><p>Select this option if your artifact is a Docker image. Selecting this option changes the remaining settings.</p><p>See the <a href="/article/jxsna1a0mi-add-container-images-for-pcf-deployments">Add Container Images for PCF Deployments</a>.</p><h4>Source Server</h4><p>Select the name of the artifact source server you added in <a href="/article/7dghbx1dbl-configuring-artifact-server">Add Artifact Servers</a>. The format for the cloud-based Artifactory URL is https://<em>company_name</em>.jfrog.io/<em>context</em>. For more information, see <a href="https://www.jfrog.com/confluence/display/RTF/Docker+Registry#DockerRegistry-PushingandPullingImages" target="_blank">Pushing and Pulling Images</a> from JFrog.</p><h4>Repository</h4><p>Select the repository where the artifact source is located. If you don&#39;t see it, the API might have timed out. Enter its name and Harness will query for it.</p><h4>Docker Image Name</h4><p>Click in <strong>Docker Image Name</strong> and select or enter the name of the artifact you want to deploy. By default, Harness automatically populates the field with the artifacts available from the Artifactory source server. If you don&#39;t see it, the API might have timed out. Enter its name and Harness will query for it.</p><h4>Docker Repository Server</h4><p>Enter the name of the server from the <code>docker login</code> command. For example:</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/gxv9gj6khz/1576783783511/image.png"/></figure><p>If you don&#39;t see it, the API might have timed out. Enter its name and Harness will query for it.</p><p>See <a href="https://www.jfrog.com/confluence/display/RTF/Docker+Registry#DockerRegistry-ConfiguringDockerRepositories" target="_blank">Configuring Docker Repositories</a> from JFrog for more information. It describes the URLs for local, remote, and virtual repositories.</p><h4>Artifact Path/File Filter</h4><p>For non-Docker artifacts, you specify the file path to the artifact on Artifactory. In many cases, the file name is sufficient. Ensure the file is available using either Anonymous access or the username and password you entered in the Harness Artifactory Artifact Server.</p><p>Enter the artifact path in the repository. You can use wildcards (not regex) such as <code>todolist/*/*.rpm</code>.</p><h5>Deploying the Artifact</h5><p>When you deploy your Harness Workflow, you will select the artifact version to use. Harness will display the latest 25 artifact versions.</p><h3>Expression Support for Docker Labels in Artifactory</h3><p>When you use a Docker image on Artifactory as an Artifact Source for the Service, you can use the Harness expression <code>${artifact.label.get(&#34;&lt;label-key&gt;&#34;)}</code> to list the value of a Docker image artifact&#39;s label.</p><p>The label is identified using the label key. For example, if the Docker image has the following label:</p><pre class="hljs java">&#34;Labels&#34;: {<br/>    &#34;maintainer&#34;: &#34;NGINX Docker Maintainers&#34;<br/>},</pre><p></p><p>You can reference the label in a Workflow Shell Script step using <code>${artifact.label.get(&#34;maintainer&#34;)}</code>.</p><p>Notes:</p><ul><li>Both labels and values can contain dots.</li></ul><p></p>