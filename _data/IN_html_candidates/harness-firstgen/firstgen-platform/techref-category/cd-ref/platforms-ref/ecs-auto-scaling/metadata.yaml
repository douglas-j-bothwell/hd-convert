type: article
article_id: 28ehkmqy3v
user_id: mfr0nxh4be
category_id: yp3yaavhla
author:
  name: Michael Cretzman
  profile_image: https://www.gravatar.com/avatar/2e8616837f4ee92be5d19ffe9b9ccba9?d=mm&s=150
title: ECS Auto Scaling
slug: ecs-auto-scaling
description: In Harness, you configure ECS Service Auto Scaling in the ECS Service
  Setup step of a Workflow. In a Workflow with the ECS Service Setup step, open the
  ECS Service Setup step. In Auto Scaler Configur…
short_version: In Harness, you configure ECS Service Auto Scaling in the ECS Service
  Setup step of a Workflow. In a Workflow with the ECS Service Setup step, open the
  ECS Service Setup step. In Auto Scaler Configur…
tags: []
show_toc: false
is_private: false
is_published: true
is_featured: false
stale_status:
  is_stale: false
  reason: Article updated
  source: API
  triggered_at: 2021-05-12T17:21:01.614319Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: ECS Auto Scaling
  description: ""
  short_version: ""
  body: <p>In Harness, you configure <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/service-auto-scaling.html"
    target="_blank">ECS Service Auto Scaling</a> in the <strong>ECS Service Setup</strong> step
    of a Workflow.</p><figure><a href="https://files.helpdocs.io/kw8ldg1itf/articles/d7rnemtfuz/1607033537628/image.png"><img
    src="https://files.helpdocs.io/kw8ldg1itf/articles/d7rnemtfuz/1607033537628/image.png"/></a></figure><ol><li>In
    a Workflow with the <strong>ECS Service Setup</strong> step, open the <strong>ECS
    Service Setup</strong> step.</li><li>In <strong>Auto Scaler Configurations</strong>,
    the Auto Scaling property fields appear.</li></ol><p>When Harness deploys your
    ECS service, it will register the service with ECS Service Auto Scaling to apply
    the scaling policy, scaling out (and in) using CloudWatch target tracking.</p><h3>Auto
    Scaling is added after the Last Upgrade Containers Step</h3><p>By default, when
    you create an ECS Workflow of any supported type (Basic, Blue/Green, Canary),
    Harness automatically adds ECS Auto Scaling after the last <strong>Upgrade Containers</strong>
    step in the last Phase in a Workflow.</p><p>For example, in an ECS Canary Workflow,
    ECS Auto Scaling is added after the <strong>Upgrade Containers</strong> step in
    Phase 2.</p><h3>Upgrade Containers and Rollback Containers Steps are Dependent</h3><p>In
    order for rollback to add ECS Auto Scaling to the previous, successful service,
    you must have both the <strong>Upgrade Containers</strong> and <strong>Rollback
    Containers</strong> steps in the same Phase.</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/28ehkmqy3v/1610478708602/image.png"/></figure><p>Since
    ECS Auto Scaling is added by the <strong>Upgrade Containers</strong> step, if
    you delete <strong>Upgrade Containers</strong>, then <strong>Rollback Containers</strong>
    has no ECS Auto Scaling to roll back to.</p><div class="note-callout">If you want
    to remove ECS Auto Scaling from a Phase, delete <u>both</u> the <strong>Upgrade
    Containers</strong> and <strong>Rollback Containers</strong> steps. The Phase
    will no longer perform ECS Auto Scaling during deployment or rollback.</div><h3>Deleting
    Upgrade Containers Step</h3><p>If you delete the <strong>Upgrade Containers</strong>
    step from Phase 2, ECS Auto Scaling is not added because  Phase 2 is missing the
    <strong>Upgrade Containers</strong> step.</p><p>To ensure that ECS Auto Scaling
    is applied, you can add the <strong>Upgrade Containers</strong> step in <strong>Deploy
    Containers</strong> to Phase 1.</p><div class="note-callout">if you add the <strong>Upgrade
    Containers</strong> step to Phase 1, you must also add the <strong>Rollback Containers</strong>
    step in <strong>Rollback Steps</strong> of Phase 1. This ensures that ECS Auto
    Scaling is added to the last successful service in the case of rollback.</div><div
    class="note-callout">Deleting <strong>Upgrade Containers</strong> from the last
    Phase of a Canary Workflow is not a good use of the Canary strategy. Instead,
    use a Basic Workflow strategy. See <a href="/article/325x7awntc-deployment-concepts-and-strategies">Deployment
    Concepts and Strategies</a>.</div><h3>Rollback when Auto Scaling is Enabled</h3><p>See
    <a href="/article/d7rnemtfuz-ecs-rollback">ECS Rollbacks</a>.</p><h3>See Also</h3><ul><li><a
    href="/article/j39azkrevm-aws-ecs-deployments">AWS ECS Quickstart</a></li><li><a
    href="/article/08whoizbps-ecs-deployments-overview">ECS Deployments Overview</a></li><li><a
    href="/article/oinivtywnl-ecs-workflows">ECS Workflows</a></li><li><a href="/article/7qtpb12dv1-ecs-blue-green-workflows">ECS
    Blue/Green Workflows</a></li></ul><p></p>
  slug: ecs-auto-scaling
  tags: []
  is_live: true
