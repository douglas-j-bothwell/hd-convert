<p>This topic describes how to create, read, update, and delete Helm Artifact Source using Harness GraphQL APIs.</p><h3>Before You Begin</h3><ul><li>Read the <a href="https://docs.harness.io/article/bucothemly-application-configuration">Create an Application</a> topic to get an overview of how Harness organizes Services.</li><li>Read the <a href="https://docs.harness.io/article/eb3kfl8uls-service-configuration">Add a Service</a> topic to understand the process to add a Service to an Application.</li><li>Read <a href="https://docs.harness.io/article/htvzryeqjw-configuration-as-code">Configuration as Code</a> to see how you can quickly configure your Harness Service using your existing YAML in Git.</li><li><a href="/article/0hrzb1zkog-add-helm-repository-servers">Add Helm Repository Artifact Servers</a></li><li><a href="https://docs.harness.io/article/7dghbx1dbl-configuring-artifact-server">Add Artifact Servers</a></li><li><a href="/article/dfx0qi1zf7-use-cloud-providers-api">Use Cloud Providers API</a></li></ul><h3>Step: Create a Helm Artifact Source</h3><p>Use this sample query to create a Helm Artifact Source. You can use the following hosting platforms:</p><ul><li>HTTP Server</li><li>Amazon S3</li><li>GCS (Google Cloud Storage)</li></ul><p>If you select an option other than <strong>HTTP Server</strong>, such as <strong>Amazon S3</strong> or <strong>GCS</strong> (Google Cloud Storage), you will need a Cloud Provider for that account. For more information, see <a href="/article/wt1gnigme7-add-amazon-web-services-cloud-provider">AWS S3</a> and <a href="/article/6x52zvqsta-add-google-cloud-platform-cloud-provider">Google Cloud Storage (GCS)</a>.</p><p>To fetch the <code>passwordSecretId</code> use:</p><ul><li><a href="https://docs.harness.io/article/omnfccj1n0-api-encrypted-text#get_a_secret_by_name">Encrypted Text API</a></li><li><a href="https://docs.harness.io/article/2rlo5zw321-api-win-rm-credentials#get_a_secret_by_name">WinRM Credentials API</a></li><li><a href="https://docs.harness.io/article/v65okfwfl2-api-ssh-credentials#get_a_secret_by_name">SSH Credentials API</a></li></ul><h4>HTTP Server</h4><p>It is the type of server where the repo is hosted.</p><h5>Request</h5><p>You create a Helm Artifact Source using the mutation <code>createConnector</code>.</p><pre>mutation CreateConnector($connector: CreateConnectorInput!) {<br/>  createConnector(input: $connector) {<br/>    clientMutationId<br/>    connector {<br/>      ...on HttpHelmRepoConnector{<br/>      name<br/>      id<br/>      }<br/>    }<br/>  }<br/>}</pre><p></p><h5>Query Variables</h5><p>The Query Variables follow this syntax, with <code>connectorType</code> identifying the Helm Artifact Source to create.</p><pre>{<br/>    &#34;connector&#34;: {<br/>      &#34;connectorType&#34;: &#34;HTTP_HELM_REPO&#34;,<br/>      &#34;helmConnector&#34;:  {<br/>        &#34;name&#34;:&#34;$name&#34;,<br/>        &#34;httpServerPlatformDetails&#34;: {<br/>          &#34;URL&#34;: &#34;https://nexus.test.harness.io/repository/helm/&#34;,<br/>          &#34;passwordSecretId&#34;: &#34;$passwordSecretId&#34;,<br/>          &#34;userName&#34;: &#34;harnessadmin&#34;<br/>        }<br/>      }<br/>    }<br/>  }</pre><h4>GCS (Google Cloud Storage)</h4><p>It is the type of server where the repo is hosted.</p><h5>Request</h5><p>You create a Helm Artifact Source using the mutation <code>createConnector</code>.</p><pre>mutation CreateConnector($connector: CreateConnectorInput!) {<br/>  createConnector(input: $connector) {<br/>    clientMutationId<br/>    connector {<br/>      ...on GCSHelmRepoConnector{<br/>      name<br/>      id<br/>      }<br/>    }<br/>  }<br/>}</pre><p></p><h5>Query Variables</h5><p>The Query Variables follow this syntax, with <code>connectorType</code> identifying the Helm Artifact Source to create.</p><p>To get the cloud provider ID, see <a href="/article/dfx0qi1zf7-use-cloud-providers-api#step_6_find_cloud_provider_by_name">Find Cloud Provider by Name</a>.</p><pre> {<br/>    &#34;connector&#34;: {<br/>      &#34;connectorType&#34;: &#34;GCS_HELM_REPO&#34;,<br/>      &#34;helmConnector&#34;:  {<br/>        &#34;name&#34;:&#34;$name&#34;,<br/>        &#34;gcsPlatformDetails&#34;: {<br/>          &#34;googleCloudProvider&#34;: &#34;$googleCloudProvider&#34;,<br/>          &#34;bucketName&#34; : &#34;$bucketName&#34;<br/>        }<br/>      }<br/>    }<br/>  }</pre><h4>Amazon S3</h4><p>It is the type of server where the repo is hosted. For more information, see</p><h5>Request</h5><p>You create a Helm Artifact Source using the mutation <code>createConnector</code>.</p><pre>mutation CreateConnector($connector: CreateConnectorInput!) {<br/>  createConnector(input: $connector) {<br/>    clientMutationId<br/>    connector {<br/>      ...on AmazonS3HelmRepoConnector{<br/>      name<br/>      id<br/>      }<br/>    }<br/>  }<br/>}</pre><h5>Query Variables</h5><p>The Query Variables follow this syntax, with <code>connectorType</code> identifying the Helm Artifact Source to create.</p><pre>{<br/>  &#34;connector&#34;: {<br/>    &#34;connectorType&#34;: &#34;AMAZON_S3_HELM_REPO&#34;,<br/>    &#34;helmConnector&#34;:  {<br/>      &#34;name&#34;:&#34;$name&#34;,<br/>      &#34;amazonS3PlatformDetails&#34;: {<br/>        &#34;awsCloudProvider&#34;: &#34;$awsCloudProvider&#34;,<br/>        &#34;bucketName&#34; : &#34;$bucketName&#34;,<br/>        &#34;region&#34; : &#34;$region&#34;<br/>      }<br/>    }<br/>  }<br/>}</pre><p></p><h4>Helm OCI Registries</h4><h5 id="undefined">Request</h5><p>You create a Helm Artifact Source using the mutation <code>createConnector</code>.</p><pre class="hljs graphql">mutation CreateConnector($connector: CreateConnectorInput!) {<br/>  createConnector(input: $connector) {<br/>    clientMutationId<br/>    connector {<br/>      ...on OciHelmRepoConnector{<br/>      name<br/>      id<br/>      }<br/>    }<br/>  }<br/>}</pre><h5 id="undefined">Query Variables</h5><p>The Query Variables follow this syntax, with <code>connectorType</code> identifying the Helm Artifact Source to create.</p><pre class="hljs graphql">{<br/>    &#34;connector&#34;: {<br/>      &#34;connectorType&#34;: &#34;OCI_HELM_REPO&#34;,<br/>      &#34;helmConnector&#34;:  {<br/>        &#34;name&#34;:&#34;$name&#34;,<br/>        &#34;ociPlatformDetails&#34;: {<br/>          &#34;URL&#34;: &#34;acr-server.azurecr.io&#34;,<br/>          &#34;passwordSecretId&#34;: &#34;$passwordSecretId&#34;,<br/>          &#34;userName&#34;: &#34;harnessadmin&#34;<br/>        }<br/>      }<br/>    }<br/>  }</pre><p></p><h5>Authentication Supported</h5><p>For GCR as an OCI registry, Harness support authentication using the following:</p><ul><li>Access token</li><li>A JSON key file where username is <code>_json_key_base64</code> and password is base64-encoded JSON key file content.</li></ul><div class="note-callout">Harness does not support a username of <code>_json_key</code> and password as unencrypted JSON key file content.</div><h3>Step: Update a Helm Artifact Source</h3><p>Use this sample query to update a Helm Artifact Source.</p><h4>HTTP</h4><p>It is the type of server where the repo is hosted.</p><h5>Request</h5><p>You update a Helm Artifact Source using the mutation <code>updateConnector</code>.</p><pre>mutation UpdateConnector($connector: UpdateConnectorInput!) {<br/>  updateConnector(input: $connector) {<br/>    clientMutationId<br/>    connector {<br/>      name<br/>      id<br/>    }<br/>  }<br/>}</pre><h5>Query Variables</h5><p>The Query Variables follow this syntax, with <code>connectorType</code> identifying the Helm Artifact Source to update. See <a href="/article/y5ngh9ktzj-add-a-helm-artifact-source-using-api#fetch_the_connector_id">Fetch the Connector ID</a> to get the connector ID details.</p><pre>{<br/>  &#34;connector&#34;: {<br/>    &#34;connectorType&#34;: &#34;HTTP_HELM_REPO&#34;,<br/>    &#34;connectorId&#34;: &#34;$connectorId&#34;,<br/>    &#34;helmConnector&#34;: {<br/>      &#34;name&#34;: &#34;$name&#34;,<br/>      &#34;httpServerPlatformDetails&#34;: {<br/>        &#34;URL&#34;: &#34;https://nexus.test.harness.io/repository/helm/&#34;,<br/>        &#34;passwordSecretId&#34;: &#34;$passwordSecretId&#34;,<br/>        &#34;userName&#34;: &#34;harnesstest&#34;<br/>      }<br/>    }<br/>  }<br/>}<br/></pre><h5>Fetch the Connector ID</h5><p>Use the following query to fetch the <code>ID</code> of a connector. A list of connectors is returned based on the set filters. You can select the <code>ID</code> of the connector that you want to update.</p><p></p><pre>query<br/>{<br/>  connectors(filters: [{connectorType: {operator: EQUALS, values: HTTP_HELM_REPO}}], limit: 20) {<br/>    nodes {<br/>      name<br/>      id<br/>    }<br/>  }<br/>}</pre><h4>GCS</h4><p>It is the type of server where the repo is hosted.</p><h5>Request</h5><p>You update a Helm Artifact Source using the mutation <code>updateConnector</code>.</p><pre>mutation UpdateConnector($connector: UpdateConnectorInput!) {<br/>  updateConnector(input: $connector) {<br/>    clientMutationId<br/>    connector {<br/>      name<br/>      id<br/>    }<br/>  }<br/>}</pre><h5>Query Variables</h5><p>The Query Variables follow this syntax, with <code>connectorType</code> identifying the Helm Artifact Source to update. See <a href="/article/y5ngh9ktzj-add-a-helm-artifact-source-using-api#fetch_the_connector_id_2">Fetch the Connector ID</a> to get the connector ID details.</p><pre>{<br/>  &#34;connector&#34;: {<br/>    &#34;connectorType&#34;: &#34;GCS_HELM_REPO&#34;,<br/>    &#34;connectorId&#34;: &#34;$connectorId&#34;,<br/>    &#34;helmConnector&#34;: {<br/>      &#34;name&#34;: &#34;$name&#34;,<br/>      &#34;gcsPlatformDetails&#34;: {<br/>        &#34;googleCloudProvider&#34;: &#34;Test GCP&#34;,<br/>        &#34;bucketName&#34; : &#34;test-gcs&#34;<br/>      }<br/>    }<br/>  }<br/>}<br/></pre><h5>Fetch the Connector ID</h5><p>Use the following query to fetch the <code>ID</code> of a connector. A list of connectors is returned based on the set filters. You can select the <code>ID</code> of the connector that you want to update.</p><p></p><pre>query<br/>{<br/>  connectors(filters: [{connectorType: {operator: EQUALS, values: GCS_HELM_REPO}}], limit: 20) {<br/>    nodes {<br/>      name<br/>      id<br/>    }<br/>  }<br/>}</pre><h4>Amazon S3</h4><h5>Request</h5><p>You update a Helm Artifact Source using the mutation <code>updateConnector</code>.</p><pre>mutation UpdateConnector($connector: UpdateConnectorInput!) {<br/>  updateConnector(input: $connector) {<br/>    clientMutationId<br/>    connector {<br/>      name<br/>      id<br/>    }<br/>  }<br/>}</pre><h5>Query Variables</h5><p>The Query Variables follow this syntax, with <code>connectorType</code> identifying the Helm Artifact Source to update. See <a href="/article/y5ngh9ktzj-add-a-helm-artifact-source-using-api#fetch_the_connector_id_3">Fetch the Connector ID</a> to get the connector ID details.</p><pre>{<br/>  &#34;connector&#34;: {<br/>    &#34;connectorType&#34;: &#34;AMAZON_S3_HELM_REPO&#34;,<br/>    &#34;connectorId&#34;: &#34;$connectorId&#34;,<br/>    &#34;helmConnector&#34;: {<br/>      &#34;name&#34;: &#34;$name&#34;,<br/>      &#34;amazonS3PlatformDetails&#34;: {<br/>        &#34;awsCloudProvider&#34;: &#34;Test GCP&#34;,<br/>        &#34;bucketName&#34; : &#34;test-gcs&#34;,<br/>        &#34;region&#34; : &#34;us-east-1&#34;<br/>      }<br/>    }<br/>  }<br/>}</pre><h5>Fetch the Connector ID</h5><p>Use the following query to fetch the <code>ID</code> of a connector. A list of connectors is returned based on the set filters. You can select the <code>ID</code> of the connector that you want to update.</p><p></p><pre class="hljs graphql">query<br/>{<br/>  connectors(filters: [{connectorType: {operator: EQUALS, values: AMAZON_S3_HELM_REPO}}], limit: 20) {<br/>    nodes {<br/>      name<br/>      id<br/>    }<br/>  }<br/>}</pre><p></p><h4>Helm OCI Registries</h4><h5>Request</h5><p>You update a Helm Artifact Source using the mutation <code>updateConnector</code>.</p><pre class="hljs graphql">mutation UpdateConnector($connector: UpdateConnectorInput!) {<br/>  updateConnector(input: $connector) {<br/>    clientMutationId<br/>    connector {<br/>      name<br/>      id<br/>    }<br/>  }<br/>}</pre><h5>Query Variables</h5><p>The Query Variables follow this syntax, with <code>connectorType</code> identifying the Helm Artifact Source to update. See <a href="/article/y5ngh9ktzj-add-a-helm-artifact-source-using-api#fetch_the_connector_id_3">Fetch the Connector ID</a> to get the connector ID details.</p><pre class="hljs graphql">{<br/>  &#34;connector&#34;: {<br/>    &#34;connectorType&#34;: &#34;OCI_HELM_REPO&#34;,<br/>    &#34;connectorId&#34;: &#34;$connectorId&#34;,<br/>    &#34;helmConnector&#34;: {<br/>      &#34;name&#34;: &#34;$name&#34;,<br/>      &#34;ociPlatformDetails&#34;: {<br/>        &#34;URL&#34;: &#34;acr-server.azurecr.io&#34;,<br/>        &#34;passwordSecretId&#34;: &#34;$passwordSecretId&#34;,<br/>        &#34;userName&#34;: &#34;harnesstest&#34;<br/>      }<br/>    }<br/>  }<br/>}</pre><h5>Fetch the Connector ID</h5><p>Use the following query to fetch the <code>ID</code> of a connector. A list of connectors is returned based on the set filters. You can select the <code>ID</code> of the connector that you want to update.</p><p></p><pre class="hljs graphql">query<br/>{<br/>  connectors(filters: [{connectorType: {operator: EQUALS, values: OCI_HELM_REPOgrgr}}], limit: 20) {<br/>    nodes {<br/>      name<br/>      id<br/>    }<br/>  }<br/>}</pre><p></p><p></p><p></p><h3>Step: Delete a Helm Artifact Source</h3><p>You delete a Helm Artifact Source using the mutation <code>deleteConnector</code>. Deleting a Helm Artifact Source requires its <code>ID</code> only.</p><pre>mutation DeleteConnectorMutation($connector: DeleteConnectorInput!) {<br/>  deleteConnector(input: $connector) {<br/>    clientMutationId<br/>  }<br/>}</pre><h5>Query Variables</h5><p>Query Variables, with <code>connectorId</code> identifies the Helm Artifact Source to delete.</p><pre class="hljs json">{<br/>  &#34;connector&#34;: {<br/>    &#34;connectorId&#34;: &#34;xxxxxx&#34;<br/>  }<br/>}</pre><p></p>