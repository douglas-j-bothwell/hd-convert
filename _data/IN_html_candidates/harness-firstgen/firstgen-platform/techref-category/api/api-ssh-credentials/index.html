<p></p><p>This topic lists sample queries for CRUD operations that create, read, update, and delete <a href="/article/au38zpufhr-secret-management">Harness secrets</a> that manage SSH keys.</p><div class="note-callout">The <code>!</code> following the type means that this field is <em>required</em>.</div><p>In this topic:</p><ul><li><a href="https://docs.harness.io/article/v65okfwfl2-api-ssh-credentials#before_you_begin">Before You Begin</a></li><li><a href="https://docs.harness.io/article/v65okfwfl2-api-ssh-credentials#get_a_secret">Get a Secret</a></li><li><a href="https://docs.harness.io/article/v65okfwfl2-api-ssh-credentials#get_a_secret_by_name">Get a Secret by Name</a></li><li><a href="https://docs.harness.io/article/v65okfwfl2-api-ssh-credentials#create_an_ssh_credentials_secret">Create an SSH Credentials Secret</a></li><li><a href="https://docs.harness.io/article/v65okfwfl2-api-ssh-credentials#update_a_secret">Update a Secret</a></li><li><a href="https://docs.harness.io/article/v65okfwfl2-api-ssh-credentials#delete_a_secret">Delete a Secret</a></li><li><a href="https://docs.harness.io/article/v65okfwfl2-api-ssh-credentials#related_topics">Related Topics</a></li></ul><h3>Before You Begin</h3><ul><li><a href="/article/tm0w6rruqv-harness-api">​Introduction to Harness GraphQL API</a></li><li><a href="/article/2rmd5i0e0h-harness-api-explorer">Harness API Explorer</a></li></ul><h3>Get a Secret</h3><p>This sample retrieves an existing SSH Credentials secret by its ID.</p><pre class="hljs apache">query{<br/>  secret(secretId:&#34;iyBV3R8ZQWe48GMiaTht7A&#34;,secretType:SSH_CREDENTIAL){<br/>    ... on SSHCredential{<br/>      name<br/>      id<br/>      authenticationType{<br/>        ... on SSHAuthentication{<br/>          port<br/>          userName<br/>        }<br/>        ... on KerberosAuthentication{<br/>          principal<br/>          port<br/>          realm<br/>        }<br/>      }<br/>  }<br/> }<br/>}</pre><p></p><div class="tip-callout">The <code>authenticationType</code> element supports credentials using both <code>SSHAuthentication</code> and <code>KerberosAuthentication</code>.</div><h3>Get a Secret by Name</h3><p>This sample uses a <code>secretByName</code> query to retrieve an existing secret by its name.</p><pre class="hljs apache">query{<br/>  secretByName(name:&#34;testing_SSH&#34;,secretType:SSH_CREDENTIAL){<br/>    ... on SSHCredential{<br/>			name<br/>      authenticationType{<br/>        ... on SSHAuthentication{<br/>          port<br/>          userName<br/>        }<br/>        ... on KerberosAuthentication{<br/>          principal<br/>          port<br/>          realm<br/>        }<br/>      }<br/>    }<br/>  }<br/>}</pre><h3>Create an SSH Credentials Secret</h3><p>This sample creates a secret. The required <code>CreateSecretInput</code> input must include a <code>SecretType</code>.</p><pre class="hljs apache"> mutation($secret: CreateSecretInput!){<br/>  createSecret(input: $secret){<br/>    secret{<br/>    ... on SSHCredential{<br/>      name<br/>      id<br/>      authenticationType{<br/>        ... on SSHAuthentication{<br/>          port<br/>          userName<br/>        }<br/>        ... on KerberosAuthentication{<br/>          principal<br/>          port<br/>          realm<br/>        }<br/>      }<br/>    }<br/>  }<br/> }<br/>}</pre><h4>Query Variables: Inline Key</h4><p> For the above query, these sample variables supply the <code>SecretType</code> and an inline SSH key.</p><div class="note-callout">You must provide the inline SSH key as a Base64-encoded string.</div><p></p><pre class="hljs apache">{<br/>  &#34;secret&#34;: {<br/>    &#34;secretType&#34;: &#34;SSH_CREDENTIAL&#34;,<br/>    &#34;sshCredential&#34;: {<br/>      &#34;name&#34;: &#34;ssh_credential_with_inline_key&#34;,<br/>      &#34;authenticationScheme&#34;: &#34;SSH&#34;,<br/>      &#34;sshAuthentication&#34;: {<br/>        &#34;port&#34;: 22,<br/>        &#34;userName&#34;: &#34;ubuntu&#34;,<br/>        &#34;sshAuthenticationMethod&#34;: {<br/>          &#34;sshCredentialType&#34;: &#34;SSH_KEY&#34;,<br/>          &#34;inlineSSHKey&#34;: {<br/>            &#34;sshKeySecretFileId&#34;: &#34;ePuBMQvPQ0Sl3FGYkd9NQg&#34;<br/>          }<br/>        }<br/>      },<br/>      &#34;usageScope&#34;: {<br/>        &#34;appEnvScopes&#34;: [<br/>          {<br/>            &#34;application&#34;: {<br/>              &#34;filterType&#34;: &#34;ALL&#34;<br/>            },<br/>            &#34;environment&#34;: {<br/>              &#34;filterType&#34;: &#34;PRODUCTION_ENVIRONMENTS&#34;<br/>            }<br/>          }<br/>        ]<br/>      }<br/>    }<br/>  }<br/>}</pre><h4>Query Variables: File Path</h4><p>These sample variables specify the <code>SecretType</code>, and reference the SSH Key by its file path.</p><pre>{<br/>  &#34;secret&#34;: {<br/>    &#34;secretType&#34;: &#34;SSH_CREDENTIAL&#34;,<br/>    &#34;sshCredential&#34;: {<br/>      &#34;name&#34;: &#34;Test&#34;,<br/>      &#34;authenticationScheme&#34;: &#34;SSH&#34;,<br/>      &#34;sshAuthentication&#34;: {<br/>        &#34;port&#34;: 22,<br/>        &#34;userName&#34;: &#34;ubuntu&#34;,<br/>        &#34;sshAuthenticationMethod&#34;: {<br/>          &#34;sshCredentialType&#34;: &#34;SSH_KEY_FILE_PATH&#34;,<br/>          &#34;sshKeyFile&#34;: {<br/>            &#34;path&#34;: &#34;ePuBMQvPQ0Sl3FGYkd9NQg&#34;<br/>          }<br/>        }<br/>      },<br/>      &#34;usageScope&#34;: {<br/>        &#34;appEnvScopes&#34;: [<br/>          {<br/>            &#34;application&#34;: {<br/>              &#34;filterType&#34;: &#34;ALL&#34;<br/>            },<br/>            &#34;environment&#34;: {<br/>              &#34;filterType&#34;: &#34;PRODUCTION_ENVIRONMENTS&#34;<br/>            }<br/>          }<br/>        ]<br/>      }<br/>    }<br/>  }<br/>}</pre><h4>Query Variables: Password</h4><p>These sample variables supply an inline password for the new secret.</p><pre>{<br/>  &#34;secret&#34;: {<br/>    &#34;secretType&#34;: &#34;SSH_CREDENTIAL&#34;,<br/>    &#34;sshCredential&#34;: {<br/>      &#34;name&#34;: &#34;Test&#34;,<br/>      &#34;authenticationScheme&#34;: &#34;SSH&#34;,<br/>      &#34;sshAuthentication&#34;: {<br/>        &#34;port&#34;: 22,<br/>        &#34;userName&#34;: &#34;ubuntu&#34;,<br/>        &#34;sshAuthenticationMethod&#34;: {<br/>          &#34;sshCredentialType&#34;: &#34;PASSWORD&#34;,<br/>          &#34;serverPassword&#34;: {<br/>            &#34;passwordSecretId&#34;: &#34;mq-PSjt0Sjmq43dEE5V1og&#34;<br/>          }<br/>        }<br/>      },<br/>      &#34;usageScope&#34;: {<br/>        &#34;appEnvScopes&#34;: [<br/>          {<br/>            &#34;application&#34;: {<br/>              &#34;filterType&#34;: &#34;ALL&#34;<br/>            },<br/>            &#34;environment&#34;: {<br/>              &#34;filterType&#34;: &#34;PRODUCTION_ENVIRONMENTS&#34;<br/>            }<br/>          }<br/>        ]<br/>      }<br/>    }<br/>  }<br/>}</pre><h4>Query Variables: Kerberos Keytab</h4><p>These sample variables supply a Kerberos keytab for the new secret.</p><pre>{<br/>  &#34;secret&#34;: {<br/>    &#34;secretType&#34;: &#34;SSH_CREDENTIAL&#34;,<br/>    &#34;sshCredential&#34;: {<br/>      &#34;name&#34;: &#34;TestSample1&#34;,<br/>      &#34;authenticationScheme&#34;: &#34;KERBEROS&#34;,<br/>      &#34;kerberosAuthentication&#34;: {<br/>        &#34;principal&#34;: &#34;asdasd&#34;,<br/>        &#34;realm&#34;: &#34;asdasd&#34;,<br/>        &#34;port&#34;: 22,<br/>        &#34;tgtGenerationMethod&#34;: {<br/>          &#34;tgtGenerationUsing&#34;: &#34;KEY_TAB_FILE&#34;,<br/>          &#34;keyTabFile&#34;: {<br/>            &#34;filePath&#34;: &#34;/asd/asdasd&#34;<br/>          }<br/>        }<br/>      },<br/>      &#34;usageScope&#34;: {<br/>        &#34;appEnvScopes&#34;: [<br/>          {<br/>            &#34;application&#34;: {<br/>              &#34;filterType&#34;: &#34;ALL&#34;<br/>            },<br/>            &#34;environment&#34;: {<br/>              &#34;filterType&#34;: &#34;PRODUCTION_ENVIRONMENTS&#34;<br/>            }<br/>          }<br/>        ]<br/>      }<br/>    }<br/>  }<br/>}</pre><h4>Query Variables: Kerberos Password</h4><p>These sample variables supply a Kerberos password for the new secret.</p><pre>{<br/>  &#34;secret&#34;: {<br/>    &#34;secretType&#34;: &#34;SSH_CREDENTIAL&#34;,<br/>    &#34;sshCredential&#34;: {<br/>      &#34;name&#34;: &#34;TestSample1&#34;,<br/>      &#34;authenticationScheme&#34;: &#34;KERBEROS&#34;,<br/>      &#34;kerberosAuthentication&#34;: {<br/>        &#34;principal&#34;: &#34;asdasd&#34;,<br/>        &#34;realm&#34;: &#34;asdasd&#34;,<br/>        &#34;port&#34;: 22,<br/>        &#34;tgtGenerationMethod&#34;: {<br/>          &#34;tgtGenerationUsing&#34;: &#34;PASSWORD&#34;,<br/>          &#34;kerberosPassword&#34;: {<br/>            &#34;passwordSecretId&#34;: &#34;mq-PSjt0Sjmq43dEE5V1og&#34;<br/>          }<br/>        }<br/>      },<br/>      &#34;usageScope&#34;: {<br/>        &#34;appEnvScopes&#34;: [<br/>          {<br/>            &#34;application&#34;: {<br/>              &#34;filterType&#34;: &#34;ALL&#34;<br/>            },<br/>            &#34;environment&#34;: {<br/>              &#34;filterType&#34;: &#34;PRODUCTION_ENVIRONMENTS&#34;<br/>            }<br/>          }<br/>        ]<br/>      }<br/>    }<br/>  }<br/>}</pre><h3>Update a Secret</h3><p>This sample updates an existing secret. The required <code>UpdateSecretInput</code> input must supply a <code>secretType</code> and an <code>id</code>.</p><div class="tip-callout">You can update the <code>name</code> or the <code>sshAuthentication/kerberosAuthentication</code>. To update the credentials, you must supply the complete <code>sshAuthentication/kerberosAuthentication</code> as input.</div><p></p><pre class="hljs apache">mutation($secret: UpdateSecretInput!){<br/>  updateSecret(input: $secret){<br/>    secret{<br/>    ... on SSHCredential{<br/>      name<br/>      id<br/>      authenticationType{<br/>        ... on SSHAuthentication{<br/>          port<br/>          userName<br/>        }<br/>        ... on KerberosAuthentication{<br/>          principal<br/>          port<br/>          realm<br/>        }<br/>      }<br/>    }<br/>  }<br/> }<br/>}</pre><h4>Query Variables</h4><p>These sample variables supply the required <code>secretType</code> and <code>id</code>.</p><pre>{<br/>  &#34;secret&#34;: {<br/>    &#34;secretId&#34;: &#34;&#34;,<br/>    &#34;secretType&#34;: &#34;SSH_CREDENTIAL&#34;,<br/>    &#34;sshCredential&#34;: {<br/>      &#34;name&#34;: &#34;Test&#34;,<br/>      &#34;authenticationScheme&#34;: &#34;SSH&#34;,<br/>      &#34;sshAuthentication&#34;: {<br/>        &#34;port&#34;: 22,<br/>        &#34;userName&#34;: &#34;ubuntu&#34;,<br/>        &#34;sshAuthenticationMethod&#34;: {<br/>          &#34;sshCredentialType&#34;: &#34;PASSWORD&#34;,<br/>          &#34;serverPassword&#34;:   {<br/>            &#34;passwordSecretId&#34;: &#34;mq-PSjt0Sjmq43dEE5V1og&#34;<br/>          }<br/>        }<br/>      },<br/>      &#34;usageScope&#34;: {<br/>        &#34;appEnvScopes&#34;: [<br/>          {<br/>            &#34;application&#34;: {<br/>              &#34;filterType&#34;: &#34;ALL&#34;<br/>            },<br/>            &#34;environment&#34;: {<br/>              &#34;filterType&#34;: &#34;PRODUCTION_ENVIRONMENTS&#34;<br/>            }<br/>          }<br/>        ]<br/>      }<br/>    }<br/>  }<br/>}<br/></pre><h3>Delete a Secret</h3><p>This sample deletes a specified secret. The required <code>DeleteSecretInput</code> input must supply a <code>secretId</code> and a <code>secretType</code>.</p><pre class="hljs apache">mutation($secret: DeleteSecretInput!){<br/>  deleteSecret(input: $secret){<br/>    clientMutationId<br/>  }<br/>}</pre><h4>Query Variables</h4><p>Here are query variables for the above <code>deleteSecret</code> operation.</p><pre class="hljs apache">{<br/>  &#34;secret&#34;: {<br/>    &#34;secretId&#34;: &#34;okvQ69PMQIqjyI3r5YB1JQ&#34;,<br/>    &#34;secretType&#34;: &#34;SSH_CREDENTIAL&#34;<br/>  }<br/>}</pre><h3>Related Topics</h3><ul><li><a href="/article/tm0w6rruqv-harness-api">Harness API</a></li><li><a href="/article/omnfccj1n0-api-encrypted-text">Encrypted Text API</a></li><li><a href="/article/jvhzdi1ztj-api-encrypted-files">Encrypted Files API</a></li><li><a href="/article/2rlo5zw321-api-win-rm-credentials">WinRM Credentials API</a></li></ul><p></p>