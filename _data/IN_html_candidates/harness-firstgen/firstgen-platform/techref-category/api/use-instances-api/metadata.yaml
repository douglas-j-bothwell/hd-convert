type: article
article_id: zaro0wpev1
user_id: 2te4j9f9g7
category_id: l2p3i03l4a
author:
  name: Rashmi Nanda Sahoo
  profile_image: https://www.gravatar.com/avatar/b7bfd905f8714099535f2ff657fa3975?d=mm&s=150
title: Use Instances API
slug: use-instances-api
description: This topic explains how to fetch deployed artifact and container information
  using the Instances API.
short_version: This topic explains how to fetch deployed artifact and container information
  using the Instances API.
tags:
- GraphQL API
- API
show_toc: true
is_private: true
is_published: true
is_featured: false
stale_status:
  is_stale: false
  reason: ""
  source: API
  triggered_at: 2021-07-21T05:38:07.504873Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: Use Instances API
  description: This topic explains how to fetch deployed artifact and container information
    using the Instances API.
  short_version: This topic explains how to fetch deployed artifact and container
    information using the Instances API.
  body: '<p>This topic explains how to fetch artifacts and containers information
    after the deployment is complete.</p><p>In this topic:</p><ul><li><a href="https://docs.harness.io/article/zaro0wpev1-use-instances-api#before_you_begin">Before
    You Begin</a></li><li><a href="https://docs.harness.io/article/zaro0wpev1-use-instances-api#supported_platforms_and_technologies">Supported
    Platforms and Technologies</a></li><li><a href="https://docs.harness.io/article/zaro0wpev1-use-instances-api#step_fetch_artifact_and_container_information">Step:
    Fetch Artifact and Container Information</a></li></ul><h3>Before You Begin</h3><ul><li><a
    href="https://docs.harness.io/article/tm0w6rruqv-harness-api">Harness API</a></li></ul><h3>Supported
    Platforms and Technologies</h3><p>See <a href="https://docs.harness.io/article/220d0ojx5y-supported-platforms">Supported
    Platforms and Technologies</a>.</p><h3>Step: Fetch Artifact and Container Information</h3><p>You
    can get the artifacts and containers information for the below instances:</p><ul><li>AutoScalingGroupInstance</li><li>CodeDeployInstance</li><li>Ec2Instance</li><li>EcsContainerInstance</li><li>K8sPodInstance</li><li>PcfInstance</li><li>PhysicalHostInstance</li></ul><p>Here
    is an example of a query that returns all of the artifacts and containers information
    for a K8sPodInstance:</p><pre class="hljs graphql">{<br/>  instances(limit: 10)
    {<br/>    pageInfo {<br/>      total<br/>    }<br/>    nodes {<br/>      ... on
    K8sPodInstance {<br/>        containers {<br/>          containerId<br/>          image<br/>          name<br/>        }<br/>        environment
    {<br/>          name<br/>        }<br/>        podName<br/>      }<br/>      artifact
    {<br/>        artifactSource {<br/>          name<br/>        }<br/>        buildNo<br/>      }<br/>    }<br/>  }<br/>}</pre><p></p><p>The
    result will be something like this:</p><pre class="hljs graphql">{<br/>  &#34;data&#34;:
    {<br/>    &#34;instances&#34;: {<br/>      &#34;pageInfo&#34;: {<br/>        &#34;total&#34;:
    25<br/>      },<br/>      &#34;nodes&#34;: [<br/>        {<br/>          &#34;containers&#34;:
    [<br/>            {<br/>              &#34;containerId&#34;: &#34;docker://3207a930927cc8b6ed3af7179c0645a8fd300cabe636ba0526f7c458e11a84fb&#34;,<br/>              &#34;image&#34;:
    &#34;registry.hub.docker.com/library/nginx:1.20.0-perl&#34;,<br/>              &#34;name&#34;:
    &#34;harness-example&#34;<br/>            }<br/>          ],<br/>          &#34;environment&#34;:
    {<br/>            &#34;name&#34;: &#34;TK Production&#34;<br/>          },<br/>          &#34;podName&#34;:
    &#34;harness-example-deployment-canary-5cfbdb6d7d-hhfcd&#34;,<br/>          &#34;artifact&#34;:
    {<br/>            &#34;artifactSource&#34;: {<br/>              &#34;name&#34;:
    &#34;library_nginx&#34;<br/>            },<br/>            &#34;buildNo&#34;:
    &#34;1.20.0-perl&#34;<br/>          }<br/>        },<br/>        {<br/>          &#34;containers&#34;:
    [<br/>            {<br/>              &#34;containerId&#34;: &#34;docker://7f94513b9419fb2f52be62f8843d4b16967ef6b7582878b4a9263b20fb68c997&#34;,<br/>              &#34;image&#34;:
    &#34;bitnami/nginx:1.19.10-debian-10-r6&#34;,<br/>              &#34;name&#34;:
    &#34;nginx&#34;<br/>            }<br/>          ],<br/>          &#34;environment&#34;:
    {<br/>            &#34;name&#34;: &#34;Local&#34;<br/>          },<br/>          &#34;podName&#34;:
    &#34;release-e81d8647-8f3b-3cb3-a59d-d2afc9b4df71-nginx-56f88b5jg5qq&#34;,<br/>          &#34;artifact&#34;:
    {<br/>            &#34;artifactSource&#34;: null,<br/>            &#34;buildNo&#34;:
    &#34;1.19.10-debian-10-r6&#34;<br/>          }<br/>        }<br/>      ]<br/>    }<br/>  }<br/>}</pre><p></p><p>Search
    for <strong>InstanceConnection</strong> in the GraphQL Documentation Explorer
    to see all of the available fields.</p><p></p>'
  slug: use-instances-api
  tags:
  - GraphQL API
  - API
  is_live: true
