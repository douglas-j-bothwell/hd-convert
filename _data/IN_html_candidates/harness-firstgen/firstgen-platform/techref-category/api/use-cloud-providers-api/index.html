<p>You can create, read, update, and delete <a href="/article/whwnovprrb-cloud-providers">Harness Cloud Providers</a> using the Harness API.</p><p>This topic provides information on querying and managing all Cloud Provider types.</p><p>In this topic:</p><ul><li> <a href="#before_you_begin">Before You Begin</a></li><li> <a href="#step_1_create_a_cloud_provider">Step 1: Create a Cloud Provider</a></li><li> <a href="#step_2_update_a_cloud_provider">Step 2: Update a Cloud Provider</a></li><li> <a href="#step_3_delete_a_cloud_provider">Step 3: Delete a Cloud Provider</a></li><li> <a href="#step_4_find_all_cloud_providers_by_type">Step 4: Find all Cloud Providers by Type</a></li><li> <a href="#step_5_search_for_cloud_provider_by_id">Step 5: Search for Cloud Provider by ID</a></li><li> <a href="#step_6_find_cloud_provider_by_name">Step 6: Find Cloud Provider by Name</a></li><li> <a href="#examples">Examples</a><ul><li> <a href="#encrypted_keys_requirements">Encrypted Keys Requirements</a></li><li> <a href="#gcp">GCP</a></li><li> <a href="#aws">AWS</a></li><li> <a href="#azure">Azure</a></li><li> <a href="#pivotal_pcf">Pivotal (PCF)</a></li><li> <a href="#spotinst">Spotinst</a></li><li> <a href="#kubernetes">Kubernetes</a></li><li> <a href="#physical_data_center">Physical Data Center</a></li></ul></li></ul><p></p><h3>Before You Begin</h3><ul><li>Review the <a href="/article/tm0w6rruqv-harness-api">Harness API</a></li><li> <a href="/article/whwnovprrb-cloud-providers">Add Cloud Providers</a></li></ul><h3>Step 1: Create a Cloud Provider</h3><p>You create a Cloud Provider using the mutation <code>createCloudProvider</code>.</p><p>It has the following syntax:</p><pre>mutation CreateCloudProviderMutation($cloudProvider: CreateCloudProviderInput!) {<br/>  createCloudProvider(input: $cloudProvider) {<br/>    clientMutationId<br/>    cloudProvider {<br/>      id<br/>      name<br/>      type<br/>    }<br/>  }<br/>}</pre><p>For each type of Cloud Provider you want to add, you use the <strong>Query Variables</strong> section to add its specific inputs.</p><p>The requirements for each Cloud Provider type can be found in their input arguments:</p><ul><li><code>awsCloudProvider: AwsCloudProviderInput</code></li><li><code>azureCloudProvider: AzureCloudProviderInput</code></li><li><code>gcpCloudProvider: GcpCloudProviderInput</code></li><li><code>k8sCloudProvider: K8sCloudProviderInput</code></li><li><code>pcfCloudProvider: PcfCloudProviderInput</code></li><li><code>physicalDataCenterCloudProvider: PhysicalDataCenterCloudProviderInput</code></li><li><code>spotInstCloudProvider: SpotInstCloudProviderInput</code></li></ul><p>For example, to add a Google Cloud Platform (GCP) Cloud Provider, you would use something similar to the following:</p><pre>{<br/>  &#34;cloudProvider&#34;: {<br/>    &#34;cloudProviderType&#34;: &#34;GCP&#34;,<br/>    &#34;gcpCloudProvider&#34;: {<br/>      &#34;name&#34;: &#34;gcp-api-test&#34;,<br/>      &#34;serviceAccountKeySecretId&#34;:&#34;xxxxxx&#34;<br/>    }<br/>  }<br/>}</pre><p></p><h3>Step 2: Update a Cloud Provider</h3><p>The syntax for the <strong>Query Variables</strong> when updating is almost identical to the <strong>Query Variables</strong> when creating, with the addition of <code>cloudProviderId</code>. You simply need to enter the ID of the Cloud Provider you want to update.</p><p>For the required update arguments, see:</p><ul><li><code>awsCloudProvider: UpdateAwsCloudProviderInput</code></li><li><code>azureCloudProvider: UpdateAzureCloudProviderInput</code></li><li><code>gcpCloudProvider: UpdateGcpCloudProviderInput</code></li><li><code>k8sCloudProvider: UpdateK8sCloudProviderInput</code></li><li><code>pcfCloudProvider: UpdatePcfCloudProviderInput</code></li><li><code>physicalDataCenterCloudProvider: UpdatePhysicalDataCenterCloudProviderInput</code></li><li><code>spotInstCloudProvider: UpdateSpotInstCloudProviderInput</code></li></ul><p>Query — This is the exact same query for all Cloud Provider types:</p><pre>mutation UpdateCloudProviderMutation($cloudProvider: UpdateCloudProviderInput!) {<br/>  updateCloudProvider(input: $cloudProvider) {<br/>    clientMutationId<br/>    cloudProvider {<br/>      id<br/>      name<br/>      type<br/>    }<br/>  }<br/>}</pre><p>The Query Variables follow this syntax, with <code>cloudProviderId</code> identifying the Cloud Provider to update:</p><pre>{<br/>  &#34;cloudProvider&#34;: {<br/>    &#34;cloudProviderType&#34;: &#34;PCF&#34;,<br/>    &#34;cloudProviderId&#34;: &#34;fGPZikQkR2-pycuf4PzlQA&#34;,<br/>    &#34;pcfCloudProvider&#34;: {<br/>      &#34;name&#34;: &#34;pcf-api-test&#34;,<br/>      &#34;endpointUrl&#34;: &#34;api.run.pivotal.io&#34;,<br/>      &#34;userName&#34;: &#34;john.doe@mycompany.com&#34;,<br/>      &#34;passwordSecretId&#34;:&#34;xxxxxx&#34;   <br/>    }<br/>  }<br/>}</pre><p></p><h3>Step 3: Delete a Cloud Provider</h3><p>Deleting a Cloud Provider requires its ID only.</p><p>Query — This is the exact same query for all Cloud Provider types:</p><pre>mutation DeleteCloudProviderMutation($deleteCloudProvider: DeleteCloudProviderInput!) {<br/>  deleteCloudProvider(input: $deleteCloudProvider) {<br/>    clientMutationId<br/>  }<br/>}</pre><p>Query Variables, with <code>cloudProviderId</code> identifying the Cloud Provider to delete:</p><pre>{<br/>  &#34;deleteCloudProvider&#34;: {<br/>    &#34;cloudProviderId&#34;: &#34;xxxxxxx&#34;<br/>    }<br/>}</pre><p>Output:</p><pre>{<br/>  &#34;data&#34;: {<br/>    &#34;deleteCloudProvider&#34;: {<br/>      &#34;clientMutationId&#34;: null<br/>    }<br/>  }<br/>}</pre><p></p><h3>Step 4: Find all Cloud Providers by Type</h3><p>The first step is usually to get a list of all Harness Cloud Providers by type using <code>cloudProviders()</code>.</p><p>The results are a list of all the matching Cloud Providers and their IDs and names.</p><p>You can then use the ID with <code>cloudProviderById()</code> later in this topic.</p><p>Here is an example of the list API with <code>cloudProviders()</code>.</p><pre>{<br/>  cloudProviders(<br/>    filters: [{ cloudProviderType:{operator: EQUALS, values: [AWS]}<br/>    }]<br/>    limit: 10<br/>    offset: 0<br/>  ) {<br/>    nodes{<br/>      id<br/>      name<br/>    }<br/>  }<br/>}</pre><p>Output example:</p><pre>{<br/>  &#34;data&#34;: {<br/>    &#34;cloudProviders&#34;: {<br/>      &#34;nodes&#34;: [<br/>        {<br/>          &#34;id&#34;: &#34;FOGeZTkeTLyH7Vo2zaPcwg&#34;,<br/>          &#34;name&#34;: &#34;harness-aws-prod&#34;,<br/>          &#34;createdAt&#34;: 1498090708170,<br/>          &#34;createdBy&#34;: {<br/>            &#34;id&#34;: &#34;igZG8TuNSoijwZ3ZsmiOOQ&#34;<br/>          }<br/>        },<br/>        {<br/>          &#34;id&#34;: &#34;62q28QZmRO6vvw2UoWgU5Q&#34;,<br/>          &#34;name&#34;: &#34;harness_awd_nonprod&#34;,<br/>          &#34;createdAt&#34;: 1496431015854,<br/>          &#34;createdBy&#34;: {<br/>            &#34;id&#34;: &#34;BNxVi6x-R2SeFAGlxo2HtA&#34;<br/>          }<br/>        }<br/>      ]<br/>    }<br/>  }<br/>}</pre><p>Now you can use the ID with <code>cloudProviderById()</code> below.</p><h3>Step 5: Search for Cloud Provider by ID</h3><p>Using the Cloud Providers ID, you can run <code>cloudProvider(cloudProviderId)</code> or <code>cloudProviderById()</code>.</p><p>First, let&#39;s run <code>cloudProvider(cloudProviderId)</code>:</p><pre>{<br/>  cloudProvider(cloudProviderId: &#34;7VquTr1tQmer76b8rIW_0w&#34;) {<br/>    id<br/>    name<br/>    type<br/>  }<br/>}</pre><p>Output example:</p><pre>{<br/>  &#34;data&#34;: {<br/>    &#34;cloudProvider&#34;: {<br/>      &#34;id&#34;: &#34;7VquTr1tQmer76b8rIW_0w&#34;,<br/>      &#34;name&#34;: &#34;aws&#34;,<br/>      &#34;type&#34;: &#34;AWS&#34;<br/>    }<br/>  }<br/>}</pre><p>Next, let use <code>cloudProviderById()</code>:</p><pre>query cloudProviderById {<br/>  cloudProvider(<br/>    cloudProviderId: &#34;jzt2wbM_T-O0gser40V8yg&#34;<br/>  ){<br/>    id<br/>    name<br/>    type<br/>    createdAt<br/>    createdBy {<br/>      id<br/>    }<br/>  }<br/>}</pre><p>Output example:</p><pre>{<br/>  &#34;data&#34;: {<br/>    &#34;cloudProvider&#34;: {<br/>      &#34;id&#34;: &#34;jzt2wbM_T-O0gser40V8yg&#34;,<br/>      &#34;name&#34;: &#34;aws&#34;,<br/>      &#34;type&#34;: &#34;AWS&#34;,<br/>      &#34;createdAt&#34;: 1508103092828,<br/>      &#34;createdBy&#34;: {<br/>        &#34;id&#34;: &#34;m7akhDYLRG6dGFy4G6FEMw&#34;<br/>      }<br/>    }<br/>  }<br/>}</pre><h3>Step 6: Find Cloud Provider by Name</h3><p>Using the Cloud Provider&#39;s name, run <code>cloudProviderByName</code>:</p><pre>query cloudProviderByName {<br/> cloudProviderByName(<br/>   name: &#34;aws&#34;<br/> ){<br/>   id<br/>   name<br/>   type<br/>   createdAt<br/>   createdBy {<br/>     id<br/>   }<br/> }<br/>}</pre><p>Output example:</p><pre>{<br/> &#34;data&#34;: {<br/>   &#34;cloudProviderByName&#34;: {<br/>     &#34;id&#34;: &#34;jzt2wbM_T-O0gser40V8yg&#34;,<br/>     &#34;name&#34;: &#34;aws&#34;,<br/>     &#34;type&#34;: &#34;AWS&#34;,<br/>     &#34;createdAt&#34;: 1508103092828,<br/>     &#34;createdBy&#34;: {<br/>       &#34;id&#34;: &#34;m7akhDYLRG6dGFy4G6FEMw&#34;<br/>     }<br/>   }<br/> }<br/>}</pre><h3>Examples</h3><p>In this section are examples of creating and updating the different Harness Cloud Provider types.</p><p>Each type has different methods for entering credentials. The examples below simply provide a single credential method.</p><p>For all of the available methods and syntax, look up the following in the API Explorer <strong>Docs</strong>:</p><ul><li><code>awsCloudProvider: AwsCloudProviderInput</code></li><li><code>azureCloudProvider: AzureCloudProviderInput</code></li><li><code>gcpCloudProvider: GcpCloudProviderInput</code></li><li><code>k8sCloudProvider: K8sCloudProviderInput</code></li><li><code>pcfCloudProvider: PcfCloudProviderInput</code></li><li><code>physicalDataCenterCloudProvider: PhysicalDataCenterCloudProviderInput</code></li><li><code>spotInstCloudProvider: SpotInstCloudProviderInput</code></li></ul><h4>Encrypted Keys Requirements</h4><p>Most of the Cloud Providers require encrypted text or files, which are created in Harness Secrets Management.</p><p>In the API, the <code>serviceAccountKeySecretId</code> argument is used to provide the ID of the Harness Encrypted Text or Files.</p><p>You can find this ID using the name of the encrypted text secret:</p><pre>query{<br/>  secretByName(name:&#34;&lt;secret_name&gt;&#34;,secretType:ENCRYPTED_TEXT){<br/>... on EncryptedText{<br/>      id<br/>      name<br/>      secretManagerId<br/>    }<br/> }<br/>}</pre><p>The output will give you the ID you need in <code>id</code>:</p><pre>{<br/>  &#34;data&#34;: {<br/>    &#34;secretByName&#34;: {<br/>      &#34;id&#34;: &#34;xxxxxx&#34;,<br/>      &#34;name&#34;: &#34;my-secret&#34;,<br/>      &#34;secretManagerId&#34;: &#34;xxxxx&#34;<br/>    }<br/>  }<br/>}</pre><p>See <a href="/article/omnfccj1n0-api-encrypted-text">Encrypted Text API</a>, <a href="/article/jvhzdi1ztj-api-encrypted-files">Encrypted Files API</a>, <a href="/article/ygyvp998mu-use-encrypted-text-secrets">Use Encrypted Text Secrets</a>, and <a href="/article/nt5vchhka4-use-encrypted-file-secrets">Use Encrypted File Secrets</a>.</p><h4>GCP</h4><p>The GCP Cloud Provider uses the <code>gcpCloudProvider: GcpCloudProviderInput</code> API.</p><h5>Create</h5><p>Query:</p><pre>mutation CreateCloudProviderMutation($cloudProvider: CreateCloudProviderInput!) {<br/>  createCloudProvider(input: $cloudProvider) {<br/>    clientMutationId<br/>    cloudProvider {<br/>      id<br/>      name<br/>      type<br/>    }<br/>  }<br/>}</pre><p>Query Variables (Using Encrypted Key):</p><pre>{<br/>  &#34;cloudProvider&#34;: {<br/>    &#34;cloudProviderType&#34;: &#34;GCP&#34;,<br/>    &#34;gcpCloudProvider&#34;: {<br/>      &#34;name&#34;: &#34;gcp-api-test&#34;,<br/>      &#34;serviceAccountKeySecretId&#34;:&#34;xxxxxx&#34;<br/>    }<br/>  }<br/>}</pre><p></p><p>Query Variables (Using Inherit From Delegate):</p><p></p><div class="note-callout">Currently, this feature is behind a Feature Flag. Contact <a href="mailto:support@harness.io" target="_blank">Harness Support</a> to enable the feature. Feature Flags can only be removed for Harness Professional and Essentials editions. Once the feature is released to a general audience, it is available for Trial and Community Editions.</div><p></p><pre>{<br/>  &#34;cloudProvider&#34;: {<br/>    &#34;cloudProviderType&#34;: &#34;GCP&#34;,<br/>    &#34;gcpCloudProvider&#34;: {<br/>      &#34;name&#34;: &#34;gcp-graphql-api-test1&#34;,<br/>      &#34;useDelegate&#34;: true,<br/>      &#34;delegateSelector&#34;: &#34;primary&#34;,<br/>      &#34;skipValidation&#34;: true<br/>    }<br/>  }<br/>}</pre><p></p><p>Output:</p><pre>{<br/>  &#34;data&#34;: {<br/>    &#34;createCloudProvider&#34;: {<br/>      &#34;clientMutationId&#34;: null,<br/>      &#34;cloudProvider&#34;: {<br/>        &#34;id&#34;: &#34;1MxfobsdSMmvogK_NMGrNg&#34;,<br/>        &#34;name&#34;: &#34;gcp-api-test&#34;,<br/>        &#34;type&#34;: &#34;GCP&#34;<br/>      }<br/>    }<br/>  }<br/>}</pre><h5>Update</h5><p>Query:</p><pre>mutation UpdateCloudProviderMutation($cloudProvider: UpdateCloudProviderInput!) {<br/>  updateCloudProvider(input: $cloudProvider) {<br/>    clientMutationId<br/>    cloudProvider {<br/>      id<br/>      name<br/>      type<br/>    }<br/>  }<br/>}</pre><p>Query Variables (Using Encrypted Key):</p><pre>{<br/>  &#34;cloudProvider&#34;: {<br/>    &#34;cloudProviderId&#34;: &#34;1MxfobsdSMmvogK_NMGrNg&#34;,<br/>    &#34;cloudProviderType&#34;: &#34;GCP&#34;,<br/>    &#34;gcpCloudProvider&#34;: {<br/>      &#34;name&#34;: &#34;gcp-api-test&#34;,<br/>      &#34;serviceAccountKeySecretId&#34;:&#34;xxxxx&#34;<br/>    }<br/>  }<br/>}</pre><p>Query Variables (Using Inherit From Delegate):</p><p></p><div class="note-callout">Currently, this feature is behind a Feature Flag. Contact <a href="mailto:support@harness.io" target="_blank">Harness Support</a> to enable the feature. Feature Flags can only be removed for Harness Professional and Essentials editions. Once the feature is released to a general audience, it is available for Trial and Community Editions.</div><p></p><pre>{<br/>  &#34;cloudProvider&#34;: {<br/>    &#34;cloudProviderId&#34;: &#34;d9-31Bl7Tj6oEjBf4ONCZw&#34;,<br/>    &#34;cloudProviderType&#34;: &#34;GCP&#34;,<br/>    &#34;gcpCloudProvider&#34;: {<br/>      &#34;name&#34;: &#34;gcp-graphql-api-test1&#34;,<br/>      &#34;useDelegate&#34;: true,<br/>      &#34;delegateSelector&#34;: &#34;cidelegate&#34;,<br/>      &#34;skipValidation&#34;: true<br/>    }<br/>  }<br/>}</pre><p>Output:</p><pre>{<br/>  &#34;data&#34;: {<br/>    &#34;updateCloudProvider&#34;: {<br/>      &#34;clientMutationId&#34;: null,<br/>      &#34;cloudProvider&#34;: {<br/>        &#34;id&#34;: &#34;1MxfobsdSMmvogK_NMGrNg&#34;,<br/>        &#34;name&#34;: &#34;gcp-api-test&#34;,<br/>        &#34;type&#34;: &#34;GCP&#34;<br/>      }<br/>    }<br/>  }<br/>}</pre><h4>AWS</h4><p>The AWS Cloud Provider uses the <code>awsCloudProvider: AwsCloudProviderInput</code> API.</p><h5>Create</h5><p>Query:</p><pre>mutation CreateCloudProviderMutation($cloudProvider: CreateCloudProviderInput!) {<br/>  createCloudProvider(input: $cloudProvider) {<br/>    clientMutationId<br/>    cloudProvider {<br/>      id<br/>      name<br/>      type<br/>    }<br/>  }<br/>}</pre><p>Query Variables:</p><pre>{<br/>  &#34;cloudProvider&#34;: {<br/>    &#34;cloudProviderType&#34;: &#34;AWS&#34;,<br/>    &#34;awsCloudProvider&#34;: {<br/>      &#34;name&#34;: &#34;aws-api-test&#34;,<br/>      &#34;credentialsType&#34;: &#34;MANUAL&#34;,<br/>      &#34;manualCredentials&#34;: {<br/>        &#34;accessKey&#34;: &#34;xxxxxxx&#34;,<br/>        &#34;secretKeySecretId&#34;: &#34;xxxxxxx&#34;<br/>      }<br/>    }<br/>  }<br/>}</pre><p>The above example is for manual credentials. You can also use <code>ec2IamCredentials</code>. and other settings. See <code>AwsCloudProviderInput</code> the API Explorer <strong>Docs</strong>.</p><p>Output:</p><pre>{<br/>  &#34;data&#34;: {<br/>    &#34;createCloudProvider&#34;: {<br/>      &#34;clientMutationId&#34;: null,<br/>      &#34;cloudProvider&#34;: {<br/>        &#34;id&#34;: &#34;VxnSK60OS8aLryPyBhV0RQ&#34;,<br/>        &#34;name&#34;: &#34;aws-api-test&#34;,<br/>        &#34;type&#34;: &#34;AWS&#34;<br/>      }<br/>    }<br/>  }<br/>}</pre><p></p><h5>Update</h5><p>Query:</p><pre>mutation UpdateCloudProviderMutation($cloudProvider: UpdateCloudProviderInput!) {<br/>  updateCloudProvider(input: $cloudProvider) {<br/>    clientMutationId<br/>    cloudProvider {<br/>      id<br/>      name<br/>      type<br/>    }<br/>  }<br/>}</pre><p>Query Variables:</p><pre>{<br/>  &#34;cloudProvider&#34;: {<br/>    &#34;cloudProviderType&#34;: &#34;AWS&#34;,<br/>    &#34;cloudProviderId&#34;: &#34;VxnSK60OS8aLryPyBhV0RQ&#34;,<br/>    &#34;awsCloudProvider&#34;: {<br/>      &#34;name&#34;: &#34;aws-api-test&#34;,<br/>      &#34;credentialsType&#34;: &#34;MANUAL&#34;,<br/>      &#34;manualCredentials&#34;: {<br/>        &#34;accessKey&#34;: &#34;xxxxxx&#34;,<br/>        &#34;secretKeySecretId&#34;: &#34;xxxxxx&#34;<br/>      }<br/>    }<br/>  }<br/>}</pre><p>Output:</p><pre>{<br/>  &#34;data&#34;: {<br/>    &#34;updateCloudProvider&#34;: {<br/>      &#34;clientMutationId&#34;: null,<br/>      &#34;cloudProvider&#34;: {<br/>        &#34;id&#34;: &#34;VxnSK60OS8aLryPyBhV0RQ&#34;,<br/>        &#34;name&#34;: &#34;aws-api-test&#34;,<br/>        &#34;type&#34;: &#34;AWS&#34;<br/>      }<br/>    }<br/>  }<br/>}</pre><p></p><h4>Azure</h4><p>The Azure Cloud Provider uses the <code>azureCloudProvider: AzureCloudProviderInput</code> API.</p><h5>Create</h5><p>Query:</p><pre>mutation CreateCloudProviderMutation($cloudProvider: CreateCloudProviderInput!) {<br/>  createCloudProvider(input: $cloudProvider) {<br/>    clientMutationId<br/>    cloudProvider {<br/>      id<br/>      name<br/>      type<br/>    }<br/>  }<br/>}</pre><p>Query Variables:</p><pre>{<br/>  &#34;cloudProvider&#34;: {<br/>    &#34;cloudProviderType&#34;: &#34;AZURE&#34;,<br/>    &#34;azureCloudProvider&#34;: {<br/>      &#34;name&#34;: &#34;azure-api-test&#34;,<br/>      &#34;clientId&#34;: &#34;xxxxx&#34;,<br/>      &#34;tenantId&#34;: &#34;xxxxx&#34;,<br/>      &#34;keySecretId&#34;: &#34;xxxxx&#34;<br/>    }<br/>  }<br/>}</pre><p>Output:</p><pre>{<br/>  &#34;data&#34;: {<br/>    &#34;createCloudProvider&#34;: {<br/>      &#34;clientMutationId&#34;: null,<br/>      &#34;cloudProvider&#34;: {<br/>        &#34;id&#34;: &#34;fGPZikQkR2-pycuf4PzlQA&#34;,<br/>        &#34;name&#34;: &#34;azure-api-test&#34;,<br/>        &#34;type&#34;: &#34;AZURE&#34;<br/>      }<br/>    }<br/>  }<br/>}</pre><p></p><h5>Update</h5><p>Query:</p><pre>mutation UpdateCloudProviderMutation($cloudProvider: UpdateCloudProviderInput!) {<br/>  updateCloudProvider(input: $cloudProvider) {<br/>    clientMutationId<br/>    cloudProvider {<br/>      id<br/>      name<br/>      type<br/>    }<br/>  }<br/>}</pre><p>Query Variables:</p><pre>{<br/>  &#34;cloudProvider&#34;: {<br/>    &#34;cloudProviderType&#34;: &#34;AZURE&#34;,<br/>    &#34;cloudProviderId&#34;: &#34;fGPZikQkR2-pycuf4PzlQA&#34;,<br/>    &#34;azureCloudProvider&#34;: {<br/>      &#34;name&#34;: &#34;azure-api-test&#34;,<br/>      &#34;clientId&#34;: &#34;xxxxx&#34;,<br/>      &#34;tenantId&#34;: &#34;xxxxx&#34;,<br/>      &#34;keySecretId&#34;: &#34;xxxxx&#34;<br/>    }<br/>  }<br/>}</pre><p>Output:</p><pre>{<br/>  &#34;data&#34;: {<br/>    &#34;updateCloudProvider&#34;: {<br/>      &#34;clientMutationId&#34;: null,<br/>      &#34;cloudProvider&#34;: {<br/>        &#34;id&#34;: &#34;fGPZikQkR2-pycuf4PzlQA&#34;,<br/>        &#34;name&#34;: &#34;azure-api-test&#34;,<br/>        &#34;type&#34;: &#34;AZURE&#34;<br/>      }<br/>    }<br/>  }<br/>}</pre><p></p><h4>Pivotal (PCF)</h4><p>The PCF Cloud Provider uses the <code>pcfCloudProvider: PcfCloudProviderInput</code> API.</p><h5>Create</h5><p>Query:</p><pre>mutation CreateCloudProviderMutation($cloudProvider: CreateCloudProviderInput!) {<br/>  createCloudProvider(input: $cloudProvider) {<br/>    clientMutationId<br/>    cloudProvider {<br/>      id<br/>      name<br/>      type<br/>    }<br/>  }<br/>}</pre><p>Query Variables:</p><pre>{<br/>  &#34;cloudProvider&#34;: {<br/>    &#34;cloudProviderType&#34;: &#34;PCF&#34;,<br/>    &#34;pcfCloudProvider&#34;: {<br/>      &#34;name&#34;: &#34;pcf-api-test&#34;,<br/>      &#34;endpointUrl&#34;: &#34;api.run.pivotal.io&#34;,<br/>      &#34;userName&#34;: &#34;john.doe@mycompany.com&#34;,<br/>      &#34;passwordSecretId&#34;:&#34;xxxxxx&#34;<br/>    }<br/>  }<br/>}</pre><p>Output:</p><pre>{<br/>  &#34;data&#34;: {<br/>    &#34;updateCloudProvider&#34;: {<br/>      &#34;clientMutationId&#34;: null,<br/>      &#34;cloudProvider&#34;: {<br/>        &#34;id&#34;: &#34;fGPZikQkR2-pyucf4PzlQA&#34;,<br/>        &#34;name&#34;: &#34;pcf-api-test&#34;,<br/>        &#34;type&#34;: &#34;PCF&#34;<br/>      }<br/>    }<br/>  }<br/>}</pre><p></p><h5>Update</h5><p>Query:</p><pre>mutation UpdateCloudProviderMutation($cloudProvider: UpdateCloudProviderInput!) {<br/>  updateCloudProvider(input: $cloudProvider) {<br/>    clientMutationId<br/>    cloudProvider {<br/>      id<br/>      name<br/>      type<br/>    }<br/>  }<br/>}</pre><p>Query Variables:</p><pre>{<br/>  &#34;cloudProvider&#34;: {<br/>    &#34;cloudProviderType&#34;: &#34;PCF&#34;,<br/>    &#34;cloudProviderId&#34;: &#34;fGPZikQkR2-pycuf4PzlQA&#34;,<br/>    &#34;pcfCloudProvider&#34;: {<br/>      &#34;name&#34;: &#34;pcf-api-test&#34;,<br/>      &#34;endpointUrl&#34;: &#34;api.run.pivotal.io&#34;,<br/>      &#34;userName&#34;: &#34;john.doe@mycompany.com&#34;,<br/>      &#34;passwordSecretId&#34;:&#34;xxxxxx&#34;   <br/>    }<br/>  }<br/>}</pre><p>Output:</p><pre>{<br/>  &#34;data&#34;: {<br/>    &#34;updateCloudProvider&#34;: {<br/>      &#34;clientMutationId&#34;: null,<br/>      &#34;cloudProvider&#34;: {<br/>        &#34;id&#34;: &#34;fGPZikQkR2-pyucf4PzlQA&#34;,<br/>        &#34;name&#34;: &#34;pcf-api-test&#34;,<br/>        &#34;type&#34;: &#34;PCF&#34;<br/>      }<br/>    }<br/>  }<br/>}</pre><p></p><h4>Spotinst</h4><p>The Spotinst Cloud Provider uses the <code>spotInstCloudProvider: SpotInstCloudProviderInput</code> API.</p><h5>Create</h5><p>Query:</p><pre>mutation CreateCloudProviderMutation($cloudProvider: CreateCloudProviderInput!) {<br/>  createCloudProvider(input: $cloudProvider) {<br/>    clientMutationId<br/>    cloudProvider {<br/>      id<br/>      name<br/>      type<br/>    }<br/>  }<br/>}</pre><p>Query Variables:</p><pre>{<br/>  &#34;cloudProvider&#34;: {<br/>    &#34;cloudProviderType&#34;: &#34;SPOT_INST&#34;,<br/>    &#34;spotInstCloudProvider&#34;: {<br/>      &#34;name&#34;: &#34;spotinst-api-test&#34;,<br/>      &#34;accountId&#34;: &#34;xxxxxx&#34;,<br/>      &#34;tokenSecretId&#34;: &#34;xxxxxx&#34;<br/>    }<br/>  }<br/>}</pre><p>Output:</p><pre>{<br/>  &#34;data&#34;: {<br/>    &#34;createCloudProvider&#34;: {<br/>      &#34;clientMutationId&#34;: null,<br/>      &#34;cloudProvider&#34;: {<br/>        &#34;id&#34;: &#34;oFrVUcq7RTm7h23JK5FJ1g&#34;,<br/>        &#34;name&#34;: &#34;spotinst-api-test&#34;,<br/>        &#34;type&#34;: &#34;SPOT_INST&#34;<br/>      }<br/>    }<br/>  }<br/>}</pre><p></p><h5>Update</h5><p>Query:</p><pre>mutation UpdateCloudProviderMutation($cloudProvider: UpdateCloudProviderInput!) {<br/>  updateCloudProvider(input: $cloudProvider) {<br/>    clientMutationId<br/>    cloudProvider {<br/>      id<br/>      name<br/>      type<br/>    }<br/>  }<br/>}</pre><p>Query Variables:</p><pre>{<br/>  &#34;cloudProvider&#34;: {<br/>    &#34;cloudProviderType&#34;: &#34;SPOT_INST&#34;,<br/>    &#34;cloudProviderId&#34;: &#34;oFrVUcq7RTm7h23JK5FJ1g&#34;,<br/>    &#34;spotInstCloudProvider&#34;: {<br/>      &#34;name&#34;: &#34;spotinst-api-test&#34;,<br/>      &#34;accountId&#34;: &#34;xxxxxx&#34;,<br/>      &#34;tokenSecretId&#34;: &#34;xxxxxx&#34;<br/>    }<br/>  }<br/>}</pre><p>Output:</p><pre>{<br/>  &#34;data&#34;: {<br/>    &#34;updateCloudProvider&#34;: {<br/>      &#34;clientMutationId&#34;: null,<br/>      &#34;cloudProvider&#34;: {<br/>        &#34;id&#34;: &#34;oFrVUcq7RTm7h23JK5FJ1g&#34;,<br/>        &#34;name&#34;: &#34;spotinst-api-test&#34;,<br/>        &#34;type&#34;: &#34;SPOT_INST&#34;<br/>      }<br/>    }<br/>  }<br/>}</pre><p></p><h4>Kubernetes</h4><p>The Kubernetes Cloud Provider uses the <code>k8sCloudProvider: K8sCloudProviderInput</code> API</p><h5>Create</h5><p>Query:</p><pre>mutation CreateCloudProviderMutation($cloudProvider: CreateCloudProviderInput!) {<br/>  createCloudProvider(input: $cloudProvider) {<br/>    clientMutationId<br/>    cloudProvider {<br/>      id<br/>      name<br/>      type<br/>    }<br/>  }<br/>}</pre><p>Query Variables:</p><pre>{<br/>  &#34;cloudProvider&#34;: {<br/>    &#34;cloudProviderType&#34;: &#34;KUBERNETES_CLUSTER&#34;,<br/>    &#34;k8sCloudProvider&#34;: {<br/>      &#34;name&#34;: &#34;k8s-api-test&#34;,<br/>      &#34;skipValidation&#34;: true,<br/>      &#34;clusterDetailsType&#34;: &#34;INHERIT_CLUSTER_DETAILS&#34;,<br/>      &#34;inheritClusterDetails&#34;: {<br/>        &#34;delegateName&#34;: &#34;harness-dev-delegate&#34;<br/>      }<br/>    }<br/>  }<br/>}</pre><p>The example above inherits credentials from a Harness Delegate (typically running in the target cluster). For manual cluster credential details, use <code>manualClusterDetails: UpdateManualClusterDetails</code>.</p><p>Output:</p><pre>{<br/>  &#34;data&#34;: {<br/>    &#34;createCloudProvider&#34;: {<br/>      &#34;clientMutationId&#34;: null,<br/>      &#34;cloudProvider&#34;: {<br/>        &#34;id&#34;: &#34;OmvkypLgQwCdaTvV4JexIg&#34;,<br/>        &#34;name&#34;: &#34;k8s-api-test&#34;,<br/>        &#34;type&#34;: &#34;KUBERNETES_CLUSTER&#34;<br/>      }<br/>    }<br/>  }<br/>}</pre><p></p><h5>Update</h5><p>Query:</p><pre>mutation UpdateCloudProviderMutation($cloudProvider: UpdateCloudProviderInput!) {<br/>  updateCloudProvider(input: $cloudProvider) {<br/>    clientMutationId<br/>    cloudProvider {<br/>      id<br/>      name<br/>      type<br/>    }<br/>  }<br/>}</pre><p>Query Variables:</p><pre>{<br/>  &#34;cloudProvider&#34;: {<br/>    &#34;cloudProviderType&#34;: &#34;KUBERNETES_CLUSTER&#34;,<br/>    &#34;cloudProviderId&#34;: &#34;OmvkypLgQwCdaTvV4JexIg&#34;,<br/>    &#34;k8sCloudProvider&#34;: {<br/>      &#34;name&#34;: &#34;k8s-api-test&#34;,<br/>      &#34;skipValidation&#34;: true,<br/>      &#34;clusterDetailsType&#34;: &#34;INHERIT_CLUSTER_DETAILS&#34;,<br/>      &#34;inheritClusterDetails&#34;: {<br/>        &#34;delegateName&#34;: &#34;harness-qa-delegate&#34;<br/>      }<br/>    }<br/>  }<br/>}</pre><p>Output:</p><pre>{<br/>  &#34;data&#34;: {<br/>    &#34;updateCloudProvider&#34;: {<br/>      &#34;clientMutationId&#34;: null,<br/>      &#34;cloudProvider&#34;: {<br/>        &#34;id&#34;: &#34;OmvkypLgQwCdaTvV4JexIg&#34;,<br/>        &#34;name&#34;: &#34;k8s-api-test&#34;,<br/>        &#34;type&#34;: &#34;KUBERNETES_CLUSTER&#34;<br/>      }<br/>    }<br/>  }<br/>}</pre><h4>Physical Data Center</h4><p>The Physical Data Center Cloud Provider uses the <code>physicalDataCenterCloudProvider: PhysicalDataCenterCloudProviderInput</code> API.</p><h5>Create</h5><p>Mutation:</p><pre>mutation CreateCloudProviderMutation($cloudProvider: CreateCloudProviderInput!) {<br/>  createCloudProvider(input: $cloudProvider) {<br/>    clientMutationId<br/>    cloudProvider {<br/>      id<br/>      name<br/>      type<br/>    }<br/>  }<br/>}</pre><p>Query Variables — Physical Data Center is the only Cloud Provider that uses <code>usageScope</code>:</p><pre>{<br/> &#34;cloudProvider&#34;: {<br/>   &#34;cloudProviderType&#34;: &#34;PHYSICAL_DATA_CENTER&#34;,<br/>   &#34;physicalDataCenterCloudProvider&#34;: {<br/>     &#34;name&#34;: &#34;phys-api-test&#34;,<br/>     &#34;usageScope&#34;: {<br/>       &#34;appEnvScopes&#34;: {<br/>         &#34;application&#34;: {<br/>           &#34;appId&#34;: &#34;kk-J4MUAR2qcaIjZ2HanYg&#34;<br/>         },<br/>         &#34;environment&#34;: {<br/>           &#34;envId&#34;: null,<br/>           &#34;filterType&#34;: &#34;NON_PRODUCTION_ENVIRONMENTS&#34;<br/>         }<br/>       }<br/>     }<br/>   }<br/> }<br/>}</pre><p>Note that the <code>appId</code> is used in <code>application</code>. You can use <code>filterType</code> instead, but you cannot use <code>appId</code> and <code>filterType</code> together. If you do, you will receive this error:</p><p><code>Exception while fetching data (/createCloudProvider) : Invalid request: Cannot set both appId and filterType in the app filter</code></p><p>Output:</p><pre>{<br/>  &#34;data&#34;: {<br/>    &#34;createCloudProvider&#34;: {<br/>      &#34;clientMutationId&#34;: null,<br/>      &#34;cloudProvider&#34;: {<br/>        &#34;id&#34;: &#34;Prmk_uaKTXqhSO_ZxtGaDQ&#34;,<br/>        &#34;name&#34;: &#34;phys-api-test&#34;,<br/>        &#34;type&#34;: &#34;PHYSICAL_DATA_CENTER&#34;<br/>      }<br/>    }<br/>  }<br/>}</pre><h5>Update</h5><p>Query:</p><pre>mutation UpdateCloudProviderMutation($cloudProvider: UpdateCloudProviderInput!) {<br/>  updateCloudProvider(input: $cloudProvider) {<br/>    clientMutationId<br/>    cloudProvider {<br/>      id<br/>      name<br/>      type<br/>    }<br/>  }<br/>}</pre><p>Query Variables:</p><pre>{<br/> &#34;cloudProvider&#34;: {<br/>   &#34;cloudProviderType&#34;: &#34;PHYSICAL_DATA_CENTER&#34;,<br/>  &#34;cloudProviderId&#34;: &#34;Prmk_uaKTXqhSO_ZxtGaDQ&#34;,<br/>   &#34;physicalDataCenterCloudProvider&#34;: {<br/>     &#34;name&#34;: &#34;phys-api-test&#34;,<br/>     &#34;usageScope&#34;: {<br/>       &#34;appEnvScopes&#34;: {<br/>         &#34;application&#34;: {<br/>           &#34;appId&#34;: &#34;kk-J4MUAR2qcaIjZ2HanYg&#34;<br/>         },<br/>         &#34;environment&#34;: {<br/>           &#34;envId&#34;: null,<br/>           &#34;filterType&#34;: &#34;NON_PRODUCTION_ENVIRONMENTS&#34;<br/>         }<br/>       }<br/>     }<br/>   }<br/> }<br/>}</pre><p>Output:</p><pre>{<br/>  &#34;data&#34;: {<br/>    &#34;updateCloudProvider&#34;: {<br/>      &#34;clientMutationId&#34;: null,<br/>      &#34;cloudProvider&#34;: {<br/>        &#34;id&#34;: &#34;Prmk_uaKTXqhSO_ZxtGaDQ&#34;,<br/>        &#34;name&#34;: &#34;phys-api-test&#34;,<br/>        &#34;type&#34;: &#34;PHYSICAL_DATA_CENTER&#34;<br/>      }<br/>    }<br/>  }<br/>}</pre><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p>