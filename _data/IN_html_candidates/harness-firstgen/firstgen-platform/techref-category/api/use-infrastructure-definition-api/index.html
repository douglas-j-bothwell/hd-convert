<p>This topic lists example queries that you can execute against the Harness Infrastructure Definition API.</p><div class="note-callout">See <a href="/article/v3l3wqovbe-infrastructure-definitions">Add an Infrastructure Definition</a> for basic information.</div><p>In this topic:</p><ul><li><a href="https://docs.harness.io/article/07vhqhs1xy-use-infrastructure-definition-api#before_you_begin">Before You Begin</a></li><li><a href="https://docs.harness.io/article/07vhqhs1xy-use-infrastructure-definition-api#query_multiple_infrastructure_definitions_by_deployment">Query Multiple Infrastructure Definitions by Deployment</a></li><li><a href="https://docs.harness.io/article/07vhqhs1xy-use-infrastructure-definition-api#query_infrastructure_definitions_by_environment_id">Query Infrastructure Definitions by Environment ID</a></li><li><a href="https://docs.harness.io/article/07vhqhs1xy-use-infrastructure-definition-api#query_infrastructure_definitions_by_infrastructure_definition_id">Query Infrastructure Definitions by Infrastructure Definition ID</a></li><li><a href="https://docs.harness.io/article/07vhqhs1xy-use-infrastructure-definition-api#query_infrastructure_definitions_by_name">Query Infrastructure Definitions by Name</a></li><li><a href="https://docs.harness.io/article/07vhqhs1xy-use-infrastructure-definition-api#see_also">See Also</a></li></ul><h3>Before You Begin</h3><ul><li><a href="https://docs.harness.io/article/tm0w6rruqv-harness-api">â€‹Introduction to Harness GraphQL API</a></li><li><a href="https://docs.harness.io/article/2rmd5i0e0h-harness-api-explorer">Harness API Explorer</a></li><li><a href="https://docs.harness.io/article/kn8wsu80n4-api-schema-and-structure">API Schema and Structure</a></li></ul><p></p><h3>Query Multiple Infrastructure Definitions by Deployment </h3><p>Use the <code>deploymentType</code> parameter to query for all Infrastructure Definitions by their deployment type.</p><p>The deployment type is defined in the <strong>Deployment Type</strong> setting in an Infrastructure Definition.</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/07vhqhs1xy/1616789736371/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p>For example, here&#39;s a query for Kubernetes deployment types:</p><pre class="hljs nohighlight">query{<br/>  infrastructureDefinitions(filters:{<br/>    deploymentType:{<br/>      values:&#34;KUBERNETES&#34;<br/>      operator:EQUALS<br/>    }<br/>  }<br/>  limit:10<br/>  offset:0){<br/>    nodes{<br/>      id<br/>      name<br/>      deploymentType<br/>    }<br/>  }<br/>}</pre><p></p><p>The output will look something like this:</p><pre>{<br/>  &#34;data&#34;: {<br/>    &#34;infrastructureDefinitions&#34;: {<br/>      &#34;nodes&#34;: [<br/>        {<br/>          &#34;id&#34;: &#34;72arASCuTDai7_v2hXH96A&#34;,<br/>          &#34;name&#34;: &#34;k8s-infradef-2&#34;,<br/>          &#34;deploymentType&#34;: &#34;Kubernetes&#34;<br/>        },<br/>        {<br/>          &#34;id&#34;: &#34;cIBZ5NGFTt2RuoSjZXtexA&#34;,<br/>          &#34;name&#34;: &#34;meenakshi-gcp-k8s&#34;,<br/>          &#34;deploymentType&#34;: &#34;Kubernetes&#34;<br/>        },<br/>        {<br/>          &#34;id&#34;: &#34;2e1HPTeTTsGBfx_xW-aE5g&#34;,<br/>          &#34;name&#34;: &#34;meenakshi-k8s-infra-def&#34;,<br/>          &#34;deploymentType&#34;: &#34;Kubernetes&#34;<br/>        }<br/>      ]<br/>    }<br/>  }<br/>}</pre><p></p><p></p><h3>Query Infrastructure Definitions by Environment ID</h3><p>You can query for all the Infrastructure Definitions that belong to a Harness Environment using the Environment ID and deployment type.</p><pre>{<br/>  environment(environmentId: &#34;KMoH2VGAQ3eP2ZWE2PMOng&#34;) {<br/>    id<br/>    name<br/>    infrastructureDefinitions(filters: {deploymentType: {values: &#34;KUBERNETES&#34;, operator: EQUALS}}, limit: 10, offset: 0) {<br/>      nodes {<br/>        id<br/>        name<br/>        deploymentType<br/>      }<br/>    }<br/>  }<br/>}</pre><p></p><p>The output will look something like this:</p><pre>{<br/>  &#34;data&#34;: {<br/>    &#34;environment&#34;: {<br/>      &#34;id&#34;: &#34;KMoH2VGAQ3eP2ZWE2PMOng&#34;,<br/>      &#34;name&#34;: &#34;Development&#34;,<br/>      &#34;infrastructureDefinitions&#34;: {<br/>        &#34;nodes&#34;: [<br/>          {<br/>            &#34;id&#34;: &#34;25PERz2eQvS_y6P0Zsphfw&#34;,<br/>            &#34;name&#34;: &#34;nginx-tiny-webserver&#34;,<br/>            &#34;deploymentType&#34;: &#34;Kubernetes&#34;<br/>          },<br/>          {<br/>            &#34;id&#34;: &#34;dvIxVMQQThCz59xnQ7ZftQ&#34;,<br/>            &#34;name&#34;: &#34;nginx-multiservice&#34;,<br/>            &#34;deploymentType&#34;: &#34;Kubernetes&#34;<br/>          },<br/>          {<br/>            &#34;id&#34;: &#34;SBj-I6vhSxm8WqCGD40AWA&#34;,<br/>            &#34;name&#34;: &#34;istio-multiservice&#34;,<br/>            &#34;deploymentType&#34;: &#34;Kubernetes&#34;<br/>          }<br/>        ]<br/>      }<br/>    }<br/>  }<br/>}</pre><h3>Query Infrastructure Definitions by Infrastructure Definition ID</h3><p>You can simply query for an Infrastructure Definition by its ID.</p><pre>query{<br/>  infrastructureDefinition(infrastructureId:&#34;25PERz2eQvS_y6P0Zsphfw&#34;){<br/>    id<br/>    name<br/>    deploymentType<br/>  }<br/>}</pre><p></p><p>The output will look something like this:</p><pre>{<br/>  &#34;data&#34;: {<br/>    &#34;infrastructureDefinition&#34;: {<br/>      &#34;id&#34;: &#34;25PERz2eQvS_y6P0Zsphfw&#34;,<br/>      &#34;name&#34;: &#34;nginx-tiny-webserver&#34;,<br/>      &#34;deploymentType&#34;: &#34;Kubernetes&#34;<br/>    }<br/>  }<br/>}</pre><p></p><h3>Query Infrastructure Definitions by Name</h3><p>You can simply query for an Infrastructure Definition by name.</p><pre>{<br/>  infrastructureDefinitionByName(infrastructureName: &#34;nginx-tiny-webserver&#34;, environmentId: &#34;KMoH2VGAQ3eP2ZWE2PMOng&#34;) {<br/>    id<br/>    name<br/>    deploymentType<br/>  }<br/>}</pre><p></p><p>The output will look something like this:</p><pre>{<br/>  &#34;data&#34;: {<br/>    &#34;infrastructureDefinitionByName&#34;: {<br/>      &#34;id&#34;: &#34;25PERz2eQvS_y6P0Zsphfw&#34;,<br/>      &#34;name&#34;: &#34;nginx-tiny-webserver&#34;,<br/>      &#34;deploymentType&#34;: &#34;Kubernetes&#34;<br/>    }<br/>  }<br/>}</pre><p></p><h3>See Also</h3><ul><li><a href="/article/ga3ccymwce-use-harness-start-execution-api">Harness StartExecution API Deep Dive</a></li></ul><p></p>