type: article
article_id: vwu8tynfc4
user_id: 2te4j9f9g7
category_id: l2p3i03l4a
author:
  name: Rashmi Nanda Sahoo
  profile_image: https://www.gravatar.com/avatar/b7bfd905f8714099535f2ff657fa3975?d=mm&s=150
title: Use Deployment Freeze API
slug: use-deployment-freeze-api
description: This topic explains how to freeze Harness deployments using API.
short_version: This topic explains how to freeze Harness deployments using API.
tags:
- GraphQL API
- API
show_toc: true
is_private: false
is_published: true
is_featured: false
stale_status:
  is_stale: false
  reason: ""
  source: API
  triggered_at: 2021-09-29T17:59:49.881549Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: Use Deployment Freeze API
  description: This topic explains how to freeze Harness deployments using API.
  short_version: This topic explains how to freeze Harness deployments using API.
  body: '<p>Deployment Freeze is a Harness Governance feature that stops all Harness
    deployments. To learn more on this, see <a href="/article/wscbhd20ca-deployment-freeze">Deployment
    Freeze</a>.</p><div class="note-callout">Currently, this feature is behind a Feature
    Flag. Contact <a href="mailto:support@harness.io" target="_blank">Harness Support</a> to
    enable the feature. Feature Flags can only be removed for Harness Professional
    and Essentials editions. Once the feature is released to a general audience, it
    is available for Trial and Community Editions.</div><p>This topic shows how to
    use the Deployment Freeze API to freeze Harness deployments.</p><p>In this topic:</p><ul><li><a
    href="https://docs.harness.io/article/vwu8tynfc4-use-deployment-freeze-api#before_you_begin">Before
    You Begin</a></li><li><a href="https://docs.harness.io/article/vwu8tynfc4-use-deployment-freeze-api#create_a_deployment_freeze_window">Create
    a Deployment Freeze Window</a></li><li><a href="https://docs.harness.io/article/vwu8tynfc4-use-deployment-freeze-api#get_deployment_freeze_window_by_id">Get
    Deployment Freeze Window by ID</a></li><li><a href="https://docs.harness.io/article/vwu8tynfc4-use-deployment-freeze-api#get_deployment_freeze_window_by_name">Get
    Deployment Freeze Window by Name</a></li><li><a href="https://docs.harness.io/article/vwu8tynfc4-use-deployment-freeze-api#list_deployment_freeze_windows">List
    Deployment Freeze Windows</a></li><li><a href="https://docs.harness.io/article/vwu8tynfc4-use-deployment-freeze-api#update_a_deployment_freeze_window">Update
    a Deployment Freeze Window</a></li><li><a href="https://docs.harness.io/article/vwu8tynfc4-use-deployment-freeze-api#delete_a_deployment_freeze_window">Delete
    a Deployment Freeze Window</a></li><li><a href="https://docs.harness.io/article/vwu8tynfc4-use-deployment-freeze-api#toggle_a_deployment_freeze_window">Toggle
    a Deployment Freeze Window</a></li></ul><h3>Before You Begin</h3><ul><li><a href="/category/cwefyz0jos-deployments-overview">Deployments
    Overview</a></li><li><a href="/article/wscbhd20ca-deployment-freeze#deployment_freeze_overview">Deployment
    Freeze Overview</a></li><li><a href="/article/m220i1tnia-workflow-configuration">Workflows</a></li><li><a
    href="/article/zc1u96u6uj-pipeline-configuration">Create a Pipeline</a></li><li>Make
    sure you have <strong>manage deployment freezes</strong> permission to use this
    API.</li></ul><h3>Create a Deployment Freeze Window</h3><h4>Request</h4><p>You
    can create a Deployment Freeze Window using the mutation <code>createDeploymentFreezeWindow</code>.</p><pre
    class="hljs graphql">mutation createDeploymentFreezeWindow($x: CreateDeploymentFreezeWindowInput!)
    {<br/>  createDeploymentFreezeWindow(input: $x) {<br/>    clientMutationId<br/>    deploymentFreezeWindow
    {<br/>      id<br/>      name<br/>      description<br/>      applicable<br/>      freezeWindows
    {<br/>        appFilter<br/>        appIds<br/>        envFilterType<br/>        envIds<br/>      }<br/>      setup
    {<br/>        isDurationBased<br/>        duration<br/>        from<br/>        to<br/>        freezeOccurrence<br/>        untilForever<br/>        endTime<br/>      }<br/>      notifyTo<br/>    }<br/>  }<br/>}</pre><h4>Query
    Variables</h4><p>Use these query variables to create a Deployment Freeze Window.
    The <code>freezeWindows</code> parameter specifies the appropriate Application(s),
    Environment(s), and Service(s) applicable to the Deployment Freeze Window.</p><pre
    class="hljs graphql">{<br/>  &#34;x&#34;: {<br/>    &#34;name&#34;: &#34;create-api-example&#34;,<br/>    &#34;description&#34;:
    &#34;description&#34;,<br/>    &#34;freezeWindows&#34;: [{<br/>      &#34;appFilter&#34;:
    &#34;ALL&#34;,<br/>      &#34;envTypeFilter&#34;: &#34;ALL&#34;<br/>    }],<br/>    &#34;setup&#34;:
    {<br/>      &#34;isDurationBased&#34;: true,<br/>      &#34;duration&#34;: 3600000<br/>    },<br/>    &#34;notifyTo&#34;:
    &#34;aVLbx7uzR4aOsBCMAlmp3w&#34;<br/>  }<br/>}</pre><h3>Get Deployment Freeze
    Window by ID</h3><h4>Request</h4><p>Use this sample query to get the Deployment
    Freeze Window details by its ID.</p><pre class="hljs graphql">{<br/>  deploymentFreezeWindow(id
    : &#34;basruIExQOW1BfclFRdiRQ&#34;){<br/>    id<br/>      name<br/>      description<br/>      applicable<br/>      freezeWindows{<br/>        appFilter<br/>        appIds<br/>        envFilterType<br/>        envIds<br/>      }<br/>      setup{<br/>        isDurationBased<br/>        duration<br/>        from<br/>        to<br/>        freezeOccurrence<br/>        untilForever<br/>        endTime<br/>      }<br/>      notifyTo<br/>  }<br/>}</pre><h4>Response</h4><pre
    class="hljs graphql">{<br/>  &#34;data&#34;: {<br/>    &#34;deploymentFreezeWindow&#34;:
    {<br/>      &#34;id&#34;: &#34;basruIExQOW1BfclFRdiRQ&#34;,<br/>      &#34;name&#34;:
    &#34;Example&#34;,<br/>      &#34;description&#34;: &#34;Example&#34;,<br/>      &#34;applicable&#34;:
    false,<br/>      &#34;freezeWindows&#34;: [<br/>        {<br/>          &#34;appFilter&#34;:
    &#34;CUSTOM&#34;,<br/>          &#34;appIds&#34;: [<br/>            &#34;CmXetIV2Sc2Nuxi9TmisDQ&#34;<br/>          ],<br/>          &#34;envFilterType&#34;:
    &#34;CUSTOM&#34;,<br/>          &#34;envIds&#34;: [<br/>            &#34;NLlPLa6PRdyC21ZcHZIK6g&#34;<br/>          ]<br/>        }<br/>      ],<br/>      &#34;setup&#34;:
    {<br/>        &#34;isDurationBased&#34;: false,<br/>        &#34;duration&#34;:
    null,<br/>        &#34;from&#34;: &#34;1629976662092&#34;,<br/>        &#34;to&#34;:
    &#34;1639976662092&#34;,<br/>        &#34;freezeOccurrence&#34;: &#34;DAILY&#34;,<br/>        &#34;untilForever&#34;:
    true,<br/>        &#34;endTime&#34;: &#34;1790262497549&#34;<br/>      },<br/>      &#34;notifyTo&#34;:
    [<br/>        &#34;aVLbx7uzR4aOsBCMAlmp3w&#34;<br/>      ]<br/>    }<br/>  }<br/>}</pre><h3>Get
    Deployment Freeze Window by Name</h3><h4>Request</h4><p>Use this sample query
    to get the Deployment Freeze Window details by its Name.</p><pre class="hljs graphql">{<br/>  deploymentFreezeWindowByName(name:
    &#34;CDC-Automation-DepFreeze2ZRgqzbhqa&#34;) {<br/>    id<br/>    name<br/>    description<br/>    applicable<br/>    freezeWindows
    {<br/>      appFilter<br/>      appIds<br/>      envFilterType<br/>      envIds<br/>    }<br/>    setup
    {<br/>      isDurationBased<br/>      duration<br/>      from<br/>      to<br/>      freezeOccurrence<br/>      untilForever<br/>      endTime<br/>    }<br/>    notifyTo<br/>  }<br/>}</pre><h4>Response</h4><pre
    class="hljs graphql">{<br/>  &#34;data&#34;: {<br/>    &#34;deploymentFreezeWindowByName&#34;:
    {<br/>      &#34;id&#34;: &#34;basruIExQOW1BfclFRdiRQ&#34;,<br/>      &#34;name&#34;:
    &#34;Example1&#34;,<br/>      &#34;description&#34;: &#34;Example&#34;,<br/>      &#34;applicable&#34;:
    false,<br/>      &#34;freezeWindows&#34;: [<br/>        {<br/>          &#34;appFilter&#34;:
    &#34;CUSTOM&#34;,<br/>          &#34;appIds&#34;: [<br/>            &#34;CmXetIV2Sc2Nuxi9TmisDQ&#34;<br/>          ],<br/>          &#34;envFilterType&#34;:
    &#34;CUSTOM&#34;,<br/>          &#34;envIds&#34;: [<br/>            &#34;NLlPLa6PRdyC21ZcHZIK6g&#34;<br/>          ]<br/>        }<br/>      ],<br/>      &#34;setup&#34;:
    {<br/>        &#34;isDurationBased&#34;: false,<br/>        &#34;duration&#34;:
    null,<br/>        &#34;from&#34;: &#34;1629976662092&#34;,<br/>        &#34;to&#34;:
    &#34;1639976662092&#34;,<br/>        &#34;freezeOccurrence&#34;: &#34;DAILY&#34;,<br/>        &#34;untilForever&#34;:
    true,<br/>        &#34;endTime&#34;: &#34;1790262497549&#34;<br/>      },<br/>      &#34;notifyTo&#34;:
    [<br/>        &#34;aVLbx7uzR4aOsBCMAlmp3w&#34;<br/>      ]<br/>    }<br/>  }<br/>}</pre><h3>List
    Deployment Freeze Windows</h3><h4>Request</h4><p>Use this sample query to get
    the list of Deployment Freeze Windows.</p><pre class="hljs graphql">{<br/>  listDeploymentFreezeWindows(listEnabled:
    false, limit: 100, offset: 1) {<br/>    nodes {<br/>      id<br/>      name<br/>      description<br/>      applicable<br/>      freezeWindows
    {<br/>        appFilter<br/>        appIds<br/>        envFilterType<br/>        envIds<br/>      }<br/>      setup
    {<br/>        isDurationBased<br/>        duration<br/>        from<br/>        to<br/>        freezeOccurrence<br/>        untilForever<br/>        endTime<br/>      }<br/>      notifyTo<br/>    }<br/>  }<br/>}</pre><h4>Response</h4><pre
    class="hljs graphql">{<br/>  &#34;data&#34;: {<br/>    &#34;listDeploymentFreezeWindows&#34;:
    {<br/>      &#34;nodes&#34;: [<br/>        {<br/>          &#34;id&#34;: &#34;D_lOvmQ-SZSVsTfLX9sYoA&#34;,<br/>          &#34;name&#34;:
    &#34;Example1&#34;,<br/>          &#34;description&#34;: &#34;Example1&#34;,<br/>          &#34;applicable&#34;:
    false,<br/>          &#34;freezeWindows&#34;: [<br/>            {<br/>              &#34;appFilter&#34;:
    &#34;CUSTOM&#34;,<br/>              &#34;appIds&#34;: [<br/>                &#34;los_-ZCRQ7WZkBlX9jemmw&#34;<br/>              ],<br/>              &#34;envFilterType&#34;:
    &#34;ALL&#34;,<br/>              &#34;envIds&#34;: []<br/>            }<br/>          ],<br/>          &#34;setup&#34;:
    {<br/>            &#34;isDurationBased&#34;: false,<br/>            &#34;duration&#34;:
    null,<br/>            &#34;from&#34;: &#34;1626094140347&#34;,<br/>            &#34;to&#34;:
    &#34;1628603340349&#34;,<br/>            &#34;freezeOccurrence&#34;: null,<br/>            &#34;untilForever&#34;:
    true,<br/>            &#34;endTime&#34;: null<br/>          },<br/>          &#34;notifyTo&#34;:
    [<br/>            &#34;aVLbx7uzR4aOsBCMAlmp3w&#34;<br/>          ]<br/>        },<br/>        {<br/>          &#34;id&#34;:
    &#34;t__2hBruTS6vox81MLHRWw&#34;,<br/>          &#34;name&#34;: &#34;Example2&#34;,<br/>          &#34;description&#34;:
    Example,<br/>          &#34;applicable&#34;: false,<br/>          &#34;freezeWindows&#34;:
    [<br/>            {<br/>              &#34;appFilter&#34;: &#34;CUSTOM&#34;,<br/>              &#34;appIds&#34;:
    [<br/>                &#34;eRP6q-GNSTiR-8XSuIXnqQ&#34;<br/>              ],<br/>              &#34;envFilterType&#34;:
    &#34;ALL&#34;,<br/>              &#34;envIds&#34;: []<br/>            }<br/>          ],<br/>          &#34;setup&#34;:
    {<br/>            &#34;isDurationBased&#34;: true,<br/>            &#34;duration&#34;:
    &#34;3600000&#34;,<br/>            &#34;from&#34;: &#34;1631174245407&#34;,<br/>            &#34;to&#34;:
    &#34;1631177845407&#34;,<br/>            &#34;freezeOccurrence&#34;: null,<br/>            &#34;untilForever&#34;:
    true,<br/>            &#34;endTime&#34;: null<br/>          },<br/>          &#34;notifyTo&#34;:
    [<br/>            &#34;aVLbx7uzR4aOsBCMAlmp3w&#34;<br/>          ]<br/>        },<br/>        {<br/>          &#34;id&#34;:
    &#34;NTEfLQpGSp-RG0XxkkgT9A&#34;,<br/>          &#34;name&#34;: &#34;Example3&#34;,<br/>          &#34;description&#34;:
    Example,<br/>          &#34;applicable&#34;: false,<br/>          &#34;freezeWindows&#34;:
    [<br/>            {<br/>              &#34;appFilter&#34;: &#34;CUSTOM&#34;,<br/>              &#34;appIds&#34;:
    [<br/>                &#34;VaUOlOc7RVKIJBqv-fGi7Q&#34;<br/>              ],<br/>              &#34;envFilterType&#34;:
    &#34;ALL&#34;,<br/>              &#34;envIds&#34;: []<br/>            }<br/>          ],<br/>          &#34;setup&#34;:
    {<br/>            &#34;isDurationBased&#34;: false,<br/>            &#34;duration&#34;:
    null,<br/>            &#34;from&#34;: &#34;1632465660329&#34;,<br/>            &#34;to&#34;:
    &#34;1632469260329&#34;,<br/>            &#34;freezeOccurrence&#34;: null,<br/>            &#34;untilForever&#34;:
    true,<br/>            &#34;endTime&#34;: null<br/>          },<br/>          &#34;notifyTo&#34;:
    [<br/>            &#34;aVLbx7uzR4aOsBCMAlmp3w&#34;<br/>          ]<br/>        },<br/>        {<br/>          &#34;id&#34;:
    &#34;fTnAJADESzykxR4APkMrrw&#34;,<br/>          &#34;name&#34;: &#34;Example4&#34;,<br/>          &#34;description&#34;:
    Example,<br/>          &#34;applicable&#34;: false,<br/>          &#34;freezeWindows&#34;:
    [<br/>            {<br/>              &#34;appFilter&#34;: &#34;CUSTOM&#34;,<br/>              &#34;appIds&#34;:
    [<br/>                &#34;3FE-2Qa5RUC2U287XJ-ycA&#34;<br/>              ],<br/>              &#34;envFilterType&#34;:
    &#34;ALL&#34;,<br/>              &#34;envIds&#34;: []<br/>            }<br/>          ],<br/>          &#34;setup&#34;:
    {<br/>            &#34;isDurationBased&#34;: true,<br/>            &#34;duration&#34;:
    &#34;36000000&#34;,<br/>            &#34;from&#34;: &#34;1632463941033&#34;,<br/>            &#34;to&#34;:
    &#34;1632499941033&#34;,<br/>            &#34;freezeOccurrence&#34;: null,<br/>            &#34;untilForever&#34;:
    true,<br/>            &#34;endTime&#34;: null<br/>          },<br/>          &#34;notifyTo&#34;:
    [<br/>            &#34;aVLbx7uzR4aOsBCMAlmp3w&#34;<br/>          ]<br/>        },<br/>        {<br/>          &#34;id&#34;:
    &#34;Nbyw9428TiOotwWYDeLKWQ&#34;,<br/>          &#34;name&#34;: &#34;Example5&#34;,<br/>          &#34;description&#34;:
    Example,<br/>          &#34;applicable&#34;: false,<br/>          &#34;freezeWindows&#34;:
    [<br/>            {<br/>              &#34;appFilter&#34;: &#34;CUSTOM&#34;,<br/>              &#34;appIds&#34;:
    [<br/>                &#34;eIOnkF8WTLq8jBQcKbwCVQ&#34;<br/>              ],<br/>              &#34;envFilterType&#34;:
    &#34;ALL&#34;,<br/>              &#34;envIds&#34;: []<br/>            }<br/>          ],<br/>          &#34;setup&#34;:
    {<br/>            &#34;isDurationBased&#34;: false,<br/>            &#34;duration&#34;:
    null,<br/>            &#34;from&#34;: &#34;1757835901723&#34;,<br/>            &#34;to&#34;:
    &#34;1758271501723&#34;,<br/>            &#34;freezeOccurrence&#34;: &#34;WEEKLY&#34;,<br/>            &#34;untilForever&#34;:
    false,<br/>            &#34;endTime&#34;: &#34;1790232300861&#34;<br/>          },<br/>          &#34;notifyTo&#34;:
    [<br/>            &#34;aVLbx7uzR4aOsBCMAlmp3w&#34;<br/>          ]<br/>        },<br/>        {<br/>          &#34;id&#34;:
    &#34;basruIExQOW1BfclFRdiRQ&#34;,<br/>          &#34;name&#34;: &#34;Example5&#34;,<br/>          &#34;description&#34;:
    &#34;Example&#34;,<br/>          &#34;applicable&#34;: false,<br/>          &#34;freezeWindows&#34;:
    [<br/>            {<br/>              &#34;appFilter&#34;: &#34;CUSTOM&#34;,<br/>              &#34;appIds&#34;:
    [<br/>                &#34;CmXetIV2Sc2Nuxi9TmisDQ&#34;<br/>              ],<br/>              &#34;envFilterType&#34;:
    &#34;CUSTOM&#34;,<br/>              &#34;envIds&#34;: [<br/>                &#34;NLlPLa6PRdyC21ZcHZIK6g&#34;<br/>              ]<br/>            }<br/>          ],<br/>          &#34;setup&#34;:
    {<br/>            &#34;isDurationBased&#34;: false,<br/>            &#34;duration&#34;:
    null,<br/>            &#34;from&#34;: &#34;1629976662092&#34;,<br/>            &#34;to&#34;:
    &#34;1639976662092&#34;,<br/>            &#34;freezeOccurrence&#34;: &#34;DAILY&#34;,<br/>            &#34;untilForever&#34;:
    true,<br/>            &#34;endTime&#34;: &#34;1790262497549&#34;<br/>          },<br/>          &#34;notifyTo&#34;:
    [<br/>            &#34;aVLbx7uzR4aOsBCMAlmp3w&#34;<br/>          ]<br/>        }<br/>      ]<br/>    }<br/>  }<br/>}</pre><p></p><h3>Update
    a Deployment Freeze Window</h3><h4>Request</h4><p>You can update a Deployment
    Freeze Window using the mutation <code>updateDeploymentFreezeWindow</code>.</p><pre
    class="hljs graphql">mutation updateDeploymentFreezeWindow($x: UpdateDeploymentFreezeWindowInput!)
    {<br/>  updateDeploymentFreezeWindow(input: $x) {<br/>    clientMutationId<br/>    deploymentFreezeWindow
    {<br/>      id<br/>      name<br/>      description<br/>      applicable<br/>      freezeWindows
    {<br/>        appFilter<br/>        appIds<br/>        envFilterType<br/>        envIds<br/>      }<br/>      setup
    {<br/>        isDurationBased<br/>        duration<br/>        from<br/>        to<br/>        freezeOccurrence<br/>        untilForever<br/>        endTime<br/>      }<br/>      notifyTo<br/>    }<br/>  }<br/>}</pre><h4>Query
    Variables</h4><p>Use these query variables to update a Deployment Freeze Window.
    The <code>freezeWindows</code> parameter specifies the appropriate Application(s),
    Environment(s), and Service(s) applicable to the Deployment Freeze Window.</p><pre
    class="hljs graphql">{<br/>  &#34;x&#34;: {<br/>    &#34;id&#34;: &#34;F01IAeL_Tj-4YcdnV2DAOA&#34;,<br/>    &#34;name&#34;:
    &#34;update-api-example&#34;,<br/>    &#34;description&#34;: &#34;update_example&#34;,<br/>    &#34;freezeWindows&#34;:
    [{<br/>      &#34;appFilter&#34;: &#34;ALL&#34;,<br/>      &#34;envTypeFilter&#34;:
    &#34;ALL&#34;<br/>    }],<br/>    &#34;setup&#34;: {<br/>      &#34;isDurationBased&#34;:
    true,<br/>      &#34;duration&#34;: 3600000<br/>    },<br/>    &#34;notifyTo&#34;:
    &#34;aVLbx7uzR4aOsBCMAlmp3w&#34;<br/>  }<br/>}</pre><h3>Delete a Deployment Freeze
    Window</h3><h4>Request</h4><p>You can delete a Deployment Freeze Window using
    the mutation <code>deleteDeploymentFreezeWindow</code>.</p><pre class="hljs graphql">mutation
    deleteDeploymentFreezeWindow($x: DeleteDeploymentFreezeWindowInput!) {<br/>  deleteDeploymentFreezeWindow(input:
    $x) {<br/>    clientMutationId<br/>  }<br/>}</pre><h4>Query Variables</h4><p>Use
    these query variables to delete a Deployment Freeze Window. The <code>id</code> parameter
    specifies the Deployment Freeze Window to be deleted.</p><pre class="hljs graphql">{<br/>  &#34;x&#34;:
    {<br/>    &#34;id&#34;: &#34;F01IAeL_Tj-4YcdnV2DAOA&#34;<br/>  }<br/>}</pre><h3>Enable/Disable
    a Deployment Freeze Window</h3><h4>Request</h4><p>You can toggle a Deployment
    Freeze Window using the mutation <code>toggleDeploymentFreezeWindow</code>.</p><pre
    class="hljs graphql">mutation toggleDeploymentFreezeWindow($x: ToggleDeploymentFreezeWindowInput!)
    {<br/>  toggleDeploymentFreezeWindow(input: $x) {<br/>    clientMutationId<br/>    deploymentFreezeWindow
    {<br/>      id<br/>      name<br/>      description<br/>      applicable<br/>      freezeWindows
    {<br/>        appFilter<br/>        appIds<br/>        envFilterType<br/>        envIds<br/>      }<br/>      setup
    {<br/>        isDurationBased<br/>        duration<br/>        from<br/>        to<br/>        freezeOccurrence<br/>        untilForever<br/>        endTime<br/>      }<br/>      notifyTo<br/>    }<br/>  }<br/>}</pre><h4>Query
    Variables</h4><p>Use these query variables to toggle a Deployment Freeze Window.
    The <code>id</code> parameter specifies the Deployment Freeze Window to be toggled.</p><pre
    class="hljs graphql">{<br/>  &#34;x&#34;: {<br/>    &#34;id&#34;: &#34;dtB-5gB-QrSavmouVZKUug&#34;,<br/>    &#34;applicable&#34;:
    true<br/>  }<br/>}</pre><p></p>'
  slug: use-deployment-freeze-api
  tags:
  - GraphQL API
  - API
  is_live: true
