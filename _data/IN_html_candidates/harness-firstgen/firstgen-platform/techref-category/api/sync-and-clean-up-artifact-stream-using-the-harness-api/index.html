<p>Harness performs artifact polling frequently, but in some cases you might have deleted an artifact or version from your repo as part of your Pipeline approval process and want to sync with the repo on demand.</p><p>Harness provides the <code>artifactCleanup()</code> mutation to sync the artifact versions collected by Harness with the Artifact Source you set up in your Harness Service.</p><p>The mutation remove any artifacts and versions that have been deleted at the source from Harness.</p><p>This topic describes how to use the Harness API to sync and clean up the artifact list available to you in Harness.</p><p>In this topic:</p><ul><li><a href="https://docs.harness.io/article/7tlyu5jesf-sync-and-clean-up-artifact-stream-using-the-harness-api#before_you_begin">Before You Begin</a></li><li><a href="https://docs.harness.io/article/7tlyu5jesf-sync-and-clean-up-artifact-stream-using-the-harness-api#undefined">Supported Platforms and Technologies</a></li><li><a href="https://docs.harness.io/article/7tlyu5jesf-sync-and-clean-up-artifact-stream-using-the-harness-api#limitations">Limitations</a></li><li><a href="https://docs.harness.io/article/7tlyu5jesf-sync-and-clean-up-artifact-stream-using-the-harness-api#step_1_obtain_artifact_stream_id">Step 1: Obtain Artifact Stream Id</a></li><li><a href="https://docs.harness.io/article/7tlyu5jesf-sync-and-clean-up-artifact-stream-using-the-harness-api#step_2_sync_the_artifact_stream_via_api">Step 2: Sync the Artifact Stream via API</a></li></ul><h3>Before You Begin</h3><ul><li><a href="https://docs.harness.io/article/tm0w6rruqv-harness-api">​Introduction to Harness GraphQL API</a></li><li><a href="https://docs.harness.io/article/2rmd5i0e0h-harness-api-explorer">Harness API Explorer</a></li><li><a href="https://docs.harness.io/article/kn8wsu80n4-api-schema-and-structure">API Schema and Structure</a></li><li><a href="/article/nrl5r5zj94-fetch-artifact-type-using-graph-ql-apis">Fetch Artifact Type Details Using GraphQL APIs</a></li><li><a href="/article/dhdq2nqxai-fetch-deployment-artifact-information">Fetch Deployment Artifact Information using GraphQL APIs</a></li></ul><h3 id="undefined">Supported Platforms and Technologies</h3><p>See <a href="/article/220d0ojx5y-supported-platforms">Supported Platforms and Technologies</a>.</p><h3>Limitations</h3><p>The <code>artifactCleanup()</code> GraphQL mutation works with the following <a href="/article/qluiky79j8-service-types-and-artifact-sources">Artifact Source</a> types:</p><ul><li>ECR</li><li>GCR</li><li>ACR</li><li>Docker Registry</li><li>JFrog Artifactory</li><li>Nexus v2 and v3</li><li>Amazon AMI</li><li>Azure VMSS</li><li><a href="/article/jizsp5tsms-custom-artifact-source">Custom Artifact Sources</a></li></ul><p>If you try to use the mutation on any unsupported Artifact Source types, you will see an error like this:</p><pre>{<br/>  &#34;data&#34;: {<br/>    &#34;artifactCleanup&#34;: {<br/>      &#34;message&#34;: &#34;Clean up not supported for artifact Stream type: JENKINS&#34;<br/>    }<br/>  }<br/>}</pre><h3>Step 1: Obtain Artifact Stream Id</h3><p>The <code>artifactCleanup()</code> mutation includes an <code>artifactStreamId</code> parameter that identifies the Artifact Source you want to sync with. The <code>artifactStreamId</code> takes the universally unique identifier (UUID) of the Artifact Source.</p><p>Let&#39;s look at how to obtain the UUID.</p><p>In Harness, open the Service with the Artifact Source you want to sync with.</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/7tlyu5jesf/1625260791835/clean-shot-2021-07-02-at-14-19-42.png"/></figure><p>In your browser, open Dev Tools. The following example is for Chrome.</p><p>Click <strong>Network</strong>, and select <strong>All</strong>.</p><p>In <strong>Filter</strong>, enter <strong>artifactstreams</strong>.</p><p>The artifact stream request is displayed.</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/7tlyu5jesf/1625261073658/clean-shot-2021-07-02-at-14-23-49.png"/></figure><p>Click the <strong>artifactstreams?appId=...</strong> message.</p><p>Click <strong>Preview</strong>, and then expand <strong>resource</strong>.</p><p>In response, you will see the UUID (<code>uuid</code>) for the Artifact Source.</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/7tlyu5jesf/1625261243220/clean-shot-2021-07-02-at-14-26-23.png"/></figure><p>Copy and save the UUID value.</p><h3>Step 2: Sync the Artifact Stream via API</h3><p>In Harness, click <strong>Setup</strong>, and then click <strong>Harness API Explorer</strong>.</p><p>In the editor, paste the <code>artifactCleanup()</code> mutation and use the Artifact Source uuid in <code>artifactStreamId</code>. For example:</p><pre>mutation {<br/>  artifactCleanup(input: {artifactStreamId: &#34;bOgdZBYQS2-oHZMwEZTeIQ&#34;}) {<br/>    message<br/>  }<br/>}</pre><p></p><p>Click <strong>Run</strong>.</p><p>The output will display the successful clean up of Harness&#39; Artifact Source history.</p><pre>{<br/>  &#34;data&#34;: {<br/>    &#34;artifactCleanup&#34;: {<br/>      &#34;message&#34;: &#34;Cleanup successful for Artifact stream with id: bOgdZBYQS2-oHZMwEZTeIQ&#34;<br/>    }<br/>  }<br/>}</pre><p></p><p></p><p></p>