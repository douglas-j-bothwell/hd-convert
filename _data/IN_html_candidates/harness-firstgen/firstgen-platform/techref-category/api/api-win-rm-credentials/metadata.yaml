type: article
article_id: 2rlo5zw321
user_id: x5amubrz4l
category_id: l2p3i03l4a
author:
  name: Michael Katz
  profile_image: https://www.gravatar.com/avatar/17fb3fc86ca54443de0da47ef350d8f0?d=mm&s=150
title: WinRM Credentials API
slug: api-win-rm-credentials
description: Sample queries for CRUD operations to create, read, update, and delete
  Harness Secrets that manage WinRM credentials.
short_version: Sample queries to create, read, update, and delete Harness Secrets
  that manage WinRM credentials.
tags:
- API
- Secrets management
- encrypted
- authentication
show_toc: true
is_private: false
is_published: true
is_featured: false
stale_status:
  is_stale: false
  reason: Article updated
  source: API
  triggered_at: 2021-05-12T17:21:37.7319Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: WinRM Credentials API
  description: Sample queries for CRUD operations to create, read, update, and delete
    Harness Secrets that manage WinRM credentials.
  short_version: Sample queries to create, read, update, and delete Harness Secrets
    that manage WinRM credentials.
  body: "<p>This topic lists sample queries for CRUD operations that create, read,
    update, and delete <a href=\"/article/au38zpufhr-secret-management\">Harness secrets</a>
    that manage WinRM credentials.</p><div class=\"note-callout\">The <code>!</code> following
    the type means that this field is <em>required</em>.</div><p>In this topic:</p><ul><li><a
    href=\"https://docs.harness.io/article/2rlo5zw321-api-win-rm-credentials#before_you_begin\">Before
    You Begin</a></li><li><a href=\"https://docs.harness.io/article/2rlo5zw321-api-win-rm-credentials#get_a_secret\">Get
    a Secret</a></li><li><a href=\"https://docs.harness.io/article/2rlo5zw321-api-win-rm-credentials#get_a_secret_by_name\">Get
    a Secret by Name</a></li><li><a href=\"https://docs.harness.io/article/2rlo5zw321-api-win-rm-credentials#create_a_win_rm_credentials_secret\">Create
    a WinRM Credentials Secret</a></li><li><a href=\"https://docs.harness.io/article/2rlo5zw321-api-win-rm-credentials#update_a_secret\">Update
    a Secret</a></li><li><a href=\"https://docs.harness.io/article/2rlo5zw321-api-win-rm-credentials#delete_a_secret\">Delete
    a Secret</a></li><li><a href=\"https://docs.harness.io/article/2rlo5zw321-api-win-rm-credentials#related_topics\">Related
    Topics</a></li></ul><h3>Before You Begin</h3><ul><li><a href=\"/article/tm0w6rruqv-harness-api\">​Introduction
    to Harness GraphQL API</a></li><li><a href=\"/article/2rmd5i0e0h-harness-api-explorer\">Harness
    API Explorer</a></li></ul><h3>Get a Secret</h3><p>This sample retrieves an existing
    WinRM Credentials secret by its ID:</p><pre class=\"hljs apache\">query{<br/>
    \ secret(secretId:&#34;WGFzE4bmRgWBYSUyXsZWHQ&#34;,secretType:WINRM_CREDENTIAL){<br/>
    \   ... on WinRMCredential{<br/>      id<br/>      name<br/>      userName<br/>
    \     domain<br/>\t  skipCertCheck<br/>      authenticationScheme<br/>      useSSL<br/>
    \     usageScope{<br/>        appEnvScopes{<br/>          application{<br/>            filterType<br/>
    \           appId<br/>          }<br/>          environment{<br/>            filterType<br/>
    \           envId<br/>          }<br/>        }<br/>      }<br/>    }<br/>  }<br/>}</pre><h3>Get
    a Secret by Name</h3><p>This sample uses a <code>secretByName</code> query to
    retrieve an existing secret by its name:</p><pre class=\"hljs apache\">query{<br/>
    \ secretByName(name:&#34;Test WinRM Connection&#34;,secretType:WINRM_CREDENTIAL){<br/>
    \   ... on WinRMCredential{<br/>      id<br/>      name<br/>      userName<br/>
    \     domain<br/>\t\t\tskipCertCheck<br/>      authenticationScheme<br/>      useSSL<br/>
    \     usageScope{<br/>        appEnvScopes{<br/>          application{<br/>            filterType<br/>
    \           appId<br/>          }<br/>          environment{<br/>            filterType<br/>
    \           envId<br/>          }<br/>        }<br/>      }<br/>    }<br/>  }<br/>}</pre><h3>Create
    a WinRM Credentials Secret</h3><p>This sample creates a secret. The required <code>CreateSecretInput</code>
    input must include a <code>SecretType</code>:</p><pre class=\"hljs apache\">mutation($secret:
    CreateSecretInput!){<br/>  createSecret(input: $secret){<br/>    secret{<br/>
    \     id,<br/>      name<br/>\t  ... on WinRMCredential{<br/>        id<br/>        name<br/>
    \       userName<br/>      }<br/>    }<br/>  }<br/>}</pre><h4>Query Variables:
    Inline Value</h4><p> For the above query, these sample variables supply the <code>SecretType</code>,
    along with several other values:</p><pre>{<br/>  &#34;secret&#34;: {<br/>    &#34;secretType&#34;:
    &#34;WINRM_CREDENTIAL&#34;,<br/>    &#34;winRMCredential&#34;: {<br/>      &#34;name&#34;:
    &#34;create_winrm_test&#34;,<br/>      &#34;useSSL&#34;: true,<br/>      &#34;authenticationScheme&#34;:
    &#34;NTLM&#34;,<br/>      &#34;port&#34;: 5986,<br/>      &#34;userName&#34;:
    &#34;testingWinRM&#34;,<br/>      &#34;passwordSecretId&#34;: &#34;Password&#34;,<br/>
    \     &#34;useSSL&#34;: false,<br/>      &#34;skipCertCheck&#34;: false,<br/>
    \     &#34;usageScope&#34;: {<br/>        &#34;appEnvScopes&#34;: [<br/>          {<br/>
    \           &#34;application&#34;: {<br/>              &#34;filterType&#34;: &#34;ALL&#34;<br/>
    \           },<br/>            &#34;environment&#34;: {<br/>              &#34;filterType&#34;:
    &#34;PRODUCTION_ENVIRONMENTS&#34;<br/>            }<br/>          }<br/>        ]<br/>
    \     }<br/>    }<br/>  }<br/>}</pre><h3>Update a Secret</h3><p>This sample updates
    an existing secret. The required <code>UpdateSecretInput</code> input must supply
    a <code>secretType</code> and an <code>id</code>. The <code>updateSecret</code>
    operation will update all fields supplied in the request.</p><pre class=\"hljs
    apache\">mutation($secret: UpdateSecretInput!){<br/>  updateSecret(input: $secret){<br/>
    \   secret{<br/>      id,<br/>      name<br/>\t... on WinRMCredential{<br/>        id<br/>
    \       name<br/>        userName<br/>      }<br/>    }<br/>  }<br/>}</pre><h4>Query
    Variables</h4><p>These query variables supply the required <code>secretType</code>
    and <code>id</code>, along with updated values for several other fields:</p><pre>{<br/>
    \ &#34;secret&#34;: {<br/>    &#34;secretId&#34;: &#34;hudhudeidwjiwd&#34;,<br/>
    \   &#34;secretType&#34;: &#34;WINRM_CREDENTIAL&#34;,<br/>    &#34;winRMCredential&#34;:
    {<br/>      &#34;name&#34;: &#34;create_winrm_test&#34;,<br/>      &#34;useSSL&#34;:
    true,<br/>      &#34;authenticationScheme&#34;: &#34;NTLM&#34;,<br/>      &#34;port&#34;:
    5986,<br/>      &#34;userName&#34;: &#34;testingWinRM&#34;,<br/>      &#34;passwordSecretId&#34;:
    &#34;Password&#34;,<br/>      &#34;useSSL&#34;: false,<br/>      &#34;skipCertCheck&#34;:
    false,<br/>      &#34;usageScope&#34;: {<br/>        &#34;appEnvScopes&#34;: [<br/>
    \         {<br/>            &#34;application&#34;: {<br/>              &#34;filterType&#34;:
    &#34;ALL&#34;<br/>            },<br/>            &#34;environment&#34;: {<br/>
    \             &#34;filterType&#34;: &#34;PRODUCTION_ENVIRONMENTS&#34;<br/>            }<br/>
    \         }<br/>        ]<br/>      }<br/>    }<br/>  }<br/>}</pre><h3>Delete
    a Secret</h3><p>This sample deletes a specified secret. The required <code>DeleteSecretInput</code>
    input must supply a <code>secretId</code> and a <code>secretType</code>:</p><pre
    class=\"hljs apache\">mutation($secret: DeleteSecretInput!){<br/>  deleteSecret(input:
    $secret)<br/>}</pre><p></p><p>Query Variables</p><pre>{<br/>  &#34;secret&#34;:
    {<br/>    <span class=\"hljs-attr\" style=\"box-sizing:inherit;color:rgb(121,
    93, 163)\" data-hd-color=\"rgb(121, 93, 163)\">&#34;clientMutationId&#34;</span>:
    <span class=\"hljs-string\" style=\"box-sizing:inherit;color:rgb(223, 80, 0)\"
    data-hd-color=\"rgb(223, 80, 0)\">&#34;DevX-Delete-&#34;</span>,<br/>    <span
    class=\"hljs-string\" style=\"box-sizing:inherit;color:rgb(223, 80, 0)\" data-hd-color=\"rgb(223,
    80, 0)\">&#34;</span>secretId<span class=\"hljs-string\" style=\"box-sizing:inherit;color:rgb(223,
    80, 0)\" data-hd-color=\"rgb(223, 80, 0)\">&#34;: &#34;</span>IG-4ppX7QQuZmD67mkoW-A<span
    class=\"hljs-string\" style=\"box-sizing:inherit;color:rgb(223, 80, 0)\" data-hd-color=\"rgb(223,
    80, 0)\">&#34;,<br/>    &#34;</span>secretType<span class=\"hljs-string\" style=\"box-sizing:inherit;color:rgb(223,
    80, 0)\" data-hd-color=\"rgb(223, 80, 0)\">&#34;: &#34;</span>WINRM_CREDENTIAL<span
    class=\"hljs-string\" style=\"box-sizing:inherit;color:rgb(223, 80, 0)\" data-hd-color=\"rgb(223,
    80, 0)\">&#34;</span><br/>  }<br/>}</pre><h3>Related Topics</h3><ul><li><a href=\"/article/tm0w6rruqv-harness-api\">Harness
    API</a></li><li><a href=\"/article/omnfccj1n0-api-encrypted-text\">Encrypted Text
    API</a></li><li><a href=\"/article/jvhzdi1ztj-api-encrypted-files\">Encrypted
    Files API</a></li><li><a href=\"/article/v65okfwfl2-api-ssh-credentials\">SSH
    Credentials API</a></li></ul><p></p>"
  slug: api-win-rm-credentials
  tags:
  - API
  - Secrets management
  - encrypted
  - authentication
  is_live: true
