type: article
article_id: b84f0pu1cl
user_id: mfr0nxh4be
category_id: fmttl9hxzc
author:
  name: Michael Cretzman
  profile_image: https://www.gravatar.com/avatar/2e8616837f4ee92be5d19ffe9b9ccba9?d=mm&s=150
title: Send Notifications to Microsoft Teams
slug: send-notifications-to-microsoft-teams
description: Harness notifies your User Groups of events in Workflows, Pipelines,
  Delegates, Service Guard 24/7, and general alerts. You can integrate your Harness
  User Group with Microsoft Teams and receive noti…
short_version: Harness notifies your User Groups of events in Workflows, Pipelines,
  Delegates, Service Guard 24/7, and general alerts. You can integrate your Harness
  User Group with Microsoft Teams and receive noti…
tags: []
show_toc: true
is_private: false
is_published: true
is_featured: false
stale_status:
  is_stale: false
  reason: ""
  source: API
  triggered_at: 2022-07-06T19:12:23.777018Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: Send Notifications to Microsoft Teams
  description: ""
  short_version: ""
  body: "<p>Harness notifies your User Groups of events in Workflows, Pipelines, Delegates,
    Service Guard 24/7, and general alerts.</p><p>You can integrate your Harness User
    Group with Microsoft Teams and receive notifications in Teams channels.</p><p>Setup
    is a simple process of generating a Webhook in Microsoft Teams and adding it to
    a Harness User Group. Let&#39;s get started.</p><p>In this topic:</p><ul><li>
    <a href=\"#before_you_begin\">Before You Begin</a></li><li> <a href=\"#visual_summary\">Visual
    Summary</a></li><li> <a href=\"#step_1_create_connector_for_microsoft_teams_channel\">Step
    1: Create Connector for Microsoft Teams Channel</a></li><li> <a href=\"#step_2_generate_channel_webhook\">Step
    2: Generate Channel Webhook</a></li><li> <a href=\"#step_3_add_webhook_to_harness_user_group_notifications_settings\">Step
    3: Add Webhook to Harness User Group Notifications Settings</a></li><li> <a href=\"#example_workflow_notification_strategy\">Example:
    Workflow Notification Strategy</a></li><li> <a href=\"#option_send_a_message_to_microsoft_teams_using_c_url\">Option:
    Send a Message to Microsoft Teams using cURL</a></li></ul><h3>Before You Begin</h3><p>Review
    the following topics to understand Harness notification and alert options:</p><ul><li>
    <a href=\"/article/kf828e347t-notification-groups\">Manage User Notifications</a></li><li>
    <a href=\"/article/duu0gbhejn-add-notification-strategy-new-template\">Add a Workflow
    Notification Strategy</a></li><li> <a href=\"/article/rt7zvmzlgx-manage-alert-notifications\">Manage
    Alert Notifications</a></li></ul><p>We assume that you have a Microsoft Teams
    administrator account.</p><h3>Visual Summary</h3><p>As stated earlier, setup is
    a simple process of generating a Webhook in Microsoft Teams and adding it to a
    Harness User Group.</p><p></p><figure><img src=\"https://files.helpdocs.io/kw8ldg1itf/articles/b84f0pu1cl/1591227882016/image.png\"/></figure><p>The
    following steps walk you through this process.</p><p>Here&#39;s a video summary:</p><p></p><div
    class=\"hd--html\"><iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/fz8suWNHk1g\"
    frameborder=\"0\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope;
    picture-in-picture\" allowfullscreen=\"\"></iframe></div><h3>Step 1: Create Connector
    for Microsoft Teams Channel</h3><p>You create a channel connector in Microsoft
    Teams to generate the Webhook Harness needs for notification.</p><ol><li>In Microsoft
    Teams, right-click the channel where you want to send notifications, and select
    <strong>Connectors</strong>.<figure><img src=\"https://files.helpdocs.io/kw8ldg1itf/articles/b84f0pu1cl/1591223660180/image.png\"
    style=\"max-height:50%;max-width:50%\" data-hd-height=\"50%\" data-hd-width=\"50%\"/></figure></li><li>In
    <strong>Connectors</strong>, locate <strong>Incoming Webhook</strong>, and click
    <strong>Configure</strong>.<figure><img src=\"https://files.helpdocs.io/kw8ldg1itf/articles/b84f0pu1cl/1591223752411/image.png\"
    style=\"max-height:50%;max-width:50%\" data-hd-height=\"50%\" data-hd-width=\"50%\"/></figure></li><li>In
    <strong>Incoming Webhook</strong>, enter a name, such as <strong>Harness</strong>.</li><li>Right-click
    <a href=\"https://github.com/wings-software/harness-docs/blob/main/harness_logo.png\"
    target=\"_blank\">here</a> and click <strong>Save Link As</strong> to download
    the Harness icon, or right-click and save the image from here:<figure><img src=\"https://files.helpdocs.io/kw8ldg1itf/articles/b84f0pu1cl/1591224300575/harness.png\"/></figure></li><li>Click
    <strong>Upload Image</strong> and add the Harness icon you downloaded.</li></ol><p>Next,
    you&#39;ll create the Webhook URL needed by Harness.</p><h3>Step 2: Generate Channel
    Webhook</h3><ol><li>In your Microsoft Teams Connector, click <strong>Create</strong>.
    The Webhook URL is generated.</li></ol><p></p><figure><img src=\"https://files.helpdocs.io/kw8ldg1itf/articles/b84f0pu1cl/1591224446751/image.png\"
    style=\"max-height:50%;max-width:50%\" data-hd-height=\"50%\" data-hd-width=\"50%\"/></figure><ol><li
    style=\"counter-increment:li 1\" start=\"2\">Click the copy button to copy the
    Webhook URL, and then click <strong>Done</strong>.</li></ol><p>The channel indicates
    that the Connector was set up.</p><p></p><figure><img src=\"https://files.helpdocs.io/kw8ldg1itf/articles/b84f0pu1cl/1591224581962/image.png\"/></figure><p>Next,
    you will add the Webhook URL to the Harness User Group you want to notify using
    Microsoft Teams.</p><p></p><h3>Step 3: Add Webhook to Harness User Group Notifications
    Settings</h3><ol><li>In Harness, click <strong>Continuous Security</strong>, and
    then click <strong>Access Management</strong>.</li><li>Click <strong>User Groups</strong>.</li><li>In
    <strong>User Groups</strong>, select the User Group you want to receive Microsoft
    Teams notifications.</li><li>In <strong>Notification Settings</strong>, click
    <strong>Edit</strong>.<figure><img src=\"https://files.helpdocs.io/kw8ldg1itf/articles/b84f0pu1cl/1591224857588/image.png\"/></figure></li><li>In
    <strong>Microsoft Teams Webhook URL</strong>, enter the Webhook URL you copied
    from your Microsoft Teams connector.<figure><img src=\"https://files.helpdocs.io/kw8ldg1itf/articles/b84f0pu1cl/1591227873519/image.png\"/></figure></li><li>Click
    <strong>Submit</strong>.</li></ol><p>That&#39;s it. Your Microsoft Teams channel
    will now receive notifications for events in Workflows, Pipelines, Delegates,
    Service Guard 24/7, and general alerts.</p><p>Click back in User Groups to see
    that the User Group now indicates that it is integrated with Microsoft Teams:</p><p></p><figure><img
    src=\"https://files.helpdocs.io/kw8ldg1itf/articles/b84f0pu1cl/1591226350153/image.png\"/></figure><h3>Example:
    Workflow Notification Strategy</h3><p>The most common example of notifications
    is a <a href=\"/article/duu0gbhejn-add-notification-strategy-new-template\">Workflow
    Notification Strategy</a>.</p><p>When you add the User Group to the Notification
    Strategy of a Workflow, you will see the Microsoft Teams icon next to its name:</p><p></p><figure><img
    src=\"https://files.helpdocs.io/kw8ldg1itf/articles/b84f0pu1cl/1591226261579/image.png\"/></figure><p>Let&#39;s
    look at an example message sent to the integrated Microsoft Teams channel when
    a Workflow is aborted:</p><p></p><figure><img src=\"https://files.helpdocs.io/kw8ldg1itf/articles/b84f0pu1cl/1591226540827/image.png\"/></figure><p>You
    can click any links in the message to open the corresponding Harness components.</p><p>For
    Workflow notifications to Microsoft Teams, ensure that the <strong>Send notification
    to me only</strong> option in the <strong>Start New Deployment</strong> setting
    is not selected:</p><p></p><figure><img src=\"https://files.helpdocs.io/kw8ldg1itf/articles/b84f0pu1cl/1591227399193/image.png\"/></figure><h3>Option:
    Send a Message to Microsoft Teams using cURL</h3><p>You can send a message to
    any Microsoft Teams channel that has a Webhook enabled using cURL.</p><p>Here
    is an example of a Harness <a href=\"/article/1fjrjbau7x-capture-shell-script-step-output\">Shell
    Script</a> step in a Workflow executing the cURL command:</p><p></p><figure><img
    src=\"https://files.helpdocs.io/kw8ldg1itf/articles/b84f0pu1cl/1591227607336/image.png\"/></figure><p>You
    will notice that Harness built-in and custom Workflow variable expressions can
    be used in the message. See <a href=\"/article/9dvxcegm90-variables\">Variables
    and Expressions in Harness</a> and <a href=\"/article/766iheu1bk-add-workflow-variables-new-template\">Set
    Workflow Variables</a>.</p><p>Here is an example of the cURL command in the Shell
    Script step:</p><pre>curl --location --request POST &#39;https://outlook.office.com/webhook/xxxxx-xxx-xxx-xxx-xxxx@xxxx-xxx-xxx-bce0-xxx/IncomingWebhook/xxxxxxxxxxx-xxx-xxx-xxx-xxxxx&#39;
    \\<br/>--header &#39;Content-Type: application/json&#39; \\<br/>--data-raw &#39;{<br/>
    \   &#34;@type&#34;: &#34;MessageCard&#34;,<br/>    &#34;@context&#34;: &#34;http://schema.org/extensions&#34;,<br/>
    \   &#34;themeColor&#34;: &#34;0076D7&#34;,<br/>    &#34;summary&#34;: &#34;Rolling
    Workflow started&#34;,<br/>    &#34;sections&#34;: [{<br/>        &#34;activityTitle&#34;:
    &#34;Rolling Workflow started&#34;,<br/>        &#34;activitySubtitle&#34;: &#34;Workflow
    Notification&#34;,<br/>        &#34;activityImage&#34;: &#34;&#34;,<br/>        &#34;facts&#34;:
    [{<br/>            &#34;name&#34;: &#34;URL&#34;,<br/>            &#34;value&#34;:
    &#34;[Rolling Workflow](${deploymentUrl}&#34;<br/>        },<br/>        {<br/>
    \           &#34;name&#34;: &#34;Application&#34;,<br/>            &#34;value&#34;:
    &#34;${app.name}&#34;<br/>        },<br/>        {<br/>            &#34;name&#34;:
    &#34;Services&#34;,<br/>            &#34;value&#34;: &#34;${service.name}&#34;<br/>
    \       },<br/>        {<br/>            &#34;name&#34;: &#34;Artifacts&#34;,<br/>
    \           &#34;value&#34;: &#34;${artifact.buildFullDisplayName}&#34;<br/>        },<br/>
    \       {<br/>        \t&#34;name&#34;: &#34;Triggered By&#34;,<br/>            &#34;value&#34;:
    &#34;${deploymentTriggeredBy}&#34;<br/>        }],<br/>        &#34;markdown&#34;:
    true<br/>    }]<br/>}&#39;</pre><p></p><p></p>"
  slug: send-notifications-to-microsoft-teams
  tags: []
  is_live: true
