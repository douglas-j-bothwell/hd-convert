type: article
article_id: 2uhtcqzaio
user_id: mfr0nxh4be
category_id: gyd73rp7np
author:
  name: Michael Cretzman
  profile_image: https://www.gravatar.com/avatar/2e8616837f4ee92be5d19ffe9b9ccba9?d=mm&s=150
title: Approve or Reject Harness Delegates
slug: approve-or-reject-harness-delegates
description: Secure your Delegate installations.
short_version: Secure your Delegate installations.
tags: []
show_toc: true
is_private: false
is_published: true
is_featured: false
stale_status:
  is_stale: false
  reason: ""
  source: API
  triggered_at: 2022-07-06T18:58:21.68888Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: Approve or Reject Harness Delegates
  description: Secure your Delegate installations.
  short_version: Secure your Delegate installations.
  body: '<p>Harness users should limit the Delegates registered in their Harness accounts
    to only those Delegates they need and trust. Controlling which Delegates are installed
    helps make your deployments safer, predictable, and dependable.</p><p>You can
    use the Delegate Profile Approval feature to approve or reject Delegates attempting
    to register in your Harness Account.</p><div class="tip-callout">In addition to
    administration benefits, Delegate Profile Approval is a security feature that
    ensures only Delegates from trusted sources register in your account.</div><p>In
    this topic:</p><ul><li> <a href="#before_you_begin">Before You Begin</a></li><li>
    <a href="#step_1_create_a_delegate_profile">Step 1: Create a Delegate Profile</a></li><li>
    <a href="#step_2_enforce_profile_approval">Step 2: Enforce Profile Approval</a></li><li>
    <a href="#step_3_download_a_delegate">Step 3: Download a Delegate</a></li><li>
    <a href="#step_4_approve_or_reject_delegate">Step 4: Approve or Reject Delegate</a></li><li>
    <a href="#step_5_stop_and_delete_the_delegate">Step 5: Stop and Delete the Delegate</a></li><li>
    <a href="#notes">Notes</a></li></ul><h3>Before You Begin</h3><ul><li><a href="/article/4o7oqwih6h-harness-key-concepts">Harness
    Key Concepts</a></li><li><a href="/article/h9tkwmkrm7-delegate-installation">Harness
    Delegate Overview</a></li><li><a href="/article/yd4bs0pltf-run-scripts-on-the-delegate-using-profiles">Run
    Scripts on Delegates using Profiles</a></li></ul><p></p><h3>Step 1: Create a Delegate
    Profile</h3><ol><li>In Harness, click <strong>Setup</strong>, and then click <strong>Harness
    Delegates</strong>. The Harness Delegates page appears, listing your registered
    Delegates.</li><li>Click <strong>Delegate Profiles</strong>, and then click <strong>Add
    Delegate Profiles</strong>.</li><li>Enter a name for the Delegate Profile.</li></ol><p>If
    the purpose of this Profile is to simply approve/reject Delegate registrations,
    you don&#39;t need to enter a script in <strong>Startup Script</strong>.</p><p>If
    this Profile will also run a script on Delegates, add the script in <strong>Startup
    Script</strong>.</p><p>Harness includes the default Profile named <strong>Primary</strong>.
    This can be a useful Profile for approving/rejecting Delegate registrations.</p><h3>Step
    2: Enforce Profile Approval</h3><p>To enforce Profile approval, and use this Profile
    for approving/rejecting Delegate registrations, select the <strong>Delegate Requires
    Approval</strong> setting.</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/2uhtcqzaio/1588975856275/image.png"/></figure><p>Click
    <strong>Submit</strong>.</p><h4>Delegate Registrations Only</h4><p>The <strong>Delegate
    Requires Approval</strong> setting only applies to Delegates attempting to register
    with your Harness account. If you enable <strong>Delegate Requires Approval</strong>
    on a Profile and then apply that Profile to a <u>registered</u> Delegate, it has
    no effect.</p><h3>Step 3: Download a Delegate</h3><ol><li>Click <strong>Download
    Delegate</strong>, and then click a Delegate type. The <strong>Delegate Setup</strong>
    settings appear.</li><li>Enter a name for the Delegate.</li><li>In <strong>Profile</strong>,
    select the Profile in which you enabled <strong>Delegate Requires Approval</strong>.<br/><br/>You
    can select <u>any</u> Profile with <strong>Delegate Requires Approval</strong>
    enabled. If there is a Profile created for approving/rejecting Delegate registrations
    only, select that Profile.</li></ol><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/2uhtcqzaio/1588976151358/image.png"/></figure><ol><li
    style="counter-increment:li 3" start="4">Install and start the Delegate in your
    infrastructure as described in <a href="/article/h9tkwmkrm7-delegate-installation">Delegate
    Installation and Management</a>.</li></ol><p>It will take a few minutes for the
    Delegate registration attempt to appear in your <strong>Harness Delegates</strong>
    page.</p><h3>Step 4: Approve or Reject Delegate</h3><p>When the Delegate registration
    attempt appears in your <strong>Harness Delegates</strong> page, a <strong>Pending
    Approval</strong> button appears.</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/2uhtcqzaio/1588976772432/image.png"/></figure><ol><li>Click
    <strong>Pending Approval</strong>. The <strong>Approve</strong> and <strong>Reject</strong>
    buttons appear.</li></ol><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/2uhtcqzaio/1588976905716/image.png"/></figure><ol><li
    style="counter-increment:li 1" start="2">Click <strong>Approve</strong> or <strong>Reject</strong>.</li></ol><p>When
    you approve, Harness indicates that the Delegate is activated.</p><p>When you
    reject, the Delegate listing is removed and the Delegate is not registered with
    Harness.</p><div class="warning-callout"><strong>Be very careful rejecting a Delegate.</strong>
    If you accidentally reject a Delegate, you must download and install a new Delegate.</div><p>The
    Delegate is still running in your infrastructure, but Harness will not use it.</p><h3>Step
    5: Stop and Delete the Delegate</h3><p>Stop the Delegate running in your infrastructure,
    and then delete its files.</p><p>There are different ways to stop a Delegate.
    For a Shell Script Delegate, you can use the <strong>stop.sh</strong> script.</p><p>For
    the Delegates running in container or orchestration platforms, you need to remove
    the container or object.</p><h4 id="deleting_a_kubernetes_delegate">Deleting a
    Kubernetes Delegate</h4><p>To delete a Harness Delegate from your Kubernetes cluster,
    you can delete the StatefulSet for the Delegate.</p><p>Once created, the StatefulSet
    ensures that the desired number of pods are running and available at all times.
    Deleting the pod without deleting the StatefulSet will result in the pod being
    recreated.</p><p>For example, if you have the Delegate pod name <code>mydelegate-vutpmk-0</code>,
    you can delete the StatefulSet with the following command:</p><p><code>$ kubectl
    delete statefulset -n harness-delegate mydelegate-vutpmk</code></p><p>Note that
    the <code>-0</code> suffix in the pod name is removed for the StatefulSet name.</p><p></p><h3>Notes</h3><p>You
    can also Delete a Delegate after it is registered or when it is pending approval.</p><p></p><figure><img
    src="https://files.helpdocs.io/kw8ldg1itf/articles/2uhtcqzaio/1588962546601/image.png"/></figure><p>This
    simply deletes the Delegate from the <strong>Harness Delegates</strong> page list.
    You still need to delete it from your infrastructure.</p><h3>See Also</h3><ul><li><a
    href="/article/yd4bs0pltf-run-scripts-on-the-delegate-using-profiles">Run Scripts
    on Delegates using Profiles</a></li><li><a href="/article/imzgiz9h41-use-a-secret-in-a-delegate-profile">Use
    Secrets in a Delegate Profile</a></li></ul><p></p>'
  slug: approve-or-reject-harness-delegates
  tags: []
  is_live: true
