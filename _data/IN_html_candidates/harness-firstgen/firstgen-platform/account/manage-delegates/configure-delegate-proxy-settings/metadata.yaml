type: article
article_id: pfim3oig7o
user_id: mfr0nxh4be
category_id: gyd73rp7np
author:
  name: Michael Cretzman
  profile_image: https://www.gravatar.com/avatar/2e8616837f4ee92be5d19ffe9b9ccba9?d=mm&s=150
title: Configure Delegate Proxy Settings
slug: configure-delegate-proxy-settings
description: All of the Delegate settings include proxy settings you can use to change
  how the Delegate connects to the Harness Manager. By default, the Harness Delegate
  uses HTTP and HTTPS in its Proxy Scheme se…
short_version: All of the Delegate settings include proxy settings you can use to
  change how the Delegate connects to the Harness Manager. By default, the Harness
  Delegate uses HTTP and HTTPS in its Proxy Scheme se…
tags: []
show_toc: true
is_private: false
is_published: true
is_featured: false
stale_status:
  is_stale: false
  reason: ""
  source: API
  triggered_at: 2022-07-06T18:58:21.786206Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: Configure Delegate Proxy Settings
  description: ""
  short_version: ""
  body: '<p>All of the Delegate settings include proxy settings you can use to change
    how the Delegate connects to the Harness Manager.</p><div class="note-callout">By
    default, the Harness Delegate uses HTTP and HTTPS in its Proxy Scheme settings.</div><p>In
    this topic:</p><p></p><ul><li><a href="https://docs.harness.io/article/pfim3oig7o-configure-delegate-proxy-settings#shell_script_proxy_settings">Shell
    Script Proxy Settings</a></li><li><a href="https://docs.harness.io/article/pfim3oig7o-configure-delegate-proxy-settings#docker_proxy_settings">Docker
    Proxy Settings</a></li><li><a href="https://docs.harness.io/article/pfim3oig7o-configure-delegate-proxy-settings#kubernetes_proxy_settings">Kubernetes
    Proxy Settings</a></li></ul><h4>Shell Script Proxy Settings</h4><p>Run the <strong>setup-proxy.sh</strong>
    script included in the Delegate download and provide the proxy information.</p><ul><li><strong>Proxy
    URL</strong> - The syntax for the proxy URL must be of the form <code>http[s]://&lt;host&gt;[:port]</code>.</li></ul><p>The
    following settings are optional:</p><ul><li><strong>Username</strong> - Enter
    username if required.</li><li><strong>Password</strong> - Enter password.</li><li><strong>Suffixes</strong>
    - Enter a comma-separated list of suffixes that do not need the proxy. For example,
    <code>.company.com,hostname,etc</code>. Do not use leading wildcards.</li><li><strong>Manager</strong>
    - Select Yes or No to have the Delegate bypass proxy settings to reach the Harness
    Manager.</li></ul><p>The output will look something like this:</p><pre>PROXY_HOST=example.company.com<br/>PROXY_PORT=9091<br/>PROXY_SCHEME=https<br/>PROXY_USER=foo<br/>PROXY_PASSWORD_ENC=9uQekvDG8fU=<br/>NO_PROXY=.company.com<br/>PROXY_MANAGER=false</pre><p><code>PROXY_MANAGER=false</code>
    means that we selected Yes in response to the <strong>Bypass proxy settings to
    reach Harness manager?</strong> question.</p><p><code>PROXY_SCHEME</code> is for
    the Delegate to reach the proxy server, not for Delegate connections beyond that.</p><div
    class="note-callout">Do not edit the <strong>setup-proxy.sh</strong> script. Simply
    run the script and provide the proxy information.</div><h4>Docker Proxy Settings</h4><p>The
    proxy settings are in the <strong>launch-harness-delegate.sh</strong> file:</p><pre>-e
    PROXY_HOST= \<br/>-e PROXY_PORT= \<br/>-e PROXY_SCHEME= \<br/>-e PROXY_USER= \<br/>-e
    PROXY_PASSWORD= \<br/>-e PROXY_MANAGER= \<br/>-e NO_PROXY= \</pre><h4>Kubernetes
    Proxy Settings</h4><p>The proxy settings are in the <strong>harness-delegate.yaml</strong>
    file:</p><pre>...<br/>        - name: PROXY_HOST<br/>          value: &#34;&#34;<br/>        -
    name: PROXY_PORT<br/>          value: &#34;&#34;<br/>        - name: PROXY_SCHEME<br/>          value:
    &#34;&#34;<br/>        - name: NO_PROXY<br/>          value: &#34;&#34;<br/>        -
    name: PROXY_MANAGER<br/>          value: &#34;true&#34;<br/>        - name: PROXY_USER<br/>          valueFrom:<br/>            secretKeyRef:<br/>              name:
    doc-example-proxy<br/>              key: PROXY_USER<br/>        - name: PROXY_PASSWORD<br/>          valueFrom:<br/>            secretKeyRef:<br/>              name:
    doc-example-proxy<br/>              key: PROXY_PASSWORD<br/>...</pre><p></p><p>The
    <code>PROXY_MANAGER</code> setting determines whether the Delegate bypasses proxy
    settings to reach the Harness Manager in the cloud. If you want to bypass, enter
    <code>false</code>.</p><h5>In-Cluster Kubernetes Delegate with Proxy</h5><p>If
    an in-cluster Kubernetes Delegate has a proxy configured, then <code>NO_PROXY</code>
    must contain the cluster master IP. This enables the Delegate to skip the proxy
    for in-cluster connections.</p><p>The <code>NO_PROXY</code> environment variable
    takes an IP only, not a CIDR.</p><p></p><p></p>'
  slug: configure-delegate-proxy-settings
  tags: []
  is_live: true
