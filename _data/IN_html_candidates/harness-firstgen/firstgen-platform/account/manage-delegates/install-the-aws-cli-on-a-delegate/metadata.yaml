type: article
article_id: lei5kks8nc
user_id: mfr0nxh4be
category_id: gyd73rp7np
author:
  name: Michael Cretzman
  profile_image: https://www.gravatar.com/avatar/2e8616837f4ee92be5d19ffe9b9ccba9?d=mm&s=150
title: Install the AWS CLI on a Delegate
slug: install-the-aws-cli-on-a-delegate
description: If you want to run AWS CLI scripts on the Harness Delegate, you need
  to install the AWS CLI on its host(s). For example, you might add a Shell Script
  step in a Workflow that runs AWS CLI commands to…
short_version: If you want to run AWS CLI scripts on the Harness Delegate, you need
  to install the AWS CLI on its host(s). For example, you might add a Shell Script
  step in a Workflow that runs AWS CLI commands to…
tags: []
show_toc: true
is_private: false
is_published: true
is_featured: false
stale_status:
  is_stale: false
  reason: ""
  source: API
  triggered_at: 2022-07-06T18:58:21.741987Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: Install the AWS CLI on a Delegate
  description: ""
  short_version: ""
  body: '<p>If you want to run AWS CLI scripts on the Harness Delegate, you need to
    install the AWS CLI on its host(s).</p><p>For example, you might add a <a href="/article/1fjrjbau7x-capture-shell-script-step-output">Shell
    Script step</a> in a Workflow that runs AWS CLI commands to describe instances.</p><p>You
    can add the installation script to a Harness Delegate Profile and then apply that
    Profile to all the Delegates you want.</p><div class="note-callout">You don&#39;t
    need to install the AWS CLI onto a Delegate to perform deployments in AWS. See
    <a href="/article/wfk9o0tsjb-aws-ami-deployments">AWS AMI Quickstart</a>, <a href="/article/wy1rjh19ej-aws-lambda-deployments">AWS
    Lambda Quickstart</a>, <a href="/article/4t14lqxljo-aws-code-deploy-quickstart">AWS
    CodeDeploy Quickstart</a>, and <a href="/article/j39azkrevm-aws-ecs-deployments">AWS
    ECS Quickstart</a>.</div><p>In this topic:</p><ul><li> <a href="#before_you_begin">Before
    You Begin</a></li><li> <a href="#step_1_create_delegate_profile">Step 1: Create
    Delegate Profile</a></li><li> <a href="#step_2_add_aws_cli_installation_script">Step
    2: Add AWS CLI Installation Script</a></li><li> <a href="#step_3_apply_delegate_profile_to_delegate">Step
    3: Apply Delegate Profile to Delegate</a></li><li> <a href="#step_4_check_profile_status">Step
    4: Check Profile Status</a></li><li> <a href="#see_also">See Also</a></li></ul><h3>Before
    You Begin</h3><ul><li> <a href="/article/h9tkwmkrm7-delegate-installation">Harness
    Delegate Overview</a></li><li> <a href="/article/nxhlbmbgkj-common-delegate-profile-scripts">Common
    Delegate Profile Scripts</a></li><li> <a href="https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2-linux.html"
    target="_blank">Installing the AWS CLI version 2 on Linux</a> from AWS</li><li>
    <a href="/article/1fjrjbau7x-capture-shell-script-step-output">Using the Shell
    Script Step</a></li></ul><h3>Step 1: Create Delegate Profile</h3><ol><li>In <strong>Harness</strong>,
    click <strong>Setup</strong>.</li><li>Click <strong>Harness Delegates</strong>.</li><li>Click <strong>Manage
    Delegate Profiles</strong>, and then click <strong>Add Delegate Profile</strong>.
    The <strong>Manage Delegate Profile</strong> settings appear.</li></ol><p></p><figure><img
    src="https://files.helpdocs.io/kw8ldg1itf/articles/lei5kks8nc/1595458808317/image.png"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p>Next,
    we&#39;ll add the script for installing the AWS CLI.</p><div class="note-callout">For
    information on the <strong>Delegate Requires Approval</strong> setting, see <a
    href="/article/2uhtcqzaio-approve-or-reject-harness-delegates">Approve or Reject
    Harness Delegates</a>.</div><h3>Step 2: Add AWS CLI Installation Script</h3><p>In
    <strong>Startup Script</strong>, enter the script to install the AWS CLI.</p><p>For
    example, the following Profile script installs the  <a href="https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2-linux.html"
    target="_blank">AWS CLI version 2</a> on the Delegate host.</p><pre>curl &#34;https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip&#34;
    -o &#34;awscliv2.zip&#34;<br/>unzip awscliv2.zip<br/>sudo ./aws/install</pre><p>Ensure
    that the script can be run on the Linux operating system of the Delegate host.
    This example assumes the Delegate host(s) includes zip.</p><p>In some cases, the
    type of Delegate you use impacts the script. For example, a Docker Delegate won&#39;t
    need sudo.</p><p>When you are done, click <strong>Submit</strong>.</p><h3>Step
    3: Apply Delegate Profile to Delegate</h3><p>In the listing for the Delegate,
    in <strong>Profile</strong>, select the Delegate Profile you created.</p><p>When
    you are prompted to confirm, click <strong>Confirm</strong>.</p><p></p><figure><img
    src="https://files.helpdocs.io/kw8ldg1itf/articles/lei5kks8nc/1595542375942/image.png"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p>The
    message <code>Delegate profile Install AWS CLI saved successfully</code> appears.</p><p>Wait
    a few minutes for the Profile script to run on the Delegate host(s) and for Harness
    to receive any output.</p><p>The Profile status icon indicates whether the script
    ran successfully.</p><h3>Step 4: Check Profile Status</h3><p>In the listing of
    the Delegate where you applied the profile, in <strong>Profile</strong>, click
    <strong>View Logs</strong>.</p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/lei5kks8nc/1595459492859/image.png"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><div
    class="note-callout">If you see the message, <code>Profile execution log temporarily
    unavailable. Try again in a few moments</code>, the Delegate is still applying
    the script. Simply wait a few more minutes.</div><p>You will see the successful
    output of the installation.</p><p>If the Profile does not work, change the script
    in the Profile and try again. To try the new Profile script, switch the Profile
    on the Delete to another Profile, such as Primary, and then back to the revised
    AWS CLI Profile.</p><h3>See Also</h3><p>For a list of other script you can apply
    using Profiles, see <a href="/article/nxhlbmbgkj-common-delegate-profile-scripts">Common
    Delegate Profile Scripts</a>.</p><p></p>'
  slug: install-the-aws-cli-on-a-delegate
  tags: []
  is_live: true
