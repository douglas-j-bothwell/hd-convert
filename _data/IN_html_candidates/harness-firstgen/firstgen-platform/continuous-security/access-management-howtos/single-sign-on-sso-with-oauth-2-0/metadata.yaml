type: article
article_id: 02ehq56x6d
user_id: mfr0nxh4be
category_id: 49yov609ez
author:
  name: Michael Cretzman
  profile_image: https://www.gravatar.com/avatar/2e8616837f4ee92be5d19ffe9b9ccba9?d=mm&s=150
title: Single Sign-On (SSO) with OAuth 2.0
slug: single-sign-on-sso-with-oauth-2-0
description: Harness supports Single Sign-On (SSO) with OAuth 2.0 identity providers
  such as Azure, Google, LinkedIn, GitHub, Bitbucket, and GitLab.
short_version: Harness supports Single Sign-On (SSO) with OAuth 2.0 identity providers
  such as Azure, Google, LinkedIn, GitHub, Bitbucket, and GitLab.
tags:
- SSO
- security
- GitHub
- Bitbucket
- GitLab
- LinkedIn
- Metrics Provider
- Azure
- Google SSO
- OAuth
show_toc: true
is_private: false
is_published: true
is_featured: false
stale_status:
  is_stale: false
  reason: Article updated
  source: API
  triggered_at: 2022-09-01T15:17:41.946003Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: Single Sign-On (SSO) with OAuth 2.0
  description: Harness supports Single Sign-On (SSO) with OAuth 2.0 identity providers
    such as Azure, Google, LinkedIn, GitHub, Bitbucket, and GitLab.
  short_version: Harness supports Single Sign-On (SSO) with OAuth 2.0 identity providers
    such as Azure, Google, LinkedIn, GitHub, Bitbucket, and GitLab.
  body: |-
    <div class="tip-callout">This content is for Harness <a href="https://docs.harness.io/article/1fjmm4by22">FirstGen</a>. Switch to <a href="/article/rb33l4x893-single-sign-on-sso-with-oauth">NextGen</a>.</div><p>Harness supports Single Sign-On (SSO) with OAuth 2.0 identity providers, such as GitHub, Bitbucket, GitLab, LinkedIn, Google, and Azure. This integration allows you to use an OAuth 2.0 provider to authenticate your Harness Users.</p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/02ehq56x6d/1561422849561/image.png"/></figure><p></p><p>Once OAuth 2.0 SSO is enabled, Harness Users can simply log into Harness using their GitHub, Google, or other provider&#39;s email address.</p><div class="note-callout">For information on Harness RBAC, see <a href="/article/ven0bvulsj-users-and-permissions">Managing Users and Groups (RBAC)</a>.</div><p>In this topic:</p><ul><li><a href="https://docs.harness.io/article/02ehq56x6d-single-sign-on-sso-with-oauth-2-0#intended_audience">Intended Audience</a></li><li><a href="https://docs.harness.io/article/02ehq56x6d-single-sign-on-sso-with-oauth-2-0#before_you_begin">Before You Begin</a></li><li><a href="https://docs.harness.io/article/02ehq56x6d-single-sign-on-sso-with-oauth-2-0#requirements">Requirements</a></li><li><a href="https://docs.harness.io/article/02ehq56x6d-single-sign-on-sso-with-oauth-2-0#setup_overview">Setup Overview</a><ul><li><a href="https://docs.harness.io/article/02ehq56x6d-single-sign-on-sso-with-oauth-2-0#how_do_i_prevent_lockouts">How Do I Prevent Lockouts?</a></li></ul></li><li><a href="https://docs.harness.io/article/02ehq56x6d-single-sign-on-sso-with-oauth-2-0#set_up_o_auth_2_0_sso">Set Up OAuth 2.0 SSO</a></li><li><a href="https://docs.harness.io/article/02ehq56x6d-single-sign-on-sso-with-oauth-2-0#log_in_with_an_o_auth_2_0_provider">Log in with an OAuth 2.0 Provider</a></li><li><a href="https://docs.harness.io/article/02ehq56x6d-single-sign-on-sso-with-oauth-2-0#limit_o_auth_2_0_sso_domain_names">Limit OAuth 2.0 SSO Domain Names</a></li><li><a href="https://docs.harness.io/article/02ehq56x6d-single-sign-on-sso-with-oauth-2-0#next_steps">Next Steps</a></li></ul><h3>Intended Audience</h3><ul><li>Developers</li><li>DevOps</li><li>Identity Management Engineers</li></ul><h3>Before You Begin</h3><ul><li>If you are new to OAuth 2.0, read <a href="https://aaronparecki.com/oauth-2-simplified/">OAuth 2 Simplified</a> from Aaron Parecki.</li><li>To learn about all Harness options governing SSO logins, see <a href="/article/zlymcu6bf1-authentication-settings">Authentication Settings</a>.</li></ul><h3>Requirements</h3><p>To set up OAuth 2.0 successfully, the following requirements should be met:</p><ul><li>Each Harness User should be registered with Harness using their email address. Users are registered once they have logged into Harness. Harness Users are required to register the first time they log into Harness.</li><li>A Harness User&#39;s email address should also be used to authenticate with the OAuth 2.0 provider you plan to enable in Harness for SSO.</li></ul><p>For example, if a Harness User is registered with Harness using the email address <strong>JohnOAuth20@outlook.com</strong>, and OAuth SSO is enabled in Harness using Bitbucket as the provider, then the user must also be registered with Bitbucket using <strong>JohnOAuth20@outlook.com</strong>.</p><h4>GitHub Primary Email Required for Harness Login</h4><p>GitHub supports <a href="https://help.github.com/en/github/setting-up-and-managing-your-github-user-account/changing-your-primary-email-address" target="_blank">primary</a> and secondary email addresses:</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/02ehq56x6d/1590771419278/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p>If you use GitHub for Harness OAuth 2.0 SSO with Harness, the primary email must be used for the Harness account and login.</p><h3>Setup Overview</h3><div class="note-callout">Only Harness Users that are members of the Harness Administrators group have permission to set up and enable OAuth 2.0 SSO.</div><p>Setting up Harness OAuth 2.0 SSO involves the following high-level steps:</p><ol><li>Ensure that the email addresses of registered Harness Users are also registered with the OAuth 2.0 provider you will use for Harness OAuth 2.0 SSO. This holds true for users you plan to invite to Harness after you enable Harness OAuth 2.0 SSO.</li><li>Enable Harness OAuth 2.0 SSO, and select the OAuth 2.0 providers to use for SSO.</li><li>Test SSO by having a user log into Harness using each enabled OAuth 2.0 provider.</li></ol><h4>How Do I Prevent Lockouts?</h4><p>The following steps can help you prevents lockouts when setting up SSO in Harness:</p><ul><li>When you enable OAuth 2.0 SSO, using a Harness User account that is a member of the Administrator Group, remain logged in until you have tested SSO using a separate User account. If there is any error, you can disable OAuth 2.0 SSO.</li><li>Ensure that one or more Harness Users in the Administrators Group are registered with Harness using the same email address they use to log into the OAuth 2.0 provider you plan to use for SSO. Repeat this test for each enabled OAuth 2.0 provider.</li></ul><p>If you accidentally get locked out of Harness, email <a href="mailto:support@harness.io">support@harness.io</a>, call 855-879-7727, or contact Harness at <a href="https://harness.io/contact-sales" target="_blank">https://harness.io/contact-sales</a>.</p><h4>Harness Local Login</h4><p>To prevent lockouts or in the event of OAuth downtime, a User in the Harness Administrators Group can use the <a href="http://app.harness.io/auth/#/local-login"><strong>Local Login</strong></a> URL (http://app.harness.io/auth/#/local-login) to log in and update the OAuth settings.</p><p></p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/rb33l4x893/1638374284838/screenshot-2021-12-01-at-9-27-06-pm.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><ol><li>Log in using <strong>Harness Local Login</strong>.</li><li>Change the settings to enable users to log in.</li></ol><h3>Set Up OAuth 2.0 SSO</h3><p>To set up OAuth 2.0 SSO, do the following:</p><ol><li>Log into Harness using a Harness User account that is a member of the Administrator User Group. For information on Harness RBAC, see <a href="/article/ven0bvulsj-users-and-permissions">Managing Users and Groups (RBAC)</a>.<br/><br/>The email address used to log into Harness should also be registered with the OAuth 2.0 providers you intend to enable for Harness SSO.</li><li>Click <strong>Continuous Security</strong>, and then click <strong>Access Management</strong>. The <strong>Access Management</strong> page appears.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/02ehq56x6d/1578095174936/image.png"/></figure></li><li>Click <strong>Users</strong>. The <strong>Users</strong> page appears.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/02ehq56x6d/1551465725530/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure>Here we see that the user we want to log in using OAuth 2.0 SSO, <strong>johnoauth20@outlook.com</strong>, has an Outlook.com email address.</li><li>Before you set up SSO, confirm that your users&#39; email addresses registered with Harness are the same email addresses they use to log into the OAuth 2.0 provider you&#39;re enabling for Harness SSO.<br/><br/>In this case, we are going to use Bitbucket for SSO, so let&#39;s confirm that the <strong>johnoauth20@outlook.com</strong> email address is used to log into Bitbucket.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/02ehq56x6d/1551465988604/image.png"/></figure>Email address confirmed. Now you are all set to add and enable Harness OAuth 2.0 SSO.</li><li>In <strong>Harness Manager</strong>, click the drop-down menu next to the <strong>Users</strong> breadcrumb and select <strong>Authentication Settings</strong>.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/kl3xc8iap2/1561098645768/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure>The <strong>Authentication Settings</strong> page appears.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/02ehq56x6d/1561423314054/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure>Now we will add Bitbucket as the OAuth 2.0 SSO provider.</li><li>If it&#39;s not already enabled, enable <strong>Allow login via public OAuth providers</strong>.</li><li>Enable each public OAuth 2.0 provider you want to use for SSO. In this example, you would enable <strong>BitBucket</strong>.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/02ehq56x6d/1561423383186/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure>The OAuth 2.0 provider is now enabled as an SSO option. The <strong>Current authentication mechanism(s)</strong> header confirms that <strong>Public OAuth providers</strong> is enabled.</li><li>Before you log out of Harness, test the OAuth 2.0 SSO using a Harness User account. This will confirm that Harness Users can now log in from the Harness login page.</li></ol><p></p><div class="hd--md" data-hd-markdown="&lt;span id=&#34;logging_in_with_o_auth_2_0_provider&#34;&gt;&lt;/span&gt;"><p><span id="logging_in_with_o_auth_2_0_provider"></span></p>
    </div><h3>Log in with an OAuth 2.0 Provider</h3><p>The first time a user logs into Harness using OAuth 2.0 SSO, they will be redirected to the OAuth 2.0 provider. The user will enter the same email address they used for Harness, along with the OAuth 2.0 provider–specific password. Next, they are redirected back to Harness and automatically logged in.</p><p>For all future logins, if the user is already logged into their OAuth 2.0 provider in the same browser as Harness, they will simply enter their email address in Harness and log in automatically.</p><p>Let&#39;s look at an example:</p><p>The Harness user <strong>John OAuth20</strong> is registered in Harness with the email address <strong>johnoauth20@outlook.com</strong>:</p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/02ehq56x6d/1551475268059/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p>The email address <strong>johnoauth20@outlook.com</strong> is also registered with Bitbucket:</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/02ehq56x6d/1551475364381/image.png"/></figure><p>And Bitbucket is enabled as the Harness SSO Provider:</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/02ehq56x6d/1551475402030/image.png"/></figure><p></p><p>John OAuth20 logs into Harness with the email address <strong>johnoauth20@outlook.com</strong>:</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/02ehq56x6d/1551475833730/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p>When he clicks <strong>NEXT</strong>, the browser is redirected to the Bitbucket website:</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/02ehq56x6d/1551476029884/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p>John enters in his <strong>johnoauth20@outlook.com</strong> email address and clicks <strong>Continue</strong>. Next, he enters in his Bitbucket password and clicks <strong>Continue</strong>.</p><p>Bitbucket verifies the email address and password and returns the browser to Harness, where John OAuth20 is logged in automatically.</p><p>Harness OAuth 2.0 login successful!</p><div class="note-callout">Each time you use the OAuth provider to log into Harness, you will be required to log into the OAuth provider first. This is the standard OAuth process.</div><h3>Limit OAuth 2.0 SSO Domain Names</h3><p>By default, any member invited to Harness by a Harness Administrator can log in using an OAuth 2.0 SSO identity provider that&#39;s enabled on Harness. However, you can limit which email domain names can be used to log into Harness.</p><p>For example, you might set up Google as a Harness OAuth 2.0 SSO provider, but you want only users who have <strong>example.io</strong> in their (login) email address to be able to log in via Google.</p><p>To filter domain names in this way, see our <a href="/article/zlymcu6bf1-authentication-settings">Authentication Settings</a> topic&#39;s section on <a href="/article/zlymcu6bf1-authentication-settings#restricting_email_domains">Restricting Email Domains</a>.</p><h3>Next Steps</h3><ul><li><a href="/article/h0ie5q5lkl-login-settings">Two Factor Authentication</a>.</li><li><a href="/article/j2ww8l3yjw-access-management">IP Whitelist Management</a>.</li><li><a href="/article/smloyragsm-api-keys">API Keys</a></li></ul><p></p><p></p>
  slug: single-sign-on-sso-with-oauth-2-0
  tags:
  - SSO
  - security
  - GitHub
  - Bitbucket
  - GitLab
  - LinkedIn
  - Metrics Provider
  - Azure
  - Google SSO
  - OAuth
  is_live: true
