<p></p><p>Harness supports SSH server authentication using Kerberos, enabling you to SSH into a target host via the Kerberos protocol. For a quick Kerberos summary, see <a href="https://www.roguelynn.com/words/explain-like-im-5-kerberos/" target="_blank">Explain like I’m 5: Kerberos</a> by Lynn Root.</p><p>In this topic:</p><ul><li><a href="#before_you_begin">Before You Begin</a></li><li><a href="#step_1_access_ssh_configuration">Step 1: Access SSH Configuration</a></li><li><a href="#step_2_auth_scheme">Step 2: Auth Scheme</a></li><li><a href="#step_3_principal">Step 3: Principal</a></li><li><a href="#step_4_realm">Step 4: Realm</a></li><li><a href="#step_5_tgt_generation">Step 5: TGT Generation</a></li><li><a href="#step_6_keytab_file_path">Step 6: Keytab File Path</a></li></ul><p></p><h3>Before You Begin</h3><ul><li>See <a href="/article/4o7oqwih6h-harness-key-concepts">Harness Key Concepts</a>.</li><li>See <a href="/article/au38zpufhr-secret-management">Secrets Management Overview</a>.</li><li>Make sure you can generate TGT using <code>kinit</code> command on the machine where the Delegate is running. For more information about <code>kinit</code> command, see <a href="https://web.mit.edu/kerberos/krb5-1.12/doc/user/user_commands/kinit.html">kinit documentation</a>.</li></ul><h3>Step 1: Access SSH Configuration</h3><ol><li>In Secrets Management, click <strong>SSH</strong>.</li><li>Click <strong>Add SSH Key</strong>. The <strong>SSH Configuration</strong> dialog appears.</li><li>Enter a <strong>Display Name</strong> for the SSH credentials.</li></ol><p></p><h3>Step 2: Auth Scheme</h3><p>Select <strong>Kerberos</strong>.</p><p></p><h3>Step 3: Principal</h3><p>Principal is a string that names a specific entity to which a set of credentials may be assigned. Enter the account name associated with the Kerberos account, such as <strong>johndoe</strong>.</p><p></p><h3>Step 4: Realm</h3><p>Realm is the logical network served by a single Kerberos database and a set of Key Distribution Centers (KDCs). Typically, this is the domain where the service (that the user is trying to authenticate with) is located. For example: <strong>US-EAST-2.COMPUTE.INTERNAL</strong>.Typically, the target host(s) that your SSH connection is intending to authenticate with via Kerberos are located in a domain name with the same name you enter in <strong>Realm</strong>. For example, <strong>ip-172-31-44-168.us-east-2.compute.internal</strong>. The realm naming convention is all uppercase letters to differentiate the realm from the internet domain, but the <strong>Realm</strong> field does not enforce the convention.</p><h3>Step 5: TGT Generation</h3><p>Select one of the following options:</p><ul><li><strong>Key Tab File Path (on Delegate)</strong> - You can choose this option to generate a new TGT from the KDC every time you authenticate with the service. This ensures that the TGT is always valid and not expired when you try to authenticate.</li><li><strong>Password</strong> - Select a password for TGT generation. Make sure you use a Harness Encrypted Text secret to save the password and refer to it using this option. Either select an existing secret from the drop down list or create a new one by clicking <strong>+ Create Encrypted Text</strong>. For more information on creating Encrypted Text, see <a href="https://docs.harness.io/article/ygyvp998mu-use-encrypted-text-secrets">Harness Encrypted Text secret</a>.</li><li><strong>None</strong> - Select this option to skip TGT Generation. If you select this option, you must ensure that the TGT that is on the server running the Harness delegate is always available.</li></ul><h3>Step 6: Keytab File Path</h3><p>This field is displayed if you select <strong>Key Tab File Path</strong> for <strong>TGT Generation</strong>. Enter the file path to the keytab file on the server running the Harness delegate. For example, <strong>/home/johndoe/a.keytab</strong>. The file is not uploaded to Harness.</p><p>To use the Kerberos SSH connection to connect to a target host, you select it in <strong>SSH Connection Attributes</strong> while specifying the target host in the Service Infrastructure/ <a href="https://docs.harness.io/article/n39w05njjv-environment-configuration#add_an_infrastructure_definition">Infrastructure Definition</a> settings of an environment.</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/au38zpufhr/1542144259291/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p>In this example, the target host that you want to use Kerberos authentication with is entered in <strong>Host Name(s)</strong>.</p><p>Note that the domain name used to identify the hosts in the <strong>Host Name(s)</strong> field is likely to be the same as the domain name you entered in <strong>Realm</strong> when configuring the SSH connection.</p><p></p>