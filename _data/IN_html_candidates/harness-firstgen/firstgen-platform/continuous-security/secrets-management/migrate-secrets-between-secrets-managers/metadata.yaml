type: article
article_id: prjsaaev0c
user_id: wz6xkfcc9i
category_id: o9x167at52
author:
  name: Chakravarthy Tenneti
  profile_image: https://www.gravatar.com/avatar/790db061bb8f8fb094e4d4b19a390f3b?d=mm&s=150
title: Migrate Secrets between Secrets Managers
slug: migrate-secrets-between-secrets-managers
description: 'Harness Secrets Management supports the ability to migrate your secrets
  between secrets managers. In this topic: Before You Begin. Review: Important Migration
  Topics. Step: Migrating Secrets. Next St…'
short_version: 'Harness Secrets Management supports the ability to migrate your secrets
  between secrets managers. In this topic: Before You Begin. Review: Important Migration
  Topics. Step: Migrating Secrets. Next St…'
tags:
- Secrets management
- Secrets Manager
- Migrate secrets
show_toc: true
is_private: false
is_published: true
is_featured: false
stale_status:
  is_stale: false
  reason: Article updated
  source: API
  triggered_at: 2021-08-26T17:17:17.353806Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: Migrate Secrets between Secrets Managers
  description: ""
  short_version: ""
  body: '<p>Harness Secrets Management supports the ability to migrate your secrets
    between secrets managers.</p><p>In this topic:</p><ul><li><a href="#before_you_begin">Before
    You Begin</a></li><li><a href="#review_important_migration_topics">Review: Important
    Migration Topics</a></li><li><a href="#step_migrating_secrets">Step: Migrating
    Secrets</a></li><li><a href="#next_steps">Next Steps</a></li></ul><h3>Before You
    Begin</h3><ul><li><a href="/article/4o7oqwih6h-harness-key-concepts">Harness Key
    Concepts</a></li><li><a href="/article/uuer539u3l-add-a-secrets-manager">Add a
    Secrets Manager</a></li></ul><p></p><h3>Limitations</h3><p>For Harness On-Prem,
    you cannot migrate from a third-party secret manager to <strong>Harness Secrets
    Manager</strong>. You can migrate from Harness Secrets Manager to a third-party
    secret manager, but not back to Harness Secrets Manager.</p><p>Instead, simply
    migrate between your third-party secret managers without attempting to revert
    to Harness Secrets Manager.</p><h3>Review: Important Migration Topics</h3><h4>HashiCorp
    Vault Migration</h4><p>When migrating to HashiCorp Vault, the vault must not be
    read-only. If it is read-only, the migration will fail.</p><p>The migrated secrets
    are created in the vault at the path specified by:</p><ul><li>Encrypted text:<br/>
    <code>/&lt;SECRET_ENGINE_NAME&gt;/&lt;BASE_PATH_IN_VAULT_CONFIGURATION&gt;/&lt;SECRET_TEXT&gt;/&lt;NAME
    OF THE SECRET&gt;</code></li><li>Encrypted file:<br/><code>/&lt;SECRET_ENGINE_NAME&gt;/&lt;BASE_PATH_IN_VAULT_CONFIGURATION&gt;/&lt;CONFIG_FILE&gt;/&lt;NAME
    OF THE FILE&gt;</code></li></ul><h4>Secret References and Migration</h4><p>Encrypted
    text secrets are referenced in Harness components using the expression <code>${secrets.getValue(&#34;secret_name&#34;)}</code>.</p><p>Encrypted
    file secrets are referenced by these expressions:</p><ul><li><code>${configFile.getAsBase64(&#34;secret_name&#34;)}</code> —
    This displays the contents of the file encoded in Base64 binary-to-text encoding
    schemes.</li><li><code>${configFile.getAsString(&#34;secret_name&#34;)}</code> —
    This displays the contents of the file as a string.</li></ul><p>When you migrate
    secrets, any references to the secrets do not need to be changed in any way. The
    same secrets will work with the new secret manager. No action is required.</p><h4>Secrets
    in Transit during Migration</h4><p>During migration transmission, secrets are
    encrypted by AES 256 encryption. They are always transmitted over HTTPS.</p><h3>Step:
    Migrating Secrets</h3><ol><li>In <strong>Secrets Management</strong>, click <strong>Configure
    Secrets Managers</strong>.</li><li>Next to the secrets manager from which you
    want to migrate secrets, click <strong>Migrate</strong>.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/q7fqo7wt73/1585198089694/image.png"
    style="max-height:75%;max-width:75%" data-hd-height="75%" data-hd-width="75%"/></figure></li><li>In
    the <strong>Migrate Secrets</strong> dialog, select your target secrets manager
    in the <strong>Transition Secrets to:</strong> drop‑down list, and click <strong>Submit</strong>.<figure><img
    src="https://files.helpdocs.io/kw8ldg1itf/articles/q7fqo7wt73/1585198189196/image.png"
    style="max-height:75%;max-width:75%" data-hd-height="75%" data-hd-width="75%"/></figure></li></ol><h3>Next
    Steps</h3><ul><li><a href="/article/ygyvp998mu-use-encrypted-text-secrets">Use
    Encrypted Text Secrets</a></li><li><a href="/article/nt5vchhka4-use-encrypted-file-secrets">Use
    Encrypted File Secrets</a></li></ul><p></p>'
  slug: migrate-secrets-between-secrets-managers
  tags:
  - Secrets management
  - Secrets Manager
  - Migrate secrets
  is_live: true
