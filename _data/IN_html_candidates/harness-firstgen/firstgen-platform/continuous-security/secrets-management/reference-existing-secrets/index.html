<p>If you already have secrets created in a secrets manager such as HashiCorp Vault or AWS Secrets Manager, you do not need to re-create the existing secrets in Harness.</p><p>Harness does not query the secrets manager for existing secrets, but you can create a secret in Harness that references an existing secret in HashiCorp Vault or AWS Secrets Manager. No new secret is created in those providers. If you delete the secret in Harness, it does not delete the secret in the provider.</p><p>In this topic:</p><ul><li><a href="https://docs.harness.io/article/cwp7rlauzn-reference-existing-secrets#before_you_begin">Before You Begin</a></li><li><a href="https://docs.harness.io/article/cwp7rlauzn-reference-existing-secrets#option_vault_secrets">Option: Vault Secrets</a></li><li><a href="https://docs.harness.io/article/cwp7rlauzn-reference-existing-secrets#option_aws_secrets_manager_secrets">Option: AWS Secrets Manager Secrets</a><ul><li><a href="https://docs.harness.io/article/cwp7rlauzn-reference-existing-secrets#referencing_secret_keys">Referencing Secret Keys</a></li></ul></li><li><a href="https://docs.harness.io/article/cwp7rlauzn-reference-existing-secrets#option_cyber_ark_secrets">Option: CyberArk Secrets</a></li><li><a href="https://docs.harness.io/article/cwp7rlauzn-reference-existing-secrets#option_azure_key_vault_secrets">Option: Azure Key Vault Secrets</a></li><li><a href="https://docs.harness.io/article/cwp7rlauzn-reference-existing-secrets#option_google_cloud_secret_manager">Option: Google Cloud Secret Manager</a></li><li><a href="https://docs.harness.io/article/cwp7rlauzn-reference-existing-secrets#next_steps">Next Steps</a></li></ul><p></p><h3>Before You Begin</h3><ul><li>See <a href="/article/otkxijqoa6-add-an-aws-secrets-manager">Add an AWS Secrets Manager</a>.</li><li>See <a href="/article/am3dmoxywy-add-a-hashi-corp-vault-secrets-manager">Add a HashiCorp Vault Secrets Manager</a>.</li><li>See <a href="/article/uzsv1l2ivd-add-a-cyber-ark-secrets-manager">Add a CyberArk Secrets Manager</a>.</li><li>See <a href="/article/2nv0gy1wnh-azure-key-vault">Add Azure Key Vault Secrets</a>.</li></ul><p></p><h3>Option: Vault Secrets</h3><p>You can create a Harness secret that refers to the existing Vault secret using a path and key, such as <code>/path/secret_key#my_key</code>.</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/au38zpufhr/1580863211520/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p>In the above example, <code>/foo/bar</code> is the pre-existing path, <code>MyVaultSecret</code> is the secret name, and <code>MyKey</code> is the key used to lookup the secret value.</p><div class="note-callout">Do not prepend the Vault secrets engine to the path. In the above example, if the secret (<code>/foo/bar/MyVaultSecret#MyKey</code>) had been generated by a Vault secrets engine named <code>harness-engine</code>, it would reside in this full path <code>/harness-engine/foo/bar/MyVaultSecret#MyKey</code>. However, in the <strong>Value</strong> field, you would enter only <code>/foo/bar/MyVaultSecret#MyKey</code>.</div><p>This Harness secret is simply a reference pointing to an existing Vault secret. Deleting this Harness secret will not delete the Vault secret referred to by this secret.</p><div class="tip-callout">You can also reference pre-existing Vault secrets in the Harness YAML editor, as described in <a href="https://docs.harness.io/article/21kgaw4h86-harness-yaml-code-reference#encrypted_information_in_yaml">Encrypted Information in YAML</a>.</div><p></p><h3>Option: AWS Secrets Manager Secrets</h3><p>You can create a Harness secret that refers to an existing secret in AWS Secrets Manager using the name of the secret, and a prefix if needed. For example, <code>devops/mySecret</code>.</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/au38zpufhr/1558647531863/image.png"/></figure><p></p><h5>Referencing Secret Keys</h5><p>In AWS Secrets Manager, your secrets are specified as key-value pairs, using a JSON collection:</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/au38zpufhr/1563819368608/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p>To reference a specific key in your Harness secret, add the key name following the secret name, like <code>secret_name#key_name</code>. In the above example, the secret is named <strong>example4docs</strong>. To reference the <strong>example1</strong> key, you would enter <code>example4docs#example1</code>.</p><p></p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/au38zpufhr/1580863350687/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p></p><h3>Option: CyberArk Secrets</h3><p>Once you have set up CyberArk as the default Harness Secrets Manager, you can reference existing secrets in the <strong>Encrypted Text</strong> dialog.</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/au38zpufhr/1580864021945/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p>To use an existing CyberArk secrets, enter the following fields.</p><ul><li><strong>Name</strong> - Enter a name for the secret so you can reference it in Harness. This is a Harness setting, not a name in CyberArk.</li><li><strong>Query</strong> - Queries the CyberArk secrets manager for the secret. For example, the query <code>Safe=Test;Folder=root\OS\Windows;Object=windows1</code> search for Safe <code>Test</code>, folder <code>root\OS\Windows</code>, and object name <code>windows1</code>. The query is combined with the user credentials provided in the CyberArk Secrets Manager setup to create the complete API query.</li></ul><p>The query syntax is:</p><pre>Safe=&lt;safe&gt;;Folder=&lt;folder&gt;;Object=&lt;name&gt;</pre><p>What Safe, Folder, and Object are named depends on your CyberArk setup. You can see the Safe as the <strong>Address</strong> field and Object as <strong>Username</strong> field in the following example, and so the query would be <code>Address=components;Username=svc_account</code>:</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/other/1566232891890/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><div class="note-callout">We recommend the query includes enough fields to ensure that multiple secrets are not returned. If multiple secrets are returned, the query will fail.</div><p></p><h3>Option: Azure Key Vault Secrets</h3><p>You can create a Harness secret that refers to an existing secret in Azure Key Vault, using that secret&#39;s name (forÂ example: <code>azureSecret</code>). You can also specify the secret&#39;s version (for example: <code>azureSecret/05</code>).</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/b4p6pj1jhd/1581146108813/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p></p><h3>Option: Google Cloud Secret Manager</h3><p>You can create a Harness secret that refers to an existing secret in Google Cloud Secret Manager.</p><p>In Secrets Manager, select the Google Cloud Secrets Manager you added to Harness. See <a href="/article/t0rj3ze6ui-add-a-google-cloud-secrets-manager">Add a Google Cloud Secrets Manager</a>.</p><p>In <strong>Reference Secret Name</strong>, enter the name of an existing secret in GCP.</p><p>In <strong>Version</strong>, enter the secret version you want to use.</p><p>In <strong>Region</strong>, enter the location of the secret. If the secret is <strong>Automatically replicated</strong>, leave this empty.</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/cwp7rlauzn/1621545071291/image.png"/></figure><h3>Next Steps</h3><ul><li><a href="/article/prjsaaev0c-migrate-secrets-between-secrets-managers">Migrate Secrets Between Secrets Managers</a></li></ul><p></p>