<div class="tip-callout">This content is for Harness <a href="https://docs.harness.io/article/1fjmm4by22">FirstGen</a>. Switch to <a href="/article/pt52h8sb6z-add-an-aws-kms-secrets-manager">NextGen</a>.</div><p>To store and use encrypted secrets (such as access keys) and files, you can add an AWS KMS Secrets Manager.</p><p>In this topic:</p><ul><li><a href="https://docs.harness.io/article/qj4psb5vsf-add-an-aws-kms-secrets-manager#before_you_begin">Before You Begin</a></li><li><a href="https://docs.harness.io/article/qj4psb5vsf-add-an-aws-kms-secrets-manager#step_1_configure_secrets_manager">Step 1: Configure Secrets Manager</a></li><li><a href="https://docs.harness.io/article/qj4psb5vsf-add-an-aws-kms-secrets-manager#step_2_display_name">Step 2: Display Name</a></li><li><a href="https://docs.harness.io/article/qj4psb5vsf-add-an-aws-kms-secrets-manager#option_credentials_type">Option: Credentials Type</a></li><li><a href="https://docs.harness.io/article/qj4psb5vsf-add-an-aws-kms-secrets-manager#option_assume_iam_role_on_delegate">Option: Assume IAM Role on Delegate</a><ul><li><a href="https://docs.harness.io/article/qj4psb5vsf-add-an-aws-kms-secrets-manager#delegate_selector">Delegate Selector</a></li></ul></li><li><a href="https://docs.harness.io/article/qj4psb5vsf-add-an-aws-kms-secrets-manager#option_aws_access_keys_manually">Option: AWS Access Keys Manually</a><ul><li><a href="https://docs.harness.io/article/qj4psb5vsf-add-an-aws-kms-secrets-manager#access_key">Access Key</a></li><li><a href="https://docs.harness.io/article/qj4psb5vsf-add-an-aws-kms-secrets-manager#secret_key">Secret Key</a></li></ul></li><li><a href="https://docs.harness.io/article/qj4psb5vsf-add-an-aws-kms-secrets-manager#option_assume_role_using_sts_on_delegate">Option: Assume Role Using STS on Delegate</a><ul><li><a href="https://docs.harness.io/article/qj4psb5vsf-add-an-aws-kms-secrets-manager#role_arn">Role ARN</a></li><li><a href="https://docs.harness.io/article/qj4psb5vsf-add-an-aws-kms-secrets-manager#external_id">External ID</a></li><li><a href="https://docs.harness.io/article/qj4psb5vsf-add-an-aws-kms-secrets-manager#assume_role_duration">Assume Role Duration</a></li></ul></li><li><a href="https://docs.harness.io/article/qj4psb5vsf-add-an-aws-kms-secrets-manager#step_3_key_arn">Step 3: Key ARN</a></li><li><a href="https://docs.harness.io/article/qj4psb5vsf-add-an-aws-kms-secrets-manager#step_4_region">Step 4: Region</a></li><li><a href="https://docs.harness.io/article/qj4psb5vsf-add-an-aws-kms-secrets-manager#step_5_usage_scope">Step 5: Usage Scope</a></li></ul><h3>Before You Begin</h3><ul><li>See <a href="/article/4o7oqwih6h-harness-key-concepts">Harness Key Concepts</a>.</li><li>See <a href="/article/au38zpufhr-secret-management">Secrets Management Overview</a>.</li></ul><p></p><h3>Step 1: Configure Secrets Manager</h3><ol><li>In <strong>Security</strong>, select <strong>Secrets Management</strong>, and then click <strong>Configure Secrets Managers.</strong><br/>In the <strong>Secrets Managers</strong> page, the <strong>Status</strong> column indicates the <strong>Default</strong> provider.</li><li>Click <strong>Add Secrets Manager</strong>. The <strong>Configure Secrets Manager</strong> settings appear.</li><li>Select <strong>AWS KMS</strong> from the drop-down list.</li></ol><h3>Step 2: Display Name</h3><p>Enter a name for this secrets manager.</p><h3>Option: Credentials Type</h3><p>You can select the following options for authenticating with AWS:</p><ul><li><strong>Assume IAM Role on Delegate.</strong></li><li><strong>Enter AWS Access Keys Manually</strong>.</li><li><strong>Assume Role Using STS on Delegate.</strong></li></ul><h3>Option: Assume IAM Role on Delegate</h3><p>If you select <strong>Assume the IAM Role on Delegate</strong>, Harness will authenticate using the IAM role assigned to the AWS host running the Delegate you select using a Delegate Selector.</p><h4>Delegate Selector</h4><p>In <strong>Delegate Selector</strong>, enter the Selector of the Delegate that this Secrets Manager will use for all connections. For information about Selectors, see <a href="https://docs.harness.io/article/c3fvixpgsl-select-delegates-for-specific-tasks-with-selectors">Select Delegates for Specific Tasks with Selectors</a>.</p><h3>Option: AWS Access Keys Manually</h3><p>Use your AWS IAM user login credentials.</p><p>Either from the JSON for the <strong>Key Policy</strong>, or in the AWS <strong>IAM</strong> console, under <strong>Encryption keys,</strong> gather the <strong>AWS Access Key ID</strong>, <strong>AWS Secret Key</strong>, and <strong>AWS Resource Name (ARN)</strong>.</p><p>For more information, see <a href="https://docs.aws.amazon.com/kms/latest/developerguide/viewing-keys.html#find-cmk-id-arn" target="_blank">Finding the Key ID and ARN</a> from Amazon.</p><h4>Access Key</h4><p>The AWS Access Key ID for the IAM user you want to use to connect to Secrets Manager.</p><h4>Secret Key</h4><p>Paste in the contents of the Secret Key corresponding to the Access Key ID.</p><h3>Option: Assume Role Using STS on Delegate</h3><p></p><p>This option uses the <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_temp.html" target="_blank">AWS Security Token Service</a> (STS) feature. Typically, you use <code>AssumeRole</code> within your account or for AWS cross-account access.</p><h4>Role ARN</h4><p>Enter the Amazon Resource Name (ARN) of the role that you want to assume. This is an IAM role in the target deployment AWS account.</p><h4>External ID</h4><p>If the administrator of the account to which the role belongs provided you with an external ID, then enter that value.</p><p>For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_create_for-user_externalid.html">How to Use an External ID When Granting Access to Your AWS Resources to a Third Party</a> from AWS.</p><h4>Assume Role Duration</h4><p>This is the AssumeRole Session Duration. See Session Duration in the <a href="https://docs.aws.amazon.com/STS/latest/APIReference/API_AssumeRole.html" target="_blank">AssumeRole AWS docs</a>.</p><h3>Step 3: Key ARN</h3><p>Enter the Amazon Resource Name (ARN) for the customer master key (CMK).</p><h3>Step 4: Region</h3><p>Select the AWS Region for the Secrets Manager.</p><h3>Step 5: Usage Scope</h3><p>See <a href="/article/e4ikpd00f6-scope-secret-managers-to-applications-and-environments">Scope Secret Managers to Applications and Environments</a>.</p>