<p>You can use your <a href="https://cloud.google.com/secret-manager/docs" target="_blank">Google Cloud Secret Manager</a> (GSM) as a secrets manager in Harness.</p><p>Once you connect your GSM to Harness, you can store the secrets and other sensitive information you use in Harness in your GSM.</p><div class="note-callout">Harness also supports <a href="/article/avo98eldl0-add-a-google-cloud-kms-secrets-manager">Google KMS as a secrets manager</a>.</div><p>In this topic:</p><ul><li><a href="#before_you_begin">Before You Begin</a></li><li><a href="#limitations">Limitations</a></li><li><a href="#supported_platforms_and_technologies">Supported Platforms and Technologies</a></li><li><a href="#review_permissions">Review: Permissions</a></li><li><a href="#step_1_add_a_secrets_manager">Step 1: Add a Secrets Manager</a></li><li><a href="#step_2_display_name">Step 2: Display Name</a></li><li><a href="#step_3_attach_service_account_key_credentials_file">Step 3: Attach Service Account Key (Credentials) File</a></li><li><a href="#step_4_usage_scope">Step 4: Usage Scope</a></li><li><a href="https://docs.harness.io/article/t0rj3ze6ui-add-a-google-cloud-secrets-manager#option_reference_existing_secrets">Option: Reference Existing Secrets</a></li><li><a href="#option_migrate_existing_secrets_to_gsm">Option: Migrate Existing Secrets to GSM</a></li><li><a href="#notes">Notes</a></li><li><a href="#see_also">See Also</a></li><li><a href="#configure_as_code">Configure As Code</a></li></ul><h3>Before You Begin</h3><ul><li>See <a href="/article/4o7oqwih6h-harness-key-concepts">Harness Key Concepts</a>.</li><li>See <a href="/article/au38zpufhr-secret-management">Secrets Management Overview</a>.</li></ul><h3>Limitations</h3><ul><li>Secrets saved to GSM must follow the naming limitations of GSM. In GSM, secret names can only contain English letters (A-Z), numbers (0–9), dashes (-), and underscores (_).</li><li>The maximum size for encrypted files saved to GSM is 64KiB.</li><li>Harness Secrets saved to GSM are assigned to a GCP region automatically. An automatic assignment is the same as not selecting the <strong>Regions</strong> setting when creating a secret in GSM.</li><li>GSM secret labels aren&#39;t supported in Harness at this time.</li><li><strong>Versions:</strong><ul><li>GSM versions aren&#39;t supported in Harness at this time. Harness only supports the latest version of the secret.</li><li>When you change the content of a secret stored by Harness in GSM, a new version of that secret is created. That is the latest version, and that version is used by Harness.</li><li>When you delete a secret in Harness that is stored in GSM, the entire secret is deleted, not just a version.</li></ul></li><li>An existing GSM secret&#39;s name cannot be updated using the Harness Secret Manager. Only the content of the secret is updated.</li><li><strong>Migration:</strong> You can migrate <strong>inline secrets</strong> (existing secrets created in Harness) to and from your Harness GSM secrets manager. Any <a href="/article/cwp7rlauzn-reference-existing-secrets">secret references</a> to secrets in your GSM secrets manager are not migrated.</li></ul><h3>Supported Platforms and Technologies</h3><p>See <a href="/article/220d0ojx5y-supported-platforms">Supported Platforms and Technologies</a>.</p><h3>Review: Permissions</h3><ul><li><strong>Harness Permissions:</strong> to add a GSM secret manager, a Harness User must belong to a Harness User Group with the <strong>Manage Secrets Managers</strong> Account Permission.</li><li><strong>GCP Permissions:</strong> The GCP Service Account you use in the <strong>Google Secrets Manager Credentials File</strong> should have the following IAM roles:<ul><li><code>roles/secretmanager.admin</code> or <code>roles/secretmanager.secretAccessor</code> and <code>roles/secretmanager.secretVersionManager</code>.</li></ul></li></ul><p>See <a href="https://cloud.google.com/secret-manager/docs/access-control" target="_blank">Managing secrets</a> from Google.</p><h3>Step 1: Add a Secrets Manager</h3><ol><li>Select <strong>Security</strong> &gt; <strong>Secrets Management</strong>. The <strong>Secrets Management</strong> page appears.</li><li>Click <strong>Configure Secrets Managers</strong>. On the <strong>Secrets Managers</strong> page, the <strong>Status</strong> column indicates the default provider.</li><li>Click <strong>Add Secrets Manager</strong>. The <strong>Configure Secrets Manager</strong> dialog appears.</li><li>Select <strong>GCP Secrets Manager</strong>.</li></ol><h3>Step 2: Display Name</h3><p>Enter a display name for the secrets manager.</p><p>The name can include letters, numbers, spaces, and the following characters: <code>&#39; - !</code></p><h3>Step 3: Attach Service Account Key (Credentials) File</h3><p>Export your Google Cloud service account key, and attach it to the Harness <strong>Configure Secrets Manager</strong> dialog, as follows:</p><ol><li>In the Google Cloud console, select <strong>IAM &amp; admin</strong> &gt; <strong>Service account</strong>.</li><li>Scroll to the service account you want to use. If no service account is present, create one.</li><li>Grant this service account the GSM permissions needed.<br/>To do this, edit the service account and click <strong>Permissions</strong>. Click <strong>Roles</strong>, and then add the roles needed.<br/>See <a href="https://cloud.google.com/secret-manager/docs/access-control" target="_blank">Managing secrets</a> from Google.</li><li>Open your service account&#39;s Actions ⋮ menu, then select <strong>Create key.</strong><figure><a href="https://files.helpdocs.io/kw8ldg1itf/articles/32poj7ap92/1576190233970/image.png"><img src="https://files.helpdocs.io/kw8ldg1itf/articles/32poj7ap92/1576190233970/image.png" style="max-height:30%;max-width:30%" data-hd-height="30%" data-hd-width="30%"/></a></figure></li><li>In the resulting <strong>Create private key</strong> dialog, select the <strong>JSON</strong> option, create the key, and download it to your computer.</li><li>Return to Harness Manager&#39;s <strong>Configure Secrets Manager</strong> dialog.</li><li>In <strong>Google Secrets Manager Credentials File</strong>, click the <strong>Choose File</strong> button, and upload the key file you just exported from Google Cloud.</li><li>Click <strong>Submit</strong>. Your GSM will now appear in Harness Manager&#39;s <strong>Secrets Managers</strong> list, labeled with the <strong>Display Name</strong> you assigned.</li></ol><h3>Step 4: Usage Scope</h3><p>See <a href="https://docs.harness.io/article/e4ikpd00f6-scope-secret-managers-to-applications-and-environments">Scope Secret Managers to Applications and Environments</a>.</p><h3>Option: Reference Existing Secrets</h3><p>Create new Encrypted Text and File secrets in Harness using the existing secrets in Google Cloud Secret Manager.</p><p>See <a href="/article/cwp7rlauzn-reference-existing-secrets">Reference Existing Secret Manager Secrets</a>.</p><h3>Option: Migrate Existing Secrets to GSM</h3><p>You can migrate <strong>inline secrets</strong> from the Harness Secrets Manager to GSM.</p><p>See <a href="/article/prjsaaev0c-migrate-secrets-between-secrets-managers">Migrate Secrets between Secrets Managers</a>.</p><h3>Notes</h3><ul><li>In <a href="/article/kihlcbcnll-audit-trail">Harness Audit Trail</a>, the event for adding a GSM secret manager is <code>Google Secrets Manager Connected</code>.</li><li>You can see a secret&#39;s usage in Harness. See <a href="/article/8bldcebkkf-managing-harness-secrets">View Secrets Usage</a>.</li></ul><h3>See Also</h3><ul><li><a href="/article/ygyvp998mu-use-encrypted-text-secrets">Use Encrypted Text Secrets</a></li><li><a href="/article/nt5vchhka4-use-encrypted-file-secrets">Use Encrypted File Secrets</a></li><li><a href="/article/o5ec7vvtju-secrets-and-log-sanitization">Secrets and Log Sanitization</a></li><li><a href="/article/e4ikpd00f6-scope-secret-managers-to-applications-and-environments">Scope Secret Managers to Applications and Environments</a></li></ul><h3>Configure As Code</h3><p>To see how to configure the settings in this topic using YAML, configure the settings in the UI first, and then click the YAML editor button (<span style="color:#fb9e00" data-hd-color="#fb9e00"><strong>&lt;/&gt;</strong></span>).</p>