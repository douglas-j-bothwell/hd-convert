<p>Configuration As Code allows you to configure Pipelines, Triggers, Workflows, Environments, and Services in Harness using YAML. Nearly everything you can do in the Harness platform GUI, you can do in YAML as well.</p><p>In an enterprise, you might have hundreds of apps and teams. In such a case, defining all your deployment Pipelines and configurations using Harness GUI can be time-consuming and difficult to use.</p><p>Configuration as Code provides the ability to define the whole configuration using YAML syntax. This approach provides the following major benefits:</p><ul><li>Automation and Consistency (templates)</li><li>Version Control</li><li>Scalability</li><li>Traceability</li></ul><p>Using the Harness code editor, you can set up and manage accounts for artifact servers, cloud providers, and verification providers. You can edit Application services, Environments, Workflows, etc. all in YAML. You can sync your Git repo with Harness to simply use YAML files in your source repo to make changes to Harness.</p><p>Here is the same Harness Workflow in the Harness GUI, Harness code editor, and a Git repo.</p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/htvzryeqjw/1541459754650/image.png" style="max-height:70%;max-width:70%" data-hd-height="70%" data-hd-width="70%"/></figure><p>In this topic:</p><ul><li><a href="#before_you_begin">Before You Begin</a></li><li><a href="#sync_scenarios_overview">Sync Scenarios Overview</a></li><li><a href="#rapid_development_with_harness_and_git">Rapid Development with Harness and Git</a></li><li><a href="#using_rbac_for_yaml_files">Using RBAC for YAML Files</a></li><li><a href="https://docs.harness.io/article/htvzryeqjw-configuration-as-code#update_a_file_using_git_and_harness_manager_ui_at_the_same_time">Update a File Using Git and Harness Manager UI at the Same Time</a></li><li><a href="https://docs.harness.io/article/htvzryeqjw-configuration-as-code#limitations">Limitations</a></li><li><a href="#next_steps">Next Steps</a></li></ul><h3>Before You Begin</h3><ul><li>if you&#39;re trying to resolve git sync issues, see <a href="/article/0ralbeajno-diagnose-git-errors">Diagnose Git Sync Errors</a>.</li><li>Connect your Git provider to Harness using the steps in <a href="/article/ay9hlwbgwa-add-source-repo-providers">Add Source Repo Providers</a>.</li><li>Trigger Harness Workflow and Pipeline execution from Git using Harness Triggers. See <a href="https://docs.harness.io/article/xerirloz9a-add-a-trigger-2#manual_triggers_and_git_webhooks">Manual Triggers and Git Webhooks</a> and <a href="/article/xerirloz9a-add-a-trigger-2#file_based_repo_triggers">File-based Repo Triggers</a>.<div class="note-callout"><a href="https://docs.harness.io/article/21kgaw4h86-harness-yaml-code-reference#triggers">YAML-based Triggers</a> are not enabled by default. To enable them, contact  <a href="https://mail.google.com/mail/?view=cm&amp;fs=1&amp;tf=1&amp;to=support@harness.io" target="_blank">Harness Support</a>.</div></li><li>Review the <a href="/article/21kgaw4h86-harness-yaml-code-reference">Harness YAML Code Reference</a>.</li></ul><h3>Sync Scenarios Overview</h3><p>Here is a visual summary of Git to Harness sync:</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/htvzryeqjw/1586048059575/image.png" style="max-height:60%;max-width:60%" data-hd-height="60%" data-hd-width="60%"/></figure><p>Here is a visual summary of Harness to Git sync:</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/htvzryeqjw/1586048049899/image.png" style="max-height:60%;max-width:60%" data-hd-height="60%" data-hd-width="60%"/></figure><p>The following table provides an overview of the sync scenarios and how to configure them.</p><table><tbody><tr><td><p><strong>Sync Scenario</strong></p></td><td><p><strong>Configuration</strong></p></td></tr><tr><td><p>Sync one-way (<strong>unidirectionally</strong>) from Harness to your Git repo.</p></td><td><p>Set up a Source Repo Provider with your repo and do not enable the <strong>Generate Webhook URL</strong> option or apply the Webhook to the Git repo.</p><p>Select this Source Repo Provider for all applications that you want to sync unidirectionally.</p></td></tr><tr><td><p>Sync two-way (<strong>bidirectionally</strong>) between Harness and your Git repo.</p></td><td><p>Set up a Source Repo Provider with your repo and apply the Webhook created by the <strong>Generate Webhook URL</strong> option to the Git repo.</p><div class="note-callout">Ensure that the <strong>Content type</strong> in your repo Webhook is set to <strong>application/json</strong>. By default, some repos are set to application/x-www-form-urlencoded.</div><p>Select this Source Repo Provider for all applications that you want to sync bidirectionally.</p></td></tr><tr><td><p>Stop syncing an application with a Git repo, but keep the Source Repo Provider connected for future syncs.</p></td><td><p>In the <strong>Git Sync</strong> setting for the application, turn off the <strong>Enable/Disable</strong> setting. Later, when you want to start syncing again, turn on the <strong>Enable/Disable</strong> setting.</p></td></tr><tr><td><p>Stop using a Source Repo provider with an application.</p></td><td><p>In the <strong>Git Sync</strong> setting for the application, click <strong>DELINK</strong>.</p></td></tr><tr><td><p>Have the Source Repo Provider sync bidirectionally with the Git repo, but have an application using that Source Repo Provider only sync unidirectionally.</p></td><td><p>This is not available.</p></td></tr></tbody></table><p></p><div class="note-callout">Repo and brach names may not contain characters from the Emoticons unicode block.</div><h3>Rapid Development with Harness and Git</h3><p>One of the advantages with Harness Git integration is the ability to clone or duplicate a Harness Application entity quickly in the Git repo, and then have the cloned entity show up in the Harness platform. For example, you can clone a Harness Environment in the Harness GUI using the <strong>Clone</strong> button.</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/htvzryeqjw/1541548890394/image.png" style="max-height:30%;max-width:30%" data-hd-height="30%" data-hd-width="30%"/></figure><p>But if you wish to make several copies, this can be time-consuming in the GUI.</p><p>With Harness GitOps, you can simply duplicate the environment folder in Git, give the duplicate folder a unique name, and push it to the origin. The new environment will appear in Harness. For more information, see <a href="https://docs.harness.io/category/goyudf2aoh-harness-gitops">Harness GitOps</a>.</p><h3>Using RBAC for YAML Files</h3><p>You manage Harness User permissions using Account and Application permissions in Harness User Groups.</p><p>The same Account and Application permissions apply to both the Harness Manager UI and Configure as Code YAML files.</p><p>For more information on how to manage RBAC, see <a href="/article/ven0bvulsj-users-and-permissions">Managing Users and Groups (RBAC)</a>.</p><h4>Harness User Group Account Permissions</h4><p>To manage Configuration as Code, a Harness User must be a member of a User Group with the following <strong>Account Permissions</strong> enabled:</p><ul><li>Manage Config as Code</li><li>Manage Applications</li></ul><p>See <a href="/article/ven0bvulsj-users-and-permissions">Managing Users and Groups (RBAC)</a>.</p><h4>Harness Entity YAML Files</h4><p>Harness entities such as Cloud Providers, Connectors, Delegates, etc, have their own Account Permissions.</p><p>These Account Permissions apply equally to the Harness Manager UI and YAML files.</p><h3>Update a File Using Git and Harness Manager UI at the Same Time</h3><p>If a Git push and Harness Manager UI change to the <strong>same file</strong> happen in parallel, the Harness Manager UI change takes precedence over the Git change.</p><p>Harness rejects pull requests with timestamps that conflict with updates from its database.</p><h3>Git Polling</h3><div class="note-callout">Currently, this feature is behind the feature flag <code>CG_GIT_POLLING</code>. Contact Harness Support to enable the feature.</div><p>The sync from Git to Harness happens when Harness receives a webhook from Git.</p><p>If Harness misses any webhook, it can result in sync issues and inconsistencies.</p><p>Harness might miss a webhook due to one of the following reasons:</p><ul><li>Git provider is down.</li><li>Harness has connectivity issues.</li></ul><p>Harness handles such scenarios through Git Polling. Every five minutes, it starts a polling job to see whether any Git commits have been missed. If any, it processes the missed commits before moving on.</p><h3>Limitations</h3><ul><li>If you rename a Pipeline in Git and sync that change with Harness, any Triggers using that Pipeline are deleted.</li><li>If you rename a Workflow in Git and sync that change with Harness, Triggers are maintained because a duplicate that Pipeline are deleted.</li><li>You cannot add any custom YAML fields to your synced Harness files. Harness will remove any fields it does not recognize.</li></ul><h3>Next Steps</h3><ul><li><a href="/article/apiwdqngvz-harness-account-level-sync">Harness Account-Level Git Sync</a></li><li><a href="/article/6mr74fm55h-harness-application-level-sync">Harness Application-Level Git Sync</a></li><li><a href="/article/r5vya3dlt0-edit-the-code-in-harness">Edit Harness Components as YAML</a></li><li><a href="/article/r8qvurlqiy-delink-git-sync">Delink Git Sync</a></li></ul><p></p>