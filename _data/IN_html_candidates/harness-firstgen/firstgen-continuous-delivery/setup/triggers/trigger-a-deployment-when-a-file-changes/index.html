<div class="note-callout">File-based repo Triggers are currently supported only for Native Helm and Helm-based Kubernetes deployments. For more information, see <a href="/article/i3n6qr8p5i-deployments-overview#kubernetes_or_helm">Kubernetes or Helm?</a>.</div><p>For <a href="/article/wqytbv2bfd-ci-cd-with-the-build-workflow">Build Workflows</a> or a  <a href="/article/0tphhkfqx8-artifact-build-and-deploy-pipelines-overview">Build and Deploy Pipeline</a>, you can trigger deployments in response to a Git event using Webhooks. This is described in <a href="/article/ys3cvwm5gc-trigger-a-deployment-on-git-event">Trigger Deployments using Git Events</a>.</p><p>In some Webhook Trigger scenarios, you might set a Webhook on your repo to trigger a Workflow or Pipeline when a Push event occurs in the repo. However, you might want to initiate the Trigger only when <strong>specific files</strong> in the repo are changed.</p><p>For example, if you have a Trigger that executes a Helm Deployment workflow, and the Workflow uses a values.yaml file from a Git repo, you might want to initiate the Trigger only when that values.yaml file is changed.</p><p>This topic describes how to set up and run a file-based Trigger.</p><p>In this topic:</p><ul><li> <a href="#before_you_begin">Before You Begin</a></li><li> <a href="#limitations">Limitations</a></li><li> <a href="#step_1_create_the_git_webhook_trigger">Step 1: Create the Git Webhook Trigger</a></li><li> <a href="#step_2_select_the_files_to_watch">Step 2: Select the Files to Watch</a></li><li> <a href="#review_branch_regex_push_and_pull">Review: Branch Regex Push and Pull</a></li><li> <a href="#related_topics">Related Topics</a></li></ul><h3>Before You Begin</h3><ul><li> <a href="/article/wqytbv2bfd-ci-cd-with-the-build-workflow">Build Workflows</a></li><li> <a href="/article/0tphhkfqx8-artifact-build-and-deploy-pipelines-overview">Build and Deploy Pipeline</a></li><li> <a href="/article/eb3kfl8uls-service-configuration">Add a Service</a></li><li> <a href="/article/m220i1tnia-workflow-configuration">Workflows</a></li><li> <a href="/article/n39w05njjv-environment-configuration">Add Environment</a></li><li> <a href="/article/zc1u96u6uj-pipeline-configuration">Create a Pipeline</a></li></ul><h3>Limitations</h3><p>In the <strong>Actions</strong> section of the Trigger, the <strong>Deploy only if files have changed</strong> option is displayed only if the following conditions are met:</p><ul><li>The Workflow selected deploys a Harness Kubernetes or Native Helm Service.</li><li>The <strong>On Push</strong> event is selected.</li></ul><p>For more information, see <a href="/article/i3n6qr8p5i-deployments-overview#kubernetes_or_helm">Kubernetes or Helm?</a>.</p><h3>Step 1: Create the Git Webhook Trigger</h3><p>Follow the steps in <a href="/article/ys3cvwm5gc-trigger-a-deployment-on-git-event">Trigger Deployments using Git Events</a>.</p><p>In <strong>Condition</strong>, select <strong>On Webhook Event</strong>.</p><p>In <strong>Payload Type</strong>, select the repository type (GitHub, Bitbucket, GitLab).</p><p>In <strong>Event Type</strong>, select the <strong>On Push</strong> Webhook event.</p><p>When you get to the <strong>Actions</strong> section, click <strong>Deploy only if files have changed</strong>.</p><p>The file-based, repo-related settings appear.</p><h3>Step 2: Select the Files to Watch</h3><ol><li>In <strong>Git Connector</strong>, select which of the SourceRepro Providers set up in Harness to use. These are the connections between Harness and your Git repos. For more information, see <a href="/article/ay9hlwbgwa-add-source-repo-providers">Add SourceRepo Providers</a>.</li><li>In <strong>Branch Name</strong>, enter the name of the branch to use.</li><li>In <strong>File Path</strong>, enter the file name for the file that, when changed and Pushed, will execute this Trigger.<br/>For multiple file paths, use commas or line breaks as separators. For example, <code>sample-manifests/values.yaml, index.yaml</code>.<div class="note-callout">Wildcards are <u>not</u> supported for <strong>Branch Name</strong> or <strong>File Path</strong>.</div>When you are done, the <strong>Skip deployment if file(s) not changed</strong> section will look something like this:<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/xerirloz9a/1543275784224/image.png" style="max-height:35%;max-width:35%" data-hd-height="35%" data-hd-width="35%"/></figure></li><li>Click <strong>Next</strong> and then <strong>Submit</strong>.</li></ol><p>Now you can add the Webhook for that Trigger to the repo you selected, as described in <a href="/article/ys3cvwm5gc-trigger-a-deployment-on-git-event">Trigger Deployments using Git Events</a>.</p><p>When the file you entered is changed and Pushed, the Trigger will execute.</p><h3>Review: Branch Regex Push and Pull</h3><p>For merging changes, use the <strong>On Pull Request</strong> event type and not <strong>On Push</strong>. There is no source or destination in push. It has an old state and a new state. See <a href="https://support.atlassian.com/bitbucket-cloud/docs/event-payloads/" target="_blank">Event Payloads</a> from Atlassian.</p><p>The On Pull Request has a source and a destination branch. See <a href="https://confluence.atlassian.com/bitbucket/event-payloads-740262817.html#EventPayloads-entity_pullrequest" target="_blank">Pull Request</a> from Atlassian.</p><p>The following is a list of exactly which keys the <strong>On Pull Request</strong> and <strong>On Push</strong> events refer to:</p><ul><li>Github — push branch ref: <code>${ref.split(&#39;refs/heads/&#39;)[1]}</code></li><li>Github — pull branch ref: <code>${pull_request.head.ref}</code></li><li>GitLab — push branch ref: <code>${ref.split(&#39;refs/heads/&#39;)[1]}</code></li><li>GitLab — pull branch ref: <code>${object_attributes.source_branch}</code></li><li>BitBucket — push branch ref: <code>${push.changes[0].&#39;new&#39;.name}</code></li><li>BitBucket — push branch ref on-premises: <code>${changes[0].refId.split(&#39;refs/heads/&#39;)[1]}</code><ul><li>You must also select event type as <code>Refs_changed</code>.</li></ul></li><li>BitBucket — pull branch ref: <code>${pullrequest.source.branch.name}</code></li><li>BitBucket — pull branch ref on-premises: <code>${pullRequest.fromRef.displayId}</code></li></ul><p></p><h3>Related Topics</h3><ul><li> <a href="/article/revc37vl0f-passing-variable-into-workflows">Passing Variables into Workflows from Triggers</a></li><li>For information on using Triggers as part of Harness Git integration, see <a href="/article/3av5pc4goc-onboard-teams-using-git-ops">Onboard Teams Using Git</a>.</li><li> <a href="/article/s2m2ksxn6a-trigger-a-deployment-on-new-artifact">Trigger Deployments When a New Artifact is Added to a Repo</a></li><li> <a href="/article/tb66fmh4iz-trigger-a-deployment-on-a-time-schedule">Schedule Deployments using Triggers</a></li><li> <a href="/article/nihs2y2z61-trigger-a-deployment-on-pipeline-completion">Trigger Deployments when Pipelines Complete</a></li><li> <a href="/article/uccck6kq5m-get-deployment-status-using-rest">Get Deployment Status using REST</a></li><li> <a href="/article/3key6nybou-trigger-a-deployment-using-a-url">Trigger a Deployment using a URL</a></li><li> <a href="/article/ys3cvwm5gc-trigger-a-deployment-on-git-event">Trigger Deployments using Git Events</a></li><li> <a href="/article/mc2lxsas4c-trigger-a-deployment-using-c-url">Trigger a Deployment using cURL</a></li><li> <a href="/article/6vlut5qvlf-freeze-triggers">Pause All Triggers using Deployment Freeze</a></li></ul><p></p>