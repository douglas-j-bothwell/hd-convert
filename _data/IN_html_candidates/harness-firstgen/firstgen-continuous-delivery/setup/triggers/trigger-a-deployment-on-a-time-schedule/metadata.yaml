type: article
article_id: tb66fmh4iz
user_id: mfr0nxh4be
category_id: weyg86m5qp
author:
  name: Michael Cretzman
  profile_image: https://www.gravatar.com/avatar/2e8616837f4ee92be5d19ffe9b9ccba9?d=mm&s=150
title: Schedule Deployments using Triggers
slug: trigger-a-deployment-on-a-time-schedule
description: You can trigger Harness Workflow and Pipeline deployments on a time schedule.
  You can select how often to execute the Trigger by hour, days, etc. All the cron
  jobs are executed in Universal Time Coor…
short_version: You can trigger Harness Workflow and Pipeline deployments on a time
  schedule. You can select how often to execute the Trigger by hour, days, etc. All
  the cron jobs are executed in Universal Time Coor…
tags: []
show_toc: true
is_private: false
is_published: true
is_featured: false
stale_status:
  is_stale: false
  reason: Article updated
  source: API
  triggered_at: 2022-02-17T22:17:34.15486Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: Schedule Deployments using Triggers
  description: ""
  short_version: ""
  body: '<p>You can trigger Harness Workflow and Pipeline deployments on a time schedule.
    You can select how often to execute the Trigger by hour, days, etc.</p><p>All
    the cron jobs are executed in Universal Time Coordinated (UTC). You can also apply
    the time condition to new artifacts only.</p><p>In this topic:</p><ul><li> <a
    href="#before_you_begin">Before You Begin</a></li><li> <a href="#limitations">Limitations</a></li><li>
    <a href="#step_1_add_a_trigger">Step 1: Add a Trigger</a></li><li> <a href="#step_2_schedule_trigger_execution">Step
    2: Schedule Trigger Execution</a></li><li> <a href="#option_on_new_artifact_only">Option:
    On New Artifact Only</a></li><li> <a href="#step_3_select_the_workflow_or_pipeline_to_deploy">Step
    3: Select the Workflow or Pipeline to Deploy</a></li><li> <a href="#step_4_provide_values_for_workflow_variables">Step
    4: Provide Values for Workflow Variables</a></li><li> <a href="#step_5_select_the_artifact_to_deploy">Step
    5: Select the Artifact to Deploy</a><ul><li> <a href="#last_collected">Last Collected</a></li><li>
    <a href="#last_successfully_deployed">Last Successfully Deployed</a></li></ul></li><li>
    <a href="#configure_as_code">Configure As Code</a></li><li> <a href="#related_topics">Related
    Topics</a></li></ul><h3>Before You Begin</h3><ul><li> <a href="/article/eb3kfl8uls-service-configuration">Add
    a Service</a></li><li> <a href="/article/m220i1tnia-workflow-configuration">Workflows</a></li><li>
    <a href="/article/n39w05njjv-environment-configuration">Add Environment</a></li><li>
    <a href="/article/zc1u96u6uj-pipeline-configuration">Create a Pipeline</a></li></ul><p></p><h3>Limitations</h3><ul><li>On
    Time Schedule Triggers must be equal to or greater than 5 minutes. This includes
    CRON expressions. If the CRON expression uses a schedule less than 5 minutes,
    you will see a warning such as:<br/><code>Deployments must be triggered at intervals
    greater than or equal to 5 minutes.</code></li></ul><h3>Step 1: Add a Trigger</h3><p>Typically,
    Triggers are set up after you have successfully deployed and tested a Workflow
    or Pipeline.</p><p>To add a trigger, do the following:</p><ol><li>Ensure that
    you have a Harness Service, Environment, and Workflow set up. If you want to Trigger
    a Pipeline, you&#39;ll need one set up also.</li><li>In your Harness Application,
    click <strong>Triggers</strong>.</li><li>Click <strong>Add Trigger</strong>. The
    <strong>Trigger</strong> settings appear.</li><li>In <strong>Name</strong>, enter
    a name for the Trigger. This name will appear in the <strong>Deployments</strong>
    page to indicate the Trigger that initiated a deployment.</li><li>Click <strong>Next</strong>.</li></ol><h3>Step
    2: Schedule Trigger Execution</h3><p>You set the schedule for the Trigger using
    a quartz expression. The Harness Manager uses the schedule you set to execute
    the Trigger. The Universal Time Coordinated (UTC) time zone is used.</p><ol><li>In
    <strong>Condition</strong>, select <strong>On Time Schedule</strong>.</li><li>In
    <strong>Trigger Every</strong>, select the schedule.</li><li>Click <strong>Next</strong>.</li></ol><p>If
    you select <strong>Custom CRON Expression</strong>, the time format must be a
    cron <strong>quartz</strong> expression.</p><p>Harness implicitly adds a prefix
    for seconds so it does not have to be specified explicitly.</p><p>For example,
    to execute the Trigger every 12 hours, the quartz expression would be <code>0
    0 0/12 ? * * *</code>, but you would enter <code>0 0/12 ? * * *</code> because
    Harness adds the <code>0</code> prefix.</p><p>Let&#39;s look at another example.
    If you want to invoke a trigger at a certain time, say at <strong>03:10 at 4 day
    at February month at 2022 year UTC</strong>, then you can provide custom CRON
    expression as <strong>10 3 4 FEB ? 2022.</strong></p><div class="note-callout">Harness
    does not support seconds-level granularity in cron expressions when firing Triggers.</div><p>For
    a quartz expression calculator and examples, see  <a href="https://www.freeformatter.com/cron-expression-generator-quartz.html"
    target="_blank">Cron Expression Generator &amp; Explainer</a>.</p><h3>Option:
    On New Artifact Only</h3><p>If you want the scheduled Trigger to execute with
    a new artifact, select <strong>On New Artifact Only</strong>.</p><p>If you enable
    this setting, the Trigger will continue to be executed on schedule, and it will
    use the last artifact collected when it runs.</p><p>There must be at least one
    successful deployment with the specific artifact for it to be qualified as the
    new artifact for the Trigger. Then, Harness checks every new artifact against
    the last deployed artifact.</p><p>If the last artifact failed to deploy, Harness
    will use the last successfully deployed artifact.</p><p>Artifact metadata is collected
    automatically every minute by Harness.</p><p>You can also manually collect artifact
    metadata using the Service&#39;s <strong>Manually pull artifact</strong> feature.</p><h3>Step
    3: Select the Workflow or Pipeline to Deploy</h3><ol><li>In <strong>Execution
    Type</strong>, select <strong>Workflow</strong> or <strong>Pipeline</strong>.</li><li>In
    <strong>Execute Workflow</strong>/<strong>Pipeline</strong>, select the Workflow
    or Pipeline to deploy.</li></ol><h3>Step 4: Provide Values for Workflow Variables</h3><p>If
    the Workflow or Pipeline you selected to deploy uses Workflow variables, you will
    need to provide values for these variables.</p><p>You can also use variable expressions
    for these values. See <a href="/article/revc37vl0f-passing-variable-into-workflows">Passing
    Variables into Workflows from Triggers</a>.</p><h3>Step 5: Select the Artifact
    to Deploy</h3><p>Since Workflows deploy Harness Services, you are also prompted
    to provide the Artifact Source for the Service(s) the Workflow(s) will deploy.</p><h4>Last
    Collected</h4><p>Select this option to use the last artifact collected by Harness
    in the Harness Service. Artifact metadata is collected automatically every minute
    by Harness.</p><p>You can also manually collect artifact metadata using the Service&#39;s
    <strong>Manually pull artifact</strong> feature.</p><h4>Last Successfully Deployed</h4><p>The
    last artifact that was deployed by the Workflow you select.</p><h3>Configure As
    Code</h3><p>To see how to configure the settings in this topic using YAML, configure
    the settings in the UI first, and then click the YAML editor button (<span style="color:#fb9e00"
    data-hd-color="#fb9e00"><strong>&lt;/&gt;</strong></span>).</p><h3>Related Topics</h3><ul><li>
    <a href="/article/revc37vl0f-passing-variable-into-workflows">Passing Variables
    into Workflows from Triggers</a></li><li>For information on using Triggers as
    part of Harness Git integration, see <a href="/article/3av5pc4goc-onboard-teams-using-git-ops">Onboard
    Teams Using Git</a>.</li><li> <a href="/article/s2m2ksxn6a-trigger-a-deployment-on-new-artifact">Trigger
    Deployments When a New Artifact is Added to a Repo</a></li><li> <a href="/article/nihs2y2z61-trigger-a-deployment-on-pipeline-completion">Trigger
    Deployments when Pipelines Complete</a></li><li> <a href="/article/ys3cvwm5gc-trigger-a-deployment-on-git-event">Trigger
    Deployments using Git Events</a></li><li> <a href="/article/mc2lxsas4c-trigger-a-deployment-using-c-url">Trigger
    a Deployment using cURL</a></li><li> <a href="/article/zr4tgwrzlb-trigger-a-deployment-when-a-file-changes">Trigger
    a Deployment when a File Changes</a></li><li> <a href="/article/uccck6kq5m-get-deployment-status-using-rest">Get
    Deployment Status using REST</a></li><li> <a href="/article/6vlut5qvlf-freeze-triggers">Pause
    All Triggers using Deployment Freeze</a></li></ul><p></p><p></p>'
  slug: trigger-a-deployment-on-a-time-schedule
  tags: []
  is_live: true
