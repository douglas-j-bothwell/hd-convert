<p>This topic describes how to add a Docker Artifact Source in a Harness Service.</p><div class="note-callout">Do not use Docker Registry to connect to a Docker resource on Artifactory. See <a href="https://docs.harness.io/article/7dghbx1dbl-configuring-artifact-server#artifactory">Artifactory</a>.</div><p>For details on using Docker with Kubernetes, see <a href="/article/6ib8n1n1k6-add-container-images-for-kubernetes-deployments">Add Container Images for Kubernetes Deployments</a>. For details on using Docker with Helm, see <a href="/article/583ojfgg49-helm-deployments-overview">Helm Deployments Overview</a>.</p><p></p><h3>Before You Begin</h3><ul><li>Read the <a href="/article/bucothemly-application-configuration">Create an Application</a> topic to get an overview of how Harness organizes Services.</li><li>Read the <a href="/article/eb3kfl8uls-service-configuration">Add a Service</a> topic to understand the process to add a Service to an Application.</li><li>Read <a href="/article/htvzryeqjw-configuration-as-code">Configuration as Code</a> to see how you can quickly configure your Harness Service using your existing YAML in Git.</li><li><a href="/article/7dghbx1dbl-configuring-artifact-server">Add Artifact Servers</a></li></ul><h3>Limitations</h3><p>For pulling Docker images from Docker repos, Harness has the following limits:</p><ul><li>10000 for private Docker repos</li><li>250 for public (no username or password required) Docker repos</li></ul><h3>Review: Metadata Used for Docker Image</h3><p>If the Artifact Source is <strong>Docker</strong>, at runtime the Harness Delegate will use the metadata to initiate a pull command from the deployment target host(s), and pull the artifact from the registry (Docker Registry, ECR, etc) to the target host.</p><p>To ensure the success of this artifact pull, the host(s) running the target host(s) <span style="color:#f44e3b" data-hd-color="#f44e3b"><strong>must</strong></span> have network connectivity to the registry.</p><p>See <a href="/article/qluiky79j8-service-types-and-artifact-sources">Service Types and Artifact Sources</a>.</p><h3>Review: Sorting of Artifacts</h3><p>You add a Docker image to Harness by connecting to your repo using a <a href="/article/7dghbx1dbl-configuring-artifact-server">Harness Artifact Server</a>, and then by entering its name in a Harness Service&#39;s Artifact Source <strong>Docker Image Name</strong> setting.</p><p>Once you enter the name and click <strong>Submit</strong>, Harness checks to make sure the artifact exists. To verify the name, Harness collects all of the artifacts from the repo you entered.</p><p>Many of the APIs do not support sorted results, and so the artifacts are returned in a random order. Consequently, Harness has to sort the artifacts after it collects them.</p><p>Harness sorts the artifacts alphanumerically and then displays them in the Harness Manager with the most recent artifacts listed first.</p><p>If you push a new artifact to your repo, or rename an artifact, and then refresh the list using the <strong>Artifact History</strong> feature in the Harness Service, the new artifact will be listed first.</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/gxv9gj6khz/1607107438095/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p></p><h3>Step: Add a Docker Artifact Source</h3><p>A Docker Image artifact can be used in a number of different Harness Service types (Kubernetes, Helm, etc). You can specify container commands for the artifact, enter configuration variables and files, and use YAML for specific Service types.</p><p>To specify a Docker Image Artifact Source for your Harness Service, do the following:</p><ol><li>Ensure you have set up an Artifact Server. See <a href="/article/7dghbx1dbl-configuring-artifact-server">Add Artifact Servers</a>.</li><li>In the <strong>Service Overview</strong>, click <strong>Add Artifact Source</strong> and select the type of artifact source for your service.<br/>The <strong>Artifact Source</strong> dialog appears with settings specific to the artifact source type you selected. For instructions on the artifact source you selected.</li></ol><h3 class="wysiwyg-indent2">Option 1: Docker Registry Artifact Source</h3><div class="note-callout">Do not use Docker Registry to connect to a Docker resource on Artifactory. UseÂ  <a href="https://docs.harness.io/article/7dghbx1dbl-configuring-artifact-server#artifactory">Artifactory</a>.</div><p>The Docker Registry Artifact Source has the following fields.</p><table><tbody><tr><td><p><strong>Field</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p><strong>Name</strong></p></td><td><p>You can enter a name or have Harness generate one for you automatically.</p></td></tr><tr><td><p><strong>Source Server</strong></p></td><td><p>In <strong>Source Server</strong>, select the name of the artifact source server you added in <a href="/article/7dghbx1dbl-configuring-artifact-server">Add an Artifact Server</a>.</p></td></tr><tr><td><p><strong>Docker Image Name</strong></p></td><td><p>Click in <strong>Docker Image Name</strong> and enter the name of the artifact you want to deploy, such as <strong>library/tomcat</strong>.</p><p>Wildcards are not supported.</p></td></tr></tbody></table><p>If you click <strong>Artifact History,</strong> you will see the build history that Harness pulled from the source server.</p><h3>Option 2: ECR Artifact Source</h3><p>The ECR Artifact Source has the following fields.</p><table><tbody><tr><td><p><strong>Field</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p><strong>Name</strong></p></td><td><p>You can enter a name or have Harness generate one for you automatically.</p></td></tr><tr><td><p><strong>Cloud Provider</strong></p></td><td><p>Select the name of the artifact source server you added in <a href="/article/whwnovprrb-infrastructure-providers">Cloud Providers</a>.</p></td></tr><tr><td><p><strong>Region</strong></p></td><td><p>Select the region where the artifact source is located.</p></td></tr><tr><td><p><strong>Docker Image Name</strong></p></td><td><p>Click in <strong>Docker Image Name</strong> and select or enter the name of the artifact you want to deploy. By default, Harness automatically populates the field with the artifacts available from the ECR source server. Often, images in repos need to reference a path, for example: <strong>app/myImage</strong>.</p></td></tr></tbody></table><p>If you click <strong>Artifact History,</strong> you will see the build history that Harness pulled from the source server.</p><h3>Option 3: Azure Container Registry Artifact Source</h3><p>The Azure Container Registry Artifact Source has the following fields.</p><table><tbody><tr><td><p><strong>Field</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p><strong>Name</strong></p></td><td><p>You can enter a name or have Harness generate one for you automatically.</p></td></tr><tr><td><p><strong>Cloud Provider</strong></p></td><td><p>Select the name of the artifact source server you added in <a href="/article/whwnovprrb-infrastructure-providers">Cloud Providers</a>.</p></td></tr><tr><td><p><strong>Subscription</strong></p></td><td><p>Harness will automatically pull the available GUIDs. Select an Azure Subscription GUID. If you don&#39;t see it, the API might have timed out. Enter the GUID and Harness will query for it.</p></td></tr><tr><td><p><strong>Azure Registry Name</strong></p></td><td><p>Harness will automatically pull the available names. Select a name. If you don&#39;t see it, the API might have timed out. Enter its name and Harness will query for it.</p></td></tr><tr><td><p><strong>Repository Name</strong></p></td><td><p>Harness will automatically pull the available repository names. Select a name. If you don&#39;t see it, the API might have timed out. Enter its name and Harness will query for it.</p></td></tr></tbody></table><p>If you click <strong>Artifact History,</strong> you will see the build history that Harness pulled from the source server.</p><h3>Option 4: GCR Artifact Source</h3><p>The Google Cloud Container Registry (GCR) Artifact Source has the following fields.</p><table><tbody><tr><td><p><strong>Field</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p><strong>Display</strong> <strong>Name</strong></p></td><td><p>You can enter a name or have Harness generate one for you automatically.</p></td></tr><tr><td><p><strong>Cloud Provider</strong></p></td><td><p>Select the name of the artifact source server you added in <a href="/article/whwnovprrb-infrastructure-providers">Cloud Providers</a>.</p></td></tr><tr><td><p><strong>Registry Host Name</strong></p></td><td><p>Once you select a Cloud Provider, the list of registries is populated automatically. Select the registry where the artifact source is located.</p></td></tr><tr><td><p><strong>Docker Image Name</strong></p></td><td><p>Enter the name of the artifact you want to deploy. Images in repos need to reference a path starting with the project ID that the artifact is in, for example: <strong>myproject-id/image-name</strong>.</p></td></tr></tbody></table><p>Here is an example:</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/gxv9gj6khz/1596044395984/image.png"/></figure><p>If you click <strong>Artifact History,</strong> you will see the build history that Harness pulled from the source server.</p><h3>Option 5: Artifactory Artifact Source</h3><p>See <a href="/article/63gnfa6i8z-artifactory-artifact-sources">Artifactory Artifact Sources</a>.</p><h3>Option 6: Nexus Artifact Source</h3><p>See <a href="/article/rdhndux2ab-nexus-artifact-sources">Nexus Artifact Sources</a>.</p><p></p>