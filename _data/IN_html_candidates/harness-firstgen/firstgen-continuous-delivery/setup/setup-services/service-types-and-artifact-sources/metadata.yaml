type: article
article_id: qluiky79j8
user_id: mfr0nxh4be
category_id: u4eimxamd3
author:
  name: Michael Cretzman
  profile_image: https://www.gravatar.com/avatar/2e8616837f4ee92be5d19ffe9b9ccba9?d=mm&s=150
title: Service Types and Artifact Sources
slug: service-types-and-artifact-sources
description: Outlines which Harness deployment types  support metadata-only versus
  file-based artifact sources. Also covers how to build scripts to copy, download,
  and install artifacts.
short_version: Provides a matrix of Harness artifact types and their artifact sources,
  displaying which types support metadata-only versus file sourcessources, and which
  types support both me.
tags:
- metadata
- Artifact Source
- Docker
- Jenkins
- Bamboo
- Docker Registry
- Exec script
- artifact.url
- Copy Artifact
- Download Artifact
show_toc: true
is_private: false
is_published: true
is_featured: false
stale_status:
  is_stale: false
  reason: Article updated
  source: API
  triggered_at: 2022-04-06T19:12:51.917419Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: Service Types and Artifact Sources
  description: Outlines which Harness deployment types  support metadata-only versus
    file-based artifact sources. Also covers how to build scripts to copy, download,
    and install artifacts.
  short_version: Provides a matrix of Harness artifact types and their artifact sources,
    displaying which types support metadata-only versus file sourcessources, and which
    types support both me.
  body: '<p>This topic provides a matrix of Harness Service artifact types and their
    artifact sources. The matrix shows which Service artifact types support metadata-only
    sources, and which types support both metadata and file sources.</p><p>It also
    includes information on how to manage the different source types, and on how to
    copy, download, and install artifacts.</p><p>In this topic:</p><ul><li> <a href="#metadata_and_file_artifact_sources">Metadata
    and File Artifact Sources</a></li><li> <a href="#artifact_sources_and_artifact_type_matrix">Artifact
    Sources and Artifact Type Matrix</a></li><li> <a href="#docker_image_artifacts">Docker
    Image Artifacts</a></li><li> <a href="#copy_and_download_of_metadata_artifact_sources">Copy
    and Download of Metadata Artifact Sources</a><ul><li> <a href="#copy_artifact">Copy
    Artifact</a></li><li> <a href="#download_artifact">Download Artifact</a></li></ul></li><li>
    <a href="#exec_script">Exec Script</a><ul><li> <a href="#add_an_exec_script">Add
    an Exec Script</a></li></ul></li><li> <a href="#copy_artifact_vs_download_artifact">Copy
    Artifact vs Download Artifact</a></li><li> <a href="#copy_artifact_script">Copy
    Artifact Script</a><ul><li> <a href="#adding_a_copy_artifact_script">Adding a
    Copy Artifact Script</a></li></ul></li><li> <a href="#download_artifact_script">Download
    Artifact Script</a></li><li> <a href="#copy_and_download_artifact_provider_support">Copy
    and Download Artifact Provider Support</a></li><li> <a href="#jenkins_and_bamboo_metadata_and_artifact_paths">Jenkins
    and Bamboo Metadata and Artifact Paths</a></li></ul><h3>Metadata and File Artifact
    Sources</h3><p>Harness Services allows you to identify artifacts using their metadata.
    At deployment runtime, Harness uses the metadata to copy or download the artifact
    to the target hosts/containers.</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/qluiky79j8/1642546054963/image.png"/></figure><p>Artifact
    files without metadata were supported previously, and were downloaded to the Harness
    store, but are no longer supported.</p><p></p><h4>Switching to Metadata Only</h4><p>If
    you have file-based Artifact Sources currently set up in your Harness Services
    (meaning, without the Metadata Only option selected), these are still supported.</p><p>In
    the near future, only metadata sources will be supported. You can switch your
    current file-based sources to metadata in advance of this change.</p><div class="note-callout">If
    you switch to <strong>Metadata Only</strong>, it is not applied to previously
    collected artifacts.</div><h4>Artifact Sizes and Limitations</h4><p>Harness has
    a limit of a 1GB file upload. However, Harness directly streams from the artifact
    server if the file size is larger (even larger than 25GB).</p><p>For artifacts
    larger than 1GB, use the <strong>Metadata Only</strong> option in the Harness
    Service <strong>Artifact Source</strong> settings.</p><h3>Artifact Sources and
    Artifact Type Matrix</h3><p>The following table lists the artifact types, such
    as Docker Image and AMI, and the Artifact Sources&#39; support for metadata.</p><p>Legend:</p><ul><li><strong>M</strong>
    - Metadata. This includes Docker image and registry information. For AMI, this
    means AMI ID-only.</li><li><strong>Blank</strong> - Not supported.</li></ul><p></p><table><tbody><tr><td><p><strong>Sources</strong></p></td><td><p><strong>Docker
    Image</strong></p><p>(Kubernetes/Helm/TAS)</p></td><td><p><strong>AWS</strong>
    <strong>AMI</strong></p></td><td><p><strong>AWS CodeDeploy</strong></p></td><td><p><strong>AWS
    Lambda</strong></p></td><td><p><strong>JAR</strong></p></td><td><p><strong>RPM</strong></p></td><td><p><strong>TAR</strong></p></td><td><p><strong>WAR</strong></p></td><td><p><strong>ZIP</strong></p></td><td><p><strong>TAS</strong></p></td><td><p><strong>IIS</strong></p></td></tr><tr><td><p>Jenkins</p></td><td><p></p></td><td><p></p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td></tr><tr><td><p>Docker
    Registry</p></td><td><p>M</p></td><td><p></p></td><td><p></p></td><td><p></p></td><td><p></p></td><td><p></p></td><td><p></p></td><td><p></p></td><td><p></p></td><td><p>M</p></td><td><p></p></td></tr><tr><td><p>Amazon
    S3</p></td><td><p></p></td><td><p></p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td></tr><tr><td><p>Amazon
    AMI</p></td><td><p></p></td><td><p>M</p></td><td><p></p></td><td><p></p></td><td><p></p></td><td><p></p></td><td><p></p></td><td><p></p></td><td><p></p></td><td><p></p></td><td><p></p></td></tr><tr><td><p>Elastic
    Container Registry (ECR)</p></td><td><p>M</p></td><td><p></p></td><td><p></p></td><td><p></p></td><td><p></p></td><td><p></p></td><td><p></p></td><td><p></p></td><td><p></p></td><td><p>M</p></td><td><p></p></td></tr><tr><td><p>Azure
    Reg</p></td><td><p>M</p></td><td><p></p></td><td><p></p></td><td><p></p></td><td><p></p></td><td><p></p></td><td><p></p></td><td><p></p></td><td><p></p></td><td><p></p></td><td><p></p></td></tr><tr><td><p>Azure
    DevOps Artifact</p></td><td><p></p></td><td><p></p></td><td><p>M</p></td><td><p></p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td></tr><tr><td><p>GCS</p></td><td><p></p></td><td><p></p></td><td><p>M</p></td><td><p></p></td><td><p></p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td></tr><tr><td><p>GCR</p></td><td><p>M</p></td><td><p></p></td><td><p></p></td><td><p></p></td><td><p></p></td><td><p></p></td><td><p></p></td><td><p></p></td><td><p></p></td><td><p>M</p></td><td><p></p></td></tr><tr><td><p>Artifactory</p></td><td><p>M</p></td><td><p></p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td></tr><tr><td><p>Nexus</p></td><td><p>M</p></td><td><p></p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p></p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td></tr><tr><td><p>Bamboo</p></td><td><p></p></td><td><p></p></td><td><p>M</p></td><td><p></p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td></tr><tr><td><p>SMB</p></td><td><p></p></td><td><p></p></td><td><p>M</p></td><td><p></p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td></tr><tr><td><p>SFTP</p></td><td><p></p></td><td><p></p></td><td><p>M</p></td><td><p></p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td><td><p>M</p></td></tr></tbody></table><p></p><h3>Docker
    Image Artifacts</h3><p>If the Artifact Source is <strong>Docker</strong>, at runtime
    the Harness Delegate will use the metadata to initiate a pull command from the
    deployment target host(s), and pull the artifact from the registry (Docker Registry,
    ECR, etc) to the target host.</p><p></p><p>To ensure the success of this artifact
    pull, the host(s) running the target host(s) <span style="color:#f44e3b" data-hd-color="#f44e3b"><strong>must</strong></span>
    have network connectivity to the registry.</p><div class="note-callout">The <strong>Copy
    Artifact</strong> script in a Service does not apply to Docker artifacts. For
    Services using Docker artifacts, at runtime the Harness Delegate will execute
    a Docker pull on the target host to pull the artifact. Ensure the target host
    has network connectivity to the Docker artifact server.</div><h3>Copy and Download
    of Metadata Artifact Sources</h3><p>When copying or downloading artifacts, Harness
    uses metadata in the following ways.</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/qluiky79j8/1600378139752/image.png"/></figure><h4>Copy
    Artifact</h4><p>The Copy Artifact command is supported for Artifact Sources that
    use Artifactory, Amazon S3, Jenkins, Bamboo, and Nexus.</p><p>The Copy Artifact
    command is added by default when you create a Harness Service using the deployment
    type <strong>Secure Shell (SSH)</strong>.</p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/qluiky79j8/1584554399711/image.png"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p>During
    deployment runtime, Harness uses the metadata to download the artifact to the
    Harness Delegate. The Delegate then copies the artifact to the target host(s).</p><div
    class="note-callout">Ensure that the Delegate has network connectivity to the
    Artifact Server.</div><h4>Download Artifact</h4><p>For SSH and WinRM Service types,
    the Download Artifact script is supported for many artifact sources, such as Amazon
    S3, Artifactory, Azure, and SMB and SFTP (Powershell-only) artifact sources.</p><p>The
    Download Artifact command is added by default when you create a Harness Service
    using the deployment type <strong>Windows Remote Management (WinRM)</strong>.</p><p></p><figure><img
    src="https://files.helpdocs.io/kw8ldg1itf/articles/qluiky79j8/1584555578134/image.png"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p>At
    deployment runtime, the Harness Delegate executes commands on the target host(s)
    to download the artifact directly to the target host(s). This is the process for
    file-based and metadata Artifact Sources. <strong>The target host(s) must have
    network connectivity to the artifact server.</strong></p><div class="note-callout">Ensure
    that the target host has network connectivity to the Artifact Server.</div><h3>Exec
    Script</h3><p>For all Service types, the Exec script can be added to the Service
    to use the artifact source metadata and copy or download the artifact.</p><h4>Add
    an Exec Script</h4><ol><li>In the Service, click <strong>Add Command</strong>.
    The <strong>Add Command</strong> dialog appears.<br/>In <strong>Command Type</strong>,
    select the <strong>Install</strong>.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/qluiky79j8/1620840195077/gij-7-iji-wobsm-muv-oy-y-5-sd-pn-qxhqrh-do-fgul-0-y-o-3-h-8-l-lwe-6-l-ltz-9-gqf-9-ph-qzuy-qnu-34-x-eh-cx-ipy-2-vi-rs-yrlstj-33-bm-g-wt-k-6-hw-duorj-bk-7-m-qv-8-sj-o-3-ar-uzlq-fx-8-zdq-ml-2-ttnft"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure>The
    command is added to the Service. There is also an <strong>Install</strong> command
    in the Template Library that is preset with common variables.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/qluiky79j8/1620840195341/ktpgo-4-pbas-ym-wz-05-rx-sasr-rj-0-3-bltzj-9-rd-1-kf-cva-k-82-t-sbl-2-c-4-sqh-wqiq-ugfu-v-1-n-4-zujoqgv-k-mdggh-q-67-q-5-v-1-koo-pt-oalk-wo-dmvey-koe-7-r-4-rf-i-vq-6-opesny-n-8-nuxfe-ew"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure>For
    information on using the Template Library, see <a href="https://docs.harness.io/article/ygi6d8epse-use-templates">Use
    Templates</a>.</li><li>Hover over the <strong>Add</strong> button to see the available
    scripts.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/qluiky79j8/1620840195525/u-sr-rbd-nx-jb-irt-s-3419-pn-n-ytk-fth-qfmi-4-p-1-dx-5-ahaqex-qk-abaj-m-hg-3-s-4-q-b-3-xzl-xnp-1-yl-xo-57-ll-be-7-f-mgullt-zs-ej-ajiqj-lh-otoqt-cfg-zp-mrr-3-nu-myl-zx-8-ak-wfw-2-e-qd-5-q-rq-n"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure></li><li>Under
    <strong>Scripts</strong>, click <strong>Exec</strong>. The <strong>Exec</strong>
    dialog appears.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/qluiky79j8/1620840195706/a-4-hh-xo-6-n-58-m-6-rv-lyfg-5-hj-w-1-me-4-prvq-08-dt-vp-vr-4-nfkm-z-5-lma-blw-absgqfk-otdoijv-7-c-afrz-cs-sv-6-n-fm-5-m-0-sq-iv-8-lydy-2-d-5-w-kqrd-ecn-5-jk-zj-oxq-kdb-8-f-qbue-5-wcg-yu-75-e-mhbxvn"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure></li><li>In
    <strong>Working Directory</strong>, enter the working directory on the target
    host from which the Harness Delegate will run the Bash or PowerShell script, such
    as <strong>/tmp</strong> on Linux and <strong>%TEMP%</strong> on Windows. By default,
    and if <strong>Working Directory</strong> is left empty, the script is executed
    in the home directory.</li><li>Add the commands needed to install your microservice
    using the metadata and click <strong>SUBMIT</strong>. The <strong>Exec</strong>
    script is added to the Service.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/qluiky79j8/1620840195884/yw-ttsbj-xo-0-we-vzc-82-kgug-wdk-ja-hj-9-bce-zcityc-0-arli-vz-g-kobw-u-jh-8-j-3-n-0-rfru-k-h-kg-39-sh-zqv-1-ix-v-5-rht-fw-9-wv-bnzv-ll-1-q-44-j-0-ko-zg-hr-4-f-9-kqg-ddhq-vpl-3-cx-4-gweq-dutvfe"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure></li></ol><p>To
    build your <strong>Exec</strong> script, for example a cURL script, you can use
    the built-in Harness variables to refer to the Artifact Sources. For example,
    the built-in variable <code>${artifact.url}</code>. Simply enter <code>${</code>
    in the <strong>Command</strong> field to see the list of variables.</p><figure><img
    src="https://files.helpdocs.io/kw8ldg1itf/articles/qluiky79j8/1620840196078/ia-xeik-5-x-7-sld-s-450-r-tqfcou-5-f-u-3-yl-4-r-xoyz-fy-gu-8-mhvu-5-nr-ltck-6-k-nh-1-ll-32-je-atq-xgf-au-odcl-4-jd-stzfq-2-ar-u-1-1-fm-pty-qn-htw-w-93-asm-47-m-pojyxni-r-06-u-8-qw-uai-dro-1-mt-wpr-j-0"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p>When
    you create a Workflow using this Service, such as a Basic Workflow, it will include
    an <strong>Install</strong> step that will execute the <strong>Exec</strong> script.</p><figure><img
    src="https://files.helpdocs.io/kw8ldg1itf/articles/qluiky79j8/1620840196283/is-uhtj-ma-90-i-0-yf-cu-1-bp-bd-zi-9-ka-4-zh-dxq-cyl-5-b-aaiqa-c-c-5-syjw-tzm-4-dp-7-wg-xfi-k-6-k-vnco-7-sn-mkpuyk-ntr-nt-0-fyzn-13-uoqass-o-0-ihfxkd-pb-nn-ric-4-jk-s-1-sz-99-z-3-j-xps-hs-8-d-0-inlo"/></figure><p>For
    a list of artifact-related built-in variables, see <strong>Artifact</strong> in
    the table in <a href="https://docs.harness.io/article/9dvxcegm90-variables#variables_list">Variables
    List</a>.</p><h3>Copy Artifact vs Download Artifact</h3><p>The difference between
    the Copy Artifact and Download Artifact scripts is important to understand to
    ensure your deployment is successful:</p><ul><li><strong>Copy Artifact:</strong>
    With Copy Artifact, the Delegate downloads the artifact (e.g. JAR file) and then
    copies it via SCP (secure copy) it to the target host(s). The Delegate <span style="color:#f44e3b"
    data-hd-color="#f44e3b"><strong>must</strong></span> have connectivity with the
    Artifact Source (e.g. Nexus, Jenkins, Bamboo, etc).</li><li><strong>Download Artifact:</strong>
    With Download Artifact, Harness directly downloads the file onto the target host(s).<ul><li><strong>Connectivity:</strong>
    The target host <span style="color:#f44e3b" data-hd-color="#f44e3b"><strong>must</strong></span>
    have connectivity with the Artifact Source.</li><li><strong>Credentials:</strong>
    Since the target host performs the download and not the Delegate, the Harness
    AWS Cloud Provider used for the connection must use Access/Secret keys for its
    credentials. It cannot use the <strong>Inherit IAM Role from Delegate</strong>
    option. If you must use the <strong>Inherit IAM Role from Delegate</strong> option
    for your Connector, then use <strong>Copy Artifact</strong>.</li></ul></li></ul><p></p><figure><img
    src="https://files.helpdocs.io/kw8ldg1itf/articles/qluiky79j8/1577127763669/image.png"/></figure><div
    class="note-callout">For WinRM, always use Metadata-only.</div><p></p><figure><img
    src="https://files.helpdocs.io/kw8ldg1itf/articles/qluiky79j8/1600378139752/image.png"/></figure><h3>Copy
    Artifact Script</h3><p>The Copy Artifact command is supported for Artifact Sources
    that use Artifactory, Amazon S3, Jenkins, Bamboo, and Nexus. The command behaves
    as follows:</p><ol><li>During deployment runtime, Harness uses the metadata to
    download the artifact to the Harness Delegate.</li><li>The Delegate then copies
    the artifact to the target host(s), such as Amazon S3.<br/>To ensure the success
    of this download, the host(s) running the Harness Delegate(s) <span style="color:#f44e3b"
    data-hd-color="#f44e3b"><strong>must</strong></span> have network connectivity
    to the artifact server and the target deployment host(s).</li></ol><p></p><div
    class="note-callout">For Jenkins and Bamboo to work with Copy Artifact, ensure
    that in the Jenkins or Bamboo artifact source settings, you enter the exact path
    to the <em>artifact</em> and not just a path to a folder. For example, <code>artifacts/target</code>
    will not work, but <code>artifacts/target/todolist.war</code> will work. For example:</div><p></p><figure><img
    src="https://files.helpdocs.io/kw8ldg1itf/articles/qluiky79j8/1578943643494/image.png"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><h4>Adding
    a Copy Artifact Script</h4><p>To add a Copy Artifact script in a Service, do the
    following:</p><ol><li>Click <strong>Add Command</strong> and in <strong>Command
    Type</strong>, select the <strong>Install</strong>.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/qluiky79j8/1620840195077/gij-7-iji-wobsm-muv-oy-y-5-sd-pn-qxhqrh-do-fgul-0-y-o-3-h-8-l-lwe-6-l-ltz-9-gqf-9-ph-qzuy-qnu-34-x-eh-cx-ipy-2-vi-rs-yrlstj-33-bm-g-wt-k-6-hw-duorj-bk-7-m-qv-8-sj-o-3-ar-uzlq-fx-8-zdq-ml-2-ttnft"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure>The
    command is added to the Service.</li><li>Hover over the <strong>Add</strong> step
    to see the <strong>Copy</strong> script, and click <strong>Copy</strong>.<figure><img
    src="https://files.helpdocs.io/kw8ldg1itf/articles/qluiky79j8/1620840196682/wr-ziaze-c-8-lka-yl-7-a-a-9-vo-7-w-su-dsp-xa-msksnh-mg-4-d-nj-9-p-h-5-n-xndo-h-txe-z-6-wv-42-e-qv-bhfci-cmr-n-9-dp-6-y-3-clfk-1969-u-eo-3-hfz-kfl-yjom-l-054-e-7-9-to-kildl-16-i-8-tsrqa-lf-ytxp-4-y"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure>The
    <strong>Copy</strong> script appears.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/qluiky79j8/1620840196874/2-rmk-37-a-lx-2-jv-1-umka-2-wz-pbmosbn-umialft-6-vv-pm-f-j-yp-nbro-ky-qx-fzv-e-6-mamkb-7-s-jdj-8-qap-7-r-pmyy-lw-i-7-t-hr-5-i-rh-i-bq-9-l-cvmr-fiphrv-nvl-6-yjb-sfd-9-okk-yqpq-1-hvofa-c-6-mz-32-s"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure>The
    <code>$WINGS_RUNTIME_PATH</code> is the destination path for the artifact. The
    variable is a constant used at runtime. For more information, see <a href="https://docs.harness.io/article/9dvxcegm90-variables#constants">Constants</a>.</li><li>In
    <strong>Source</strong>, select <strong>Application Artifacts</strong>, and click
    <strong>SUBMIT</strong>. The <strong>Copy</strong> script is added to the Service.<figure><img
    src="https://files.helpdocs.io/kw8ldg1itf/articles/qluiky79j8/1620840197036/zsooad-tv-dl-7-pllq-emdu-asyr-9-wfn-xh-9-tu-e-9-qm-tk-asre-2-ue-f-0-h-lyp-vq-8-el-15-zl-6-mobm-5-expzm-2-ysjz-bpe-2-rotyx-va-gvd-jptzue-bgtmzi-x-0-cx-ig-9-t-psfs-iu-kw-qj-1-n-6-djl-hc-bm-ao-ib"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure></li></ol><h3>Download
    Artifact Script</h3><p>For SSH and WinRM Service types, the <strong>Download Artifact</strong>
    script is supported for many artifact sources, such as Amazon S3, Artifactory,
    Azure, and SMB and SFTP (Powershell-only) artifact sources.</p><p>For other Service
    types and artifact sources, add a new command and use the Exec script to download
    the artifact.</p><p>For SSH and WinRM Services that use artifact sources that
    are supported by Download Artifact, at deployment, the Harness Delegate will run
    the Download Artifact script on the deployment target host and download the artifact.</p><p>Here
    are the Download Artifact script settings:</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/qluiky79j8/1594164484618/image.png"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p>In
    <strong>Artifact Download Directory</strong>, a path using <a href="/article/9dvxcegm90-variables">Harness
    variable expressions</a> points to the <strong>Application Defaults</strong> variables.</p><p></p><figure><img
    src="https://files.helpdocs.io/kw8ldg1itf/articles/qluiky79j8/1594164532102/image.png"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p>You
    can add an Application Defaults variable for the artifact sources that will be
    referenced by the Download Artifact script, and then use it wherever Download
    Artifact is used. For more information, see <a href="https://docs.harness.io/article/9dvxcegm90-variables#application_default_variables">Application
    Defaults Variables</a>.</p><p>You can also enter a path in <strong>Artifact Download
    Directory</strong> manually.</p><p>If the path in <strong>Artifact Download Directory</strong>
    is missing from the target host, then the script will fail.</p><p></p><figure><img
    src="https://files.helpdocs.io/kw8ldg1itf/articles/qluiky79j8/1594164439570/image.png"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><h3>Copy
    and Download Artifact Provider Support</h3><p>The following table lists the providers
    supported by the Copy and Download Artifact commands in a Service.</p><p>Legend:</p><ul><li>Y:
    Yes</li><li>N: No</li><li>N/A: Not Applicable</li></ul><p></p><table><tbody><tr><td><p><strong>Provider</strong></p></td><td><p><strong>Repository/Package
    Types</strong></p></td><td><p><strong>Download Artifact</strong></p><p><span style="background-color:#73d8ff"
    data-hd-highlight="#73d8ff"><strong>(WinRM or SSH Service types only)</strong></span></p></td><td><p><strong>Copy
    Artifact</strong></p><p><span style="background-color:#73d8ff" data-hd-highlight="#73d8ff"><strong>(SSH
    Service type only)</strong></span></p></td></tr><tr><td><p>AWS S3</p></td><td><p>All</p></td><td><p>Y</p></td><td><p>Y</p></td></tr><tr><td><p>Artifactory
    (JFrog)</p></td><td><p>Non-Docker</p></td><td><p>Y</p></td><td><p>Y</p></td></tr><tr><td><p></p></td><td><p>Docker</p></td><td><p>N/A</p></td><td><p>N/A</p></td></tr><tr><td><p>SMB</p></td><td><p>IIS
    related</p></td><td><p>Y</p></td><td><p>N/A</p></td></tr><tr><td><p>SFTP</p></td><td><p>IIS
    related</p></td><td><p>Y</p></td><td><p>N/A</p></td></tr><tr><td><p>Jenkins:</p><p>Metadata-only</p></td><td><p>All</p><p>You
    must specify an artifact in the <strong>Artifact Paths</strong> setting. <a href="#jenkins_and_bamboo_metadata_and_artifact_paths">Jenkins
    and Bamboo Metadata and Artifact Paths</a></p></td><td><p>Y</p></td><td><p>Y</p></td></tr><tr><td><p>Jenkins:</p><p>Artifact
    is saved to Harness</p></td><td><p>All</p></td><td><p>Y</p></td><td><p>Y</p></td></tr><tr><td><p>Docker
    Registry</p></td><td><p>Docker</p></td><td><p>N/A</p></td><td><p>N/A</p></td></tr><tr><td><p>AWS
    AMI</p></td><td><p>AMI</p></td><td><p>N/A</p></td><td><p>N/A</p></td></tr><tr><td><p>AWS
    ECR</p></td><td><p>Docker</p></td><td><p>N/A</p></td><td><p>N/A</p></td></tr><tr><td><p>Google
    Cloud Storage</p></td><td><p>All</p></td><td><p>N/A</p></td><td><p>N/A</p></td></tr><tr><td><p>Google
    Container Registry</p></td><td><p>Docker</p></td><td><p>N/A</p></td><td><p>N/A</p></td></tr><tr><td><p>Nexus
    2.x/ 3.x:</p><p>Artifact is saved to Harness</p></td><td><p>Maven 2.0</p></td><td><p>Y</p></td><td><p>Y</p></td></tr><tr><td><p></p></td><td><p>NPM</p></td><td><p>Y</p></td><td><p>Y</p></td></tr><tr><td><p></p></td><td><p>NuGet</p></td><td><p>Y</p></td><td><p>Y</p></td></tr><tr><td><p></p></td><td><p>Docker</p></td><td><p>N/A</p></td><td><p>N/A</p></td></tr><tr><td><p>Nexus
    2.x/ 3.x:</p><p>Metadata-only</p></td><td><p>Maven 2.0</p></td><td><p>Y</p></td><td><p>Y</p></td></tr><tr><td><p></p></td><td><p>NPM</p></td><td><p>Y</p></td><td><p>Y</p></td></tr><tr><td><p></p></td><td><p>NuGet</p></td><td><p>Y</p></td><td><p>Y</p></td></tr><tr><td><p></p></td><td><p>Docker</p></td><td><p>N/A</p></td><td><p>N/A</p></td></tr><tr><td><p>Bamboo:</p><p>Metadata-only</p></td><td><p>All</p><p>You
    must specify an artifact in the <strong>Artifact Paths</strong> setting. See <a
    href="#jenkins_and_bamboo_metadata_and_artifact_paths">Jenkins and Bamboo Metadata
    and Artifact Paths</a>.</p></td><td><p>Y</p></td><td><p>Y</p></td></tr><tr><td><p>Bamboo:</p><p>Artifact
    is saved to Harness</p></td><td><p>All</p></td><td><p>Y</p></td><td><p>Y</p></td></tr><tr><td><p>Azure
    Artifacts</p></td><td><p>Maven 2.0, NuGet</p></td><td><p>Y</p></td><td><p>Y</p></td></tr><tr><td><p>Custom
    Repository</p></td><td><p>All</p></td><td><p>N/A</p></td><td><p>N (use the Exec
    script to use the metadata to copy artifact to target host)</p></td></tr></tbody></table><p></p><h3>Jenkins
    and Bamboo Metadata and Artifact Paths</h3><p>If you want to download the Jenkins
    or Bamboo artifact using the Download Artifact script, you must select an artifact
    path in the <strong>Artifact Path</strong> setting. This enables Harness to obtain
    the exact URLs for downloading the artifacts.</p><p></p><p></p><p></p><p></p>'
  slug: service-types-and-artifact-sources
  tags:
  - metadata
  - Artifact Source
  - Docker
  - Jenkins
  - Bamboo
  - Docker Registry
  - Exec script
  - artifact.url
  - Copy Artifact
  - Download Artifact
  is_live: true
