<p></p><div class="note-callout">Currently, this feature is behind the feature flag <code>ARTIFACT_COLLECTION_CONFIGURABLE</code>. Contact <a href="mailto:support@harness.io" target="_blank">Harness Support</a> to enable the feature.</div><p>In some cases, automatic collection of artifacts can cause issues like rate limit increases because of too many calls from the Harness Delegate to your artifact servers. </p><p>You can enable or disable automatic artifact collection whenever you need. This topic will walk you through the process.</p><h3>Before You Begin</h3><ul><li><a href="/article/eb3kfl8uls-service-configuration">Add Specs and Artifacts using a Harness Service</a></li></ul><h3 id="undefined">Supported Platforms and Technologies</h3><p>SeeÂ <a href="/article/220d0ojx5y-supported-platforms">Supported Platforms and Technologies</a>.</p><h3>Review: Artifact Auto Collection</h3><p>Here&#39;s a summary of how the Artifact Auto Collection works in Harness:</p><ul><li><strong>Enabled:</strong> If auto collection is enabled, Harness collects the artifacts using metadata when you set up the Artifact Source in a Harness Service.</li><li><strong>Disabled:</strong> If auto collection is disabled, Harness collects the artifact metadata from the repo on demand when you select the Artifact Source during deployment. Harness then stores the metadata in the Harness database.<ul><li>For example, when you deploy a Workflow/Pipeline and select an artifact that has auto collection <u>disabled</u>, Harness will fetch the artifact metadata (tags/versions) on demand at that moment.</li></ul></li></ul><h3>Step 1: Set Artifact Auto Collection on the Service</h3><p>In the Service settings, in <strong>Artifact Source</strong>, you can enable/disable the <strong>Auto Collect Artifact</strong> setting.</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/etpaokj9iv/1654625340192/clean-shot-2022-06-07-at-11-08-06.png"/></figure><p>When <strong>Auto Collect Artifact</strong> is disabled for an artifact, a stop icon is listed next to the artifact:</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/etpaokj9iv/1654625846996/clean-shot-2022-06-07-at-11-16-03.png"/></figure><p>If <strong>Auto Collect Artifact</strong> is disabled for an artifact, you will see the following:</p><ul><li>No artifacts listed for that artifact in the <strong>Artifact History</strong> in that Service.</li><li>If <strong>Auto Collect Artifact</strong> is disabled for all artifacts, <strong>Artifact History</strong> does not appear at all.</li><li>No artifacts listed for that artifact in the <strong>Manually Select an Artifact</strong> settings.</li></ul><h4>Artifact Source YAML</h4><p>The <strong>Auto Collect Artifact</strong> setting is described in the Artifact Servers YAML using the <code>collectionEnabled</code> label:</p><ul><li>Enabled: <code>collectionEnabled: true</code></li><li>Disabled: <code>collectionEnabled: false</code></li></ul><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/etpaokj9iv/1654626004412/clean-shot-2022-06-07-at-11-19-44.png"/></figure><h3>Step 2: Select the Artifact Build/Version on New Deployments</h3><p>When you deploy a Workflow/Pipeline that uses a Service with an artifact source that has <strong>Auto Collect Artifact</strong> disabled, you can select the artifact source in <strong>Start New Deployment</strong> (or when re-running a Workflow/Pipeline), and Harness will fetch the artifacts on demand.</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/etpaokj9iv/1654626536791/clean-shot-2022-06-07-at-11-27-11.png"/></figure><div class="note-callout">If an artifact tag/version is not listed, but you know it is in the repo, you can enter its name in the <strong>Build/Version</strong> setting and Harness will fetch it during deployment. If Harness cannot find the artifact, you will see an error in the following format in the Pre-deployment stage of the Workflow: <code>Invalid request: Could not find requested build number [artifact name] for artifact stream type [artifact type]</code>.</div><h3>Review: Artifact Collection Workflow Step</h3><p>In the deployed <strong>Artifact Collection</strong> Workflow step, you can see the metadata collected:</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/etpaokj9iv/1654627365875/clean-shot-2022-06-07-at-11-42-29.png"/></figure><p></p><h3>Option: Triggers</h3><p>In the <strong>On New Artifact</strong> and <strong>On Webhook Event</strong> Trigger types, only artifact sources with the <strong>Auto Collect Artifact</strong> setting <u>enabled</u> are listed.</p><h3>See Also</h3><ul><li><a href="/article/jizsp5tsms-custom-artifact-source">Using Custom Artifact Sources</a></li></ul><p></p>