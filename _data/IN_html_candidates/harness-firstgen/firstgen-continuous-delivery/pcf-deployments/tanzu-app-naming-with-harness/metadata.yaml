type: article
article_id: hzyz7oc5k9
user_id: mfr0nxh4be
category_id: emle05cclq
author:
  name: Michael Cretzman
  profile_image: https://www.gravatar.com/avatar/2e8616837f4ee92be5d19ffe9b9ccba9?d=mm&s=150
title: Tanzu App Naming
slug: tanzu-app-naming-with-harness
description: Learn about TAS app naming and versioning with Harness.
short_version: Learn about TAS app naming and versioning with Harness.
tags: []
show_toc: true
is_private: false
is_published: true
is_featured: false
stale_status:
  is_stale: false
  reason: ""
  source: API
  triggered_at: 2021-12-16T18:15:25.43577Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: Tanzu App Naming
  description: Learn about TAS app naming and versioning with Harness.
  short_version: Learn about TAS app naming and versioning with Harness.
  body: |-
    <p>TAS app naming and versioning has a number of options. This topic covers these options and provides examples.</p>
    <h3>Default App Naming</h3>
    <p>By default, the TAS apps deployed by Harness are named using a concatenation of the names of the Harness Application, Service, and Environment, separated by two underscores.</p>
    <p>For example, if you have the following names your TAS app is named <code>MyApp__MyServ__MyEnv</code>:</p>
    <ul>
      <li>Application: <code>MyApp</code></li>
      <li>Service: <code>MyServ</code></li>
      <li>Environment: <code>MyEnv</code></li>
    </ul>
    <p>When you create a TAS Service in Harness, a default vars.yml file is created with the app name following the default naming convention, and the default manifest.yml file uses the name.</p>
    <p></p>
    <figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/hzyz7oc5k9/1636592233635/image.png"/></figure>
    <p>You can change the <code>APP_NAME</code> in vars.yml and specific a new name for you app and Harness will use that for all deployments. For example:</p><pre>APP_NAME: Order__App</pre>
    <h4>Default Versioning</h4>
    <p>By default, Harness appends a numeric suffix to the end of every app release, and increments the number with each subsequent release.</p>
    <p>For example, let&#39;s say your app name is Order__App. Here&#39;s how the first two deployments are named:</p>
    <ol>
      <li>First deployment: <strong>Order__App__1</strong>.</li>
      <li>Second deployment: <strong>Order__App__2</strong>.</li>
    </ol>
    <p>The previous app version keeps its name: <strong>Order__App__1</strong>.</p>
    <h3>App Naming with Version Management</h3>
    <div class="note-callout">Currently, this feature is behind the Feature Flag <code>CF_APP_NON_VERSIONING_INACTIVE_ROLLBACK</code>. Contact <a href="mailto:support@harness.io" target="_blank">Harness Support</a> to enable the feature.</div>
    <p>In a Harness Workflow using a Harness TAS Service, there is an <strong>App Setup</strong> step that uses the manifest.yml in your Harness TAS Service to set up your app.</p>
    <p>In App Setup, there is a <strong>Version Management</strong> section that allows you to select how you want your deployed apps versioned. There are two options:</p>
    <h5>Incremental Versioning</h5>
    <p>The app name is given an incremental suffix with each deployment.</p>
    <p>For example, the first time you deploy the app <strong>Order__App</strong> it is <strong>Order__App__0</strong>. The next time this app is deployed the suffix will increase to <strong>__1</strong>.</p>
    <h5>App Name with Version History</h5>
    <p>When you deploy an app it maintains its name without adding any suffix to the name to indicate its release version. A suffix is added to the previous version of the app.</p>
    <p>The first time you deploy the app, Harness creates the app with the name you entered in <strong>App Setup</strong>.</p>
    <p>When deploying new versions of that app, Harness uses the same name for the app and renames the previous version of the app with suffix <code>_INACTIVE</code>.</p>
    <p>For example, if the app is named <strong>Order__App</strong>, the first deployment will use the name <strong>Order__App</strong>. When the next version of the app is deployed, the new version is named <strong>Order__App</strong> and the previous version is now named <strong>Order__App__INACTIVE</strong>.</p>
    <p>During rollback, the new app version is deleted and the previous app is renamed without the suffix.</p>
    <h5>Blue Green Deployments and Naming</h5>
    <p>App naming in Blue Green deployments follows the same patterns as the other deployment strategies, but it is useful to review the Blue Green scenario as it involves multiple stages.</p>
    <p>Blue Green deployments involve staging a new app version in a stage environment and then swapping the stage and production routes between the stage and production environments.</p>
    <p>When a new app is deployed, the following occurs:</p>
    <ol>
      <li>During staging by the App Setup step, the new app is given the suffix <code>__INACTIVE</code>. <ol>
          <li>If a failure occurs, the new app version is simply deleted and the current production app is untouched.</li>
        </ol>
      </li>
      <li>During the Swap Route step, as the routes are swapped and the new app becomes the production app, the new app name&#39;s suffix is changed in one of the following ways: <ol>
          <li>Default versioning, as explained above in <a href="#default_app_naming">Default App Naming</a>.</li>
          <li>Or, if <strong>Version Management</strong> is enabled, the suffix is changed to according to whether you are using <strong>Incremental Versioning</strong> or <strong>App Name with Version History</strong>.</li>
        </ol>
      </li>
      <li>The previous app version is then renamed with the suffix <code>__INACTIVE</code>. <ol>
          <li>If there is a failure, the new app version is deleted and the current production app has the <code>__INACTIVE</code> suffix removed and its previous name is restored.</li>
        </ol>
      </li>
    </ol>
    <h3>App Naming with Special Characters Support</h3>
    <div class="note-callout">Currently, this feature is behind the Feature Flag <code>CF_ALLOW_SPECIAL_CHARACTERS</code>. Contact <a href="mailto:support@harness.io" target="_blank">Harness Support</a> to enable the feature.</div>
    <p>By default, a TAS app name must consist of alphanumeric characters. Harness supports special characters in TAS app naming.</p>
    <p>By default, if your app named is <strong>Order-App</strong> Harness would convert the dash to underscores (<strong>Order__App</strong>), but with special characters support enabled the dash is preserved (<strong>Order-App</strong>).</p>
    <p>App name versioning follows the default Harness TAS app naming.</p>
    <p>For example, if the app using special characters is named <strong>Order-App</strong>, the first deployment of the app is named <strong>Order-App__1</strong>.</p>
    <h4>Version Management with Special Characters Support</h4>
    <p>If both the Version Management (described above) and Special Characters features are enabled, the first app version is Order-App. The second app version is <strong>Order-App</strong>, also, and the first app version is renamed <strong>Order-App__INACTIVE</strong>.</p>
    <h4>App Naming Changes after enabling Special Characters Support</h4>
    <p>After enabling the Special Characters feature, the next deployment will be considered the first deployment and the app name will start with a new family name.</p>
    <p>For example, if your app name was <strong>test-gsup-1.0.45</strong>, and you had deployed it 3 times, then all the apps will belong to this family naming</p>
    <ol>
      <li>test__gsup__1__0__45</li>
      <li>test__gsup__1__0__45__1</li>
      <li>test__gsup__1__0__45__2</li>
      <li>test__gsup__1__0__45__3</li>
    </ol>
    <p>After you enable the Special Characters feature and use a special character like a dash, the apps created in the next deployment will belong to a new family name: <strong>test-gsup-1.0.45</strong>.</p>
    <p>Consequently, there will be no link between previous deployments and this new deployment. The new deployment is now considered as the first deployment.</p>
    <p>This illustration provides examples of before and after enabling the Special Characters feature:</p>
    <figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/hzyz7oc5k9/1636741822414/clean-shot-2021-11-12-at-10-30-02-2-x.png"/></figure>
    <p></p>
    <p>If something goes wrong after enabling the Special Characters feature, rollback will not work because the app family names have changed. Even Blue Green will not work as the previous app will belong to different family.</p>
    <p>Similarly, if you attempt a <a href="/article/2f36rsbrve-post-deployment-rollback">Post-Prod Rollback</a> after a successful deployment, it will not work.</p>
    <p>Just remember that after enabling the Special Characters feature the next deployment is considered as a new first deployment. </p>
    <p></p>
    <p>If user now disable the FF - CF_ALLOW_SPECIAL_CHARACTERS, then we will move back to the previous family - [test__gsup__1__0__45]</p>
  slug: tanzu-app-naming-with-harness
  tags: []
  is_live: true
