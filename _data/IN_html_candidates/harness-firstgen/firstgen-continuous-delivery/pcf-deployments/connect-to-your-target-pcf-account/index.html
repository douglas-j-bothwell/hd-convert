<p>This topic sets up the Harness Delegate in your Tanzu Application Service (TAS, formerly PCF) environment and adds the Cloud Provider used to connect to your Tanzu cloud for deployment.</p><p>In this topic:</p><ul><li><a href="#before_you_begin">Before You Begin</a></li><li><a href="#step_1_set_up_the_harness_delegate">Step 1: Set Up the Harness Delegate</a></li><li><a href="#step_2_add_the_cloud_foundry_cli">Step 2: Add the Cloud Foundry CLI</a></li><li><a href="#step_3_add_the_harness_pcf_cloud_provider">Step 3: Add the Harness PCF Cloud Provider</a></li><li><a href="#review_pcf_permissions">Review: PCF Permissions</a></li><li><a href="#next_steps">Next Steps</a></li></ul><p></p><h3>Before You Begin</h3><ul><li>See <a href="/article/4o7oqwih6h-harness-key-concepts">Harness Key Concepts</a>.</li></ul><p></p><h3>Step 1: Set Up the Harness Delegate</h3><p>The Harness Delegate is a service you run in your local network or VPC to connect your artifact servers, TAS infrastructure, and any other providers with the Harness Manager.</p><p>If you are running your TAS Cloud in AWS, you can use a Shell Script Delegate run on an EC2 instance in the same VPC and subnet as your TAS Cloud, or an ECS Delegate run in an ECS cluster in the same VPC.</p><p>For information on setting up Harness Delegates, see <a href="/article/h9tkwmkrm7-delegate-installation">Harness Delegate Overview</a>.</p><div class="note-callout">If you want to install the CF CLI on the Delegate, use a Harness Delegate Profile and the script shown in <a href="https://docs.harness.io/article/nxhlbmbgkj-common-delegate-profile-scripts#cloud_foundry_cli">Cloud Foundry CLI</a>.</div><h3>Step 2: Add the Cloud Foundry CLI</h3><p>The host running the Harness Delegate must run the CF CLI in order to execute the required commands.</p><p>See <a href="/article/8tsb75aldu-install-cloud-foundry-cli-6-and-7-on-harness-delegates">Install Cloud Foundry CLI Versions on the Harness Delegate</a>.</p><h4>Using CF CLI 7</h4><p>By default, Harness uses CF CLI 6. Certain CLI commands have been changed between the CLI versions. See <a href="https://docs.cloudfoundry.org/cf-cli/v7.html#table" target="_blank">Upgrading to CF CLI 7</a> from Cloud Foundry.</p><p>If you enable the <strong>Enable CF CLI 7</strong> option on the Harness Service you are deploying, the Harness Delegate will use that CLI version to execute the correct set of commands.</p><p>See <a href="/article/8tsb75aldu-install-cloud-foundry-cli-6-and-7-on-harness-delegates">Install Cloud Foundry CLI Versions on the Harness Delegate</a>.</p><h3>Step 3: Add the Harness TAS Cloud Provider</h3><p>A Harness TAS Cloud Provider connects Harness to your TAS account and allows the Harness Delegate to make API calls.</p><p>The <strong>TAS Cloud Provider</strong> has the following settings.</p><h4>Display Name</h4><p>Enter a name for the Cloud Provider. You will use this name when selecting this Cloud Provider in Harness Infrastructure Definitions.</p><h4>Endpoint URL</h4><p>Enter the API endpoint URL, without URL scheme. For example, <strong>api.run.pivotal.io</strong>. Omit <strong>http://</strong>.For more information, see <a href="https://docs.pivotal.io/pivotalcf/2-3/opsguide/api-endpoint.html" target="_blank">Identifying the API Endpoint for your PAS Instance</a> from Pivotal.</p><h4>Username / Password</h4><p>Username and password for the TAS account to use for this connection.</p><h4>Usage Scope</h4><p>If you want to restrict the use of a provider to specific applications and environments, do the following:</p><p>In <strong>Usage Scope</strong>, click the drop-down under <strong>Applications</strong>, and click the name of the application.</p><p>In <strong>Environments</strong>, click the name of the environment.</p><h3>Review: TAS Permissions</h3><p>Make sure the TAS user account is assigned Admin, Org Manager, or Space Manager role. The user account must be able to update spaces, orgs, and applications.</p><p>For more information, see <a href="https://docs.pivotal.io/pivotalcf/2-3/concepts/roles.html" target="_blank">Orgs, Spaces, Roles, and Permissions</a> from Tanzu.</p><p>For steps on setting up all Cloud Providers, see <a href="/article/whwnovprrb-cloud-providers">Add Cloud Providers</a>.</p><h3>Next Steps</h3><ul><li><a href="/article/jxsna1a0mi">Add Container Images for Tanzu Deployments</a>.</li><li><a href="/article/3ekpbmpr4e">Adding and Editing Inline Tanzu Manifest Files</a>.</li></ul><p></p>