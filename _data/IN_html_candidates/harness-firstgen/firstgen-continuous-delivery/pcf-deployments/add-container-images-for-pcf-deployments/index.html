<p>Harness integrates with many different types of repositories and artifact providers. We call these Artifact Servers, and they help you pull your artifacts into your Harness Applications.</p><p>Once you set up an Artifact Server, Harness can pull artifacts and add them to the Harness Service you will deploy to Tanzu Application Service (TAS, formerly PCF).</p><p>In this topic:</p><ul><li><a href="#before_you_begin">Before You Begin</a></li><li><a href="#step_1_add_an_artifactory_artifact_server">Step 1: Add an Artifactory Artifact Server</a></li><li><a href="#step_2_type">Step 2: Type</a></li><li><a href="#step_3_display_name">Step 3: Display Name</a></li><li><a href="#step_4_artifactory_url">Step 4: Artifactory URL</a></li><li><a href="#step_5_test_and_submit">Step 5: Test and Submit</a></li><li><a href="/article/jxsna1a0mi-add-container-images-for-pcf-deployments#step_6_create_the_harness_service">Step 6: Create the Harness Service</a></li><li><a href="/article/jxsna1a0mi-add-container-images-for-pcf-deployments#step_7_add_the_artifact_source_to_the_harness_service">Step 7: Add the Artifact Source to the Harness Service</a></li><li><a href="/article/jxsna1a0mi-add-container-images-for-pcf-deployments#review_docker_support_in_artifact_sources">Review: Docker Support in Artifact Sources</a></li><li><a href="#next_steps">Next Steps</a></li></ul><h3>Before You Begin</h3><ul><li>See <a href="/article/4o7oqwih6h-harness-key-concepts">Harness Key Concepts</a>.</li><li>See <a href="/article/nh4afrhvkl">Connect to Your Target Tanzu Account</a>.</li><li><a href="/article/hy819vmsux-pivotal-cloud-foundry-quickstart">Tanzu Application Service (TAS) Quickstart</a></li></ul><h3>Step 1: Add an Artifact Server</h3><p>For steps on setting up an Artifact Server, <a href="/article/7dghbx1dbl-configuring-artifact-server">Add Artifact Servers</a>.</p><ol><li>In Harness, click <strong>Setup,</strong> and then click <strong>Connectors</strong>.</li><li>Click <strong>Artifact Servers</strong>, and then click <strong>Add Artifact Server</strong>. Enter the following settings.</li></ol><h3>Step 2: Type</h3><p>Depending on your Artifact Server, select from the drop down list.</p><p>For this example, select <strong>Artifactory</strong>.</p><h3>Step 3: Display Name</h3><p>Enter a name to identify the Artifact Server.</p><p>For example, <strong>Artifactory Public</strong>.</p><h3>Step 4: Artifactory URL</h3><p>Enter the URL for the artifact server. For example, <strong>https://harness.jfrog.io/harness</strong>.</p><p>Enter the Username/Password if the repo is not anonymous.</p><h3>Step 5: Test and Submit</h3><p>Click <strong>Test</strong> and the <strong>Submit</strong>.</p><p>If the test fails, that means the <a href="/article/h9tkwmkrm7-delegate-installation">Delegate</a> can&#39;t connect to the Artifact Server URL.</p><p>Make sure that the host running the Delegate can make outbound connections to the Artifact Server URL.</p><h3>Step 6: Create the Harness Service</h3><p>In your Harness Application, in Services, create a new Service.</p><p>Enter a name for the Service. For details on how Harness manages Tanzu app names, see <a href="/article/hzyz7oc5k9-tanzu-app-naming-with-harness">Tanzu App Naming</a>.</p><p>For the Service <strong>Deployment Type</strong>, select <strong>Tanzu Application Services</strong>.</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/jxsna1a0mi/1636742001011/clean-shot-2021-11-12-at-10-33-12-2-x.png"/></figure><p>Click <strong>Submit</strong>.</p><p>The new Service is created. Now you can add your container images as an artifact source.</p><h3>Review: Enable CF CLI 7</h3><div class="note-callout">Currently, this feature is behind the Feature Flag <code>CF_CLI7</code>. Contact <a href="mailto:support@harness.io" target="_blank">Harness Support</a> to enable the feature.</div><p>Enable this option if you want to use CF CLI 7. By default, Harness uses CF CLI 6.</p><p>Certain CLI commands have been changed between the CLI versions. See <a href="https://docs.cloudfoundry.org/cf-cli/v7.html#table" target="_blank">Upgrading to CF CLI 7</a> from Cloud Foundry.</p><p>If you enable <strong>Enable CF CLI 7</strong>, the Harness Delegate will use that CLI version to execute the correct set of commands.</p><h3>Step 7: Add the Artifact Source to the Harness Service</h3><p>The artifact source for your Harness Service is taken from one of the Artifact Servers that are compatible with TAS. For example, an AWS S3 artifact source.</p><p>Harness supports the following TAS artifact servers/types.</p><p>Metadata-only Sources:</p><ul><li>Jenkins</li><li>AWS S3</li><li>Artifactory (includes Docker)</li><li>Nexus</li><li>Bamboo</li></ul><p>File-based Sources:</p><ul><li>Docker Registry</li><li>Artifactory (Tgz files)</li><li>Nexus (Tgz files)</li><li>Google Container Service (GCS)</li><li>AWS Elastic Container Registry (ECR)</li><li>SMB</li><li>SFTP</li><li>Custom Repository</li></ul><div class="note-callout">Harness supports any single file (non-folder) deployed using <code>cf push</code>. TAR, WAR, JAR, ZIP, and Docker are supported.</div><div class="note-callout">Is your artifact in an unsupported format? See <a href="/article/xpeb2raihj-preprocess-artifacts-to-match-supported-types">Preprocess Tanzu Artifacts to Match Supported Types</a>.</div><p>To add an artifact to your Harness TAS Service, do the following:</p><ol><li>In your Service, click <strong>Add Artifact Source</strong>, and select the artifact source.</li><li>Configure the settings for the Artifact Source.</li></ol><p>Harness uses artifact metadata only. During deployment runtime, Harness passes the metadata to the target host(s) where it is used to obtain the artifact.</p><p>Ensure that the target host has network connectivity to the Artifact Server. For more information, see <a href="/article/qluiky79j8-service-types-and-artifact-sources">Service Types and Artifact Sources</a>.</p><ol><li style="counter-increment:li 2" start="3">Click <strong>Submit</strong>. The artifact is added to the Service.</li></ol><p>Next we will describe our application and TAS routes using the Service <strong>Manifests</strong> section.</p><h3>Review: Docker Support in Artifact Sources</h3><p>The following Harness Artifact Sources support Docker:</p><ul><li>Artifactory</li><li>Google Container Registry (GCR)</li><li>Amazon Elastic Container Registry (Amazon ECR)</li><li>Docker Registry</li></ul><p>For Artifactory, ensure you select the Use Docker Format option:</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/s3emmcgotl/1590774410644/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p>TAS treats Artifactory as private registry. Harness supports no authentication and Basic authentication. You can use either in your Artifactory repos.</p><p>For more information on how TAS supports Docker, see <a href="https://docs.cloudfoundry.org/devguide/deploy-apps/push-docker.html#registry" target="_blank">Push a Docker Image from a Registry</a> from TAS.</p><h3>Next Steps</h3><ul><li><a href="/article/3ekpbmpr4e">Adding and Editing Inline Tanzu Manifest Files</a></li><li><a href="/article/i5jxqsbkt7-upload-local-and-remote-pcf-resource-files">Upload Local and Remote Tanzu Resource Files</a></li></ul><p></p>