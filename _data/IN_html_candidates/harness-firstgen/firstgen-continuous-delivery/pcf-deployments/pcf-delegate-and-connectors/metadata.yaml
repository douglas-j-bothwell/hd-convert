type: article
article_id: 0kkyae8347
user_id: mfr0nxh4be
category_id: emle05cclq
author:
  name: Michael Cretzman
  profile_image: https://www.gravatar.com/avatar/2e8616837f4ee92be5d19ffe9b9ccba9?d=mm&s=150
title: 1 - Delegate and Connectors for PCF
slug: pcf-delegate-and-connectors
description: Set up the Harness Delegate, Artifact Server, and the Cloud Provider
  for your PCF cloud.
short_version: Set up the Harness Delegate, Artifact Server, and the Cloud Provider
  for your PCF cloud.
tags: []
show_toc: true
is_private: false
is_published: false
is_featured: false
stale_status:
  is_stale: false
  reason: Article updated
  source: API
  triggered_at: 2021-05-12T17:22:10.781748Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: 1 - Delegate and Connectors for PCF
  description: Set up the Harness Delegate, Artifact Server, and the Cloud Provider
    for your PCF cloud.
  short_version: Set up the Harness Delegate, Artifact Server, and the Cloud Provider
    for your PCF cloud.
  body: <p>This topic sets up the Harness Delegate in your PCF environment, Artifact
    Server to connect to your artifact repo, and the Cloud Provider used to connect
    to your PCF cloud for deployment.</p><p>In this topic:</p><ul><li><a href="/article/0kkyae8347-pcf-delegate-and-connectors#harness_delegate">Harness
    Delegate</a></li><li><a href="/article/0kkyae8347-pcf-delegate-and-connectors#cloud_foundry_cli">Cloud
    Foundry CLI</a></li><li><a href="/article/0kkyae8347-pcf-delegate-and-connectors#pcf_cloud_provider">PCF
    Cloud Provider</a><ul><li><a href="/article/0kkyae8347-pcf-delegate-and-connectors#pcf_permissions">PCF
    Permissions</a></li></ul></li><li><a href="/article/0kkyae8347-pcf-delegate-and-connectors#artifact_server">Artifact
    Server</a></li><li><a href="/article/0kkyae8347-pcf-delegate-and-connectors#next_step">Next
    Step</a></li></ul><h3>Harness Delegate</h3><p>The Harness Delegate is a service
    you run in your local network or VPC to connect your artifact servers, PCF infrastructure,
    and any other providers with the Harness Manager.</p><p>If you are running your
    PCF Cloud in AWS, you can use a Shell Script Delegate run on an EC2 instance in
    the same VPC and subnet as your PCF Cloud, or an ECS Delegate run in an ECS cluster
    in the same VPC.</p><p>For information on setting up Harness Delegates, see <a
    href="/article/h9tkwmkrm7-delegate-installation">Delegate Installation and Management</a>.</p><div
    class="note-callout">If you want to install the CF CLI on the Delegate, use a
    Harness Delegate Profile and the script shown in <a href="https://docs.harness.io/article/nxhlbmbgkj-common-delegate-profile-scripts#cloud_foundry_cli">Cloud
    Foundry CLI</a>.</div><h3>Cloud Foundry CLI</h3><p>The host running the Harness
    Delegate must run the CF CLI in order to execute the required commands.</p><p>Follow
    the steps in <a href="https://docs.pivotal.io/pivotalcf/2-3/cf-cli/install-go-cli.html"
    target="_blank">Installing the cf CLI</a> from Pivotal to install the CLI. You
    can also use a Delegate Profile to install the CLI, as described in <a href="/article/h9tkwmkrm7-delegate-installation#delegate_profiles">Delegate
    Profiles</a> and <a href="/article/nxhlbmbgkj-common-delegate-profile-scripts#cloud_foundry_cli">Cloud
    Foundry CLI</a>.</p><p>The version of the CF CLI you install on the Delegate should
    always match the PCF features you are using in your Harness PCF deployment. For
    example, if you are using <code>buildpacks</code> in your manifest.yml in your
    Harness Service, the CLI you install on the Delegate should be version 3.6 or
    later.</p><p>Here is an example Delegate Profile that installs the CF CLI:</p><pre>apt-get
    install wget<br/>wget -q -O - https://packages.cloudfoundry.org/debian/cli.cloudfoundry.org.key
    | apt-key add -<br/>echo &#34;deb https://packages.cloudfoundry.org/debian stable
    main&#34; |  tee /etc/apt/sources.list.d/cloudfoundry-cli.list<br/>apt-get update<br/>apt-get
    install cf-cli</pre><h3>PCF Cloud Provider</h3><p>A Harness PCF Cloud Provider
    connects Harness to your PCF account and allows the Harness Delegate to make API
    calls.</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/0kkyae8347/1580258351820/image.png"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p>The <strong>Pivotal
    Cloud Foundry</strong> dialog has the following fields.</p><table><tbody><tr><td><p><strong>Field</strong></p></td><td><p><strong>Description</strong></p></td></tr><tr><td><p><strong>Display
    Name</strong></p></td><td><p>Enter a name for the Cloud Provider. You will use
    this name when selecting this Cloud Provider in Harness Infrastructure Definitions.</p></td></tr><tr><td><p><strong>Endpoint
    URL</strong></p></td><td><p>Enter the API endpoint URL, without URL scheme. For
    example, <strong>api.run.pivotal.io</strong>. Omit <strong>http://</strong>.For
    more information, see <a href="https://docs.pivotal.io/pivotalcf/2-3/opsguide/api-endpoint.html"
    target="_blank">Identifying the API Endpoint for your PAS Instance</a> from Pivotal.</p></td></tr><tr><td><p><strong>Username</strong> / <strong>Password</strong></p></td><td><p>Username
    and password for the PCF account to use for this connection.</p></td></tr><tr><td><p><strong>Usage
    Scope</strong></p></td><td><p>If you want to restrict the use of a provider to
    specific applications and environments, do the following:</p><p>In <strong>Usage
    Scope</strong>, click the drop-down under <strong>Applications</strong>, and click
    the name of the application.</p><p>In <strong>Environments</strong>, click the
    name of the environment.</p></td></tr></tbody></table><h4 id="pcf_permissions">PCF
    Permissions</h4><p>PCF user account with Admin, Org Manager, or Space Manager
    role. The user account must be able to update spaces, orgs, and applications.</p><p>For
    more information, see <a href="https://docs.pivotal.io/pivotalcf/2-3/concepts/roles.html"
    target="_blank"><strong>Orgs, Spaces, Roles, and Permissions</strong></a> from
    Pivotal.</p><p>For steps on setting up all Cloud Providers, see <a href="/article/whwnovprrb-cloud-providers">Add
    Cloud Providers</a>.</p><h3>Artifact Server</h3><p>Harness integrates with many
    different types of repositories and artifact providers. We call these Artifact
    Servers, and they help you pull your artifacts into your Harness Applications.</p><p>Once
    you set up an Artifact Server, Harness can pull artifacts and add them to the
    Harness Service you will deploy to PCF.</p><p>For steps on setting up an Artifact
    Server, <a href="/article/7dghbx1dbl-configuring-artifact-server">Add Artifact
    Servers</a>.</p><h3>Next Step</h3><ul><li><a href="/article/s3emmcgotl-services-for-pcf">2
    - Services for PCF</a></li></ul><p></p>
  slug: pcf-delegate-and-connectors
  tags: []
  is_live: true
