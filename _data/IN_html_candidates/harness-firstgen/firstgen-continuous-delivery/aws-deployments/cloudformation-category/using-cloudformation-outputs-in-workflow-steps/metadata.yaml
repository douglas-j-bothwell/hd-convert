type: article
article_id: ez8bgluqg5
user_id: mfr0nxh4be
category_id: hupik7gwhc
author:
  name: Michael Cretzman
  profile_image: https://www.gravatar.com/avatar/2e8616837f4ee92be5d19ffe9b9ccba9?d=mm&s=150
title: Using CloudFormation Outputs in Workflow Steps
slug: using-cloudformation-outputs-in-workflow-steps
description: Use CloudFormation output expressions in other Workflow steps.
short_version: Use CloudFormation output expressions in other Workflow steps.
tags: []
show_toc: true
is_private: false
is_published: true
is_featured: false
stale_status:
  is_stale: false
  reason: Article updated
  source: API
  triggered_at: 2022-07-18T22:17:16.356978Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: Using CloudFormation Outputs in Workflow Steps
  description: Use CloudFormation output expressions in other Workflow steps.
  short_version: Use CloudFormation output expressions in other Workflow steps.
  body: '<div class="tip-callout">This content is for Harness <a href="/article/1fjmm4by22">FirstGen</a>.
    Switch to <a href="/article/vynj4hxt98">NextGen</a>.</div><p>The CloudFormation
    output variables you use to map CloudFormation template outputs in an Infrastructure
    Definition can also be output in other Workflow commands.</p><p>For example, if
    you use <code>${cloudformation.Region}</code> to map a region output to the AWS
    region in an Infrastructure Definition, you can add a Shell Script step in your
    Workflow and use <code>echo ${cloudformation.Region}</code> to print the value.</p><p>In
    this topic:</p><ul><li><a href="https://docs.harness.io/article/ez8bgluqg5-using-cloudformation-outputs-in-workflow-steps#before_you_begin">Before
    You Begin</a></li><li><a href="#visual_summary">Visual Summary</a></li><li><a
    href="#step_1_add_a_workflow_step">Step 1: Add A Workflow Step</a></li><li><a
    href="#step_2_enter_the_output_variable_expression">Step 2: Enter the Output Variable
    Expression</a></li></ul><p></p><h3>Before You Begin</h3><ul><li><a href="/article/qj0ems5hmg-cloud-formation-provisioning-with-harness">CloudFormation
    Provisioning with Harness</a></li><li><a href="/article/308nblm0vc-cloud-formation-account-setup">Set
    Up Your Harness Account for CloudFormation</a></li><li><a href="/article/wtper654tn-add-cloud-formation-templates">Add
    CloudFormation Templates</a></li><li><a href="/article/4xtxj2f88b-map-cloud-formation-infrastructure">Map
    CloudFormation Infrastructure</a></li><li><a href="/article/5wdb3r765g-provision-cloudformation-create-stack">Provision
    using CloudFormation Create Stack</a></li></ul><p></p><h3>Visual Summary</h3><p>When
    you use a Harness CloudFormation Infrastructure Provisioner to map template outputs
    to Infrastructure Definition settings, you create variable expressions and use
    them as parameters.</p><p>In the following example, we show:</p><ul><li>Required
    outputs.</li><li>The outputs used for the optional Target Group and Application
    Load Balancer.</li><li>The stage Target Group and Application Load Balancer used
    for Blue/Green deployments.</li></ul><figure><img src="https://files.helpdocs.io/kw8ldg1itf/other/1569732829902/image.png"/></figure><p>As
    you can see, you map the CloudFormation template outputs using this syntax, where <code>exact_name</code> is
    the name of the output:</p><pre>${cloudformation.<em>exact_name</em>}</pre><p></p><p>Once
    these variable expressions are defined as Infrastructure Definition parameters,
    <u>and used by the CloudFormation Create Stack step in a Workflow</u>, they can
    be used elsewhere in the Workflow.</p><p></p><h3>Step 1: Add A Workflow Step</h3><p>This
    topic assumes you have a Workflow that uses an Infrastructure Definition that
    is dynamically mapped to a Harness CloudFormation Infrastructure Provisioner,
    and a CloudFormation Create Stack step in the Workflow that provisions that infrastructure.</p><p>For
    details, see <a href="/article/4xtxj2f88b-map-cloud-formation-infrastructure">Map
    CloudFormation Infrastructure</a>.</p><p>Add a Workflow step where you want to
    use the CloudFormation template output value. Typically, this is a <a href="https://docs.harness.io/article/1fjrjbau7x-capture-shell-script-step-output">Shell
    Script</a> step.</p><h3>Step 2: Enter the Output Variable Expression</h3><p>You
    can use any variable expression that is already used in the Infrastructure Definition
    in the Workflow settings.</p><p>For Canary Workflows, the Infrastructure Definition
    is added in the Phase settings. Therefore, you can only use the output variable
    expression within the Phase.</p><p>For example, let&#39;s say you use <code>${cloudformation.AutoScalingGroup}</code> to
    map an ASG output to the ASG in an Infrastructure Definition. You can add a Shell
    Script step in your Workflow and use <code>echo ${cloudformation.AutoScalingGroup}</code> to
    print the value.</p><p></p>'
  slug: using-cloudformation-outputs-in-workflow-steps
  tags: []
  is_live: true
