type: article
article_id: umpe4zfnac
user_id: mfr0nxh4be
category_id: td451rmlr3
author:
  name: Michael Cretzman
  profile_image: https://www.gravatar.com/avatar/2e8616837f4ee92be5d19ffe9b9ccba9?d=mm&s=150
title: Add Artifacts and App Stacks for Traditional (SSH) Deployments
slug: add-artifacts-for-ssh-deployments
description: The Harness Secure Shell (SSH) Service contains the application package
  artifact (file or metadata) and the related commands to execute on the target host.
  It also included scripts for installing and…
short_version: The Harness Secure Shell (SSH) Service contains the application package
  artifact (file or metadata) and the related commands to execute on the target host.
  It also included scripts for installing and…
tags: []
show_toc: true
is_private: false
is_published: true
is_featured: false
stale_status:
  is_stale: false
  reason: Article updated
  source: API
  triggered_at: 2021-05-12T23:16:07.647713Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: Add Artifacts and App Stacks for Traditional (SSH) Deployments
  description: ""
  short_version: ""
  body: '<p>The Harness Secure Shell (SSH) Service contains the application package
    artifact (file or metadata) and the related commands to execute on the target
    host. It also included scripts for installing and running an application stack,
    if needed.</p><p>In this topic, we will show you how to create the Service for
    your application package artifact, add additional scripts, and add an application
    stack.</p><p>In this topic:</p><ul><li> <a href="#before_you_begin">Before You
    Begin</a></li><li> <a href="#step_1_create_a_harness_ssh_service">Step 1: Create
    a Harness SSH Service</a></li><li> <a href="#step_2_select_an_artifact_type">Step
    2: Select an Artifact Type</a><ul><li> <a href="#supported_packaging_formats">Supported
    Packaging Formats</a></li></ul></li><li> <a href="#option_select_an_application_stack">Option:
    Select an Application Stack</a></li><li> <a href="#review_secure_shell_service_sections">Review:
    Secure Shell Service Sections</a></li><li><a href="#review_software_required_by_commands">Review:
    Software Required by Commands</a></li><li> <a href="#step_3_add_your_artifact_source">Step
    3: Add Your Artifact Source</a></li><li> <a href="#option_view_artifact_history">Option:
    View Artifact History</a></li><li> <a href="#see_also">See Also</a></li><li> <a
    href="#configure_as_code">Configure As Code</a></li></ul><h3>Before You Begin</h3><ul><li>
    <a href="/article/mk5pjqyugc-connect-to-your-target-ssh-platform">Connect to Your
    Repos and Target SSH Platforms</a></li><li> <a href="/article/6pwni5f9el-traditional-deployments-overview">Traditional
    Deployments Overview</a></li><li> <a href="/article/4o7oqwih6h-harness-key-concepts">Harness
    Key Concepts</a></li></ul><p></p><h3>Step 1: Create a Harness SSH Service</h3><p>To
    create a Service for an application package, do the following:</p><ol><li>In your
    Application, click <strong>Services</strong>, and then click <strong>Add Service</strong>.
    The <strong>Add Service</strong> settings appear.</li><li>In <strong>Name</strong>,
    enter a name for the Service. You will use this name when selecting this Service
    in Harness Environments, Workflows, and other components. For more information,
    see  <a href="https://docs.harness.io/article/eb3kfl8uls-service-configuration">Services</a>.</li><li>In <strong>Deployment
    Type</strong>, select <strong>Secure Shell (SSH)</strong>. All file-based Services
    are Secure Shell (SSH) deployments.The <strong>Artifact Type</strong> and <strong>Application
    Stack</strong> settings appear.</li></ol><h3>Step 2: Select an Artifact Type</h3><p>In <strong>Artifact
    Type</strong>, select the file type of your artifact. For example, <strong>Java
    Archive (JAR)</strong>.</p><h4>Supported Packaging Formats</h4><p>Harness supports
    the following traditional deployment packaging formats: WAR, JAR, TAR, RPM, ZIP,
    Docker, and custom files.</p><p>All of these formats are also supported by other
    Harness deployment types, such as Kubernetes, Helm, PCF, ECS, etc.  This topic
    is concerned with traditional deployments outside of the container orchestration
    platforms.</p><h3>Option: Select an Application Stack</h3><p>In <strong>Application
    Stack</strong>, select the app stack you want to use to as a runtime environment
    for your application, such as Tomcat.</p><p>When the Service is created, it contains
    the scripts need to install the application stack.</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/umpe4zfnac/1598467125814/image.png"/></figure><p>If
    you are deploying to an existing instance that already has an app stack installed,
    you can leave <strong>Application Stack</strong> empty. For more information,
    see  <a href="/article/g26sp2ay68-catalog">Add Application Stacks</a>.</p><h3>Review:
    Secure Shell Service Sections</h3><p>The Service page has the following important
    sections:</p><ul><li><strong>Artifact Source</strong> - The package files you
    want deployed are added here. In some cases an actual file is obtained, but in
    most cases metadata is sufficient.</li><li><strong>Artifact History</strong> -
    You can manually pull metadata on your artifacts to see their builds and versions.</li><li><strong>Script</strong> -
    The scripts to set up your files. These will typically include application stack
    setup unless your target hosts already have the application stack set up.</li><li><strong>Add
    Commands</strong> - You can add new commands from an Application or Shared Template
    Library, or simply add a blank command and add Harness scripts to it.</li><li><strong>Configuration</strong> -
    You can add variables and files to use in your Service scripts. These can be encrypted
    by Harness, allowing you to use secrets. The variables and files can be overwritten
    in Environments and Workflows.</li></ul><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/umpe4zfnac/1598397506478/image.png"/></figure><h3>Review:
    Software Required by Commands</h3><p>The commands in the Service will be executed
    on your target hosts, and so any of the software used in the commands must be
    installed on the target hosts.</p><p>For example, the <strong>Port Listening</strong>
    command uses netcat (nc):</p><pre>...<br/>nc -v -z -w 5 localhost $port<br/>...</pre><p>You
    can install nc on your target hosts simply by running: <code>yum install -y nc</code></p><p>You
    can install the required software by adding an <strong>Exec</strong> command to
    the Service that installs the software.</p><h3>Step 3: Add Your Artifact Source</h3><p>The
    Artifact Source for the Service lists the file(s) that you want copied to the
    target host(s). The Artifact History will manually pull artifact build and version
    metadata from the Artifact Source.</p><p>Before you can add an artifact source,
    you need to add a Harness Artifact Server or Cloud Provider. </p><p>If your artifact
    files are located on cloud platform storage like AWS S3, GCP Storage, or Azure
    Storage, you can add a Cloud Provider. </p><p>If the files are located in a repo
    such as Artifactory or an automation server such as Jenkins, you can create an
    Artifact Server.</p><p>For more information, see  <a href="https://docs.harness.io/article/7dghbx1dbl-configuring-artifact-server">Add
    Artifact Servers</a> and  <a href="https://docs.harness.io/article/whwnovprrb-cloud-providers">Add
    Cloud Providers</a>.</p><p>To add an artifact source, do the following:</p><ol><li>Click <strong>Add
    Artifact Source</strong>, and select the repo or cloud platform where the artifact
    is located. The dialog for the artifact source appears. This guide will use AWS
    S3 as an example.</li><li>In <strong>Cloud Provider</strong>, select the Harness
    Cloud Provider to use to locate your artifact file.</li><li>In <strong>Bucket</strong>,
    select the name of the bucket containing your artifact.</li><li>In <strong>Artifact
    Path</strong>, click the artifact Harness located in the bucket you selected in
    Bucket. If the artifact is at the root of the bucket, then just the filename is
    provided. If the artifact is in a folder, the file path is provided also.<br/>Harness
    uses <strong>Metadata Only</strong> to download the file on the target host.<br/>Metadata
    is sufficient as it contains enough information for the target host(s) to obtain
    or build the artifact. Harness stores the metadata. <br/>During runtime, Harness
    passes the metadata to the target host(s) where it is used to obtain the artifact(s).
    Ensure that the target host has network connectivity to the Artifact Server. For
    more information, see  <a href="https://docs.harness.io/article/qluiky79j8-service-types-and-artifact-sources">Service
    Types and Artifact Sources</a>.</li><li>Click SUBMIT. The artifact source is listed.</li></ol><h3>Option:
    View Artifact History</h3><p>When you add an Artifact Source to the Service, Harness
    will pull all the build and version history metadata for its artifacts. You can
    see the results of the pull in <strong>Artifact History</strong> and, if you do
    not see a build/version you expected, you can manually pull them.</p><p>To view
    the artifact history,  do the following:</p><ol><li>Click <strong>Artifact History</strong>.
    This assistant lists the artifact builds and versions Harness has pulled.</li><li>In
    the <strong>Artifact History</strong> assistant, click <strong>Manually pull artifact</strong>.
    The <strong>Manually Select An Artifact</strong> dialog appears.</li><li>In <strong>Artifact
    Stream</strong>, click the Artifact Source you added to the Service.</li><li>In <strong>Artifact</strong>,
    select an artifact build/version, and then click <strong>SUBMIT</strong>.</li><li>Click <strong>Artifact
    History</strong> to view the history.</li></ol><p>Now all available artifact builds
    and version history metadata is displayed.</p><p></p><h3>See Also</h3><ul><li>
    <a href="/article/ih779z9kb6-add-deployment-specs-for-traditional-ssh-deployments">Add
    Scripts for Traditional (SSH) Deployments</a></li></ul><h3>Configure As Code</h3><p>To
    see how to configure the settings in this topic using YAML, configure the settings
    in the UI first, and then click the YAML editor button (<span style="color:#fb9e00"
    data-hd-color="#fb9e00"><strong>&lt;/&gt;</strong></span>).</p>'
  slug: add-artifacts-for-ssh-deployments
  tags: []
  is_live: true
