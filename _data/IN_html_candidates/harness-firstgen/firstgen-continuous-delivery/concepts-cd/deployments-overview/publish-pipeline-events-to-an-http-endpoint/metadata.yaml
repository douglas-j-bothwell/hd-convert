type: article
article_id: scrsak5124
user_id: mfr0nxh4be
category_id: cwefyz0jos
author:
  name: Michael Cretzman
  profile_image: https://www.gravatar.com/avatar/2e8616837f4ee92be5d19ffe9b9ccba9?d=mm&s=150
title: Publish Pipeline Events to an HTTP Endpoint
slug: publish-pipeline-events-to-an-http-endpoint
description: Send key Pipeline deployment events to a URL endpoint as a JSON payload.
short_version: Send key Pipeline deployment events to a URL endpoint as a JSON payload.
tags: []
show_toc: true
is_private: false
is_published: true
is_featured: false
stale_status:
  is_stale: false
  reason: ""
  source: API
  triggered_at: 2022-05-18T04:12:11.410844Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: Publish Pipeline Events to an HTTP Endpoint
  description: Send key Pipeline deployment events to a URL endpoint as a JSON payload.
  short_version: Send key Pipeline deployment events to a URL endpoint as a JSON payload.
  body: "<p>To help you analyze how Pipelines are performing, Harness can send key
    Pipeline deployment events to a URL endpoint as a JSON payload. Next, you can
    use other tools to consume and build dashboards for the events.</p><p>In this
    topic:</p><ul><li><a href=\"https://docs.harness.io/article/scrsak5124-publish-pipeline-events-to-an-http-endpoint#before_you_begin\">Before
    You Begin</a></li><li><a href=\"https://docs.harness.io/article/scrsak5124-publish-pipeline-events-to-an-http-endpoint#undefined\">Supported
    Platforms and Technologies</a></li><li><a href=\"https://docs.harness.io/article/scrsak5124-publish-pipeline-events-to-an-http-endpoint#review_events_published\">Review:
    Events Published</a></li><li><a href=\"https://docs.harness.io/article/scrsak5124-publish-pipeline-events-to-an-http-endpoint#step_1_add_event_rule\">Step
    1: Add Event Rule</a></li><li><a href=\"https://docs.harness.io/article/scrsak5124-publish-pipeline-events-to-an-http-endpoint#option_pipeline_or_send_me_everything\">Option:
    Pipeline or Send Me Everything</a><ul><li><a href=\"https://docs.harness.io/article/scrsak5124-publish-pipeline-events-to-an-http-endpoint#pipeline\">Pipeline</a></li><li><a
    href=\"https://docs.harness.io/article/scrsak5124-publish-pipeline-events-to-an-http-endpoint#send_me_everything\">Send
    Me Everything</a></li></ul></li><li><a href=\"https://docs.harness.io/article/scrsak5124-publish-pipeline-events-to-an-http-endpoint#step_2_enter_the_http_endpoint_url\">Step
    2: Enter the HTTP Endpoint URL</a></li><li><a href=\"https://docs.harness.io/article/scrsak5124-publish-pipeline-events-to-an-http-endpoint#option_add_headers\">Option:
    Add Headers</a></li><li><a href=\"https://docs.harness.io/article/scrsak5124-publish-pipeline-events-to-an-http-endpoint#option_delegate_selector\">Option:
    Delegate Selector</a></li><li><a href=\"https://docs.harness.io/article/scrsak5124-publish-pipeline-events-to-an-http-endpoint#step_3_enable_the_rule\">Step
    3: Enable the Rule</a></li><li><a href=\"https://docs.harness.io/article/scrsak5124-publish-pipeline-events-to-an-http-endpoint#step_4_test_the_event_rule\">Step
    4: Test the Event Rule</a></li><li><a href=\"https://docs.harness.io/article/scrsak5124-publish-pipeline-events-to-an-http-endpoint#review_event_rules_using_graph_ql\">Review:
    Event Rules using GraphQL</a></li><li><a href=\"https://docs.harness.io/article/scrsak5124-publish-pipeline-events-to-an-http-endpoint#notes\">Notes</a></li></ul><h3>Before
    You Begin</h3><ul><li><a href=\"/article/zc1u96u6uj-pipeline-configuration\">Create
    a Pipeline</a></li><li><a href=\"/article/c3s245o7z8-main-and-services-dashboards\">Monitor
    Deployments in Dashboards</a></li></ul><h3 id=\"undefined\">Supported Platforms
    and Technologies</h3><p>See <a href=\"/article/220d0ojx5y-supported-platforms\">Supported
    Platforms and Technologies</a>.</p><h3>Review: Events Published</h3><p>Currently,
    Harness publishes the following events:</p><ul><li>PIPELINE START</li><li>PIPELINE
    COMPLETE</li><li>PIPELINE PAUSED</li><li>PIPELINE CONTINUED</li></ul><p>Harness
    will be adding more events soon.</p><h3>Step 1: Add Event Rule</h3><p>In your
    Application, in <strong>Event Rules</strong>, click <strong>Add</strong>.</p><p></p><figure><img
    src=\"https://files.helpdocs.io/kw8ldg1itf/articles/scrsak5124/1628892953023/clean-shot-2021-08-13-at-15-15-45.png\"/></figure><p>The
    <strong>Event Rule Configuration</strong> settings appear.</p><p></p><figure><img
    src=\"https://files.helpdocs.io/kw8ldg1itf/articles/scrsak5124/1628893593695/clean-shot-2021-08-13-at-15-26-25.png\"
    style=\"max-height:50%;max-width:50%\" data-hd-height=\"50%\" data-hd-width=\"50%\"/></figure><p>Enter
    a name for the event rule.</p><h3>Option: Pipeline or Send Me Everything</h3><p>You
    can select to send specific events for specific Pipelines or all events for all
    Pipelines.</p><h4>Pipeline</h4><p>In <strong>Pipelines</strong>, select the Pipelines
    you want events for, or select <strong>All Pipelines</strong>.</p><p>In <strong>Events</strong>,
    select the event types you want to publish or select <strong>All Events</strong>.</p><p></p><figure><img
    src=\"https://files.helpdocs.io/kw8ldg1itf/articles/scrsak5124/1628632834982/clean-shot-2021-08-10-at-15-00-27.png\"/></figure><h4>Send
    Me Everything</h4><p>This option sends all events that Harness currently publishes.</p><p>When
    Harness supports more events, these events will also be published.</p><h3>Step
    2: Enter the HTTP Endpoint URL</h3><p>In <strong>Webhook URL</strong>, enter the
    HTTP endpoint URL where Harness will publish the events for this rule.</p><p>This
    is the URL you will use to consume events.</p><h3>Option: Add Headers</h3><p>Add
    any HTTP headers that you want to send with the events.</p><h3>Option: Delegate
    Selector</h3><p>By default, Harness will select any available Delegate. You might
    want to use a specific Delegate because you know it has access to the endpoint
    URL.</p><p>In <strong>Delegate Selector</strong>, select the Selector for the
    Delegate(s) you want to use.</p><p>You add Selectors to Delegates to make sure
    that they&#39;re used to execute the command. For more information, see <a href=\"/article/c3fvixpgsl-select-delegates-for-specific-tasks-with-selectors\">Select
    Delegates with Selectors</a>.</p><p>Harness will use Delegates matching the Selectors
    you add.</p><p>If you use one Selector, Harness will use any Delegate that has
    that Selector.</p><p>If you select two Selectors, a Delegate must have both Selectors
    to be selected. That Delegate might also have other Selectors, but it must have
    the two you selected.</p><div class=\"note-callout\">You can use expressions for
    Harness built-in variables or Account Default variables in <strong>Delegate Selectors</strong>.
    When the variable expression is resolved at deployment runtime, it must match
    an existing Delegate Selector.</div><p></p><h3>Step 3: Enable the Rule</h3><p>You
    can enable and disable a rule using the toggle button.</p><h3>Step 4: Test the
    Event Rule</h3><p>You can test an event rule if the rule is enabled or disabled.</p><p>To
    test the rule, click <strong>Test</strong>.</p><p>Here is a Pipeline Start event
    payload example:</p><pre class=\"hljs json\">{<br/>  &#34;id&#34;: &#34;123-456-789-123-456&#34;,<br/>
    \ &#34;version&#34;: &#34;v1&#34;,<br/>  &#34;eventType&#34;: &#34;pipeline_start&#34;,<br/>
    \ &#34;data&#34;: {<br/>    &#34;application&#34;: {<br/>      &#34;id&#34;: &#34;Ze3W2gzaS7aQ-h8MKzJ-fA&#34;,<br/>
    \     &#34;name&#34;: &#34;app name&#34;<br/>    },<br/>    &#34;pipeline&#34;:
    {<br/>      &#34;id&#34;: &#34;Ze3W2gzaS7aQ-h8MKzJ-fA&#34;,<br/>      &#34;name&#34;:
    &#34;Dummy Pipeline&#34;<br/>    },<br/>    &#34;triggeredBy&#34;: {<br/>      &#34;uuid&#34;:
    &#34;lv0euRhKRCyiXWzS7pOg6g&#34;,<br/>      &#34;name&#34;: &#34;Admin&#34;,<br/>\t
    \    &#34;email&#34;: &#34;john.doe@harness.io&#34;<br/>    },<br/>    &#34;triggeredByType&#34;:
    &#34;USER&#34;,<br/>    &#34;startedAt&#34;: 1626951572549,<br/>    &#34;services&#34;:
    [<br/>      {<br/>        &#34;id&#34;: &#34;sySeUbIXSE6CIh_aTXCA8g&#34;<br/>
    \     }<br/>    ],<br/>    &#34;environments&#34;: [<br/>      {<br/>        &#34;id&#34;:
    &#34;ULwtK2C1ROCwPD--1g_uag&#34;<br/>      }<br/>    ],<br/>    &#34;infraDefinitions&#34;:
    [<br/>      {<br/>        &#34;id&#34;: &#34;foHTHGmMTVSHmojA2PCLCw&#34;<br/>
    \     }<br/>    ],<br/>    &#34;executionId&#34;: &#34;XN9OQ3S6Rli2yBYXFwSCBQ&#34;<br/>
    \ }<br/>}</pre><p></p><p>Here is a Pipeline Complete event payload example:</p><pre
    class=\"hljs json\">{<br/>  &#34;id&#34;: &#34;123-456-789-123-456&#34;,<br/>
    \ &#34;version&#34;: &#34;v1&#34;,<br/>  &#34;eventType&#34;: &#34;pipeline_end&#34;,<br/>
    \ &#34;data&#34;: {<br/>    &#34;application&#34;: {<br/>      &#34;id&#34;: &#34;Ze3W2gzaS7aQ-h8MKzJ-fA&#34;,<br/>
    \     &#34;name&#34;: &#34;app name&#34;<br/>    },<br/>    &#34;pipeline&#34;:
    {<br/>      &#34;id&#34;: &#34;Ze3W2gzaS7aQ-h8MKzJ-fA&#34;,<br/>      &#34;name&#34;:
    &#34;Dummy Pipeline&#34;<br/>    },<br/>    &#34;triggeredBy&#34;: {<br/>      &#34;uuid&#34;:
    &#34;lv0euRhKRCyiXWzS7pOg6g&#34;,<br/>      &#34;name&#34;: &#34;Admin&#34;,<br/>
    \   &#34;email&#34;: &#34;john.doe@harness.io&#34;<br/>    },<br/>    &#34;triggeredByType&#34;:
    &#34;USER&#34;,<br/>    &#34;startedAt&#34;: 1626951572549,<br/>    &#34;services&#34;:
    [<br/>      {<br/>        &#34;id&#34;: &#34;sySeUbIXSE6CIh_aTXCA8g&#34;<br/>
    \     }<br/>    ],<br/>    &#34;environments&#34;: [<br/>      {<br/>        &#34;id&#34;:
    &#34;ULwtK2C1ROCwPD--1g_uag&#34;<br/>      }<br/>    ],<br/>    &#34;infraDefinitions&#34;:
    [<br/>      {<br/>        &#34;id&#34;: &#34;foHTHGmMTVSHmojA2PCLCw&#34;<br/>
    \     }<br/>    ],<br/>    &#34;executionId&#34;: &#34;XN9OQ3S6Rli2yBYXFwSCBQ&#34;,<br/>
    \   &#34;completedAt&#34;: 1626951580029,<br/>    &#34;status&#34;: &#34;SUCCESS&#34;<br/>
    \ }<br/>}</pre><p></p><p>You can see various Pipeline event details in both payloads
    example. The Ids correspond to Harness entities in the Harness Application such
    as Services and Environments.</p><p>To perform analysis on Pipeline performance,
    you can use the <code>startedAt</code> and <code>completedAt</code> timestamps
    (in milliseconds).</p><h3>Review: Event Rules using GraphQL</h3><p>You can create
    and query the event rules for an Application using the Harness GraphQL API.</p><p>See
    <a href=\"/article/cfrqinjhci-publish-pipeline-events-to-an-http-endpoint-using-the-api\">Publish
    Pipeline Events to an HTTP Endpoint using the API</a>.</p><h3>Notes</h3><ul><li>The
    Event Rules do not appear in the Configure As Code YAML.</li><li>If you delete
    an Application, its Event Rules are also deleted.</li></ul><p></p>"
  slug: publish-pipeline-events-to-an-http-endpoint
  tags: []
  is_live: true
