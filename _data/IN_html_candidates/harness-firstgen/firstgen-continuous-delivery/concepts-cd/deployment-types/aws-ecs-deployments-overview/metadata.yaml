type: article
article_id: 5z2kw34d7x
user_id: mfr0nxh4be
category_id: vbcmo6ltg7
author:
  name: Michael Cretzman
  profile_image: https://www.gravatar.com/avatar/2e8616837f4ee92be5d19ffe9b9ccba9?d=mm&s=150
title: AWS ECS Deployments Overview
slug: aws-ecs-deployments-overview
description: A summary of Harness AWS ECS implementation.
short_version: A summary of Harness AWS ECS implementation.
tags:
- ECS deployments
- ECS overview
show_toc: true
is_private: false
is_published: true
is_featured: false
stale_status:
  is_stale: false
  reason: ""
  source: API
  triggered_at: 2022-07-07T00:00:16.05654Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: AWS ECS Deployments Overview
  description: A summary of Harness AWS ECS implementation.
  short_version: A summary of Harness AWS ECS implementation.
  body: '<p>This topic describes the concept of a Harness ECS deployment by describing
    the high-level steps involved.</p><p>For a quick tutorial, see <a href="/article/j39azkrevm-aws-ecs-deployments">AWS
    ECS Quickstart</a>.</p><p>For detailed instructions on using ECS in Harness, see
    the <a href="/category/df9vj316ec-ecs-deployment">AWS ECS How-tos</a>.</p><h3>Before
    You Begin</h3><p>Before learning about Harness ECS deployments, you should have
    an understanding of <a href="/article/4o7oqwih6h-harness-key-concepts">Harness
    Key Concepts</a>.</p><h3>What Does Harness Need Before You Start?</h3><p>A Harness
    ECS deployment requires the following:</p><ol><li>Artifact: For example, a Docker
    image of NGINX from Docker Hub.</li><li>One or more existing ECS clusters:<ul><li>You
    will need an ECS cluster to deploy your ECS services using Harness.</li><li>If
    you use a Harness ECS Delegate (recommended), you will need an ECS cluster for
    the Delegate. The steps for setting up an ECS Delegate are in <a href="/article/j39azkrevm-aws-ecs-deployments">AWS
    ECS Quickstart</a>.</li></ul></li><li>IAM Role for the Harness Cloud Provider
    connection to AWS. The policies are listed in <a href="/article/j39azkrevm-aws-ecs-deployments">AWS
    ECS Quickstart</a>.</li></ol><h3>What Does Harness Deploy?</h3><p>Harness takes
    the artifact, ECS task definition, and service specification you provide, and
    deploys the artifact as a task in a new ECS service in the target ECS cluster.</p><h3>What
    Does a Harness ECS Deployment Involve?</h3><p>The following list describes the
    major steps of a Harness ECS deployment:</p><p></p><table><tbody><tr><td><p><strong>Step</strong></p></td><td><p><strong>Name</strong></p></td><td><p><strong>Description
    and Links</strong></p></td></tr><tr><td><p>1</p></td><td><p>Install the Harness
    ECS <strong>Delegate</strong> in your ECS cluster. </p></td><td><p>Typically,
    the ECS Delegate is installed in the target cluster where you will deploy your
    application(s).</p></td></tr><tr><td><p>2</p></td><td><p>Add a Harness <strong>Artifact
    Server</strong>.</p></td><td><p>Add a Harness <strong>Artifact Server</strong>.
    For example, a Docker Registry Artifact Server that connects to the Docker registry
    where your Docker images are located, or the public Docker Hub.</p></td></tr><tr><td><p>3</p></td><td><p>Add
    an <strong>AWS</strong> <strong>Cloud Provider</strong>.</p></td><td><p>An AWS Cloud
    Provider is a connection to your AWS account.</p><p>The AWS Cloud Provider is
    used to deploy the ECS services to the ECS cluster.</p></td></tr><tr><td><p>4</p></td><td><p>Create
    the Harness <strong>Application</strong> for your Kubernetes CD Pipeline.</p></td><td><p>The
    Harness Application represents a group of microservices, their deployment pipelines,
    and all the building blocks for those pipelines. Harness represents your release
    process using a logical group of one or more entities: Services, Environments,
    Workflows, Pipelines, Triggers, and Infrastructure Provisioners. Applications
    organize all of the entities and configurations in Harness CD.</p></td></tr><tr><td><p>5</p></td><td><p>Create
    the Harness <strong>Service</strong> using the Amazon EC2 Container Services (ECS)
    Deployment Type.</p></td><td><p>Add your ECS specs and any config variables and
    files.</p><p>You can define specs for the following:</p><ul><li>Replica Strategy</li><li>Daemon
    Strategy</li><li>awsvpc Network Mode</li><li>Service Discovery</li></ul></td></tr><tr><td><p>6</p></td><td><p>Create
    the Harness <strong>Environment</strong> and Infrastructure Definition for your
    target Kubernetes clusters), and any overrides.</p></td><td><p>Using the Harness
    Cloud Provider you set up, you can select the target Kubernetes cluster and namespace
    for your deployment.</p><p>You can also override any Service settings, such as
    manifest values. This enables you to use a single Service with multiple Harness
    Environments.</p></td></tr><tr><td><p>7</p></td><td><p>Create the Canary, Blue/Green,
    or Rollout deployment Harness <strong>Workflow</strong>.</p></td><td><p>The Workflow
    deploys the artifact(s) and Kubernetes workloads defined in the Harness Service
    to the cluster and namespace in the Harness Infrastructure Definition.</p></td></tr><tr><td><p>8</p></td><td><p>Deploy
    the Workflow.</p></td><td><p>Once you&#39;ve deployed a Workflow, learn how to
    improve your Kubernetes CD:</p><ul><li><a href="/article/m220i1tnia-workflow-configuration">Workflows</a></li><li><a
    href="/article/xerirloz9a-add-a-trigger-2">Triggers</a></li><li><a href="/article/v3l3wqovbe-infrastructure-definitions">Infrastructure
    Definitions</a></li></ul></td></tr></tbody></table><h3 id="component_overview">Component
    Overview</h3><p>The following table lists the ECS components and where they are
    set up in Harness, as well as the related Harness components that perform ECS
    deployment operations. For detailed explanations of ECS, see the <a href="https://docs.aws.amazon.com/AmazonECS/latest/developerguide/Welcome.html">ECS
    Developer Guide</a> from Amazon.</p><table><tbody><tr><td><p><strong>Component</strong></p></td><td><p><strong>Description</strong></p></td><td><p><strong>Harness
    Location</strong></p></td></tr><tr><td><p>Harness Delegate</p></td><td><p>A software
    service you run in the same VPC as the ECS cluster to enable Harness to perform
    deployment operations. The Delegate does not need root privileges, and it only
    makes an outbound HTTPS connection to the Harness platform.</p></td><td><p><a
    href="/article/j39azkrevm-aws-ecs-deployments">AWS ECS Quickstart</a></p></td></tr><tr><td><p>Harness
    Cloud Provider</p></td><td><p>A Cloud Provider is a logical representation of
    your AWS infrastructure. Typically, a Cloud Provider is mapped to a AWS account,
    Kubernetes cluster, Google service account, Azure subscription, or a data center.</p></td><td><p><a
    href="/article/j39azkrevm-aws-ecs-deployments">AWS ECS Quickstart</a></p></td></tr><tr><td><p>ECS
    Task Definition</p></td><td><p>Describes the Docker containers to run (CPU, memory,
    environment variables, ports, etc) and represents your application.</p></td><td><p>Specified
    in the Harness Service, in Container Specification.</p></td></tr><tr><td><p>ECS
    Task</p></td><td><p>Instance of a Task Definition. Multiple Tasks can be created
    by one Task Definition, as demand requires.</p></td><td><p></p></td></tr><tr><td><p>ECS
    Service</p></td><td><p>Defines the minimum and maximum Tasks from one Task Definition
    to run at any given time, autoscaling, and load balancing.</p></td><td><p>This
    is specified in the Harness Service, in Service Specification.</p></td></tr><tr><td><p>ECS
    Cluster</p></td><td><p>A Cluster is a group of ECS Container Instances where you
    run your service tasks in order for them to be accessible. The container management
    service handles the cluster across one or more ECS Container Instance(s), including
    the scheduling, maintaining, and scaling requests to these instances.</p></td><td><p>ECS
    Clusters are selected in two Harness components:</p><ul><li>The AWS Cloud Provider,
    via the IAM role for Delegate option.</li><li>Harness application Environment,
    where you select the AWS Cloud provider, and your ECS cluster name.</li></ul></td></tr><tr><td><p>Launch
    Types</p></td><td><p>There are two types:</p><ul><li>Fargate - Run containers
    without having to manage servers or clusters of Amazon EC2 instances.</li><li>EC2
    - Run containers on a cluster of Amazon EC2 instances that you manage.</li></ul></td><td><p>You
    specify the launch type to use when adding a Service Infrastructure to a Harness
    Environment.</p></td></tr><tr><td><p>Replica Scheduling Strategy</p></td><td><p>Places
    and maintains the desired number of tasks across your cluster.</p></td><td><p>This
    is specified in the Harness Service, in Service Specification.</p></td></tr><tr><td><p>Daemon
    Scheduling Strategy</p></td><td><p>As of July 2018, ECS has a daemon scheduling
    strategy that deploys exactly one task on each active container instance that
    meets all of the task placement constraints that you specify in your cluster.</p><p>With
    a daemon strategy, a task is deployed onto each instance in a cluster to provide
    common supporting functionality.</p></td><td><p>This is specified in the Harness
    Service, in Service Specification.</p></td></tr><tr><td><p>awsvpc Network Mode</p></td><td><p>Provides
    each task with its own elastic network interface. Fargate task definitions require
    the awsvpc network mode.</p></td><td><p></p></td></tr><tr><td><p>Service Discovery</p></td><td><p>An
    ECS service can use the ECS Service Discovery to manage HTTP and DNS namespaces
    for ECS services via the AWS Cloud Map API actions.</p></td><td><p>This is specified
    in the Harness Service, in Service Specification.</p></td></tr><tr><td><p>Auto
    Scaling</p></td><td><p>Auto Scaling adjusts the ECS desired count up or down in
    response to CloudWatch alarms.</p></td><td><p>This is specified in the Harness
    Workflow ECS Service Setup command.</p></td></tr></tbody></table><h3>Next Steps</h3><p>Read
    the following topics to build on what you&#39;ve learned:</p><ul><li><a href="/article/j39azkrevm-aws-ecs-deployments">AWS
    ECS Quickstart</a>.</li><li><a href="/category/df9vj316ec-ecs-deployment">AWS
    ECS How-tos</a>.</li></ul><p></p>'
  slug: aws-ecs-deployments-overview
  tags:
  - ECS deployments
  - ECS overview
  is_live: true
