type: article
article_id: 583ojfgg49
user_id: mfr0nxh4be
category_id: vbcmo6ltg7
author:
  name: Michael Cretzman
  profile_image: https://www.gravatar.com/avatar/2e8616837f4ee92be5d19ffe9b9ccba9?d=mm&s=150
title: Native Helm Deployments Overview
slug: helm-deployments-overview
description: A summary of Harness Helm implementation.
short_version: A summary of Harness Helm implementation.
tags:
- Helm overview
show_toc: true
is_private: false
is_published: true
is_featured: false
stale_status:
  is_stale: false
  reason: ""
  source: API
  triggered_at: 2022-07-18T21:54:10.504385Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: Native Helm Deployments Overview
  description: A summary of Harness Helm implementation.
  short_version: A summary of Harness Helm implementation.
  body: '<p></p><div class="tip-callout">This content is for Harness <a href="/article/1fjmm4by22">FirstGen</a>.
    Switch to <a href="/article/lbhf2h71at">NextGen</a>.</div><div class="note-callout">Harness
    includes both Kubernetes and Helm deployments, and you can use Helm charts in
    both. Harness <a href="/article/pc6qglyp5h-kubernetes-deployments-overview">Kubernetes</a> integration
    allows you to use your own Helm chart (remote or local), and Harness executes
    the Kubernetes API calls to build everything without Helm and Tiller (for Helm
    v2) needing to be installed in the target cluster. See <a href="/article/yjkkwi56hl-link-resource-files-or-helm-charts-in-git-repos">Link
    Resource Files or Helm Charts in Git Repos</a>.</div><p>This topic describes the
    concept of a Harness <strong>Native Helm</strong> deployment by describing the
    high-level steps involved.</p><p>For a quick tutorial on using Helm with a Harness
    Kubernetes deployment, see the <a href="/article/2aaevhygep-helm-quickstart">Helm
    Quickstart</a>.</p><div class="note-callout">Harness supports Helm v2 and v3.</div><h3>Before
    You Begin</h3><p>Before learning about Harness Helm-based Kubernetes deployments,
    you should have an understanding of <a href="/article/4o7oqwih6h-harness-key-concepts">Harness
    Key Concepts</a>.</p><h3 id="harness_helm_or_kubernetes_deployments">Native Helm
    or Kubernetes Deployments?</h3><p>Harness includes both Kubernetes and Helm deployments,
    and you can use Helm charts in both. Here&#39;s the difference:</p><ul><li>Harness
    <a href="/article/pc6qglyp5h-kubernetes-deployments-overview">Kubernetes Deployments</a>
    allow you to use your own Kubernetes manifests or a Helm chart (remote or local),
    and Harness executes the Kubernetes API calls to build everything without Helm
    and Tiller needing to be installed in the target cluster.<br/>Harness Kubernetes
    deployments also support all deployment strategies (Canary, Blue/Green, Rolling,
    etc).</li><li>For Harness <a href="/article/ii558ppikj-helm-deployments-overview">Native
    Helm Deployments</a>, you must always have Helm and Tiller (for Helm v2) running
    on one pod in your target cluster. Tiller makes the API calls to Kubernetes in
    these cases. You can perform a Basic or Rolling deployment strategy only (no Canary
    or Blue Green). For Harness Native Helm v3 deployments, you no longer need Tiller,
    but you are still limited to Basic or Rolling deployments.<ul><li><strong>Versioning:</strong>
    Harness Kubernetes deployments version all objects, such as ConfigMaps and Secrets.
    Native Helm does not.</li><li><strong>Rollback:</strong> Harness Kubernetes deployments
    will roll back to the last successful version. Native Helm will not. If you did
    2 bad Native Helm deployments, the 2nd one will just rollback to the 1st. Harness
    will roll back to the last <u>successful</u> version.</li></ul></li></ul><h3>What
    Does Harness Need Before You Start?</h3><p>A Harness <strong>Native Helm</strong>
    deployment requires the following:</p><ul><li>Artifact: For example, a Docker
    image of NGINX from Docker Hub.</li><li>Kubernetes cluster: You will need a target
    cluster for the Harness Delegate, your application, and your Kubernetes workloads.
    A Kubernetes Delegate requires at least 8GB RAM, and so your cluster should have
    enough RAM to host the Delegate and your applications and workloads.</li><li>Helm
    and Tiller <u><strong>for Helm v2 only</strong></u>: Helm and Tiller installed
    and running on one pod in the cluster.<ul><li><strong>If you are using Helm v3:</strong>
    You do not need Tiller installed. Tiller is not used in Helm v3.</li><li>When
    you install and run a new Harness Delegate, <a href="/article/ymw96mf8wy-use-custom-helm-binaries-on-harness-delegates">Harness
    includes Helm 3 support automatically</a>.</li></ul></li><li>Helm chart: For example,
    a Bitnami Helm chart for NGINX from their Github repo.</li></ul><h3>What Does
    Harness Deploy?</h3><p>Harness takes the artifacts and Helm chart and version
    you provide and deploys the artifact to the target Kubernetes cluster.</p><h3>What
    Does a Harness Helm Deployment Involve?</h3><p>The following list describes the
    major steps of a Harness Helm deployment:</p><p></p><table><tbody><tr><td><p><strong>Step</strong></p></td><td><p><strong>Name</strong></p></td><td><p><strong>Description
    and Links</strong></p></td></tr><tr><td><p>1</p></td><td><p>Install the Harness
    Kubernetes or Helm <strong>Delegate</strong>. </p></td><td><p>Typically, the Kubernetes
    or Helm Delegate is installed in the target cluster where you will deploy your
    application(s).</p><p>You can also install the Helm Delegate using Rancher.</p></td></tr><tr><td><p>2</p></td><td><p>Add
    a Harness <strong>Artifact Server</strong>.</p></td><td><p>Add a Harness <strong>Artifact
    Server</strong>. For example, a Docker Registry Artifact Server that connects
    to the Docker registry where your Docker images are located, or the public Docker
    Hub.</p></td></tr><tr><td><p>3</p></td><td><p>Add a Helm Chart or Source Repository.</p></td><td><p>Add
    your Helm chart using a Helm Chart or Source Repository.</p></td></tr><tr><td><p>4</p></td><td><p>Add
    a <strong>Cloud Provider</strong>.</p></td><td><p>A Cloud Provider is a connection
    to your Kubernetes cluster.</p><p>You can add a Kubernetes Cluster Cloud Provider
    (recommended) or a Cloud Provider for the cloud platform where the cluster is
    hosted, such as a Google Cloud Platform Cloud Provider. A Kubernetes Cluster Cloud
    Provider will connect to any cluster on any platform.</p><p>In you use a Kubernetes
    Cluster Cloud Provider, you can use the Delegate installed in your cluster for
    authentication.</p></td></tr><tr><td><p>5</p></td><td><p>Create the Harness <strong>Application</strong> for
    your Kubernetes CD Pipeline.</p></td><td><p>The Harness Application represents
    a group of microservices/apps, their deployment pipelines, and all the building
    blocks for those pipelines. Harness represents your release process using a logical
    group of one or more entities: Services, Environments, Workflows, Pipelines, Triggers,
    and Infrastructure Provisioners. Applications organize all of the entities and
    configurations in Harness CD.</p></td></tr><tr><td><p>6</p></td><td><p>Create
    the Harness <strong>Service</strong> using the <strong>Native Helm</strong> Deployment
    Type.</p></td><td><p>Add your Helm charts and any config variables and files.</p></td></tr><tr><td><p>7</p></td><td><p>Create
    the Harness <strong>Environment</strong> and Infrastructure Definition for your
    target Kubernetes clusters, and any overrides.</p></td><td><p>Using the Harness
    Cloud Provider you set up, you can select the target Kubernetes cluster and namespace
    for your deployment.</p><p>You can also override any Service settings, such as
    manifest values. This enables you to use a single Service with multiple Harness
    Environments.</p></td></tr><tr><td><p>8</p></td><td><p>Create the Basic Helm deployment
    Harness <strong>Workflow</strong>.</p></td><td><p>The Workflow deploys the artifact(s)
    and Kubernetes workloads defined in the Harness Service Helm charts to the cluster
    and namespace in the Harness Infrastructure Definition.</p></td></tr><tr><td><p>9</p></td><td><p>Deploy
    the Workflow.</p></td><td><p>Once you&#39;ve deployed a Workflow, learn how to
    improve your Kubernetes CD:</p><ul><li> <a href="/article/m220i1tnia-workflow-configuration">Workflows</a></li><li>
    <a href="/article/xerirloz9a-add-a-trigger-2">Triggers</a></li><li> <a href="/article/o22jx8amxb-add-an-infra-provisioner">Infrastructure
    Provisioners Overview</a></li></ul></td></tr></tbody></table><h3>Next Steps</h3><p>Read
    the following topics to build on what you&#39;ve learned:</p><ul><li><a href="/category/7gqn6m2t46-helm-deployment">Helm
    How-tos</a></li><li>Blog on Helm support in Harness Kubernetes deployments, <a
    href="https://harness.io/2019/05/helm-support-for-harness-continuous-delivery/"
    target="_blank">Helm Support for Harness Continuous Delivery</a>.</li></ul><p></p>'
  slug: helm-deployments-overview
  tags:
  - Helm overview
  is_live: true
