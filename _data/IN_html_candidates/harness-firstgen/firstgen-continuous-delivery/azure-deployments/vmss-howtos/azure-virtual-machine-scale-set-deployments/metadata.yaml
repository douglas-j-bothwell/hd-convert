type: article
article_id: 1h0723zsvm
user_id: mfr0nxh4be
category_id: 4o8zim2tfr
author:
  name: Michael Cretzman
  profile_image: https://www.gravatar.com/avatar/2e8616837f4ee92be5d19ffe9b9ccba9?d=mm&s=150
title: Azure Virtual Machine Scale Set Deployments Overview
slug: azure-virtual-machine-scale-set-deployments
description: Currently, this feature is behind the Feature Flag AZURE_VMSS. Contact
  Harness Support to enable the feature. To deploy an Azure virtual machine scale
  set (VMSS) using Harness, you only need to provi…
short_version: Currently, this feature is behind the Feature Flag AZURE_VMSS. Contact
  Harness Support to enable the feature. To deploy an Azure virtual machine scale
  set (VMSS) using Harness, you only need to provi…
tags: []
show_toc: false
is_private: false
is_published: true
is_featured: false
stale_status:
  is_stale: false
  reason: Article updated
  source: API
  triggered_at: 2022-04-25T16:46:03.123297Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: Azure Virtual Machine Scale Set Deployments Overview
  description: ""
  short_version: ""
  body: '<p></p><div class="note-callout">Currently, this feature is behind the Feature
    Flag <code>AZURE_VMSS</code>. Contact <a href="https://mail.google.com/mail/?view=cm&amp;fs=1&amp;tf=1&amp;to=support@harness.io"
    target="_blank">Harness Support</a> to enable the feature.</div><p></p><p>To deploy
    an Azure virtual machine scale set (VMSS) using Harness, you only need to provide
    two things: an instance image and a base VMSS template.</p><p>Harness creates
    a new VMSS from the base VMSS template and adds instances using the instance image
    you provided.</p><p>For detailed instructions on deploying a VMSS using Harness,
    see the following how-tos. They are listed in the order they are commonly performed.</p><ul><li><a
    href="/article/d5hob1zuip-connect-to-your-azure-vmss">Connect to Azure for VMSS
    Deployments</a></li><li><a href="/article/c43hmoj6ic-add-your-azure-vm-image-for-deployment">Add
    Your Azure VM Image for Deployment</a></li><li><a href="/article/2976rmk4kd-define-your-azure-vmss-target-infrastructure">Define
    Your Azure VMSS Target Infrastructure</a></li><li><a href="/article/74htogyjad-create-an-azure-vmss-basic-deployment">Create
    an Azure VMSS Basic Deployment</a></li><li><a href="/article/ebq6gwgs5r-create-an-azure-vmss-canary-deployment">Create
    an Azure VMSS Canary Deployment</a></li><li><a href="/article/9op1u6dgks-create-an-azure-vmss-blue-green-deployment">Create
    an Azure VMSS Blue/Green Deployment</a></li></ul><p>Harness uses tagging and naming
    for versioning. See <a href="/article/w67zx6mv87-azure-vmss-versioning-and-naming">Azure
    VMSS Versioning and Naming</a>.</p><h3 id="undefined">Before You Begin</h3><p>Before
    learning about Harness VMSS deployments, you should have an understanding of <a
    href="/article/4o7oqwih6h-harness-key-concepts">Harness Key Concepts</a>.</p><h3>Limitations</h3><p>Harness
    uses the Azure SDK among other methods and Authenticated proxy is not supported
    for Azure SDK. Consequently, you cannot use Azure connections for artifacts, machine
    images, etc, that require proxy authentication. This is an Azure limitation, not
    a Harness limitation. This is a known Azure limitation with Java environment properties
    and their SDK.</p><h3>What Does Harness Need Before You Start?</h3><p>A Harness
    VMSS deployment requires the following:</p><ul><li>A working Azure VM instance
    image that Harness will use to create your instances.</li><li>A working VMSS that
    Harness will use as a template for the new VMSS(s) it creates.</li><li>An Azure
    VM to host the Harness Delegate that will perform the deployment tasks.</li><li>Azure
    subscription you will use to connect Harness to your Azure platform. The subscription
    must have a Reader role at minimum. This role is only used by the Harness Delegate
    when it uses the Azure APIs to discover target VMs.</li><li>SSH key for Harness
    to set up on the new VMSS instances. This enables users to log into the new instances.</li></ul><h3>What
    Does Harness Deploy?</h3><p>Harness takes the instance image and base VMSS you
    provide and creates a new VMSS and populates it with instances using the image.
    You can specify the desired, min, and max instances for the new VMSS, resize strategy,
    and other settings in Harness.</p><h3>What Operation Systems are Supported?</h3><p>Linux
    and Windows VMSS deployments are supported.</p><h3>What Does a Harness VMSS Deployment
    Involve?</h3><p>The following list describes the major steps of a Harness VMSS
    deployment:</p><p></p><table><tbody><tr><td><p><strong>Step</strong></p></td><td><p><strong>Name</strong></p></td><td><p><strong>Links</strong></p></td></tr><tr><td><p>1</p></td><td><p>Install
    a Harness Delegate on a VM in your target Azure subnet.</p></td><td><p><a href="/article/d5hob1zuip-connect-to-your-azure-vmss">Connect
    to Azure for VMSS Deployments</a></p></td></tr><tr><td><p>2</p></td><td><p>Add
    the VM instance image Harness will use for creating new instances in the new VMSS.</p></td><td><p></p><p><a
    href="/article/c43hmoj6ic-add-your-azure-vm-image-for-deployment">Add Your Azure
    VM Image for Deployment</a></p></td></tr><tr><td><p>3</p></td><td><p>Select an
    existing VMSS to use as template when Harness creates a new VMSS.</p></td><td><p><a
    href="/article/2976rmk4kd-define-your-azure-vmss-target-infrastructure">Define
    Your Azure VMSS Target Infrastructure</a></p></td></tr><tr><td><p>4</p></td><td><p>Create
    a Harness Workflow to perform deployment.</p></td><td><p>Select the <a href="/article/325x7awntc-deployment-concepts-and-strategies">deployment
    strategy</a> you want to perform:</p><ul><li><a href="/article/74htogyjad-create-an-azure-vmss-basic-deployment">Create
    an Azure VMSS Basic Deployment</a></li><li><a href="/article/ebq6gwgs5r-create-an-azure-vmss-canary-deployment">Create
    an Azure VMSS Canary Deployment</a></li><li><a href="/article/9op1u6dgks-create-an-azure-vmss-blue-green-deployment">Create
    an Azure VMSS Blue/Green Deployment</a></li></ul></td></tr></tbody></table><p></p><p></p><p></p><p></p><p></p><p></p>'
  slug: azure-virtual-machine-scale-set-deployments
  tags: []
  is_live: true
