<p>This topic describes Harness Azure ARM rollbacks.</p><p>In this topic:</p><ul><li><a href="https://docs.harness.io/article/06mkvd27tu-azure-arm-rollbacks#limitations">Limitations</a></li><li><a href="https://docs.harness.io/article/06mkvd27tu-azure-arm-rollbacks#rollback_summary">Rollback Summary</a></li></ul><h3>Limitations</h3><ul><li><strong>Only Resource Group scope rollback is supported:</strong> rollbacks are supported for Azure ARM provisioning using the <strong>Resource Group</strong> scope only.<br/>When you add your ARM template to Harness as an Infrastructure Provisioner, you specify its scope. See <a href="/article/naj2d3ra4n-add-azure-arm-templates">Add Azure ARM Templates to Harness</a>.<br/>If you choose a scope other than <strong>Resource Group</strong>, any Workflow using that Infrastructure Provisioner will not rollback provisioned Azure resources if it fails.</li><li><strong>Storage account not supported for resource group rollback:</strong> if the ARM template used to create a resource group has a storage account (<code>Microsoft.Storage/storageAccounts</code>), then rollback fails for that storage account.<br/>This is because the template generated from Azure is not valid. During rollback you might see an error like this:</li></ul><p></p><pre>[Resource - [Microsoft.Storage/storageAccounts/fileServices - storagewfvariables1234/default], <br/>failed due to - [{error={code=InvalidXmlDocument,message=XML specified is not syntactically valid. <br/>RequestId:0000-001a-0064-000-103dcd000000 Time:2021-03-03T12:25:02.5619016Z}}]Â </pre><h3>Rollback Summary</h3><p>When you add the <strong>ARM/Blueprint Create Resource</strong> step to a Workflow, Harness adds ARM Rollback functionality automatically. No ARM Rollback step appears in the Workflow, but it will appear in the deployment in <strong>Deployments</strong> if there is a rollback.</p><p>When running a Harness Workflow that performs provisioning using an ARM template, Harness generates a template of the existing resource group and saves it before starting ARM Deployment.</p><p>You can see Harness saving the template in the <strong>Execute ARM Deployment</strong> section of the <strong>ARM/Blueprint Create Resource</strong> step:</p><pre>Starting template validation<br/>Saving existing template for resource group - [harness-arm-test] <br/>Starting ARM Deployment at Resource Group scope ... <br/>Resource Group - [harness-arm-test]<br/>Mode - [INCREMENTAL]<br/>Deployment Name - [harness_558_1616014910588]<br/>ARM Deployment request send successfully</pre><p></p><p>During rollback, this template is used to restore the resource group to its state before the deployment started. You can see the rollback in the <strong>Execute ARM Deployment</strong> of the <strong>ARM Rollback</strong> step:</p><pre>Starting ARM Rollback at Resource Group scope ... <br/>Resource Group - [anil-harness-arm-test]<br/>Mode - [COMPLETE]<br/>Deployment Name - [harness_rollback_367_1616019421845]<br/>ARM Rollback request send successfully</pre><p></p><p></p>