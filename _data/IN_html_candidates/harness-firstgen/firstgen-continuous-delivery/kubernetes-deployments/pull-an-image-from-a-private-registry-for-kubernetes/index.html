<div class="tip-callout">This content is for Harness <a href="/article/1fjmm4by22">FirstGen</a>. Switch to <a href="/category/qfj6m1k2c4">NextGen</a>.</div><p></p><p>Typically, If the Docker artifact source is in a private registry, Harness has access to that registry using the credentials set up in the Harness <a href="/article/7dghbx1dbl-configuring-artifact-server">Add Artifact Servers</a>.</p><p>In some cases, your Kubernetes cluster might not have the permissions needed to access a private Docker registry. For these cases, the default values.yaml file in Service <strong>Manifests</strong> section contains <code>dockercfg: ${artifact.source.dockerconfig}</code> . This key will import the credentials from the Docker credentials file in the artifact.</p><p>In this topic:</p><ul><li><a href="#before_you_begin">Before You Begin</a></li><li><a href="#step_1_use_the_dockercfg_value">Step 1: Use the dockercfg Value</a></li><li><a href="#notes">Notes</a></li><li><a href="#next_steps">Next Steps</a></li></ul><h3>Before You Begin</h3><p>Ensure you have reviewed and set up the following:</p><ul><li><a href="/article/wnr5n847b1-kubernetes-overview">Kubernetes Deployments Overview</a></li><li><a href="/article/6ib8n1n1k6-add-container-images-for-kubernetes-deployments">Add Container Images for Kubernetes Deployments</a></li></ul><h3>Step 1: Use the dockercfg Value</h3><ol><li>In your Harness Kubernetes Service, in <strong>Manifests</strong>, click <strong>values.yaml</strong>.</li><li>Verify that <code>dockercfg</code> key exists, and uses the <code>${artifact.source.dockerconfig}</code> expression to obtain the credentials:</li></ol><pre>dockercfg: ${artifact.source.dockerconfig}</pre><ol><li style="counter-increment:li 2" start="3">Click the <strong>deployment.yaml</strong> file.</li><li>Verify that the Secret object is inside an <code>if</code> argument using <code>dockercfg</code> and the <code>{{.Values.dockercfg}}</code> value:</li></ol><pre>{{- if .Values.dockercfg}}<br/>apiVersion: v1<br/>kind: Secret<br/>metadata:<br/>  name: {{.Values.name}}-dockercfg<br/>  annotations:<br/>    harness.io/skip-versioning: &#34;true&#34;<br/>data:<br/>  .dockercfg: {{.Values.dockercfg}}<br/>type: kubernetes.io/dockercfg<br/>---<br/>{{- end}}</pre><p>With these requirements met, the cluster import the credentials from the Docker credentials file in the artifact.</p><h3>Notes</h3><ul><li>Any secrets in the manifest are sanitized when they are displayed in the deployment logs. See <a href="/article/o5ec7vvtju-secrets-and-log-sanitization">Secrets and Log Sanitization</a>.</li><li>When you are using a public repo, the <code>dockercfg: ${artifact.source.dockerconfig}</code> in values.yaml is ignored by Harness. You do not need to remove it.</li><li>If you want to use a private repo and no imagePullSecret, then set <code>dockercfg</code> to empty in values.yaml.</li><li><strong>Legacy imagePullSecret Method</strong> â€” Previously, Harness used a <code>createImagePullSecret</code> value in values.yaml that could be set to <code>true</code> or <code>false</code>, and <code>dockercfg: ${artifact.source.dockerconfig}</code> to obtain the credentials. If <code>createImagePullSecret</code> was set to <code>true</code>, the following default Secret object in deployment.yaml would be used:</li></ul><pre>{{- if .Values.createImagePullSecret}}<br/>apiVersion: v1<br/>kind: Secret<br/>metadata:<br/>  name: {{.Values.name}}-dockercfg<br/>  annotations:<br/>    harness.io/skip-versioning: &#34;true&#34;<br/>data:<br/>  .dockercfg: {{.Values.dockercfg}}<br/>type: kubernetes.io/dockercfg<br/>---<br/>{{- end}}</pre><p>This legacy method is still supported for existing Services that use it, but the current method of using the default values.yaml and deployment.yaml files is recommended.</p><h3>Next Steps</h3><ul><li><a href="/article/2j2vi5oxrq-define-kubernetes-manifests">Define Kubernetes Manifests</a></li></ul><p></p>