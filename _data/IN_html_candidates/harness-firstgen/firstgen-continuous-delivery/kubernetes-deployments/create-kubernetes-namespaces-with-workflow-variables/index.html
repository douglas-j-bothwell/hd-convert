<p>Namespaces for your Kubernetes deployments are typically set up in the Harness Service and Infrastructure Definition. In some cases, you might want to provide the namespace only at the time of deployment.</p><p>You can pass in a Kubernetes namespace as part of a Workflow deployment by using a Workflow variable in the Infrastructure Definition <strong>Namespace</strong> setting.</p><p>A value for the namespace Workflow variable can be provided manually or in response to an event using a Trigger.</p><p>In this topic:</p><ul><li> <a href="#before_you_begin">Before You Begin</a></li><li> <a href="#step_1_create_the_workflow_variable">Step 1: Create the Workflow Variable</a></li><li> <a href="#step_2_use_the_variable_in_the_infrastructure_definition">Step 2: Use the Variable in the Infrastructure Definition</a></li><li> <a href="#option_1_enter_a_namespace_manually">Option 1: Enter a Namespace Manually</a></li><li> <a href="#option_2_enter_a_namespace_with_a_trigger">Option 2: Enter a Namespace with a Trigger</a></li><li> <a href="#notes">Notes</a></li><li> <a href="#next_steps">Next Steps</a></li></ul><h3>Before You Begin</h3><ul><li><a href="/article/2j2vi5oxrq-define-kubernetes-manifests">Define Kubernetes Manifests</a></li><li><a href="/article/u3rp89v80h-define-your-kubernetes-target-infrastructure">Define Your Kubernetes Target Infrastructure</a></li><li><a href="/article/5xm4z4q3d8-create-kubernetes-namespaces-based-on-infra-mapping">Create Kubernetes Namespaces based on InfraMapping</a></li></ul><h3>Step 1: Create the Workflow Variable</h3><ol><li>Create a Workflow variable. For steps on create a Workflow variable, see <a href="/article/m220i1tnia-workflow-configuration">Workflows</a>.</li></ol><p>For example, we&#39;ll name the variable <code>namespace</code>. and give it three allowed values: <code>qa,stage,prod</code>.</p><p></p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/kkc3fhe3zh/1580776852280/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p>Each time the Workflow is deployed, you manually enter a value for the Workflow namespace variable or use a Trigger to pass in a value, and the <code>${workflow.variables.namespace}</code> variable is replaced with a different namespace.</p><p>This can happen simultaneously because a different namespace is used each time. You can even update the variable as part of the Pipeline Stage that executes the Workflow.</p><h3>Step 2: Use the Variable in the Infrastructure Definition</h3><ol><li>In the Infrastructure Definition used by the Workflow, reference the variable in the <strong>Namespace</strong> setting.</li></ol><p>To reference the variable we created, we use the expression <code>${workflow.variables.namespace}</code>:</p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/kkc3fhe3zh/1580776667774/image.png" style="max-height:50%;max-width:50%;display:block;margin-left:auto;margin-right:auto" data-hd-height="50%" data-hd-width="50%" data-hd-align="center"/></figure><h3>Option 1: Enter a Namespace Manually</h3><ol><li>In your Workflow, click <strong>Deploy</strong>.</li><li>For <strong>namespace</strong>, select one of the variable&#39;s allowed values.</li></ol><p></p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/kkc3fhe3zh/1580776950555/image.png" style="max-height:50%;max-width:50%;display:block;margin-left:auto;margin-right:auto" data-hd-height="50%" data-hd-width="50%" data-hd-align="center"/></figure><ol><li style="counter-increment:li 2" start="3">Click <strong>Submit</strong>. The Workflow deploys to the namespace you selected.</li></ol><h3>Option 2: Enter a Namespace with a Trigger</h3><ol><li>Create a Trigger for the Workflow.</li><li>In the Actions section, select the Workflow with the namespace variable. The namespace variable appears.</li></ol><p></p><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/kkc3fhe3zh/1580777249752/image.png" style="max-height:50%;max-width:50%;display:block;margin-left:auto;margin-right:auto" data-hd-height="50%" data-hd-width="50%" data-hd-align="center"/></figure><ol><li style="counter-increment:li 2" start="3">For <strong>namespace</strong>, select one of the variable&#39;s allowed values.<br/>If your Workflow variable is not limited to allowed values, you can enter custom values. For more information, see <a href="/article/revc37vl0f-passing-variable-into-workflows">Passing Variables into Workflows and Pipelines from Triggers</a>.</li><li>Click <strong>Submit</strong>. When the Trigger condition is met, the Workflow deploys to the namespace you selected.</li></ol><h3>Example: Trigger Parallel Workflow Executions</h3><p>Typically, when a Workflow is triggered multiple times in succession, deploying on the same Infrastructure Definition, the deployment executions are queued automatically. Queuing prevents deployment collision.</p><p>Using the steps in this topic, you can have parallel executions for same Workflow on the same Infrastructure Definition by using Workflow variables to identify separate namespaces.</p><h3>Next Steps</h3><ul><li><a href="/article/khbt0yhctx-harness-git-ops">Harness GitOps</a></li><li><a href="/article/revc37vl0f-passing-variable-into-workflows">Passing Variables into Workflows and Pipelines from Triggers</a></li></ul><p></p>