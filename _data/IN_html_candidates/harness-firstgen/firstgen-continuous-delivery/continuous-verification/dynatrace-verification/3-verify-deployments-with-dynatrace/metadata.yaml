type: article
article_id: q6bk0oy1ta
user_id: mfr0nxh4be
category_id: f42d7rayvs
author:
  name: Michael Cretzman
  profile_image: https://www.gravatar.com/avatar/2e8616837f4ee92be5d19ffe9b9ccba9?d=mm&s=150
title: Verify Deployments with Dynatrace
slug: 3-verify-deployments-with-dynatrace
description: How to add Dynatrace to a Harness Workflow, where Harness can analyze
  Dynatrace metrics to verify, rollback, and improve deployments.
short_version: Harness can analyze Dynatrace data to verify, rollback, and improve
  deployments.
tags:
- Dynatrace
- Verification Provider
- Deployment Verification
- verification
- Workflow
- risk analysis
show_toc: true
is_private: false
is_published: true
is_featured: false
stale_status:
  is_stale: false
  reason: Article updated
  source: API
  triggered_at: 2021-05-12T17:22:46.398948Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: Verify Deployments with Dynatrace
  description: How to add Dynatrace to a Harness Workflow, where Harness can analyze
    Dynatrace metrics to verify, rollback, and improve deployments.
  short_version: Harness can analyze Dynatrace data to verify, rollback, and improve
    deployments.
  body: '<p></p><p>The following procedure describes how to add Dynatrace as a verification
    step in a Harness workflow. For more information about workflows, see <a href="/article/m220i1tnia-workflow-configuration">Add
    a Workflow</a>.</p><p>Once you run a deployment and Dynatrace preforms verification,
    Harness&#39; machine-learning verification analysis will assess the risk level
    of the deployment.</p><div class="note-callout">Harness does not perform host
    level analysis using Dynatrace as Dynatrace API does not support host level analysis.
    Harness performs analysis at the service level for a time duration of the last
    seven days.</div><p>In this topic:</p><ul><li><a href="#before_you_begin">Before
    You Begin</a></li><li><a href="#visual_summary">Visual Summary</a></li><li><a
    href="#step_1_set_up_the_deployment_verification">Step 1: Set up the Deployment
    Verification</a></li><li><a href="#step_2_dynatrace_server">Step 2: Dynatrace
    Server</a></li><li><a href="#step_3_dynatrace_service">Step 3: Dynatrace Service</a></li><li><a
    href="#step_4_analysis_time_duration">Step 4: Analysis Time duration</a></li><li><a
    href="#step_5_baseline_for_risk_analysis">Step 5: Baseline for Risk Analysis</a></li><li><a
    href="#step_6_algorithm_sensitiivty">Step 6: Algorithm Sensitiivty</a></li><li><a
    href="#step_7_verify_your_configuration">Step 7: Verify Your Configuration</a></li><li><a
    href="#review_harness_expression_support_in_cv_settings">Review: Harness Expression
    Support in CV Settings</a></li><li><a href="#step_8_view_verification_results">Step
    8: View Verification Results</a></li><li><a href="#next_steps">Next Steps</a></li></ul><p></p><h3>Before
    You Begin</h3><ul><li>Set up a Harness Application, containing a Service and Environment.
    See  <a href="/article/bucothemly-application-configuration">Create an Application</a>.</li><li>See
    the <a href="/article/r3xtgg0e2k-dynatrace-verification-overview">Dynatrace Verification
    Overview</a>.</li><li>See <a href="/article/vklaow56mx-1-dynatrace-connection-setup">Connect
    to Dynatrace</a>.</li></ul><p></p><h3>Visual Summary</h3><p>Here&#39;s an example
    of Dynatrace setup for verification.</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/q6bk0oy1ta/1586757270744/image.png"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p></p><p></p><h3>Step
    1: Set up the Deployment Verification</h3><p>To verify your deployment with Dynatrace,
    do the following:</p><ol><li>Ensure that you have added Dynatrace as a verification
    provider, as described in <a href="/article/vklaow56mx-1-dynatrace-connection-setup">Dynatrace Connection
    Setup</a>.</li><li>In your Workflow, under <strong>Verify Service</strong>, click
    <strong>Add Step</strong>.</li><li>Select <strong>Dynatrace</strong>, and click
    <strong>Next</strong>. The <strong>Configure </strong><strong>Dynatrace</strong>
    settings appear.</li></ol><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/q6bk0oy1ta/1586757270744/image.png"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p>These
    <strong>Configure Dynatrace</strong> settings include the following fields.</p><div
    class="note-callout">Dynatrace returns API data for transactions that are marked
    as <a href="https://www.dynatrace.com/support/help/how-to-use-dynatrace/transactions-and-services/monitoring/monitor-key-requests/"
    target="_blank">key requests</a> only. To use these transactions in Harness, be
    sure to mark them as key requests in Dynatrace:</div><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/q6bk0oy1ta/1586809670247/image.png"/></figure><p></p><h3>Step
    2: Dynatrace Server</h3><p>This dropdown contains the names of the Dynatrace verification
    providers you added, as described above. Select the name of the Dynatrace verification
    provider that connects to the Dynatrace environment associated with the microservice/application
    this workflow deploys.</p><p></p><h3>Step 3: Dynatrace Service</h3><p>One you
    select a Dynatrace server in <strong>Dynatrace Server</strong>, Harness goes and
    fetches a list of all the services you have in Dynatrace.</p><p>Select the Dynatrace
    service to monitor. Dynatrace analytics are performed at Dynatrace&#39;s service
    level.</p><p>You can find the Dynatrace service in Dynatrace search:</p><p></p><figure><a
    href="https://files.helpdocs.io/kw8ldg1itf/articles/q6bk0oy1ta/1586970039980/image.png"><img
    src="https://files.helpdocs.io/kw8ldg1itf/articles/q6bk0oy1ta/1586970039980/image.png"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></a></figure><p>You
    can also enter a built-in <a href="/article/9dvxcegm90-variables">Harness variable
    expression</a> or custom variable, such as a <a href="/article/eb3kfl8uls-service-configuration">Service</a>
    or <a href="/article/766iheu1bk-add-workflow-variables-new-template">Workflow
    variable</a>:</p><p></p><figure><a href="https://files.helpdocs.io/kw8ldg1itf/articles/q6bk0oy1ta/1586808616167/image.png"><img
    src="https://files.helpdocs.io/kw8ldg1itf/articles/q6bk0oy1ta/1586808616167/image.png"/></a></figure><p>If
    you see multiple services for the same application, it is likely because the service
    is being hit from multiple endpoints.</p><p>This is uncommon in production, but
    in development/test environments you might be throwing traffic and data at the
    service from multiple endpoints (local, QA, etc). These endpoints get registered
    as different services by Dynatrace.</p><p>To distinguish services, Harness list
    the service ID also.</p><p></p><figure><a href="https://files.helpdocs.io/kw8ldg1itf/articles/q6bk0oy1ta/1586809349698/image.png"><img
    src="https://files.helpdocs.io/kw8ldg1itf/articles/q6bk0oy1ta/1586809349698/image.png"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></a></figure><p>This
    ID is taken from the Dynatrace console URL (<code>id=&lt;service_ID&gt;</code>).</p><p></p><figure><a
    href="https://files.helpdocs.io/kw8ldg1itf/articles/q6bk0oy1ta/1586969925364/image.png"><img
    src="https://files.helpdocs.io/kw8ldg1itf/articles/q6bk0oy1ta/1586969925364/image.png"
    style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></a></figure><p>If
    you need to select a specific service, use the ID in the URL to match the service
    listed in the Harness <strong>Dynatrace Service</strong> setting.</p><p></p><p></p><h3>Step
    4: Analysis Time duration</h3><p>Set the duration for the verification step. If
    a verification step exceeds the value, the workflow <a href="/article/m220i1tnia-workflow-configuration#failure_strategy">Failure
    Strategy</a> is triggered. For example, if the Failure Strategy is <strong>Ignore</strong>,
    then the verification state is marked <strong>Failed</strong> but the workflow
    execution continues.</p><p>See <a href="https://docs.harness.io/article/0avzb5255b-cv-strategies-and-best-practices">CV
    Strategies, Tuning, and Best Practices</a>.</p><p></p><h3>Step 5: Baseline for
    Risk Analysis</h3><p>See <a href="https://docs.harness.io/article/0avzb5255b-cv-strategies-and-best-practices">CV
    Strategies, Tuning, and Best Practices</a>.</p><p></p><h3>Step 6: Algorithm Sensitivity</h3><p>See
    <a href="https://docs.harness.io/article/0avzb5255b-cv-strategies-and-best-practices#algorithm_sensitivity_and_failure_criteria">CV
    Strategies, Tuning, and Best Practices</a>.</p><p></p><h3>Step 7: Verify Your
    Configuration</h3><p>When you are finished, click <strong>Test</strong> to verify
    your configuration.</p><p>Harness will filter by the service you selected in <strong>Dynatrace
    Service</strong>. You can see this in the <strong>Third-Party API Call History</strong>.</p><p>Once
    your configuration tests successfully, click <strong>Submit</strong>. The <strong>Dynatrace</strong>
    verification step is added to your workflow.</p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/ftp6uphgs1/1536699894391/image.png"
    style="max-height:25%;max-width:25%" data-hd-height="25%" data-hd-width="25%"/></figure><p></p><h3>Review:
    Harness Expression Support in CV Settings</h3><p>You can use expressions (<code>${...}</code>)
    for <a href="/article/7bpdtvhq92-workflow-variables-expressions">Harness built-in
    variables</a> and custom <a href="/article/eb3kfl8uls-service-configuration">Service</a>
    and <a href="/article/766iheu1bk-add-workflow-variables-new-template">Workflow</a>
    variables in the settings of Harness Verification Providers.</p><p></p><figure><img
    src="https://files.helpdocs.io/kw8ldg1itf/other/1586812006289/image.png" style="max-height:50%;max-width:50%"
    data-hd-height="50%" data-hd-width="50%"/></figure><p>Expression support lets
    you template your Workflow verification steps. You can add custom expressions
    for settings, and then provide values for those settings at deployment runtime.
    Or you can use Harness built-in variable expressions and Harness will provide
    values at deployment runtime automatically.</p><h3>Step 8: View Verification Results</h3><p>Once
    you have deployed your workflow (or pipeline) using the Dynatrace verification
    step, you can automatically verify cloud application and infrastructure performance
    across your deployment. For more information, see <a href="/article/m220i1tnia-workflow-configuration">Add
    a Workflow</a> and <a href="/article/zc1u96u6uj-pipeline-configuration">Add a
    Pipeline</a>.</p><h4>Workflow Verification</h4><p>To see the results of Harness
    machine-learning evaluation of your Dynatrace verification, in your workflow or
    pipeline deployment you can expand the <strong>Verify Service</strong> step and
    then click the <strong>Dynatrace</strong> step.</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/q6bk0oy1ta/1578090459779/image.png"/></figure><h4>Continuous
    Verification</h4><p>You can also see the evaluation in the <strong>Continuous
    Verification</strong> dashboard. The workflow verification view is for the DevOps
    user who developed the workflow. The <strong>Continuous Verification</strong>
    dashboard is where all future deployments are displayed for developers and others
    interested in deployment analysis.</p><p>To learn about the verification analysis
    features, see the following sections.</p><h5>Transaction Analysis</h5><table><tbody><tr><td><p><strong>Execution
    details:</strong> See the details of verification execution. Total is the total
    time the verification step took, and Analysis duration is how long the analysis
    took.</p><p><strong>Risk level analysis:</strong> Get an overall risk level and
    view the cluster chart to see events.</p><p><strong>Transaction-level summary:</strong>
    See a summary of each transaction with the query string, error values comparison,
    and a risk analysis summary.</p></td><td><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/ftp6uphgs1/1536702137944/image.png"/></figure></td></tr></tbody></table><h5>Execution
    Analysis</h5><table><tbody><tr><td><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/uw64fijctw/1535497249316/image.png"/></figure></td><td><p><strong>Event
    type:</strong> Filter cluster chart events by Unknown Event, Unexpected Frequency,
    Anticipated Event, Baseline Event, and Ignore Event.</p><p><strong>Cluster chart:</strong>
    View the chart to see how the selected event contrast. Click each event to see
    its log details.</p></td></tr></tbody></table><h5>Event Management</h5><table><tbody><tr><td><p><strong>Event-level
    analysis:</strong> See the threat level for each event captured.</p><p><strong>Tune
    event capture:</strong> Remove events from analysis at the service, workflow,
    execution, or overall level.</p><p><strong>Event distribution:</strong> Click
    the chart icon to see an event distribution including the measured data, baseline
    data, and event frequency.</p></td><td><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/uw64fijctw/1535497306015/image.png"/></figure></td></tr></tbody></table><p></p><h3>Next
    Steps</h3><ul><li> <a href="/article/htvzryeqjw-configuration-as-code">Configuration
    as Code</a></li><li> <a href="/article/ven0bvulsj-users-and-permissions">Managing
    Users and Groups (RBAC)</a></li></ul><p></p>'
  slug: 3-verify-deployments-with-dynatrace
  tags:
  - Dynatrace
  - Verification Provider
  - Deployment Verification
  - verification
  - Workflow
  - risk analysis
  is_live: true
