<p></p><p>Harness 24/7 Service Guard monitors your live applications, catching problems that surface minutes or hours following deployment. For more information, see <a href="/article/dajt54pyxd-24-7-service-guard-overview">24/7 Service Guard Overview</a>.</p><p>You can add your Datadog monitoring to Harness 24/7 Service Guard in your Harness Application Environment. For a setup overview, see <a href="/article/yqris5svub-1-datadog-connection-setup">Connect to Datadog</a>.</p><div class="note-callout">This section assumes you have a Harness Application set up and containing a Service and Environment. For steps on setting up a Harness Application, see <a href="/article/bucothemly-application-configuration">Application Checklist</a>.</div><p></p><h3>Before You Begin</h3><ul><li>See theÂ <a href="/article/ong5rbbn49-datadog-verification-overview">Datadog Verification Overview</a>.</li><li>Make sure you <a href="/article/yqris5svub-1-datadog-connection-setup">Connect to Datadog</a>.</li></ul><p></p><h3>Visual Summary</h3><p>Here&#39;s an example of a Datadog Metrics setup for 24/7 Service Guard setup.</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/16lntd8abz/1588071492720/datadog-metrics-s.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p></p><h3>Step 1: Set Up 24/7 Service Guard</h3><p>To set up 24/7 Service Guard for Datadog, do the following:</p><ol><li>Ensure that you have added Datadog as a Harness Verification Provider, as described in <a href="https://docs.harness.io/article/yqris5svub-1-datadog-connection-setup#datadog_verification_provider_setup">Verification Provider Setup</a>.</li><li>In your Harness Application, ensure that you have added a Service, as described in <a href="/article/eb3kfl8uls-service-configuration">Services</a>. For 24/7 Service Guard, you do not need to add an Artifact Source to the Service, or configure its settings. You simply need to create a Service and name it. It will represent your application for 24/7 Service Guard.</li><li>In your Harness Application, click <strong>Environments</strong>.</li><li>In <strong>Environments</strong>, ensure that you have added an Environment for the Service you added. For steps on adding an Environment, see <a href="/article/n39w05njjv-environment-configuration">Environments</a>.</li><li>Click the Environment for your Service. Typically, the <strong>Environment Type</strong> is <strong>Production</strong>.</li><li>In the <strong>Environment</strong> page, locate <strong>24/7 Service Guard</strong>.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/ps716zaurs/1553127693787/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure></li><li>In <strong>24/7 Service Guard</strong>, click <strong>Add Service Verification</strong>, and then click <strong>Datadog</strong>. The <strong>Datadog</strong> dialog appears.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/j1b1fhh592/1580419263166/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure></li></ol><p></p><h3>Step 2: Display Name</h3><p>The name that will identify this service on the <strong>Continuous Verification</strong> dashboard. Use a name that indicates the environment and monitoring tool, such as <strong>Datadog</strong>.</p><h3>Step 3: Service</h3><p>The Harness Service to monitor with 24/7 Service Guard.</p><h3>Step 4: Datadog Server</h3><p>Select the Datadog Verification Provider to use.</p><h3>Step 5: Metric Verification</h3><p>Select the Metric Verification option.</p><h3>Step 6: APM Traces</h3><p>In <strong>Datadog Service Name</strong>, enter which service in Datadog you want to monitor. By default, Datadog monitors the servlet hits (number of incoming requests), servlet duration, and errors. Harness will fetch this data for every Web transaction with the service you enter and display it in 24/7 Service Guard as <strong>Errors</strong>, <strong>Hits</strong>, <strong>Request Duration</strong>.</p><h3>Step 7: Docker Container Metrics</h3><p>Select the Docker container infrastructure metrics to monitor.</p><ol><li>In <strong>Datadog Tags</strong>, enter any tags that have been applied to your metrics in Datadog. These are the same tags used in Datadog Events, Metrics Explorer, etc.</li></ol><p></p><figure><a href="https://files.helpdocs.io/kw8ldg1itf/articles/rougsx3tir/1553204966191/image.png"><img src="https://files.helpdocs.io/kw8ldg1itf/articles/rougsx3tir/1553204966191/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></a></figure><figure><a href="https://files.helpdocs.io/kw8ldg1itf/articles/rougsx3tir/1553204894527/image.png"><img src="https://files.helpdocs.io/kw8ldg1itf/articles/rougsx3tir/1553204894527/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></a></figure><p>Use the Datadog tag format, such as <code>cluster-name:harness-test</code>.</p><ol><li style="counter-increment:li 1" start="2">In <strong>Metrics</strong>, select the Docker metrics to use.</li></ol><h3>Step 8: ECS Metrics</h3><ol><li>In <strong>Datadog Tags</strong>, enter any tags that have been applied to your metrics in Datadog. These are the same tags used in Datadog Events, Metrics Explorer, etc. You can find these tags by following the steps in the <strong>Docker Container Metrics</strong> instructions above.</li><li>In <strong>Metrics</strong>, select the ECS metrics to use.</li></ol><h3>Step 9: Datadog Custom Metrics</h3><ol><li>In <strong>Datadog Tags</strong>, enter any tags that have been applied to your metrics in Datadog. These are the same tags used in Datadog Events, Metrics Explorer, etc. You can find these tags by following the steps in the <strong>Docker Container Metrics</strong> instructions above.</li><li>In <strong>Metric Type</strong>, select the metric to use. To use multiple types, click <strong>Add</strong>.</li><li>In <strong>Display Name</strong>, enter a name to identify this metric in the Harness dashboards.</li><li>In Metric Name, enter the metric you want to use. These are the metrics you will see in the Datadog Metrics Explorer <strong>Graph</strong> menu:</li></ol><figure><a href="https://files.helpdocs.io/kw8ldg1itf/articles/rougsx3tir/1559933689526/image.png"><img src="https://files.helpdocs.io/kw8ldg1itf/articles/rougsx3tir/1559933689526/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></a></figure><p></p><h4>Always Use Throughput with Error and Response Time Metrics</h4><p>Whenever you use the Error metric type, you should also add another metric for Throughput with the same Group Name.</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/qkcn11esgb/1606858647855/image.png"/></figure><p>Harness analyze errors as error percentage and without the throughput the error number does not provide much information.</p><p>The same setup should used with the Response Time metric also. Whenever you set up a Response Time metric, setup a Throughput metric with the same Group Name.</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/qkcn11esgb/1606858673359/image.png"/></figure><h3></h3><h3>Step 10: Algorithm Sensitivity</h3><p>See <a href="https://docs.harness.io/article/0avzb5255b-cv-strategies-and-best-practices#algorithm_sensitivity_and_failure_criteria">CV Strategies, Tuning, and Best Practices</a>.</p><p><strong>Moderately sensitive</strong> is recommended.</p><h3>Step 11: Enable 24/7 Service Guard</h3><p>Enable this setting to turn on 24/7 Service Guard. If you simply want to set up 24/7 Service Guard, but not enable it, leave this setting disabled.</p><h3>Step 12: Verify your Settings</h3><ol><li style="counter-increment:li 0" start="1">Click <strong>Test</strong>. Harness verifies the settings you entered.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/rougsx3tir/1559934827560/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure></li><li>Click <strong>Submit</strong>. The Datadog 24/7 Service Guard is added.</li></ol><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/rougsx3tir/1553203539723/image.png"/></figure><p>To see the running 24/7 Service Guard analysis, click <strong>Continuous Verification</strong>.</p><p>The 24/7 Service Guard dashboard displays the production verification results.</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/rougsx3tir/1553203573665/image.png"/></figure><p> For more information, see <a href="/article/dajt54pyxd-24-7-service-guard-overview">24/7 Service Guard Overview</a>.</p><p></p><h3>Next Steps</h3><ul><li><a href="/article/vd4jgv41io-3-verify-deployments-with-datadog">Verify Deployments with Datadog Logging</a></li><li><a href="/article/o9pl8tfvix-verify-deployments-with-datadog-metrics">Verify Deployments with Datadog Metrics</a></li><li><a href="https://docs.harness.io/article/0avzb5255b-cv-strategies-and-best-practices#algorithm_sensitivity_and_failure_criteria">CV Strategies, Tuning, and Best Practice</a></li></ul><p></p>