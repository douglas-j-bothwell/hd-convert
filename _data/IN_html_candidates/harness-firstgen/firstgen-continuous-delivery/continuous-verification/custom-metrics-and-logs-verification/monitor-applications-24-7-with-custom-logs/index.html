<p></p><p>Harness 24/7 Service Guard monitors your live applications, catching problems that surface minutes or hours following deployment. For more information, see  <a href="https://docs.harness.io/article/dajt54pyxd-24-7-service-guard-overview">24/7 Service Guard Overview</a>.</p><p>While Harness supports <a href="/category/gurgsl2gqt-continuous-verification">all of the common logging tools</a>, you can add your Custom logging to Harness 24/7 Service Guard in your Harness Application Environment. For a setup overview, see  <a href="/article/wya9qgjlrr-connect-to-custom-verification-for-custom-logs">Connect to Custom Verification for Custom Logs</a>.</p><div class="note-callout">This section assumes you have a Harness Application set up, containing a Service and Environment. For steps on setting up a Harness Application, see  <a href="https://docs.harness.io/article/bucothemly-application-configuration">Application Components</a>.</div><p>In this topic:</p><ul><li> <a href="#before_you_begin">Before You Begin</a></li><li> <a href="#step_1_set_up_24_7_service_guard_for_custom_logs">Step 1: Set up 24/7 Service Guard for Custom Logs</a></li><li> <a href="#step_2_display_name">Step 2: Display Name</a></li><li> <a href="#step_3_service">Step 3: Service</a></li><li> <a href="#step_4_log_data_provider">Step 4: Log Data Provider</a></li><li> <a href="#step_5_log_collection">Step 5: Log Collection</a></li><li> <a href="#step_6_request_method">Step 6: Request Method</a></li><li> <a href="#step_7_search_url">Step 7: Search URL</a></li><li> <a href="#step_8_search_body">Step 8: Search Body</a></li><li> <a href="#step_9_response_type">Step 9: Response Type</a></li><li> <a href="#step_10_log_message_json_path">Step 10: Log Message JSON Path</a></li><li> <a href="#step_11_service_instance_json_path">Step 11: Service Instance JSON Path</a></li><li> <a href="#step_12_regex_to_transform_hostname">Step 12: Regex to Transform Hostname</a></li><li> <a href="#step_13_timestamp_json_path">Step 13: Timestamp JSON Path</a></li><li> <a href="#step_14_timestamp_format">Step 14: Timestamp Format</a></li><li> <a href="#step_15_enable_24_7_service_guard">Step 15: Enable 24/7 Service Guard</a></li><li> <a href="#step_16_baseline">Step 16: Baseline</a></li></ul><p></p><h3>Before You Begin</h3><ul><li>See <a href="/article/e87u8c63z4-custom-verification-overview">Custom Verification Overview</a>.</li><li>See <a href="/article/wya9qgjlrr-connect-to-custom-verification-for-custom-logs">Connect to Custom Verification for Custom Logs</a>.</li></ul><p></p><h3>Step 1: Set up 24/7 Service Guard for Custom Logs</h3><p>To set up 24/7 Service Guard for custom logs, do the following:</p><ol><li>Ensure that you have added your Custom Verification provider as a Harness Verification Provider, as described in  <a href="/article/i6f2irsz9v-2-24-7-service-guard-for-app-dynamics#verification_provider_setup">Verification Provider Setup</a>.</li><li>In your Harness Application, ensure that you have added a Service, as described in  <a href="https://docs.harness.io/article/eb3kfl8uls-service-configuration">Services</a>. For 24/7 Service Guard, you do not need to add an Artifact Source to the Service, or configure its settings. You simply need to create a Service and name it. It will represent your application for 24/7 Service Guard.</li><li>In your Harness Application, click <strong>Environments</strong>.</li><li>In <strong>Environments</strong>, ensure that you have added an Environment for the Service you added. For steps on adding an Environment, see  <a href="https://docs.harness.io/article/n39w05njjv-environment-configuration">Environments</a>.</li><li>Click the Environment for your Service. Typically, the <strong>Environment Type</strong> is <strong>Production</strong>.</li><li>In the <strong>Environment</strong> page, locate <strong>24/7 Service Guard</strong>.<figure><a href="https://files.helpdocs.io/kw8ldg1itf/articles/ps716zaurs/1553127693787/image.png"><img src="https://files.helpdocs.io/kw8ldg1itf/articles/ps716zaurs/1553127693787/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></a></figure></li><li>In <strong>24/7 Service Guard</strong>, click <strong>Add Service Verification</strong>, and then click <strong>Custom Log Verification</strong>.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/8rrqkoawzm/1574283389885/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure>The <strong>Custom Log Verification</strong> dialog appears.</li></ol><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/8rrqkoawzm/1574283829320/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p>Fill out the dialog. The dialog has the following fields.</p><div class="note-callout">For 24/7 Service Guard, the queries you define to collect logs are specific to the application or service you want monitored. Verification is application/service level. This is unlike Workflows, where verification is performed at the host/node/pod level.</div><h3>Step 2: Display Name</h3><p>Enter a name for this 24/7 Service Guard monitoring. This name will identify the monitoring in the <strong>Environment</strong> page and in <strong>24/7 Service Guard</strong> under <strong>Continuous Verification</strong>.</p><h3>Step 3: Service</h3><p>Select the Harness Service that represents the production application you are monitoring with the custom log provider.</p><h3>Step 4: Log Data Provider</h3><p>Select the Custom Logs Provider you added, described in  <a href="/article/wya9qgjlrr-connect-to-custom-verification-for-custom-logs">Connect to Custom Verification for Custom Logs</a>.</p><h3>Step 5: Log Collection</h3><p>Once you have added log collection details, this section will list the collection settings.</p><h3>Step 6: Request Method</h3><p>Select <strong>GET</strong> or <strong>POST</strong>. If you select <strong>POST</strong>, <strong>Search Body</strong> field is mandatory. In <strong>Search Body</strong>, you can enter any HTTP body to send as part of the query.</p><h3>Step 7: Search URL</h3><p>Enter the API query that will return a JSON response. In the remaining settings, you will map the keys in the JSON response to Harness settings to identify where data such as the hostname and timestamp are located in the JSON response.</p><p>The <strong>Search URL</strong> is automatically filled with the URL from the Custom Log Provider you selected in <strong>Log Data Provider</strong>:</p><figure><a href="https://files.helpdocs.io/kw8ldg1itf/articles/8rrqkoawzm/1574292741457/image.png"><img src="https://files.helpdocs.io/kw8ldg1itf/articles/8rrqkoawzm/1574292741457/image.png"/></a></figure><p>For some custom logging tools, you will need to augment your Base URL with <code>query</code> or some other setting. For example: <code>https://www.scalyr.com/api/query</code>.</p><h3>Step 8: Search Body</h3><p>You can enter any JSON search input for your query. For example, here is a log query for logs in Scalyr:</p><pre class="hljs json">{<br/>  <span class="hljs-attr">&#34;token&#34;</span>:           <span class="hljs-string">&#34;${secrets.getValue(&#34;</span>scalyrSG<span class="hljs-string">&#34;)}&#34;</span>,<br/>  <span class="hljs-attr">&#34;queryType&#34;</span>:         <span class="hljs-string">&#34;log&#34;</span>,<br/>  <span class="hljs-attr">&#34;filter&#34;</span>:            <span class="hljs-string">&#34;exception&#34;</span>,<br/>  <span class="hljs-attr">&#34;startTime&#34;</span>:         <span class="hljs-string">&#34;${start_time}&#34;</span>,<br/>  <span class="hljs-attr">&#34;endTime&#34;</span>:           <span class="hljs-string">&#34;${end_time}&#34;</span>,<br/>  <span class="hljs-attr">&#34;maxCount&#34;</span>:          <span class="hljs-string">&#34;10&#34;</span>,<br/>  <span class="hljs-attr">&#34;pageMode&#34;</span>:          <span class="hljs-string">&#34;tail&#34;</span>,<br/>  <span class="hljs-attr">&#34;priority&#34;</span>:          <span class="hljs-string">&#34;low&#34;</span><br/>}</pre><p>You can see that the token field uses a Harness Encrypted Text secret containing the token, referenced using the syntax <code>${secrets.getValue(&#34;secret-name&#34;)}</code>.</p><p></p><figure><a href="https://files.helpdocs.io/kw8ldg1itf/articles/8rrqkoawzm/1574294892878/image.png"><img src="https://files.helpdocs.io/kw8ldg1itf/articles/8rrqkoawzm/1574294892878/image.png"/></a></figure><h3>Step 9: Response Type</h3><p>In <strong>Response Type</strong>, select <strong>JSON</strong>.</p><h3>Step 10: Log Message JSON Path</h3><p>To use <strong>Guide From Example</strong>, your <strong>Search URL</strong> or <strong>Search Body</strong> must contain the start and end time placeholders <code>${start_time}</code> and <code>${end_time}</code>.</p><p>Where the start and end time placeholders are required depends on your custom logs provider. For example, some providers will need them in the Search Body and other in the Search URL.</p><p>Click <strong>Guide From Example</strong>. A popup appears, preset for you to query the provider.</p><p></p><figure><a href="https://files.helpdocs.io/kw8ldg1itf/articles/8rrqkoawzm/1574297520745/image.png"><img src="https://files.helpdocs.io/kw8ldg1itf/articles/8rrqkoawzm/1574297520745/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></a></figure><p>You can change the start and end times. By default, they are set for the last 30 minutes.</p><p>Click <strong>SEND</strong>. The JSON response is displayed.</p><p></p><figure><a href="https://files.helpdocs.io/kw8ldg1itf/articles/8rrqkoawzm/1574297533878/image.png"><img src="https://files.helpdocs.io/kw8ldg1itf/articles/8rrqkoawzm/1574297533878/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></a></figure><p>Click the <strong>message</strong> field. The JSON path is added to <strong>Log Message JSON Path</strong>:</p><p></p><figure><a href="https://files.helpdocs.io/kw8ldg1itf/articles/8rrqkoawzm/1574296918543/image.png"><img src="https://files.helpdocs.io/kw8ldg1itf/articles/8rrqkoawzm/1574296918543/image.png"/></a></figure><h3>Step 11: Service Instance JSON Path</h3><p>Click <strong>Guide From Example</strong> to locate the JSON path for the service instance. If the JSON returned by your query does not have the path, then leave <strong>Service Instance JSON Path</strong> empty.</p><h3>Step 12: Regex to Transform Hostname</h3><p>If the JSON value returned requires transformation in order to be used, enter the regex expression here. For example: If the value in the host name JSON path of the response is <code>pod_name:harness-test.pod.name</code> and the actual pod name is simply <code>harness-test.pod.name</code>, you can write a regular expression to remove the <code>pod_name</code> from the response value.</p><h3>Step 13: Timestamp JSON Path</h3><p>Click <strong>Guide From Example</strong> to locate the JSON path for the timestamp, and click the timestamp label.</p><p></p><figure><a href="https://files.helpdocs.io/kw8ldg1itf/articles/8rrqkoawzm/1574297666764/image.png"><img src="https://files.helpdocs.io/kw8ldg1itf/articles/8rrqkoawzm/1574297666764/image.png"/></a></figure><h3>Step 14: Timestamp Format</h3><p>Enter a timestamp format. The format follows the  <a href="https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html" target="_blank">Java SimpleDateFormat</a>. For example, a timestamp syntax might be <strong>yyyy-MM-dd&#39;T&#39;HH:mm:ss.SSSX</strong>. If you leave this field empty, Harness will use the default range of 1 hour previous (now - 1h) to now.</p><h3>Step 15: Enable 24/7 Service Guard</h3><p>Select <strong>Enable 24/7 Service Guard</strong> to enable monitoring.</p><h3>Step 16: Baseline</h3><p>When you select <strong>Enable 24/7 Service Guard</strong>, you can select a baseline time interval for monitoring.</p><p>When you have added your Log Collection your Custom Log Verification will look something like this:</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/8rrqkoawzm/1574297842373/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p>The Custom Logs Verification is added to 24/7 Service Guard:</p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/8rrqkoawzm/1574297933596/image.png" style="max-height:75%;max-width:75%" data-hd-height="75%" data-hd-width="75%"/></figure><p></p>