<p></p><p>The following procedure describes how to add Bugsnag as a verification step in a Harness workflow. For more information about workflows, see <a href="/article/m220i1tnia-workflow-configuration">Add a Workflow</a>.</p><p>Once you run a deployment and Bugsnag preforms verification, Harness&#39; machine-learning verification analysis will assess the risk level of the deployment.</p><div class="tip-callout">In order to obtain the useful comparison data, the verification provider should be added to your workflow <strong>after</strong> you have run at least one successful deployment.</div><p>In this topic:</p><ul><li> <a href="#before_you_begin">Before You Begin</a></li><li> <a href="#visual_summary">Visual Summary</a></li><li> <a href="#simple_slug">Step 1:</a> <a href="#step_1_set_up_the_deployment_verification">Set Up the Deployment Verification</a></li><li> <a href="#step_2_bugsnag_server">Step 2: Bugsnag Server</a></li><li> <a href="#step_3_organization_id">Step 3: Organization ID</a></li><li> <a href="#step_4_project_id">Step 4: Project ID</a></li><li> <a href="#step_5_release_stage">Step 5: Release Stage</a></li><li> <a href="#step_6_browser_application">Step 6: Browser Application</a></li><li> <a href="#step_7_expression_for_host_container_name">Step 7: Expression for Host/Container name</a></li><li> <a href="#step_8_analysis_time_duration">Step 8: Analysis Time Duration</a></li><li> <a href="#step_9_baseline_for_risk_analysis">Step 9: Baseline for Risk Analysis</a></li><li> <a href="#step_10_include_instances_from_previous_phases">Step 10: Include instances from previous phases</a></li><li> <a href="#step_11_execute_with_previous_steps">Step 11: Execute with previous steps</a></li><li> <a href="#review_harness_expression_support_in_cv_settings">Review: Harness Expression Support in CV Settings</a></li><li> <a href="#step_12_view_verification_results">Step 12: View Verification Results</a></li><li> <a href="#next_steps">Next Steps</a></li></ul><p></p><h3>Before You Begin</h3><ul><li>See the <a href="/article/ac5piurukt-bugsnag-verification-overview">Bugsnag Verification Overview</a>.</li><li>See <a href="/article/dml2vk0ec3-1-bugsnag-connection-setup">Connect to Bugsnag</a>.</li></ul><p></p><h3>Visual Summary</h3><p>Here&#39;s an example Bugsnag deployment verification configuration.</p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/2tfwoxl1dj/1580200202371/image.png" style="max-height:75%;max-width:75%" data-hd-height="75%" data-hd-width="75%"/></figure><p></p><p></p><h3>Step 1: Set Up the Deployment Verification</h3><p>To verify your deployment with Bugsnag, do the following:</p><ol><li>Ensure that you have added Bugsnag as a verification provider, as described in <a href="/article/dml2vk0ec3-1-bugsnag-connection-setup">Connect to Bugsnag</a>.</li><li>In your workflow, under <strong>Verify Service</strong>, click <strong>Add Verification</strong>.</li><li>In the resulting <strong>Add Step</strong> settings, select <strong>Log Analysis</strong> &gt; <strong>Bugsnag</strong>.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/2tfwoxl1dj/1580199711412/image.png" style="max-height:75%;max-width:75%" data-hd-height="75%" data-hd-width="75%"/></figure></li><li>Click <strong>Next</strong>. The <strong>Configure Bugsnag</strong> settings appear.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/2tfwoxl1dj/1580200202371/image.png" style="max-height:75%;max-width:75%" data-hd-height="75%" data-hd-width="75%"/></figure></li></ol><p>These settings include the following fields.</p><p></p><h3>Step 2: Bugsnag Server</h3><p>Select the Bugsnag verification provider you added to Harness, as described above. Harness will immediately use the connection to obtain organization and project information from Bugsnag.</p><h3>Step 3: Organization ID</h3><p>Select the <strong>Organization ID</strong> for your Bugsnag account. In Bugsnag, this is the <strong>Organization name</strong> in the account&#39;s <strong>Organization</strong> page:</p><figure><a href="https://files.helpdocs.io/kw8ldg1itf/articles/p4lxsooom7/1537829575055/image.png"><img src="https://files.helpdocs.io/kw8ldg1itf/articles/p4lxsooom7/1537829575055/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></a></figure><h3>Step 4: Project ID</h3><p>Select the Project ID for the Bugsnag project you want to use. In Bugsnag, this is the <strong>Project Name</strong> in the <strong>Projects</strong> page:</p><figure><a href="https://files.helpdocs.io/kw8ldg1itf/articles/p4lxsooom7/1537829639500/image.png"><img src="https://files.helpdocs.io/kw8ldg1itf/articles/p4lxsooom7/1537829639500/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></a></figure><h3>Step 5: Release Stage</h3><p>Enter the Bugsnag  <a href="https://docs.bugsnag.com/product/releases/#configuring-the-release-stage" target="_blank">release stage</a>, if necessary.</p><h3>Step 6: Browser Application</h3><p>Click the checkbox to have Harness ignore host/node deployment events and focus on the browser events Bugsnag captures.</p><h3>Step 7: Expression for Host/Container name</h3><p>If you do not enable the <strong>Browser Application</strong> checkbox, Harness will use the host/node/container event data Bugsnag captures. Add a variable that evaluates to the hostname value in the <strong>host</strong> field of event messages. For example, in a Bugsnag message in a Harness deployment verification, if you look at a event message, you will see a <strong>hosts</strong> field:</p><figure><a href="https://files.helpdocs.io/kw8ldg1itf/articles/p4lxsooom7/1537831200341/image.png"><img src="https://files.helpdocs.io/kw8ldg1itf/articles/p4lxsooom7/1537831200341/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></a></figure><p>Next, look in the JSON for the host/container/pod in the deployment environment and identify the label containing the same hostname. The path to that label is what the expression should be in <strong>Expression for Host/Container name</strong>. The default variable is <strong>${instance.host.hostName}</strong>. In most cases, this expression will work.</p><p></p><div class="note-callout">For AWS EC2 hostnames, use the expression <code>${instance.hostName</code>}.</div><h3>Step 8: Analysis Time Duration</h3><p>Set the duration for the verification step. If a verification step exceeds the value, the workflow <a href="/article/m220i1tnia-workflow-configuration#failure_strategy">Failure Strategy</a> is triggered. For example, if the Failure Strategy is <strong>Ignore</strong>, then the verification state is marked <strong>Failed</strong> but the workflow execution continues.</p><p>See <a href="/article/0avzb5255b-cv-strategies-and-best-practices">CV Strategies, Tuning, and Best Practices</a>.</p><h3>Step 9: Baseline for Risk Analysis</h3><p>See <a href="/article/0avzb5255b-cv-strategies-and-best-practices">CV Strategies, Tuning, and Best Practices</a>.</p><h3>Step 10: Include instances from previous phases</h3><p>If you are using this verification step in a multi-phase deployment, select this checkbox to include instances used in previous phases when collecting data. Do not apply this setting to the first phase in a multi-phase deployment.</p><h3>Step 11: Execute with previous steps</h3><p>Check this checkbox to run this verification step in parallel with the previous steps in <strong>Verify Service</strong>.</p><h3>Review: Harness Expression Support in CV Settings</h3><p>You can use expressions (<code>${...}</code>) for <a href="/article/7bpdtvhq92-workflow-variables-expressions">Harness built-in variables</a> and custom <a href="/article/eb3kfl8uls-service-configuration">Service</a> and <a href="/article/766iheu1bk-add-workflow-variables-new-template">Workflow</a> variables in the settings of Harness Verification Providers.</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/other/1586812006289/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p>Expression support lets you template your Workflow verification steps. You can add custom expressions for settings, and then provide values for those settings at deployment runtime. Or you can use Harness built-in variable expressions and Harness will provide values at deployment runtime automatically.</p><h3>Step 12: View Verification Results</h3><p>Once you have deployed your workflow (or pipeline) using the Bugsnag verification step, you can automatically verify cloud application and infrastructure performance across your deployment. For more information, see <a href="/article/m220i1tnia-workflow-configuration">Add a Workflow</a> and <a href="/article/zc1u96u6uj-pipeline-configuration">Add a Pipeline</a>.</p><h4>Workflow Verification</h4><p>To see the results of Harness machine-learning evaluation of your Bugsnag verification, in your workflow or pipeline deployment you can expand the <strong>Verify Service</strong> step and then click the <strong>Bugsnag</strong> step.</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/p4lxsooom7/1537831590682/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><h4>Continuous Verification</h4><p>You can also see the evaluation in the <strong>Continuous Verification</strong> dashboard. The workflow verification view is for the DevOps user who developed the workflow. The <strong>Continuous Verification</strong> dashboard is where all future deployments are displayed for developers and others interested in deployment analysis.</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/p4lxsooom7/1537831694020/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p>To learn about the verification analysis features, see the following sections.</p><h5>Deployments</h5><table><tbody><tr><td><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/p4lxsooom7/1537831719588/image.png"/></figure></td><td><p><strong>Deployment info:</strong> See the verification analysis for each deployment, with information on its service, environment, pipeline, and workflows.</p><p><strong>Verification phases and providers:</strong> See the vertfication phases for each vertfication provider. Click each provider for logs and analysis.</p><p><strong>Verification timeline:</strong> See when each deployment and verification was performed.</p></td></tr></tbody></table><h5>Transaction Analysis</h5><table><tbody><tr><td><p><strong>Execution details:</strong> See the details of verification execution. Total is the total time the verification step took, and Analysis duration is how long the analysis took.</p><p><strong>Risk level analysis:</strong> Get an overall risk level and view the cluster chart to see events.</p><p><strong>Transaction-level summary:</strong> See a summary of each transaction with the query string, error values comparison, and a risk analysis summary.</p></td><td><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/p4lxsooom7/1537831772660/image.png"/></figure></td></tr></tbody></table><h5>Execution Analysis</h5><table><tbody><tr><td><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/uw64fijctw/1535497249316/image.png"/></figure></td><td><p><strong>Event type:</strong> Filter cluster chart events by Unknown Event, Unexpected Frequency, Anticipated Event, Baseline Event, and Ignore Event.</p><p><strong>Cluster chart:</strong> View the chart to see how the selected event contrast. Click each event to see its log details.</p></td></tr></tbody></table><h5>Event Management</h5><table><tbody><tr><td><p><strong>Event-level analysis:</strong> See the threat level for each event captured.</p><p><strong>Tune event capture:</strong> Remove events from analysis at the service, workflow, execution, or overall level.</p><p><strong>Event distribution:</strong> Click the chart icon to see an event distribution including the measured data, baseline data, and event frequency.</p></td><td><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/uw64fijctw/1535497306015/image.png"/></figure></td></tr></tbody></table><p></p><h3>Next Steps</h3><ul><li><a href="/article/htvzryeqjw-configuration-as-code">Configuration as Code</a></li><li><a href="/article/ven0bvulsj-users-and-permissions">Users and Permissions</a></li></ul><p></p>