type: article
article_id: nxy3mcw053
user_id: wz6xkfcc9i
category_id: 5mu8983wa0
author:
  name: Chakravarthy Tenneti
  profile_image: https://www.gravatar.com/avatar/790db061bb8f8fb094e4d4b19a390f3b?d=mm&s=150
title: Monitor Applications 24/7 with Stackdriver Metrics
slug: monitor-applications-24-7-with-stackdriver-metrics
description: Lists specific options for integrating Stackdriver Metrics with Harness
  24/7 Service Guard. This feature monitors your live applications, catching problems
  that surface minutes or hours following deployment.
short_version: Combined with Stackdriver Metrics, Harness 24/7 Service Guard monitors
  your live applications, catching problems that surface minutes or hours following
  deployment.
tags:
- Stackdriver
- APM
- application performance monitoring
- Metrics Provider
- Verification Provider
- verification
- 24/7 Service Guard
- log
- setup
show_toc: true
is_private: false
is_published: true
is_featured: false
stale_status:
  is_stale: false
  reason: Article updated
  source: API
  triggered_at: 2021-05-12T17:21:34.297778Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: Monitor Applications 24/7 with Stackdriver Metrics
  description: Lists specific options for integrating Stackdriver Metrics with Harness
    24/7 Service Guard. This feature monitors your live applications, catching problems
    that surface minutes or hours following deployment.
  short_version: Combined with Stackdriver Metrics, Harness 24/7 Service Guard monitors
    your live applications, catching problems that surface minutes or hours following
    deployment.
  body: |-
    <p></p><p>Harness 24/7 Service Guard monitors your live applications, catching problems that surface minutes or hours following deployment.</p><p>Once you have set up the Stackdriver Verification Provider in Harness, as described in <a href="/article/dysdvm3vo7-stackdriver-connection-setup">Connect to Stackdriver</a>, you can add your Stackdriver <strong>Metrics</strong> monitoring to Harness 24/7 Service Guard in your Harness Application Environment.</p><p>In this topic:</p><ul><li> <a href="#before_you_begin">Before You Begin</a></li><li> <a href="#visual_summary">Visual Summary</a></li><li> <a href="#setup_service_guard">Step 1: Set up 24/7 Service Guard</a></li><li> <a href="#display_name">Step 2: Display Name</a></li><li> <a href="#the_service">Step 3: Service</a></li><li> <a href="#gcp_cloud_provider">Step 4: GCP Cloud Provider</a></li><li> <a href="#metrics_monitor">Step 5: Metrics to Monitor</a></li><li> <a href="#metric_name">Step 6: Metric Name, Metric Type, and Group Name</a></li><li> <a href="#metric_name">Step 7: JSON Query</a></li><li> <a href="#algorithm_sensitivity">Step 8: Algorithm Sensitivity</a></li><li> <a href="#enable_service_guard">Step 9: Enable 24/7 Service Guard</a></li><li> <a href="#verify_settings">Step 10: Verify Your Settings</a></li><li> <a href="#next_steps">Next Steps</a></li></ul><p></p><div class="hd--md" data-hd-markdown="&lt;span id=&#34;before_you_begin&#34;&gt;&lt;/span&gt;"><p><span id="before_you_begin"></span></p>
    </div><p></p><h3>Before You Begin</h3><ul><li>Set up a Harness Application, containing a Service and Environment. See <a href="/article/bucothemly-application-configuration">Create an Application</a>.</li><li>See the <a href="/article/jn0axefdat-stackdriver-and-harness-overview">Stackdriver Verification Overview</a>.</li></ul><p></p><div class="hd--md" data-hd-markdown="&lt;span id=&#34;visual_summary&#34;&gt;&lt;/span&gt;"><p><span id="visual_summary"></span></p>
    </div><p></p><h3>Visual Summary</h3><p>Here&#39;s an example of a completed Stackdriver Metrics for 24/7 Service Guard setup.</p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/other/1571953000515/image.png"/></figure><p></p><div class="hd--md" data-hd-markdown="&lt;span id=&#34;setup_service_guard&#34;&gt;&lt;/span&gt;"><p><span id="setup_service_guard"></span></p>
    </div><p></p><h3>Step 1: Set up 24/7 Service Guard</h3><p>To set up 24/7 Service Guard for Stackdriver, do the following:</p><ol><li>Ensure that you have added Stackdriver as a Harness Verification Provider, as described in  <a href="/article/dysdvm3vo7-stackdriver-connection-setup">Connect to Stackdriver</a>.</li><li>In your Harness Application, ensure that you have added a Service, as described in  <a href="https://docs.harness.io/article/eb3kfl8uls-service-configuration">Services</a>. For 24/7 Service Guard, you do not need to add an Artifact Source to the Service, or configure its settings. You simply need to create a Service and name it. It will represent your application for 24/7 Service Guard.</li><li>In your Harness Application, click <strong>Environments</strong>.</li><li>In <strong>Environments</strong>, ensure that you have added an Environment for the Service you added. For steps on adding an Environment, see  <a href="https://docs.harness.io/article/n39w05njjv-environment-configuration">Environments</a>.</li><li>Click the Environment for your Service. Typically, the <strong>Environment Type</strong> is <strong>Production</strong>.</li><li>In the <strong>Environment</strong> page, locate <strong>24/7 Service Guard</strong>.</li><li>In <strong>24/7 Service Guard</strong>, click <strong>Add Service Verification</strong>, and then click <strong>Stackdriver Metrics</strong>. The <strong>Stackdriver Metric</strong> dialog appears.</li></ol><div class="hd--md" data-hd-markdown="&lt;span id=&#34;display_name&#34;&gt;&lt;/span&gt;"><p><span id="display_name"></span></p>
    </div><p></p><h3>Step 2: Display Name</h3><p>The name that will identify this service on the <strong>Continuous Verification</strong> dashboard. Use a name that indicates the environment and monitoring tool, such as <strong>Stackdriver</strong>.</p><div class="hd--md" data-hd-markdown="&lt;span id=&#34;the_service&#34;&gt;&lt;/span&gt;"><p><span id="the_service"></span></p>
    </div><p></p><h3>Step 3: Service</h3><p>The Harness Service to monitor with 24/7 Service Guard.</p><div class="hd--md" data-hd-markdown="&lt;span id=&#34;gcp_cloud_provider&#34;&gt;&lt;/span&gt;"><p><span id="gcp_cloud_provider"></span></p>
    </div><p></p><h3>Step 4: GCP Cloud Provider</h3><p>Select the GCP Cloud Provider to use, as described in <a href="/article/dysdvm3vo7-stackdriver-connection-setup">Connect to Stackdriver</a>. If you currently connect to GCP via a Kubernetes Cluster Cloud Provider, you must set up a GCP Cloud Provider for access to the Stackdriver data on your cluster.</p><div class="hd--md" data-hd-markdown="&lt;span id=&#34;metrics_monitor&#34;&gt;&lt;/span&gt;"><p><span id="metrics_monitor"></span></p>
    </div><p></p><h3>Step 5: Metrics to Monitor</h3><p>In this section you define the Stackdriver metrics you want to monitor. For example, here is a Stackdriver Metrics Explorer configured to monitor Kubernetes container restarts, filtered by a cluster name and grouped by cluster.</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/other/1571956227865/image.png"/></figure><p></p><p>To reproduce these settings in <strong>Metrics To Monitor</strong>, you simply copy its filter and group by details via its JSON.</p><div class="hd--md" data-hd-markdown="&lt;span id=&#34;metric_name&#34;&gt;&lt;/span&gt;"><p><span id="metric_name"></span></p>
    </div><p></p><h3>Step 6: Metric Name, Metric Type, and Group Name</h3><p>In <strong>Metric Name</strong>, enter a name to identify the metric in Harness, such as <strong>Restarts</strong>. This is not the Stackdriver-specific name of a metric.</p><p>In <strong>Metric Type</strong>, select the type of metric to monitor, such as <strong>Infra</strong>.</p><p>In <strong>Group Name</strong>, enter a name for grouping the metrics in Harness, such as <strong>PodRestarts</strong>. The Group Name is useful when you want Harness to monitor multiple metrics, and be able to group them.</p><div class="hd--md" data-hd-markdown="&lt;span id=&#34;json_query&#34;&gt;&lt;/span&gt;"><p><span id="json_query"></span></p>
    </div><p></p><h3>Step 7: JSON Query</h3><p>Paste in the JSON query from Stackdriver Metrics Explorer.</p><p>In Stackdriver Metrics Explorer, once you have your metric query set up, click the <strong>View as JSON</strong> option.</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/other/1571956384316/image.png"/></figure><p>Next, click <strong>COPY JSON</strong>.</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/other/1571956423622/image.png"/></figure><p>In Harness Stackdriver Metrics, in <strong>JSON Query</strong>, paste in the JSON.</p><p></p><div class="hd--md" data-hd-markdown="&lt;span id=&#34;algorithm_sensitivity&#34;&gt;&lt;/span&gt;"><p><span id="algorithm_sensitivity"></span></p>
    </div><p></p><h3>Step 8: Algorithm Sensitivity</h3><p>See <a href="/article/0avzb5255b-cv-strategies-and-best-practices">CV Strategies, Tuning, and Best Practices</a>.</p><div class="hd--md" data-hd-markdown="&lt;span id=&#34;enable_service_guard&#34;&gt;&lt;/span&gt;"><p><span id="enable_service_guard"></span></p>
    </div><p></p><h3>Step 9: Enable 24/7 Service Guard</h3><p>Click the checkbox to enable 24/7 Service Guard.</p><p>When you are finished, the dialog will look something like this:</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/other/1571957009725/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p></p><div class="hd--md" data-hd-markdown="&lt;span id=&#34;verify_settings&#34;&gt;&lt;/span&gt;"><p><span id="verify_settings"></span></p>
    </div><p></p><h3>Step 10: Verify Your Settings</h3><p>Click <strong>TEST</strong>. Harness verifies the settings you entered.</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/other/1571957090466/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><p>Click <strong>SUBMIT</strong>. The Stackdriver 24/7 Service Guard is configured.</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/other/1571957115491/image.png"/></figure><p>To see the running 24/7 Service Guard analysis, click <strong>Continuous Verification</strong>. The 24/7 Service Guard dashboard displays the production verification results.</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/other/1571957187185/image.png"/></figure><p></p><div class="hd--md" data-hd-markdown="&lt;span id=&#34;next_steps&#34;&gt;&lt;/span&gt;"><p><span id="next_steps"></span></p>
    </div><p></p><h3>Next Steps</h3><ul><li><a href="/article/4ohedfzz1c-3-verify-deployments-with-stackdriver">Verify Deployments with Stackdriver Logging</a></li><li><a href="/article/m0j49kz112-verify-deployments-with-stackdriver-metrics">Verify Deployments with Stackdriver Metrics</a></li></ul><p></p><p></p>
  slug: monitor-applications-24-7-with-stackdriver-metrics
  tags:
  - Stackdriver
  - APM
  - application performance monitoring
  - Metrics Provider
  - Verification Provider
  - verification
  - 24/7 Service Guard
  - log
  - setup
  is_live: true
