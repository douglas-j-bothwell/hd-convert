type: article
article_id: dysdvm3vo7
user_id: mfr0nxh4be
category_id: 5mu8983wa0
author:
  name: Michael Cretzman
  profile_image: https://www.gravatar.com/avatar/2e8616837f4ee92be5d19ffe9b9ccba9?d=mm&s=150
title: Connect to Stackdriver
slug: stackdriver-connection-setup
description: Connect Stackdriver as a Harness Verification Provider, to verify the
  success of your deployments and live microservices.
short_version: Connect Harness to Stackdriver and verify the success of your deployments
  and live microservices.
tags:
- Stackdriver
- Verification Provider
- verification
- Deployment Verification
- 24/7 Service Guard
- setup
- Cloud Provider
show_toc: true
is_private: false
is_published: true
is_featured: false
stale_status:
  is_stale: false
  reason: Article updated
  source: API
  triggered_at: 2021-05-12T17:22:47.772435Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: Connect to Stackdriver
  description: Connect Stackdriver as a Harness Verification Provider, to verify the
    success of your deployments and live microservices.
  short_version: Connect Harness to Stackdriver and verify the success of your deployments
    and live microservices.
  body: |-
    <p>Connect Harness to Stackdriver to have Harness verify the success of your deployments and monitor live microservices. Harness will use your tools for verification and monitoring and use its machine learning features to identify sources of failures.</p><p>Most APM and logging tools are added to Harness as Verification Providers. For Stackdriver, you use the Google Cloud Platform account set up as a Harness Cloud Provider.</p><p>In this topic:</p><ul><li> <a href="#before_you_begin">Before You Begin</a></li><li> <a href="#visual_summary">Visual Summary</a></li><li> <a href="#assign_roles">Step 1: Assign Roles and Permissions</a></li><li> <a href="#add_stackdriver">Step 2: Add Stackdriver as a Cloud Provider</a></li><li> <a href="#obtain_gcp_account">Step 3: Obtain Google Cloud Provider Account Name</a></li><li> <a href="#next_steps">Next Steps</a></li></ul><p></p><div class="hd--md" data-hd-markdown="&lt;span id=&#34;before_you_begin&#34;&gt;&lt;/span&gt;"><p><span id="before_you_begin"></span></p>
    </div><p></p><h3>Before You Begin</h3><ul><li>See <a href="/article/4o7oqwih6h-harness-key-concepts">Harness Key Concepts</a>.</li><li>See the <a href="/article/jn0axefdat-stackdriver-and-harness-overview">Stackdriver Verification Overview</a>.</li></ul><p></p><div class="hd--md" data-hd-markdown="&lt;span id=&#34;assign_roles&#34;&gt;&lt;/span&gt;"><p><span id="assign_roles"></span></p>
    </div><p></p><h3>Step 1: Assign Roles and Permissions</h3><p>The following roles must be attached to the account used to connect Harness and Stackdriver as a Google Cloud Provider:</p><ul><li><strong>Stackdriver Logs</strong> - The minimum role requirement is <strong>logging.viewer</strong></li><li><strong>Stackdriver Metrics</strong> - The minimum role requirements are <strong>compute.networkViewer</strong> and <strong>monitoring.viewer</strong>.</li></ul><p>See <a href="https://cloud.google.com/monitoring/access-control" target="_blank">Access control</a> from Google.</p><div class="hd--md" data-hd-markdown="&lt;span id=&#34;add_stackdriver&#34;&gt;&lt;/span&gt;"><p><span id="add_stackdriver"></span></p>
    </div><p></p><h3>Step 2: Add GCP Cloud Provider for Stackdriver</h3><p>To add Stackdriver as a Cloud Provider, follow the steps for adding a <a href="/article/whwnovprrb-cloud-providers#google_cloud_platform_gcp">Google Cloud Platform</a> Cloud Provider.</p><ol><li>In Harness, click <strong>Setup</strong>, and then click <strong>Cloud Providers</strong>.</li><li>Click <strong>Add Cloud Provider</strong> and select <strong>Google Cloud Platform</strong>.</li></ol><p></p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/dysdvm3vo7/1587769517275/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><div class="hd--md" data-hd-markdown="&lt;span id=&#34;obtain_gcp_account&#34;&gt;&lt;/span&gt;"><p><span id="obtain_gcp_account"></span></p>
    </div><p></p><h3>Step 3: Provide Google Cloud&#39;s Account Service Key File</h3><p>In <strong>Select Encrypted Key</strong>, select or create a new <a href="https://docs.harness.io/article/ygyvp998mu-use-encrypted-text-secrets">Harness Encrypted Text secret</a> that contains the Google Cloud&#39;s Account Service Key File.</p><p>To obtain the Google Cloud&#39;s Account Service Key File, see <a href="https://cloud.google.com/iam/docs/creating-managing-service-account-keys" target="_blank">Creating and managing service account keys</a> from Google.</p><div class="hd--md" data-hd-markdown="&lt;span id=&#34;next_steps&#34;&gt;&lt;/span&gt;"><p><span id="next_steps"></span></p>
    </div><p></p><h3>Next Steps</h3><ul><li><a href="/article/4ohedfzz1c-3-verify-deployments-with-stackdriver">Verify Deployments with Stackdriver Logging</a></li><li><a href="/article/m0j49kz112-verify-deployments-with-stackdriver-metrics">Verify Deployments with Stackdriver Metrics</a></li><li><a href="/article/485lq1k7mo-2-24-7-service-guard-for-stackdriver">Monitor Applications 24/7 with Stackdriver Logging</a></li><li><a href="/article/nxy3mcw053-monitor-applications-24-7-with-stackdriver-metrics">Monitor Applications 24/7 with Stackdriver Metrics</a></li></ul><p></p>
  slug: stackdriver-connection-setup
  tags:
  - Stackdriver
  - Verification Provider
  - verification
  - Deployment Verification
  - 24/7 Service Guard
  - setup
  - Cloud Provider
  is_live: true
