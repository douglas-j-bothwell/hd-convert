<p>A Build Workflow doesn&#39;t require a deployment environment, unlike other Harness Workflows. It simply runs a build process via Jenkins, Bamboo, or Shell Script, and then saves the artifact to an explicit path.</p><p>In this document, Jenkins is used as an example, but Harness supports all the common <a href="/article/7dghbx1dbl-configuring-artifact-server">artifact sources</a> and <a href="/article/jizsp5tsms-custom-artifact-source">custom sources</a>.</p><h3>Before You Begin</h3><ul><li><a href="/article/wqytbv2bfd-ci-cd-with-the-build-workflow">CI/CD with the Build Workflow</a></li></ul><h3>Step: Create a Build</h3><p>To create a Build Workflow, do the following:</p><ol><li>In your Harness Application, click <strong>Workflows</strong>, and then click <strong>Add Workflow</strong>. The <strong>Workflow</strong> settings appear.</li><li>In <strong>Name</strong>, enter a name for this Build Workflow, such as <strong>Build File</strong>.</li><li>In <strong>Workflow Type</strong>, select <strong>Build</strong>. When you are done, the dialog will look something like this.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/obqhjaabnl/1580172162408/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure></li><li>Click <strong>Submit</strong>. The Workflow is created.</li></ol><p>By default, only the <strong>Artifact Collection</strong> step is added. Next, we will add the Jenkins step to build the artifact.</p><h3>Step: Configure Jenkins</h3><p>The <strong>Jenkins</strong> step runs the Jenkins job to build the artifact and then pass an output variable containing the build&#39;s environment variables. Use the output variable to configure the <strong>Artifact Collection</strong> step to obtain the newly build artifact (typically, just its metadata).</p><div class="note-callout">To learn more about the Jenkins command, see <a href="/article/5fzq9w0pq7-using-the-jenkins-command">Using the Jenkins Command</a>.</div><p>To add the Jenkins step, do the following:</p><ol><li>In the <strong>Prepare Steps</strong> section of the Workflow, click <strong>Add Step</strong>.</li><li>Select <strong>Jenkins</strong>. The <strong>Jenkins</strong> settings appear.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/obqhjaabnl/1580172384269/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure></li><li>In <strong>Jenkins Server</strong>, select the Jenkins server you added as a Harness Artifact Server in <a href="/article/xiys9djs0h-1-harness-account-setup">Harness Account Setup</a>. This is the server that contains the Jenkins job to build the artifact.</li><li>In <strong>Job Name</strong>, select the Jenkins job to build the artifact. Next, we will create an output variable to pass build environment variables to the <strong>Artifact Collection</strong> step.</li><li>Click <strong>Jenkins Output in the Context</strong>.</li><li>In <strong>Variable Name</strong>, enter the name of the output variable. For example, <strong>Jenkins</strong>.</li><li>In <strong>Scope</strong>, select <strong>Workflow</strong>. Selecting <strong>Workflow</strong> ensures that there are no conflicts with any variables that share this name outside of the Workflow, such as another Workflow in the Pipeline.<br/><br/>When you are done, the dialog will look something like this.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/obqhjaabnl/1580172465887/image.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure></li><li>Click <strong>Submit</strong>. The Jenkins step is added to the Workflow.</li></ol><h3>Step: Configure Shell Script</h3><p>To view the environment parameters contained in the output variable, you can add a Shell Script step and echo the parameters.</p><ol><li>In the <strong>Prepare Steps</strong> section of the Workflow, click <strong>Add Command</strong>, and then click <strong>Shell Script</strong>. The <strong>Shell Script</strong> settings appear.</li><li>In <strong>Script</strong>, enter the following script:<br/><br/><pre>echo &#34;buildDisplayName: &#34; ${Jenkins.buildDisplayName}<br/><br/>echo &#34;jobStatus: &#34; ${Jenkins.jobStatus}<br/><br/>echo &#34;buildUrl: &#34; ${Jenkins.buildUrl}<br/><br/>echo &#34;buildFullDisplayName: &#34; ${Jenkins.buildFullDisplayName}<br/><br/>echo &#34;buildNumber: &#34; ${Jenkins.buildNumber}<br/><br/>echo &#34;description: &#34; ${Jenkins.description}</pre></li></ol><div class="note-callout">The <code>${Jenkins.description}</code> parameter requires <a href="https://wiki.jenkins.io/display/JENKINS/Description+Setter+Plugin">Descriptor Setter</a> plugin in Jenkins.</div><p>When you deploy the Workflow, the Shell Script command will output all the parameters (<code>${Jenkins.description}</code> is not shown):</p><p></p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/obqhjaabnl/1620840172263/uv-5-y-lt-5-tsgh-gf-nbligemxlv-7-d-adowwx-760-ew-jzo-3-tv-st-x-57-gvkofh-fjza-x-xd-o-9-g-nce-slxzv-izj-c-9-xlj-ucqiw-3-hyd-9-r-e-7-gmasz-2-qnt-ifvibk-go-pqfl-wrqo-rkmn-8-h-b-8-d-1-a-09-epdi"/></figure><p></p><p>Next, we will add the <strong>Artifact Collection</strong> step and use the <code>${Jenkins.buildNumber}</code> parameter to obtain the latest build number.</p><p>To learn more about the Shell Script command, see <a href="/article/1fjrjbau7x-capture-shell-script-step-output">Using the Shell Script Command</a>.</p><p>You can use these <a href="/article/9dvxcegm90-variables#artifact">artifact variable expressions</a> in a Shell Script to see the built artifact information (at the end of the Workflow).</p><h3>Step: Configure Artifact Collection</h3><p>The Artifact Collection step uses the <code>${Jenkins.buildNumber}</code> parameter to obtain the latest build number, and then pull the build from the artifact repo. Typically, only the build metadata is pulled by Harness. It depends on the <strong>Meta-data Only</strong> setting in the Service&#39;s Artifact Source.</p><p>The Artifact Collection step was added automatically when you created the Build Workflow. You simply need to configure it.</p><h4>Option: Build an Artifact</h4><ol><li>In your Build Workflow, click <strong>Artifact Collection</strong>. The <strong>Artifact Collection</strong> dialog appears.</li><li>Enter a name for your Artifact Collection.</li><li>Select <strong>Artifact</strong> as the <strong>Source Type</strong> for the Artifact collection.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/obqhjaabnl/1644565041253/screenshot-2022-02-11-at-1-02-39-pm.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure>Pick the Artifact Source you created in your Service under <strong>Artifact Source</strong>.<br/>You can template the <strong>Artifact Source</strong> setting by clicking the <strong>[T]</strong> button. This will create a <a href="/article/766iheu1bk-add-workflow-variables-new-template">Workflow variable</a>. When you deploy the Workflow, you can provide a value for the variable.</li></ol><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/obqhjaabnl/1627326569077/clean-shot-2021-07-26-at-12-09-18.png"/></figure><ol><li style="counter-increment:li 3" start="4">In <strong>Build / Tag</strong>, enter the Jenkins step output variable <code>${Jenkins.buildNumber}</code> parameter to provide this step with the build number of the artifact built in the Jenkins step.<br/>When you are done, the Artifact Collection dialog will look something like this.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/obqhjaabnl/1627326721031/clean-shot-2021-07-26-at-12-11-50.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure></li><li>Click <strong>Submit</strong>. The Artifact Collection step is configured.</li></ol><h4>Option: Build a Helm Chart</h4><div class="note-callout">Currently, this feature is behind the Feature Flag <code>HELM_CHART_AS_ARTIFACT</code>. Contact <a href="mailto:support@harness.io" target="_blank">Harness Support</a> to enable the feature.</div><p>You can also build Helm Charts with Manifests. To do that, perform the following steps:</p><ol><li>In your Build Workflow, click <strong>Artifact Collection</strong>. The <strong>Artifact Collection</strong> dialog appears.</li><li>Enter a name for your Artifact Collection.</li><li>Select <strong>Manifest</strong> as the <strong>Source Type</strong> for the Manifest collection.</li><li>Pick the Manifest Source you created in your Service under <strong>Manifest Source.</strong></li><li>You can template the <strong>Manifest Source</strong> setting by clicking the <strong>[T]</strong> button. This will create a <a href="/article/766iheu1bk-add-workflow-variables-new-template">Workflow variable</a>. When you deploy the Workflow, you can provide a value for the variable.</li><li>In <strong>Build / Tag</strong>, enter the Jenkins step output variable <code>${Jenkins.buildNumber}</code> parameter to provide this step with the build number of the artifact built in the Jenkins step.<br/>When you are done, the Artifact Collection dialog will look something like this.</li><li>Click <strong>Submit</strong>. The Artifact Collection step is configured.</li></ol><p></p><p>You can run the Build Workflow to test its settings before setting up the rest of the Pipeline. In the following example, the Artifact Collection step displays the artifact metadata Harness obtained, including the Build/Tag. </p><figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/obqhjaabnl/1620840172737/bpjxa-cz-lkz-6-j-4-yax-zo-4-ol-46-vwb-ooncjp-gx-9-c-9-y-bdk-vzstfc-bag-sdhqp-wz-uq-w-61-nfm-rchz-zu-ynzvsc-rl-qxmx-hotuy-vv-wec-ydscd-9-vjv-7-f-jta-qcfj-p-56-o-oc-9-lfs-el-6-g-wzzux-x"/></figure><p></p><h3>Next Step</h3><ul><li><a href="/article/fav3v3jx3d-4-environment">Define Your Build and Deploy Pipeline Target Infrastructure</a></li></ul><p></p>