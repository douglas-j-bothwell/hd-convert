<p>The first step in Artifact Build and Deploy pipeline is to create a Harness Service. Harness Service connects to the Artifact Server you added in <a href="/article/xiys9djs0h-1-harness-account-setup">Harness Account Setup</a> and identifies the artifact to deploy. The Service also contains the scripts used to install and run the build on the target nodes.</p><p>This Service is used by the <strong>Artifact Collection</strong> command in <a href="/article/q6rtl33634-5-deploy-workflow">Create the Deploy Workflow for Build and Deploy Pipelines</a>, the Environment&#39;s <a href="/article/fav3v3jx3d-4-environment">target infrastructure</a>, and in the set up of the <a href="/article/q6rtl33634-5-deploy-workflow">Deploy Workflow</a>.</p><div class="note-callout">In this document, Shell Script Service and a Jenkins job artifact is used as an example but Harness supports all the common <a href="/article/7dghbx1dbl-configuring-artifact-server">artifact source</a> and <a href="/article/jizsp5tsms-custom-artifact-source">custom sources</a>.</div><h3>Before You Begin</h3><ul><li><a href="/article/wqytbv2bfd-ci-cd-with-the-build-workflow">CI/CD with the Build Workflow</a></li></ul><h3>Step 1: Create a Service</h3><p>Harness Services represent your microservices/apps. You define where the artifacts for those microservices/apps come from, the container specs, configuration variables, and files for those microservices.</p><p>To create the Service, perform the following steps:</p><ol><li>In your Harness Application, click <strong>Services</strong>. To create a Harness Application, see <a href="https://docs.harness.io/article/bucothemly-application-configuration">Application Components</a>.</li><li>Click <strong>Add Service</strong>. The <strong>Add Services</strong> settings appear.</li><li>In <strong>Name</strong>, enter a name for your Service. In this example, <strong>ToDo List WAR</strong> is used because ToDo List app is built and packaged it in a WAR file.</li><li>In <strong>Deployment Type</strong>, select <strong>Secure Shell (SSH)</strong>. </li><li>In <strong>Artifact Type</strong>, select <strong>Web Archive (WAR)</strong>.</li><li>In <strong>Application Stack</strong>, select <strong>Standard Tomcat 8</strong>.</li><li>Click <strong>Submit</strong>.</li></ol><p>The new Service is created. There are several installations and start scripts added by default. When your application is deployed, these scripts run on the target host(s).</p><div class="note-callout">For more information about the default scripts in a Secure Shell (SSH) Service, see <a href="/article/6pwni5f9el-traditional-deployments-overview">Traditional Deployments Overview</a>.</div><p>Next, Artifact Source is added.</p><h3>Step 2: Add an Artifact Source</h3><p>The Artifact Source defines where the Artifact Collection step looks for the built artifact during the Build Workflow. Also, the Service is used in the Deploy Workflow to install the artifact on the target host(s).</p><p>To add an Artifact Source, perform the following steps:</p><ol><li>In your Service, click <strong>Add Artifact Source</strong>, and select <strong>Jenkins</strong>. The <strong>Jenkins</strong> settings appear.</li><li>In <strong>Source Server</strong>, select the Jenkins Artifact Server you set up in <a href="/article/xiys9djs0h-1-harness-account-setup">Harness Account Setup</a>. Once you select the Source Server, the <strong>Job Name</strong> field loads all of the Jenkins jobs from the Source Server.</li><li>In <strong>Job Name</strong>, select the job you want to run to build your artifact. Harness also supports <a href="/article/5fzq9w0pq7-using-the-jenkins-command#multibranch_pipeline_support">Jenkins Multibranch Pipelines</a>.</li><li>Select the <strong>Meta-data Only</strong> setting. Typically, metadata is sufficient as it contains enough information for the target host(s) to obtain the artifact. Harness stores the metadata and, during runtime, the Harness Delegate passes the metadata to the target host(s) where it is used to obtain the artifact(s) from the source repo. Ensure that the target host has network connectivity to the Artifact Server.</li><li>In <strong>Artifact Path</strong>, select the path and name of the artifact. In this example, <strong>target/todolist.war</strong> is used.<br/><br/>When you are done, the <strong>Jenkins Artifact Source</strong> will look something like this:<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/xhh8oi4bkh/1620840173417/8-q-x-4-gdc-p-4-tumwb-hlur-cg-yt-sv-pfkq-xt-8-ixdg-k-9-iazr-mcl-b-5-soz-sl-845-kzds-8-w-i-6-3-em-ay-7-kw-1-sz-mnezk-9-zxp-i-6-adb-2-kge-ug-xzw-t-79-kb-2-kax-bel-vq-qfp-wf-eys-3-u-phm-5-p-5-k-pg-uc"/></figure></li><li>Click <strong>Submit</strong>.<br/><br/>The Artifact Source is added to the Service.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/xhh8oi4bkh/1620840173670/tvec-vadx-nlz-wt-h-4-q-7398-oms-lkyh-ozi-1-nd-fz-yhqnk-elj-2-uzlq-xyd-xxo-4-k-40-sduec-ca-6-xh-go-04-mkw-segv-3-cgb-bz-rs-l-5-hqq-brrf-oei-wg-2-az-7-yf-t-3-gdw-zb-5-yceih-v-pxzxsxw-1-yhmq" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure></li></ol><h4>Step: View Artifact History</h4><p>Next, let&#39;s see the artifact history that Harness can pull from Jenkins.</p><ol><li>Click <strong>Artifact History</strong>.</li><li>Click <strong>Manually pull artifact</strong>. The <strong>Manually Select An Artifact</strong> dialog appears.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/xhh8oi4bkh/1620840173900/g-4-d-m-vhb-6-t-2-daxjyxn-lskn-zw-sp-1-tp-54-fs-z-d-f-gxbcan-ikg-o-3-i-7-e-6-mh-glk-auc-yi-byat-ok-at-yc-n-b-7-h-h-0-oi-df-jfi-xqic-tq-m-7-cpx-wb-zkgr-ra-5-x-5-agwjinp-pt-5-w-87-fl-0-us-ee-qg-y" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure></li><li>In <strong>Artifact Stream</strong>, select the artifact source you just added.</li><li>In <strong>Artifact</strong>, select the build for which you want to view history.</li><li>Click <strong>Submit</strong>. </li><li>Click <strong>Artifact History</strong> again. The history for the build you specified is displayed.<figure><img src="https://files.helpdocs.io/kw8ldg1itf/articles/xhh8oi4bkh/1620840174126/6-eaw-xlxx-iohuiw-ew-n-4-ww-7-tj-uys-1-rur-1-ny-hd-lnjc-7-cih-psip-7-jt-qsh-s-5-p-ddh-7-nb-0-fm-ih-zptkm-qsu-s-2-fxnrm-1-r-0-pux-mssoe-5-e-0-w-2-vd-ke-wf-tbf-2-yiqygpgf-2-x-1-t-0-q-sg-50-mrl-hw-o" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure></li></ol><p></p><p> For more information on Service settings, see <a href="/article/eb3kfl8uls-service-configuration">Services</a>.</p><p>Now, that the Service is complete, we can create the Build Workflow to build the next version of the artifact.</p><h3>Use the Same Artifact Build/Tag Across Multiple Workflows in a Pipeline</h3><p>When using a Build Workflow followed by multiple Workflows in a Pipeline, you can now pass the same artifact from the first Build Workflow to rest of the Workflows in the Pipeline that deploy the same Harness Service.</p><p>Execution of each Workflow will use the artifact collected by the last run Build Workflow in the Pipeline that has collected the artifact from the same Service.</p><p>In the first Build Workflow&#39;s <strong>Artifact Collection</strong> step&#39;s <strong>Build/Tag</strong> setting (described in <a href="/article/q6rtl33634-5-deploy-workflow">Create the Deploy Workflow for Build and Deploy Pipelines</a>), you specify the artifact to collect. For subsequent <strong>Artifact Collection</strong> steps in the same and subsequent Workflows in the Pipeline deploying the same Service, you can leave the <strong>Artifact Collection</strong> step&#39;s <strong>Build/Tag</strong> setting empty and Harness will use the artifact collected by the last Build Workflow in the Pipeline.</p><p>This functionality requires the Feature Flag <code>SORT_ARTIFACTS_IN_UPDATED_ORDER</code>.</p><h3>Next Step</h3><ul><li><a href="/article/obqhjaabnl-3-build-workflow">Create the Build Workflow for Build and Deploy Pipelines</a></li></ul><p></p>