type: article
article_id: ck5aunk3fk
user_id: xwmdbyp4x8
category_id: bogcmczbcv
author:
  name: Doug Bothwell
  profile_image: https://www.gravatar.com/avatar/120de2cc624d7903cf3d83b86d0f1b5e?d=mm&s=150
title: 'DRAFT DOC-1715 Release Notes :: NG On-Prem :: 2022-06-30'
slug: draft-doc-1713-harness-self-managed-enterprise-edition-release-notes
description: This document contains release notes for both the Harness Self-Managed
  Enterprise Edition editions. For Harness SaaS Release Notes, see Harness SaaS Release
  Notes. Release notes are displayed with th…
short_version: This document contains release notes for both the Harness Self-Managed
  Enterprise Edition editions. For Harness SaaS Release Notes, see Harness SaaS Release
  Notes. Release notes are displayed with th…
tags: []
show_toc: false
is_private: true
is_published: true
is_featured: false
stale_status:
  is_stale: false
  reason: ""
  source: API
  triggered_at: 2022-07-02T16:35:21.352167Z
  expires_at: null
permission_groups: []
multilingual:
- language_code: en
  title: 'DRAFT DOC-1715 Release Notes :: NG On-Prem :: 2022-06-30'
  description: ""
  short_version: ""
  body: '<p>This document contains release notes for both the Harness Self-Managed
    Enterprise Edition editions.</p><div class="note-callout">For Harness SaaS Release
    Notes, see <a href="/article/7zkchy5lhj-harness-saa-s-release-notes-2022">Harness
    SaaS Release Notes</a>.</div><p>Release notes are displayed with the most recent
    release first.</p><h3>Minor Release 75618</h3><p>Release Date: June 30, 2022</p><div
    class="warning-callout"><strong>Important information about upgrading Timescale
    DB<br/><br/></strong>Before you upgrade, you must perform these operations to
    migrate Timescale DB to the latest version.<br/><br/>Run these commands to log
    in to MongoDB:<br/><br/><code>MONGO_URI=$(echo `kubectl -n harness get secret
    harness-manager-config -o yaml |grep MONGO_URI |cut -d : -f2 | head -1 |base64
    -d -i`)<br/><br/>kubectl exec -it mongodb-replicaset-chart-0 -n harness -- mongo
    &#34;$MONGO_URI&#34;</code><br/><br/>Once logged in to MongoDB, run these commands:<br/><br/><code>db.schema.find({})
    --&gt; get the version from this result<br/><br/>db.schema.update({&#34;version&#34;:
    &lt;version&gt;}, {$set: {&#34;timescaleDbVersion&#34;: 0, &#34;timescaleDBDataVersion&#34;
    :0}}) --&gt; substitute the version in this query</code><br/><br/><br/>Take a
    <code>pgdump</code> of TimescaleDB:<br/><br/>Log in to TimescaleDB.<br/><br/>
    <code>kubectl exec -it timescaledb-single-chart-0 -n &lt;namespace&gt; -- bash</code><br/><br/>
    <code>pg_dumpall &gt; dump.out</code><br/><br/>Exit the TimescaleDB:<br/><br/><code>kubectl
    cp &lt;namespace&gt;/timescaledb-single-chart-0:/home/postrgres/dump.out dump.out<br/></code><br/>Please
    run all these commands to delete the TimescaleDB stateful set, pvc services, and
    end points (please change <code>&lt;namespace&gt;</code> accordingly):<br/><br/><code>kubectl
    delete sts timescaledb-single-chart -n &lt;namespace&gt;<br/><br/>kubectl delete
    svc timescaledb-single-chart timescaledb-single-chart-config timescaledb-single-chart-replica
    -n &lt;namespace&gt;<br/><br/>kubectl delete pvc storage-volume-timescaledb-single-chart-0
    storage-volume-timescaledb-single-chart-1 -n &lt;namespace&gt;<br/></code><br/>Now
    you can deploy the new version.<br/><br/><em>Optional:</em><br/><br/>If you see
    any data discrepancies, you can log in to TimescaleDB again and run a restore
    of the dump:<br/><br/>1. <code>kubectl cp dump.out &lt;namespace&gt;/timescaledb-single-chart-0:/home/postrgres/dump.out</code><br/><br/>2.
    <code>kubectl exec -it timescaledb-single-chart-0 -n &lt;namespace&gt; -- bash</code><br/><br/>3.
    <code>pg_restore dump.out</code><br/></div><p>We&#39;re pleased to present Harness
    Self-Managed Enterprise Edition Minor Release 75618.</p><h4>New Features and Enhancements</h4><p>The
    following new features were added to the Harness platform components:</p><h5 id="undefined">Platform
    and Delegate</h5><ul><li>Harness has released a new simplified Git Experience.
    (PL-24308)<ul><li>How to create a Pipeline using Git Experience. See <a href="https://ngdocs.harness.io/article/grfeel98am">Harness
    Git Experience QuickStart</a>.</li><li>How to create Input Sets and Triggers using
    Git Experience. See <a href="https://ngdocs.harness.io/article/8tdwp6ntwz">Manage
    Input Sets and Triggers in Git Experience</a>.</li><li>How to manage your Harness
    Pipelines and Input Sets in a separate repo from your code. See <a href="/article/5nz7j3e1yc-manage-a-harness-pipeline-repo-using-git-experience">Manage
    a Harness Pipeline Repo Using Git Experience</a>.</li></ul></li><li>Added search
    by delegate tags functionality in UI (EL-4230)</li><li>On the delegate list page,
    adding the ability to do partial search with tag names as well as introducing
    a new filter option with delegate tags to search. (DEL-4151)</li></ul><h5>Pipeline</h5><ul><li>New
    support for adding cloning pipelines. (PIE-4262)</li></ul><h5>Continuous Integration</h5><ul><li>We
    now support builds for MacOs VM&#39;s from CI. See <a href="https://ngdocs.harness.io/article/mwzlb0x2mt"
    target="_blank">Define a MacOS Build Infrastructure in AWS</a>. (CI-4368)</li></ul><h5>Continuous
    Deployment</h5><ul><li>Support for Azure deployments using cluster user kubeconfig.
    (CDS-38131)<ul><li>These are the assumptions/expectations for AKS cluster config:<ul><li>AKS
    managed AAD (enabled or disabled)</li><li>Kubernetes RBAC enabled</li><li>Azure
    RBAC (enabled or disabled): See <a href="https://ngdocs.harness.io/article/sjjik49xww-kubernetes-cluster-connector-settings-reference#deployments_cd"
    target="_blank">Kubernetes Cluster Connector Settings Reference</a></li><li>AKS
    property disableLocalAccounts (enabled or disabled)</li><li>SPN or MSI azure permissions
    (these are necessary regardless if you are using kubernetes RBAC or Azure RBAC)</li><li>Microsoft.ContainerRegistry/registries/read</li><li>Microsoft.ContainerRegistry/registries/builds/read</li><li>Microsoft.ContainerRegistry/registries/metadata/read</li><li>Microsoft.ContainerRegistry/registries/pull/read</li><li>Microsoft.ContainerService/managedClusters/read</li><li>Microsoft.ContainerService/managedClusters/listClusterUserCredential/action</li><li>Microsoft.Resource/subscriptions/resourceGroup/read</li></ul></li><li>For
    Native Helm deployments to AKS:<ul><li>Helm version must be &gt; 3.2.0 (currently
    we version 3.8.0 installed on delegate which is used only when Feature Flag &#34;HELM_VERSION_3_8_0&#34;
    is activated)</li></ul></li></ul></li><li>Terraform plan step now outputs `detailedExitCode`
    output variable. (CDS-36326)<ul><li>This detailed exit code is by terraform plan
    (<a href="https://www.terraform.io/cli/commands/plan">https://www.terraform.io/cli/commands/plan</a>)
    and users can use this to work with other steps in the pipeline.</li><li>Info
    on detailed-exit-code:</li><li>detailed-exitcode - Returns a detailed exit code
    when the command exits. When provided, this argument changes the exit codes and
    their meanings to provide more granular information about what the resulting plan
    contains:</li><li>0 = Succeeded with empty diff (no changes)</li><li>1 = Error</li><li>2
    = Succeeded with non-empty diff (changes present)</li></ul></li></ul><h5>Cloud
    Cost Management</h5><ul><li>User will be redirected to dry run tab after creating
    a dry run rule (CCM-7928)</li><li>Now, user can group by based on cloud provider
    also. (CCM-7543)</li><li>Clients can choose to show/hide `Others` and `Unallocated
    cost` in the perspective&#39;s chart section. (CCM-7254)</li></ul><h4>Issued Fixed
    in This Release</h4><ul><li>Prometheus verification failing logs unhelpful (SRM-10716)</li><li>Fix
    PreQA startup failing because of jdk11 update (SRM-10709)</li><li>Negative Value
    Validation required at backend for notification-rule/{identifier} api added NULL
    checks (SRM-10682)</li><li>Fixed a null pointer exception in data collection for
    verify step. (SRM-10674)</li><li>Incorrect order of events in verify step&#39;s
    log cluster view. fixed sorting orders. (SRM-10665)</li><li>Fixed sorting orders
    (SRM-10656)</li><li>Yaml added for Prometheus connector with username and password.
    (SRM-10653, ZD-31038)</li><li>Notifications are triggered even when analysis is
    OFF (SRM-10652)</li><li>Add exception if a different NotificationRuleType is added
    into a different Entity (SRM-10632)</li><li>Added NULL checks to two API that
    were are failing in (SRM-10631)</li><li>Not able to create an SLO with GCP as
    metrics (SRM-10594)</li><li>Show exception to users when save fails for metric
    data collection. (SRM-10551, ZD-30562)</li><li>Fixed a bug in cloudwatch EC2 timeseries
    analysis which was causing analysis to finish without any actual analysis. (SRM-10276,
    ZD-30292)</li><li>Changed metricIdentifier and metricName position in constructor
    (SRM-10161)</li><li>Subscription MAUs and Developer Count Reversed (PLG-1239)</li><li>Subscription
    Prices Endpoint Should Use ModuleType enum (PLG-1192)</li><li>Getting branch name
    empty error while fetching pipeline from default branch (PL-25914)</li><li>Account
    Viewer role is not visible for Role Assignment on User Invite (PL-25742)</li><li>in
    audit log filter, &#34;Updated&#34; appears twice (PL-25660</li><li>Execution
    Strategies Animations not loading (PL-25539</li><li>Not able to delete service
    account at project level Not Available PL-25432</li><li>The casing of the word
    &#34;Connectors&#34; has been changed in the autocomplete dropdown in order to
    be consistent with API when the user tries the following endpoint: <code>https://harness.io/docs/api/tag/Connectors#operation/getConnectorListV2!ct=application/json&amp;path=filterType&amp;t=request</code>
    (PL-25424)</li><li>The API (listConnectorByFQN) now correctly return back all
    the available connectors. In case the connector is git synced, the connector from
    the default branch is returned as part of response list. (PL-25364, ZD-30901)</li><li>We
    updated Open API spec typo to change SecretFileSpe to SecretFileSpec. This won&#39;t
    have any change in API but will have change if someone was using autogenerated
    client (PL-25360)</li><li>In case no project was saved in PreferenceFramework
    (because it&#39;s disabled currently), DeleteProject was throwing an error as
    it was trying to access an &#39;undefined&#39; project (PL-25337)</li><li>Earlier
    duplicate redis events (like referring to a connector in 2 stages of the same
    pipeline) was giving a bulk update exception, which lead to none of the instances
    being stored. Now we are checking for duplicates and storing only one instance
    PL-25264</li><li>Fixed CSS rule to wrap words correctly and also honour white-spaces
    from message received from backend. PL-25033</li><li>MultiTypeSelectField addClearBtn
    does not clear falsy values Fixed a bug which prevents clearing a dropdown with
    falsy values. (PL-24968)</li><li>NG Audit Trail showing incorrect timezone (PL-24878)</li><li>User
    logging into CG even though default account is NG (PL-24779)</li><li>Publish audit
    is failing in PROD when the new YAML size is greater than the defined size PL-24426</li><li>Replaced
    numbers with previous and next buttons PL-23978</li><li>Added a global check to
    redirect User to login page when IP is not whitelisted PL-23816</li><li>Inline
    creation of connector is removed from UI when user lacks permissions to create
    a connector PL-21623</li><li>Unexpected behavior on clicking the popup message
    in connectors page PL-21534</li><li>Harness Managed Secrets Manager cannot be
    edited via YAML PL-14961</li><li>Move the rerun icon to the right PIE-4097</li><li>UI
    - GitX2.0 - Input set yaml filepath is missing when we save a new pipeline PIE-4088</li><li>Input
    set name is mandatory field PIE-4085</li><li>Dynamic popover is mounted even after
    the onMouseLeave event. PIE-4080</li><li>Run Individual stage with custom stage
    fails first time, passing wrong runtime Input Yaml N/A PIE-4006</li><li>Select
    Inputs supporting Expressions method field will not be empty when we come back
    from yaml view after saving the fields PIE-3952</li><li>Removed additional back
    button PIE-3949</li><li>Removed extra data from drag payload in steps graph (PIE-3946,
    ZD-31265)</li><li>Fixed condition that was causing issue in render (PIE-3943)</li><li>Better
    error handling when dashboard data gen fails in pipeline execution history (PIE-3919)</li><li>Text
    to current Harness Generation overflowing from container (PIE-3917)</li><li>Updated
    breadcrumb links (PIE-3893)</li><li>Added callback to get `isLoadingFinish` for
    status of API (PIE-3816)</li><li>Cypress - Env Group Create Cypress test for env
    group after request update was not updated. This has been updated with the new
    uri (PIE-3805)</li><li>Formik wrapper removed PIE-3777</li><li>Fixed new pipeline
    studio bugs and alignment issues PIE-3761</li><li>Added default strategy as fallback
    PIE-3756</li><li>Issue on UI on most active service widget when &#34;byInstances&#34;
    is chosen. PIE-3563</li><li>UI - Values in drop down box is hidden PIE-2699</li><li>UI
    - Failure Strategy Step Configuration - UX Comments PIE-2157</li><li>Fixed bug
    whereby the Metrics and Activity tab in the Flag detail page would fail to load
    due to a routing error. FFM-3665</li><li>Fixed issue whereby a Feature Flag Variation
    could not be added and another removed in the same operation FFM-3632</li><li>Added
    padding to the left bar in the Target detail page FFM-3582</li><li>In Targeting
    panel, Save and Cancel buttons are now visible without having to scroll. FFM-3581</li><li>Trial
    banners no longer cut off `Save` and `Cancel` buttons in Target Rules page FFM-3447</li><li>Fix
    details column expand issue in the view delegate selection datagrid DEL-4156</li><li>Fix
    removal issue in the Delegate setup form. Earlier, tags and descriptions values
    were not removed properly. DEL-4046</li><li>Delegate tags would get reset while
    toggling the delegate selection options DEL-3549</li><li>Harness url opens invalid
    url Removed URL link and disabled cursor on not-allowed delegate types DEL-3279</li><li>Fixed
    few issues/blockers for recently released Hosted Builds (first time signup flow
    for CI). CI-4747</li><li>Customers should now be able provide values for Environment
    Variables field via a input set in a correct manner and the applied values from
    the input set would reflect in realtime. CI-4651 ZD-30988</li><li>How can we use
    a variable with a default value to set the container resources? Now variables
    can be passed in memory. (CI-4643, ZD-31347)</li><li>Customers should be able
    to specify both fixed values as well as runtime inputs for codebase properties
    in a pipeline template. CI-4610</li><li>We were doing exact string match between
    connector url and repo url fetched from scm. The issue was we allow http://blah
    and https://www.blah url during connector testing. I fixed it by replacing http
    with https and removing www. More details can be found on PR. CI-4592</li><li>Does
    not show the banner if run test step is present in the pipeline CI-4582</li><li>Added
    cases for particular exceptions. CI-4561</li><li>Revert Ci manager addon version
    to 1.14.0 for patch release CI-4520</li><li>Added additional logging. CI-4515</li><li>Users
    will be able to create git enabled pipeline without seeing an error message for
    Volumes (CI-4481, ZD-30865)</li><li>Fixed backend bug. (CI-4456, ZD-30742)</li><li>Auto
    suggest appears for add/drop capabilities and other fields in Infrastructure tab
    CI-4355</li><li>When building a PR ONLY the actually base branch name is shown
    The issue has been resolved and will go live with next release. Correct information
    will be shown on UI now. CI-4266</li><li>Enhanced so the detailed error modal
    will popup on click instead of hover. This would impact the Test tables in CI
    pipeline execution. CI-4029</li><li>Changed the key and updated label. Now the
    field reads Pool Name and its key poolName. CI-3966</li><li>Console log not shown
    We update the step status on SIGTERM now. Cases where pods get evicted should
    now update the status of the step as failed instead of the builds just hanging.
    (CI-3495 ZD-27504, ZD-27966)</li><li>Pipeline Can&#39;t be saved error for Corsearch
    (CDS-38920 ZD-31646, ZD-32738)</li><li>Service names not showing latest names
    when you edit the service CDS-38910</li><li>Intermittent: Adding ServiceNow approval
    stage does not add Create/Update steps CDS-38898</li><li>NG UI Hotfix - FF SSH_NG
    for deployment type CDS-38829</li><li>&#34; CI Codebase Build Type is a required
    field&#34; error when trying to build frontend-ci pipeline (CDS-38812 ZD-31610,
    ZD-31615)</li><li>Helm rollback step is failing with error release not found CDS-38620</li><li>Stored
    yamlPath in local store before moving to yaml view and reused that if user comes
    back to visual view CDS-38589</li><li>Label action buttons in template selector
    more generic CDS-38552</li><li>Template issues in dynamic provisioning steps CDS-38542</li><li>The
    end time filter have changes causing the recent deployments to not show up in
    QA CDS-38474</li><li>Jira Approval not passing even though the ticket has met
    approval criteria CDS-38402</li><li>Metrics on services dashboard do not agree
    with one another, or have any indicator of what their relative units CDS-38391</li><li>Git
    Experience - Fixed UI text to be clearer. CDS-38374</li><li>Do not truncate approval
    message CDS-38250</li><li>Harness Home page does not show descriptive browser
    tab titles CDS-38222</li><li>Updated error by specifying exact name of variable
    CDS-38107 30629</li><li>Updated the test flow to retry after page load CDS-38099</li><li>Artifacts
    info is recorded incorrectly when there is a skipped stage(having no artifact
    ) followed by a deploy stage having an artifact We have rewritten the CDC Handler
    for service_infra table,such that the service details are populated appropriately
    when stages(having no artifact deployed) are skipped. CDS-38097</li><li>Alignment
    of the instance info needs to be appropriate CDS-38084</li><li>Image tags in the
    container registry do not show up in the drop down (CDS-37890, ZD-30977)</li><li>Approval
    Email Link Used returnURL from sessionStorage if not found in urlParams. Return
    URL will now be honoured even on 2FA &amp; when returning from SSO page (CDS-37798,
    ZD-30308)</li><li>a lot of links where I can’t readily open the app in a new window.
    (CDS-37779, ZD-29610)</li><li>NG:: Step group yaml schema is not correct when
    we add selectors CDS-37733</li><li>NG - Snow CRUD UI issues CDS-37528</li><li>UI
    - When user saves a service in the YAML Editor, it doesn&#39;t show up in visual
    Exposed services and environment pages, with some restrictions on respective pages
    i.e. only lists and adding/editing functionality will be available CDS-37526</li><li>Charts
    miss Y and X Axis text Added X &amp; Y axis labels CDS-37482</li><li>NG Audit
    Trail - SYSTEM user events being created for Service events on each deployment
    CDS-37318</li><li>NG Audit Trail - Environment Updated events occurring on every
    deployment CDS-37317</li><li>Add max depth field to template merger calls, to
    prevent infinite recursion. CDS-37153</li><li>On manifest trigger YAML has spec
    and store info missing when the trigger is created via UI Displayed store info
    under source for selected Manifest in trigger CDS-37140</li><li>improve error
    message from BE when trying to delete Stable version (Remove project(null), org
    (null) if deleting account level) CDS-36839</li><li>Number of deployments (953)
    doesn’t match the actual deployments on the right (for example - just clientapi
    service have 1912 CDS-36519</li><li>Harness don&#39;t remember time filter selection
    time filters are now saved for the current session CDS-36473</li><li>Service Dashboard
    becomes Unresponsive CDS-36356</li><li>Error message needs to be improved- Blank
    error message when the version is missing CDS-36320</li><li>Wrong URL in Tags
    dropdown in Nexus Artifact Details CDS-36142</li><li>UseFromStage Not supported
    with Templates Added a fix to use service configuration from a template stage.
    CDS-36133</li><li>NG Approvals - issues when User group and number of approvers
    field made as expressio/ runtime input CDS-35977</li><li>Service Dashboard needs
    to contain artifact details. Environment Deployment widget will includes the custom
    artifacts as well. CDS-35582</li><li>We are showing the instance data for tmrw
    [UI issue] CDS-35310</li><li>Added condition for displaying correct yaml for Triggers
    when single stage was moved to parallel stage in pipeline studio CDS-34422</li><li>NPE
    while executing http step pipeline when http step&#39;s spec does not have headers
    field in yaml CDS-26892</li><li>NG Jira Update - When jira connector field is
    made as runtime input, unable to execute the pipeline. clicking on run pipeline,
    user gets an error &#39;Jira Connector is required (1)&#39; CDS-25497</li><li>YAML
    for Shell Script step allows Bash and PowerShell but the GUI only allows Bash
    CDS-24604</li><li>No validations were present when user chooses &#34;execute on
    target&#34; option CDS-24578</li><li>NG Approvals : Approval Message is required
    filed from UI but in Yaml we are able to save it with &#34;&#34;. Yaml validation
    would be required CDS-24470</li><li>Error message can be improved when two or
    more manifest file added in a service CDS-2151</li><li>Browser Tab summaries have
    been updated on all Next Gen Custom Dashboard pages CDB-206</li><li>The search
    input now gets cleared when a value is selected. CCM-7944</li><li>Client can set
    veiwPreferences on perspective level. Currently providing two options: includeOthers
    and includeUnallocatedCost. CCM-7873</li><li>Fix anomaly detection notification
    job CCM-7828</li></ul><p></p><p></p>'
  slug: draft-doc-1713-harness-self-managed-enterprise-edition-release-notes
  tags: []
  is_live: true
