<h3>Minor Release 74969</h3><p>Release Date: May 11, 2022</p><p>We&#39;re pleased to present Harness Self-Managed Enterprise Edition Minor Release 74969.</p><h4>New Features and Enhancements</h4><p>The following new features are added to the Harness Self-Managed Enterprise Edition components:</p><ul><li>Detailed YAML Snippets for User Group audits have been added with this release. (PL-23573)</li><li>You can now update users&#39; details using service tokens. This enables you to update the details of a specific user in the Account using a Service API Key that has manage user permissions for that user. (PL-23163)<ul><li>See <a href="https://harness.io/docs/api/tag/User/#operation/unlockUser" target="_blank">Unlock User in a Given Scope</a>.</li></ul></li><li>There is now validation for feature flag toggling. If you don&#39;t have an existing environment, you will now see an error message appearing as a tooltip informing you that you are unable to toggle your feature flag(s). The toggle will be disabled until an environment is created. (FFM-2470)</li><li>Delegate tokens are used by Harness to encrypt communication between Harness Delegates and the Harness Manager. By default, when a new Harness account is created, all Harness Delegates in that account include the same token. You can now use APIKeys for Delegate NG Token management.<br/> See the <a href="https://harness.io/docs/api/tag/Delegate-Token-Resource" target="_blank">Delegate Token Resource API</a> docs. (DEL-3609)</li><li>You can now view events associated with Delegates on the Audit Trail page. With Audit Trail in Harness, you can view and track changes made to your Harness resources within your Harness account. Audit events are registered for Delegate creation, Delegate deletion, and Delegate group deletion. No event is registered for Delegate update. For each event record, this view shows the following: (DEL-3377)<ul><li>Date and time (<strong>Time</strong>).</li><li>The user who made the change (<strong>User</strong>).</li><li><strong>Action</strong> by the user like create, update, delete.</li><li>Harness entity affected (<strong>Resource</strong>).</li><li><strong>Organization</strong> corresponding to the affected entity.</li><li><strong>Project</strong> corresponding to the affected entity.</li><li><strong>Module</strong> corresponding to the affected entity.</li><li><strong>Event Summary</strong> with YAML difference.</li></ul><figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/7zkchy5lhj/1649311733921/screenshot-2022-04-07-at-11-38-41-am.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><ul><li>See <a href="https://ngdocs.harness.io/article/r5ytrnpcgr">View Audit Trail</a>.</li></ul></li><li><code>OrgIdentifier</code> and <code>ProjectIdentifier</code> have been removed from Delegate YAML. Also, it is now mandatory to pass the Delegate token name while downloading an NG Delegate YAML. The token used by the Delegate will be used to extract the correct <code>OrgIdentifier</code> and <code>ProjectIdentifier</code>. (DEL-3184)</li><li>You can provide <code>JAVA OPTS</code> for Delegates to override Java properties for things like setting up key stores for TLS verification. This option was previously available for both Delegate and Watcher. We are breaking the variable for Delegate and Watcher with this release. The current <code>JAVA OPTS</code> variable will continue to function, but if you want to set it up for Watcher, you must provide <code>WATCHER JAVA OPTS</code> as an environment variable. This has advantages such as monitoring the Watcher and Delegate separately with APM agents. (DEL-3040)</li><li>The Get GCP Clusters API is hidden by the Open API Specification. (CDS-35459)</li><li>You can now use Custom Artifact with a fixed value in your deployments. This will help you to:<ul><li>Use custom value for artifact version and reference in your steps using &lt;+artifact.version&gt; or <code>&lt;artifacts.sidecars.id.version&gt;</code> and allow to track what version has been deployed</li><li>Pass any artifact version from your CI stage to CD stage without the need to rely on existing or supported artifact server.<br/>This feature is available behind the Feature Flag <code>CUSTOM_ARTIFACT_NG</code>. (CDS-35216)</li></ul></li><li>You can now use a GCP Connector when selecting Infrastructure for Kubernetes deployments. You will be able to use the GKE Workload identity when inheriting credentials from a Delegate. (CDS-7363)<ul><li>See <a href="https://ngdocs.harness.io/article/u29v1uc1mh">Kubernetes Deployments Overview</a>.</li></ul></li><li>You can now filter and Group By Perspectives based on the <strong>Cluster Type</strong>. Perspectives allow you to group your resources in ways that are more meaningful to your business needs. It provides a unified view of your cloud cost data across the cloud environment. (CCM-7259)<ul><li>See <a href="https://ngdocs.harness.io/article/b8sdsxlfee">Analyze Cost for Kubernetes Using Perspectives</a>.</li></ul></li><li>You can now use the <strong>Hide Progress Page</strong> toggle to enable or disable the <strong>Progress Page</strong> for an AutoStopping Rule for a Kubernetes cluster. (CCM-7206)<figure><img src="https://files.helpdocs.io/i5nl071jo5/articles/7zkchy5lhj/1650517606425/auto.png" style="max-height:50%;max-width:50%" data-hd-height="50%" data-hd-width="50%"/></figure><ul><li>See <a href="https://ngdocs.harness.io/article/1r80jdz2f9" target="_blank">Create AutoStopping Rules for a Kubernetes Cluster</a>.</li></ul></li><li>You can now view Kubernetes Connector details, for Kubernetes AutoStopping Rules, on <strong>Summary of Rules</strong>. (CCM-5834)<ul><li>See <a href="https://ngdocs.harness.io/article/ehmi6kiynl-autostopping-dashboard">Use AutoStopping Rules dashboard</a>.</li></ul></li><li>Workload Recommendations now include the ability to<ul><li>Select Kubernetes Quality of Service (QoS) between &#34;Burstable&#34; and &#34;Guaranteed.&#34;</li><li>Set a buffer (%) for the request and limit beyond the recommendation based on historical usage requirements for the workload. (CCM-5464)</li></ul></li></ul><h4>Issues Fixed​</h4><ul><li>Fixed UI issue in Monitored Services dashboard. (SRM-9882)</li><li>For the Access control service to function, identifier annotations must be added. The Access Control service was blocking the Logs endpoint of the SLO and Monitored Service. (SRM-9848)​</li><li><code>CVNGLogDTO</code> subtypes are added in the API response. (SRM-9829)​</li><li>Added fallback scenario to handle missing manager version headers in verification service.​ (SRM-9808, ZD-28900)</li><li>Service Health analysis wasn&#39;t happening for GCP Logs. State machines are set to ignore, and the next one is selected for LM. (SRM-9529)​</li><li>We started displaying better error message on GCP log onboarding.​ (SRM-9202)</li><li>Fixed the custom threshold issue when multiple thresholds are defined for a single metric for workflow verify state.​ (SRM-3680)</li><li>Fixed issue where the Service Instance isn&#39;t displaying count on subscription for CD​. (PLG-915)</li><li>Fixed typo in Subscription Overview UI. (PLG-810)</li><li>Fixed an issue where APIs were returning 401 due to UI Client sending an expired token.​ (PL-24587)</li><li>Fixed an issue where editing or opening a template in the Template Library returned 400s.​ (PL-24555)</li><li>SAML authorization field now allows special characters so now group names can use the format <code>DN=ABC,DN=CDE,OU=xyx</code>.​ (PL-24524)</li><li>Pipeline YAML was throwing an Invalid shell script error when saving the Pipeline. (PL-24510, ZD-29539, ZD-29760)​</li><li>Fixed a UI issue in the User Groups table: text for role bindings is hard to read due to colored highlighting. (PL-24500)</li><li>The webhook registration in Bitbucket was failing when an SSH URL was being used. This automatic webhook registration issue is fixed in this release. (PL-24326, ZD-29216)​</li><li>When switching accounts, from Prod-1 to Prod-2 for example, the UI resources were not getting reloaded to point to Prod-2. (PL-24067)​</li><li>Fixed an issue where creating a Connector using APIs returned 500.​ (PL-23979)</li><li>Fixed an issue where saving a Pipeline resulted in an error message.​ (PL-23931, ZD-28901)</li><li><code>TBD https://harness.atlassian.net/browse/PL-23927</code></li><li>Fixed issue in Connector Overview: When back button was pressed, the data from the previous step was not being retained.​ (PL-23760)</li><li>UI fix for overflowing long git errors​ (PL-23624)</li><li>Fixed an issue with User Group when User got deleted at account level. (PL-23109, ZD-27589, 29865)</li><li>Fixed issue with Group Authorization sync when logging via non-default account. (PL-23033, ZD-27589)</li><li></li><li><code>TBD skipping PL-23533, PL-23109, PL-23033, PL-22646, PL-22645, PL-21883, PL-21584, PIE-3543, PIE-3353, PIE-3248, PIE-3247, PIE-3233, PIE-3155, PIE-3145, PIE-2811, PIE-2459, FFM-2204, DEL-4046, DEL-3787, DEL-3750, DEL-3727, DEL-3600, DEL-3578, DEL-3567, CI-4042, CI-4027</code></li><li>Added a check in GitContextForm to not retail default branch on branch change​. (PL-21504)</li><li>Connector Health Status was not getting refreshed after modifying the Connector parameters. (PL-21445)​</li><li>Branch wasn&#39;t passed to refetch handler, so refetch was working as without git. That could handle only default branches. Now it&#39;s fixed as we are passing the branch and repo information down the chain.​ (PL-21426)</li><li>Showing error in a Popup when user tries to delete a connector which is referenced by other entities​. (PL-21099)</li><li>Improvements to error messages. (PL-20356)​</li><li>Incorrect payload was sent when no runtime input was present​. (PIE-3523)</li><li>Updated UI to show error message when a user clicks Abort repeatedly while the back-end abort is still in progress.​ (PIE-3471)</li><li>Fixed UI issue: Report Paths not rendering when at least one value in the list is an expression in Templates Input view. Reverts to previous logic for reporting mixed list input for expressions and fixed values. Added special handling for new use cases for expression list input. ​(PIE-3456)</li><li>The Run Pipeline form wasn&#39;t considering values from the YAML view. (PIE-3453)</li><li>The Manifest submission modal wasn&#39;t working as expected. (PIE-3394)​</li><li>Fixed a &#34;Something went wrong&#34; error that appeared when a user navigated to a specific Stage due to missing null checks.​ (PIE-3360)</li><li>Fixed Input Set issues with a Pipeline using Stage Templates.​ (PIE-3350)</li><li>Resolved issues with disabling of Run Button with respect to input sets and incomplete form.​ (PIE-3349)</li><li>Pipeline was getting saved even without configuring any Stage. A schema constraint has now been added, which mandates that a Pipeline should at least have one stage configured; otherwise, the schema validation fails and the Pipeline won&#39;t be saved. (PIE-3315)​</li><li>Reset the zoom level and set the canvas to start when the user selects the different stage in the execution view​. (PIE-3302)</li><li>Fixed issue in which /pipelines/execution/summary gets cancelled during search results in error message. (PIE-3287)</li><li>Fixed an issue in which NPE displayed when there was an error (due to invalid input) followed by a user attempting to fill the timeout field. (PIE-3268)</li><li>Fixed an issue with Input Sets not populating fields with error <code>Uncaught (in promise) TypeError: Cannot read properties of undefined (reading ‘sidecars’)</code>.​ (PIE-3250, ZD-28984)</li><li>Fixed an issue that occurred when user tried to save the input set after updating Pipeline with more runtime input fields: the input set couldn&#39;t be saved and Harness would throw an error. (PIE-3247)</li><li>Receiving failure email notification for successful approval Pipelines. (PIE-3246, ZD-28991, ZD-29242)</li><li>​Fixed an issue where, when tests were triggered using webhooks, the Pipeline could not re-trigger the failed ones. (PIE-3238)</li><li>Fixed a UI issue where the wrong icon appeared for Canary deployments.​ (PIE-3235)</li><li>Fixed error message while saving a newly created pipeline without any stage/step​. (PIE-3233)</li><li>Filtered out already synced entities during full Git Sync for Pipeline input sets and templates​. (PIE-3212, ZD-28724)</li><li>Fixed issue where CI Codebase form re-rendered on first click on any radio button branch/tag/PR. (PIE-3194)</li><li>Inputs Tab - Execution View - Payload should be Read Only. (PIE-3149)</li><li>Zoom out option for payload in policy step added​. (PIE-3147)</li><li>Added runtime and expression support for policy sets in policy step​ (PIE-3146)</li><li>Added runtime annotation to policy sets list​. (PIE-3145)</li><li>Design fixes to render longer policy set names in Pipeline Studio (PIE-3144)</li><li>Routing to individual policy and policy set​. (PIE-3137)</li><li>Improved error message for Policy step Evaluation failures​ (PIE-3136)</li><li>Added missing placeholders in Execution step editors in Dynamics provisioning in Infrastructure tab​. (PIE-3049)</li><li>Run validation function to recheck the state of the form and form errors.​ (PIE-2738)</li><li>Fixed variable screen user abort error by increasing debounce duration and fixed error message CSS. (PIE-2732)</li><li>Fixed issue where data is not populating with the last input set applied. (PIE-2459)</li><li>Fixed UI issue with the feature flags being displayed​. (FFM-2204)</li><li>Fixed issue where tags are not removed from the textbox even after clicking the remove button. (DEL-4046)</li><li>Delegate registration was failing when the number of characters in the hostname was more than 64. (DEL-3783, ZD-29691)​</li><li>Changing the tags of the YAML after the Delegates were created wasn&#39;t changing the Tag. (DEL-3751)​</li><li>Fixed issue where builds stopped working due to lack of delegates / bad state. (DEL-3750, ZD-29493)</li><li>Fixed issue where Delegates weren&#39;t available during Pipeline execution. (DEL-3661, ZD-27753, ZD-29167, ZD-29282)​</li><li>Immutable Delegate was generating repeated logs which was flooding out the useful logs. (DEL-3645, ZD-29125)​</li><li>Fixed issue where builds hang at Git Clone. (DEL-3600, ZD-28989)</li><li>Fixed issue where wrong delegate token name was getting saved in Delegate collection​. (DEL-3578)</li><li>Fixed issue where NextGen Jfrog step couldn&#39;t get authorization. (CI-4262, ZD-29409)</li><li>Source Code Manager (SCM) was throwing an error message when the certificate file wasn&#39;t specified. A Harness Source Code Manager (SCM) contains your personal account for a Git provider such as GitHub or AWS CodeCommit. (CI-4057)​</li><li>Resolved issue where Pipeline execution fails during building/pushing docker image step. (CI-4042, ZD-29230)</li><li>Key for Priority Class was using priorityClassName instead of priorityClass. (CI-4038)​</li><li>Fixed issue where versioning wasn&#39;t working for Docker Image. (CI-4027, ZD-29230)</li><li>RunAsUser was not accepting numbers. With this fix, now numbers and strings both will be accepted. (CI-4009)​</li><li>Customers should be able to provide fixed values for report paths and output variables field in Run/Run Tests step templates.​ (CI-3953)</li><li>Customers should now be able to set fixed values for &#34;sourcePaths&#34; in Save Cache to S3/GCS template-linked step.​ (CI-3943)</li><li>Customers should be able to specify output variables in Run/Run Tests steps as key value pairs with “name” as the key.​ (CI-3927)</li><li>Fixed issue where Trigger webhook curl command had parsing error. (CI-3906)</li><li>Customers will now we able to see template inputs where a field is set as runtime input with allowed values.​ (CI-3905)</li><li>The Ungrouped data will show correct information for the scenario when pages is greater than 20. Previously it was inaccurate when result pages &gt; 20​. (CI-3899)</li><li>Pipelines were failing and throwing an error &#39;Could not resolve outcome with name &#39;podDetailsOutcome&#39;&#39; when using an encrypted Username. (CI-3895, ZD-29004)</li><li>Pipeline execution was marked successful even when Artifact was not uploaded to S3 bucket. (CI-3875, ZD-28610)​</li><li>Implemented a fix so that users can see the page that says No Test Results if this is the case​. (CI-3867)</li><li>You will now only see the purple container (Call to action) when the user doesn&#39;t have a TI step (Run Test step) in their pipeline​. (CI-3847)</li><li>When two Triggers with the same ID were used to initiate two different Pipeline executions, activation in the second Pipeline was being caused by the Trigger created for the first Pipeline, unless refreshed. (CI-3745)</li><li>Pipeline with Steps that had a CPU limitation set by an expression wasn&#39;t running. (CI-3717, ZD-28479)​</li><li>Users will now be able to scroll to view their Pipeline YAML in the Trigger Details page​. (CI-3704)</li><li>Git URL https://www.github.com/wings-software/jhttp wasn&#39;t working. (CI-3604)​</li><li>Updated the error message in case CI stage fails to create pod secrets. (CI-3602)</li><li>The Pipeline execution was failing due to a PR trigger failure with the following error message:<br/><br/><code>Failed while requesting Pipeline Execution through Trigger: Error creating Plan: Unexpected plan creation error: Could not read json provided for the fqn: pipeline/stages/[0]/stage/spec/execution. Could not read json provided for the fqn: pipeline/stages/[0]/stage/spec/execution</code><br/><br/> (CI-3598, ZD-28421, ZD-28586)​</li><li>Harness now updates the step status on SIGTERM. Cases where pods get evicted should now update the status of the step as failed instead of the builds just hanging.​ (CI-3495, ZD-27504, ZD-27966)</li><li>Improved error message handling in case resources aren&#39;t available and handled case with empty containers​ (CI-3487)</li><li>Dropdown now shows Delegates Setup options correctly styled​. (CI-3445)</li><li>Fixed bug for integer YAML fields with input set that contains allowed value.​ (CI-3398)</li><li>Region field is mandatory in YAML of s3 upload step.​ (CI-3203)</li><li>Fixed issue where pipelines with invalid image name expired instead of failing. (CI-2769​)</li><li>Limited length of a log line in CI builds to 70k characters. Beyond this, the first 70k characters will show up followed by <code>... (log line truncated)</code>​. (CI-2495, ZD-28121)</li><li>Fixed issue where Deployment Logs weren&#39;t showing up. (CDS-36666, ZD-27648)</li><li>​When a new tag is available for the image in the Artifactory, the Pipeline can now deploy the new tag. (CDS-36665, ZD-27648)</li><li>Tags API call will now be there only if dependent fields are changed.​ (CDS-36202)</li><li>Fixed a customer issue where a specific trigger stopped working. (CDS-36166, ZD-29386)</li><li>Added a fix to use service configuration from a template stage.​ (CDS-36133)</li><li>Wrong field was being picked up to display error message for Nexus. Fixed by adding correct field type​. (CDS-36118)</li><li>Fixed UI issue where Execution Inputs and Outputs didn&#39;t display properly when Details pane was floating. (CDS-36029)</li><li>Fixed an issue where opening a JIRA Create Step with multiple components selected resulting in a Null Pointer Exception. Added the check for multitype Jira field with correct default value. (CDS-35774)</li><li>Fixed a customer issue where configs were lost for a set of Pipelines. (CDS-35609, CDS-35760, ZD-29272)</li><li>Fixed an issue where Artifactory Connector wasn&#39;t working properly. (CDS-35716, ZD-27648)</li><li>Added script for deletion of passing tests screenshots after retry. (CDS-35668)</li><li>Fixed an issue where users were unable to dismiss template library when trying to create step template. (CDS-35624)</li><li>Fixed a customer issue where configs were lost for a set of Pipelines. (CDS-35609, ZD-292238, ZD-29272)</li><li>Fixed an issue where running a Pipeline with a Jira Create Step that has Issue Type specified as a Runtime Input results in a &#34;Something went wrong...&#34; message. (CDS-35312)</li><li>Fixed an issue where Custom Triggers would fail to run Pipelines. Now a Pipeline that contains a Step template with a user-specific scope can be triggered by a user who don&#39;t have access to the template. (CDS-35301)</li><li>When creating a manifest trigger, a user can now select from a list in the create wizard flow using a template. (CDS-35229)</li><li>Pipeline was getting saved even when the User Group was empty. (CDS-35094)</li><li>Fixed an issue in Terraform apply and the Terraform destroy steps where selecting the delegate and clicking on the step, the delegate selection is cleared out. (CDS-35068, ZD-28701)</li><li>Updated the Service and Environment DTO identifier. (CDS-35037)</li><li>We have fixed a bug where a disabled icon was showing on template cards when child type wasn&#39;t present. (CDS-34973)</li><li>The UI now shows the list of allowed values for Runtime Inputs when the value isn&#39;t in the configured set. (CDS-34966)</li><li>Fixed issues regarding usage of step templates in Feature Flag Stage. (CDS-34940)</li><li>We fixed an issue that was breaking the pipeline when a user copies a Stage template with a reference to a Step template.​ (CDS-34921)</li><li>We do not advise this, but you can now deploy a public deprecated Helm chart for Helm version 3.8.0. Make sure you&#39;re handling deprecated Helm charts properly.<br/>This fix is for Helm 3.8.0 and doesn&#39;t apply to Helm 3.1.2.<br/>For Helm V3.8.0, we&#39;ve separated warning from output stream as part of error stream. So now unless and until there is some error in the deployment, it won&#39;t fail. It&#39;ll simply ignore the warning and carry on with the deployment. The warning will be displayed in the logs, so that you can be more careful next time. (CDS-34529, ZD-28769)</li><li>Fixed UI issue in Jira Create Step: When you specify an expression for a pull-down field such as Priority, the field reverts to a fixed value when you reopen the Step. (CDS-25562)</li><li>Fixed an issue where the &#34;Something went wrong&#34; page was displayed when user group was specified as a nonexistent expression while running a Pipeline. (CDS-25535)</li><li>Fixed an issue with batch processing jobs. (CCM-7317)</li></ul><p></p>